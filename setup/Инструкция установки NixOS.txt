Приготовления:
Ввести home-manager init
Исправить конфигурационный файл по пути /home/user/.config/home-manager/ (конфигурация на флешке), затем nix-shell -p home-manager --run "home-manager switch"

1) Скачать проект в удобную папку
   mkdir projects
   cd ~/projects
   git clone https://github.com/DiZamer/ly_ROS2_humble.git

2) Заменить Dockerfile и devcontainer.json (правильные версии на флешке) в папке /ly_ROS2_humble/.devcontainer/

3) Заранее создать образ локально, перейдя в директорию с dockerfile
   cd ~/projects/ly_ROS2_humble/.devcontainer/
   podman build -t docker.io/my-ros2-humble:latest .

4) Проверить что появилось 2 образа
   podman images

5) Даём разрешение на доступ к графической системе (X11)
   nix-shell -p xorg.xhost --run "xhost +local:"

6) Переходим в директорию выше (ly_ROS2_humble) и открываем проект в VScode
   cd ..
   code .

6) Дождаться появления в правом нижнем углу плашки "Reopen in devcontainer" и нажать на нее

7) Дождаться поднятия проекта

-----------------------------------------------------------------------------------------------------------------
ВСЕ последующие команды выполняются в контейнере:

8) Указываем какой дисплей использовать для графики и принудительно используем программную отрисовку вместо аппаратного ускорения
   export DISPLAY=:0
   export LIBGL_ALWAYS_SOFTWARE=1

!!! Если больше одного монитора, сначала определяем номер нужного монитора (на котором работате VSCode) и экспортируем его номер, либо просто можно перебрать от 0 до 2
(уже после выполнения последнего пункта, если проект поднимется, но окно не откроется, просто выполнить export DISPLAY=:1 или export DISPLAY=:2 и снова поднять проект последней командой)


9) Исправляем права
   sudo chown -R ubuntu:ubuntu /ly_ROS2_humble/turtlebot3_ws/

10) Переустановить TurtleBot3 (не все пакеты есть в проекте)
   cd /ly_ROS2_humble/turtlebot3_ws
   rm -rf src/ build/ install/ log/
   mkdir src && cd src
   git clone -b humble https://github.com/ROBOTIS-GIT/DynamixelSDK.git
   git clone -b humble https://github.com/ROBOTIS-GIT/turtlebot3_msgs.git
   git clone -b humble https://github.com/ROBOTIS-GIT/turtlebot3.git
   git clone -b humble https://github.com/ROBOTIS-GIT/turtlebot3_simulations.git

11) Собрать проект
   cd ..
   source /opt/ros/humble/setup.bash
   colcon build --symlink-install

12) Активировать
   source install/setup.bash
   export TURTLEBOT3_MODEL=waffle_pi

13) Запустить проект
   ros2 launch turtlebot3_gazebo turtlebot3_world.launch.py
