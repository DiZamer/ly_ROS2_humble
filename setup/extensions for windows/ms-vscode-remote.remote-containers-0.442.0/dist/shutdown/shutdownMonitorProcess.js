/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var yE=Object.create;var Rl=Object.defineProperty;var SE=Object.getOwnPropertyDescriptor;var xE=Object.getOwnPropertyNames;var vE=Object.getPrototypeOf,_E=Object.prototype.hasOwnProperty;var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var bE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xE(e))!_E.call(t,i)&&i!==r&&Rl(t,i,{get:()=>e[i],enumerable:!(n=SE(e,i))||n.enumerable});return t};var N=(t,e,r)=>(r=t!=null?yE(vE(t)):{},bE(e||!t||!t.__esModule?Rl(r,"default",{value:t,enumerable:!0}):r,t));var Ca=S((iC,Gu)=>{Gu.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var cs=S((sC,Vu)=>{"use strict";var zu=Ca();Vu.exports=function(e,r){if(!e)return function(i,s){return i?zu(s,i,r):s(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,s){if(i)return zu(s,i,r);n>=e.length?s(!0):s(null,e[n++])}}});var Ju=S((oC,Zu)=>{"use strict";var fy=cs();Zu.exports=function(t){return fy(Object.keys(t))}});var Ta=S((aC,Xu)=>{"use strict";var dy=Ca();Xu.exports=function(e,r){return function(n,i){if(n)return dy(i,n,r);if(e!=null){var s=e;e=null,i(null,s)}else i(!0)}}});var Ku=S((cC,Yu)=>{"use strict";Yu.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var ef=S((lC,Qu)=>{"use strict";Qu.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var rf=S((uC,tf)=>{"use strict";tf.exports=function(){return function(e,r){r(!0)}}});var sf=S((fC,nf)=>{"use strict";nf.exports=function(e){return function(r,n){n(e)}}});var af=S((dC,of)=>{"use strict";of.exports={keys:Ju(),once:Ta(),values:cs(),count:Ku(),infinite:ef(),empty:rf(),error:sf()}});var Fr=S((hC,cf)=>{"use strict";cf.exports=function(e,r){var n,i,s;r||(s=new Error("no done callback supplied"));function o(a){if(n=a,i)return o.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,n(null,function(d,g){if(u=!0,d=d||i){if(l=!1,r)r(d===!0?null:d);else if(d&&d!==!0)throw console.warn(s),d}else e&&e(g)===!1||i?(l=!1,n(i||!0,r||function(){})):l||c()}),!u){l=!1;return}})()}return o.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),i=a||!0,n)return n(i,c||function(){})},o}});var uf=S((pC,lf)=>{"use strict";var hy=Fr();lf.exports=function(e){return hy(null,e)}});var df=S((mC,ff)=>{"use strict";var py=Fr();ff.exports=function(e){return py(function(r){console.log(r)},e)}});var $r=S((gC,hf)=>{hf.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var gf=S((EC,mf)=>{"use strict";function pf(t){return t}var my=$r(),gy=Fr();mf.exports=function(e,r){var n=!1;return r?e=my(e)||pf:(r=e,e=pf),gy(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var ls=S((wC,Ef)=>{"use strict";var Ey=Fr();Ef.exports=function(e,r,n){n||(n=r,r=null);var i=Ey(function(s){r=e(r,s)},function(s){n(s,r)});return arguments.length===2?function(s){s(null,function(o,a){if(o)return n(o===!0?null:o);r=a,i(s)})}:i}});var Oa=S((yC,wf)=>{"use strict";var wy=ls();wf.exports=function(e){return wy(function(r,n){return r.push(n),r},[],e)}});var Sf=S((SC,yf)=>{"use strict";var yy=Oa();yf.exports=function(){return e=>{let r,n,i=new Promise((s,o)=>{r=s,n=o});return yy((s,o)=>{s?n(s):r(o)})(e),i}}});var vf=S((xC,xf)=>{"use strict";var Sy=ls();xf.exports=function(e){return Sy(function(r,n){return r+n},"",e)}});var bf=S((vC,_f)=>{"use strict";_f.exports={drain:Fr(),onEnd:uf(),log:df(),find:gf(),reduce:ls(),collect:Oa(),collectAsPromise:Sf(),concat:vf()}});var Rf=S((_C,Lf)=>{"use strict";function xy(t){return t}var vy=$r();Lf.exports=function(e){return e?(e=vy(e),function(r){return function(n,i){r(n,function(s,o){try{o=s?null:e(o)}catch(a){return r(a,function(){return i(a)})}i(s,o)})}}):xy}});var If=S((bC,Pf)=>{"use strict";function _y(t){return t}var by=$r();Pf.exports=function(e){if(!e)return _y;e=by(e);var r=!1,n,i;return function(s){return function o(a,c){if(i)return c(i);a?(i=a,r?s(a,function(l){r?n=c:c(a)}):s(a,function(l){c(a)})):s(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(d,g){r=!1,i?(c(i),n&&n(i)):d?o(d,c):c(null,g)}))})}}}});var Da=S((LC,Cf)=>{var Ly=$r();function Ry(t){return t}Cf.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:Ly(e)||Ry}});var us=S((RC,Tf)=>{"use strict";var Py=Da();Tf.exports=function(e){return e=Py(e),function(r){return function n(i,s){for(var o,a=!0;a;)a=!1,o=!0,r(i,function(c,l){if(!c&&!e(l))return o?a=!0:n(c,s);s(c,l)}),o=!1}}}});var Df=S((PC,Of)=>{"use strict";var Iy=Da(),Cy=us();Of.exports=function(e){return e=Iy(e),Cy(function(r){return!e(r)})}});var kf=S((IC,Nf)=>{"use strict";Nf.exports=function(e,r){var n=!1;function i(s){n||!r||(n=!0,r(s===!0?null:s))}return function(s){return function(o,a){return o&&i(o),s(o,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var Ff=S((CC,Af)=>{"use strict";Af.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var s=e;e=function(){return--s}}return function(o){function a(c){o(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i&&!c?n?a(l):l(i):(i=c)?o(i,l):o(null,function(u,d){(i=i||u)?l(i):e(d)?l(null,d):(i=!0,n?l(null,d):a(l))})}}}});var Na=S((TC,$f)=>{"use strict";function Ty(t){return t}var Oy=$r(),Dy=us();$f.exports=function(e,r){e=Oy(e)||Ty;var n={};return Dy(function(i){var s=e(i);return n[s]?!!r:(n[s]=!0,!r)})}});var Uf=S((OC,Bf)=>{"use strict";var Ny=Na();Bf.exports=function(e){return Ny(e,!0)}});var qf=S((DC,Mf)=>{"use strict";var ky=cs(),Ay=Ta();Mf.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?s():o();function s(){r(null,function(a,c){a?a===!0?o():e(!0,function(l){i(a)}):i(null,c)})}function o(){r=null,e(null,function(a,c){if(a)return i(a);c&&typeof c=="object"?c=ky(c):typeof c!="function"&&(c=Ay(c)),r=c,s()})}}}}});var Wf=S((NC,Hf)=>{"use strict";Hf.exports={map:Rf(),asyncMap:If(),filter:us(),filterNot:Df(),through:kf(),take:Ff(),unique:Na(),nonUnique:Uf(),flatten:qf()}});var ka=S((kC,jf)=>{"use strict";jf.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var s=e;s&&typeof s.source=="function"&&(s=s.source);for(var i=1;i<r;i++){var o=arguments[i];typeof o=="function"?s=o(s):o&&typeof o=="object"&&(o.sink(s),s=o.source)}return s}});var Fn=S((nr,Zf)=>{"use strict";var Gf=af(),zf=bf(),Vf=Wf();nr=Zf.exports=ka();nr.pull=nr;for(qe in Gf)nr[qe]=Gf[qe];var qe;for(qe in Vf)nr[qe]=Vf[qe];var qe;for(qe in zf)nr[qe]=zf[qe];var qe});var Yf=S((MC,Xf)=>{var Br=1e3,Ur=Br*60,Mr=Ur*60,ir=Mr*24,By=ir*7,Uy=ir*365.25;Xf.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return My(t);if(r==="number"&&isFinite(t))return e.long?Hy(t):qy(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function My(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Uy;case"weeks":case"week":case"w":return r*By;case"days":case"day":case"d":return r*ir;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Mr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ur;case"seconds":case"second":case"secs":case"sec":case"s":return r*Br;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function qy(t){var e=Math.abs(t);return e>=ir?Math.round(t/ir)+"d":e>=Mr?Math.round(t/Mr)+"h":e>=Ur?Math.round(t/Ur)+"m":e>=Br?Math.round(t/Br)+"s":t+"ms"}function Hy(t){var e=Math.abs(t);return e>=ir?fs(t,e,ir,"day"):e>=Mr?fs(t,e,Mr,"hour"):e>=Ur?fs(t,e,Ur,"minute"):e>=Br?fs(t,e,Br,"second"):t+" ms"}function fs(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var $a=S((qC,Kf)=>{function Wy(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=a,r.humanize=Yf(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let g=0;g<u.length;g++)d=(d<<5)-d+u.charCodeAt(g),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,g=null,f,p;function E(...m){if(!E.enabled)return;let w=E,x=Number(new Date),h=x-(d||x);w.diff=h,w.prev=d,w.curr=x,d=x,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let y=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(b,_)=>{if(b==="%%")return"%";y++;let C=r.formatters[_];if(typeof C=="function"){let D=m[y];b=C.call(w,D),m.splice(y,1),y--}return b}),r.formatArgs.call(w,m),(w.log||r.log).apply(w,m)}return E.namespace=u,E.useColors=r.useColors(),E.color=r.selectColor(u),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(f!==r.namespaces&&(f=r.namespaces,p=r.enabled(u)),p),set:m=>{g=m}}),typeof r.init=="function"&&r.init(E),E}function n(u,d){let g=r(this.namespace+(typeof d>"u"?":":d)+u);return g.log=this.log,g}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let g of d)g[0]==="-"?r.skips.push(g.slice(1)):r.names.push(g)}function s(u,d){let g=0,f=0,p=-1,E=0;for(;g<u.length;)if(f<d.length&&(d[f]===u[g]||d[f]==="*"))d[f]==="*"?(p=f,E=g,f++):(g++,f++);else if(p!==-1)f=p+1,E++,g=E;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),u}function a(u){for(let d of r.skips)if(s(u,d))return!1;for(let d of r.names)if(s(u,d))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Kf.exports=Wy});var Qf=S((ye,ds)=>{ye.formatArgs=Gy;ye.save=zy;ye.load=Vy;ye.useColors=jy;ye.storage=Zy();ye.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ye.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function jy(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Gy(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ds.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ye.log=console.debug||console.log||(()=>{});function zy(t){try{t?ye.storage.setItem("debug",t):ye.storage.removeItem("debug")}catch{}}function Vy(){let t;try{t=ye.storage.getItem("debug")||ye.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Zy(){try{return localStorage}catch{}}ds.exports=$a()(ye);var{formatters:Jy}=ds.exports;Jy.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var td=S((HC,ed)=>{"use strict";ed.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1?!0:n<i)}});var nd=S((WC,rd)=>{"use strict";var Xy=require("os"),We=td(),oe=process.env,qr;We("no-color")||We("no-colors")||We("color=false")?qr=!1:(We("color")||We("colors")||We("color=true")||We("color=always"))&&(qr=!0);"FORCE_COLOR"in oe&&(qr=oe.FORCE_COLOR.length===0||parseInt(oe.FORCE_COLOR,10)!==0);function Yy(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Ky(t){if(qr===!1)return 0;if(We("color=16m")||We("color=full")||We("color=truecolor"))return 3;if(We("color=256"))return 2;if(t&&!t.isTTY&&qr!==!0)return 0;let e=qr?1:0;if(process.platform==="win32"){let r=Xy.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in oe)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in oe)||oe.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in oe)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(oe.TEAMCITY_VERSION)?1:0;if(oe.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in oe){let r=parseInt((oe.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(oe.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(oe.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(oe.TERM)||"COLORTERM"in oe?1:(oe.TERM==="dumb",e)}function Ba(t){let e=Ky(t);return Yy(e)}rd.exports={supportsColor:Ba,stdout:Ba(process.stdout),stderr:Ba(process.stderr)}});var sd=S((te,ps)=>{var Qy=require("tty"),hs=require("util");te.init=oS;te.log=nS;te.formatArgs=tS;te.save=iS;te.load=sS;te.useColors=eS;te.destroy=hs.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");te.colors=[6,2,3,4,5,1];try{let t=nd();t&&(t.stderr||t).level>=2&&(te.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}te.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function eS(){return"colors"in te.inspectOpts?!!te.inspectOpts.colors:Qy.isatty(process.stderr.fd)}function tS(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+ps.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=rS()+e+" "+t[0]}function rS(){return te.inspectOpts.hideDate?"":new Date().toISOString()+" "}function nS(...t){return process.stderr.write(hs.formatWithOptions(te.inspectOpts,...t)+`
`)}function iS(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function sS(){return process.env.DEBUG}function oS(t){t.inspectOpts={};let e=Object.keys(te.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=te.inspectOpts[e[r]]}ps.exports=$a()(te);var{formatters:id}=ps.exports;id.o=function(t){return this.inspectOpts.colors=this.useColors,hs.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};id.O=function(t){return this.inspectOpts.colors=this.useColors,hs.inspect(t,this.inspectOpts)}});var ms=S((jC,Ua)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ua.exports=Qf():Ua.exports=sd()});var ad=S((GC,od)=>{var Bn;od.exports=function(){if(!Bn){try{Bn=ms()("follow-redirects")}catch{}typeof Bn!="function"&&(Bn=function(){})}Bn.apply(null,arguments)}});var dd=S((zC,Ya)=>{var Mn=require("url"),Un=Mn.URL,aS=require("http"),cS=require("https"),ja=require("stream").Writable,Ga=require("assert"),cd=ad();(function(){var e=typeof process<"u",r=typeof window<"u"&&typeof document<"u",n=or(Error.captureStackTrace);!e&&(r||!n)&&console.warn("The follow-redirects package should be excluded from browser builds.")})();var za=!1;try{Ga(new Un(""))}catch(t){za=t.code==="ERR_INVALID_URL"}var lS=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],Va=["abort","aborted","connect","error","socket","timeout"],Za=Object.create(null);Va.forEach(function(t){Za[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var qa=qn("ERR_INVALID_URL","Invalid URL",TypeError),Ha=qn("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),uS=qn("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",Ha),fS=qn("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),dS=qn("ERR_STREAM_WRITE_AFTER_END","write after end"),hS=ja.prototype.destroy||ud;function Se(t,e){ja.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){try{r._processResponse(n)}catch(i){r.emit("error",i instanceof Ha?i:new Ha({cause:i}))}},this._performRequest()}Se.prototype=Object.create(ja.prototype);Se.prototype.abort=function(){Xa(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};Se.prototype.destroy=function(t){return Xa(this._currentRequest,t),hS.call(this,t),this};Se.prototype.write=function(t,e,r){if(this._ending)throw new dS;if(!sr(t)&&!gS(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(or(e)&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new fS),this.abort())};Se.prototype.end=function(t,e,r){if(or(t)?(r=t,t=e=null):or(e)&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Se.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Se.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Se.prototype.setTimeout=function(t,e){var r=this;function n(o){o.setTimeout(t),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),s()},t),n(o)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),r.removeListener("close",s),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Se.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Se.prototype,t,{get:function(){return this._currentRequest[t]}})});Se.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Se.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e)throw new TypeError("Unsupported protocol "+t);if(this._options.agents){var r=t.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of Va)n.on(i,Za[i]);if(this._currentUrl=/^\//.test(this._options.path)?Mn.format(this._options):this._options.path,this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(l){if(n===o._currentRequest)if(l)o.emit("error",l);else if(s<a.length){var u=a[s++];n.finished||n.write(u.data,u.encoding,c)}else o._ended&&n.end()})()}};Se.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(!r||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(Xa(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new uS;var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var s=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Ma(/^content-/i,this._options.headers));var o=Ma(/^host$/i,this._options.headers),a=Ja(this._currentUrl),c=o||a.host,l=/^\w+:/.test(r)?this._currentUrl:Mn.format(Object.assign(a,{host:c})),u=pS(r,l);if(cd("redirecting to",u.href),this._isRedirect=!0,Wa(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!mS(u.host,c))&&Ma(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),or(i)){var d={headers:t.headers,statusCode:e},g={url:l,method:s,headers:n};i(this._options,d,g),this._sanitizeOptions(this._options)}this._performRequest()};function ld(t){var e={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(t).forEach(function(n){var i=n+":",s=r[i]=t[n],o=e[n]=Object.create(s);function a(l,u,d){return ES(l)?l=Wa(l):sr(l)?l=Wa(Ja(l)):(d=u,u=fd(l),l={protocol:i}),or(u)&&(d=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,!sr(u.host)&&!sr(u.hostname)&&(u.hostname="::1"),Ga.equal(u.protocol,i,"protocol mismatch"),cd("options",u),new Se(u,d)}function c(l,u,d){var g=o.request(l,u,d);return g.end(),g}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function ud(){}function Ja(t){var e;if(za)e=new Un(t);else if(e=fd(Mn.parse(t)),!sr(e.protocol))throw new qa({input:t});return e}function pS(t,e){return za?new Un(t,e):Ja(Mn.resolve(e,t))}function fd(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname))throw new qa({input:t.href||t});if(/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new qa({input:t.href||t});return t}function Wa(t,e){var r=e||{};for(var n of lS)r[n]=t[n];return r.hostname.startsWith("[")&&(r.hostname=r.hostname.slice(1,-1)),r.port!==""&&(r.port=Number(r.port)),r.path=r.search?r.pathname+r.search:r.pathname,r}function Ma(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r>"u"?void 0:String(r).trim()}function qn(t,e,r){function n(i){or(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return n.prototype=new(r||Error),Object.defineProperties(n.prototype,{constructor:{value:n,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),n}function Xa(t,e){for(var r of Va)t.removeListener(r,Za[r]);t.on("error",ud),t.destroy(e)}function mS(t,e){Ga(sr(t)&&sr(e));var r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}function sr(t){return typeof t=="string"||t instanceof String}function or(t){return typeof t=="function"}function gS(t){return typeof t=="object"&&"length"in t}function ES(t){return Un&&t instanceof Un}Ya.exports=ld({http:aS,https:cS});Ya.exports.wrap=ld});var Hn=S((VC,hd)=>{"use strict";var wS="2.0.0",yS=Number.MAX_SAFE_INTEGER||9007199254740991,SS=16,xS=250,vS=["major","premajor","minor","preminor","patch","prepatch","prerelease"];hd.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:SS,MAX_SAFE_BUILD_LENGTH:xS,MAX_SAFE_INTEGER:yS,RELEASE_TYPES:vS,SEMVER_SPEC_VERSION:wS,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Wn=S((ZC,pd)=>{"use strict";var _S=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};pd.exports=_S});var Hr=S((tt,md)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Ka,MAX_SAFE_BUILD_LENGTH:bS,MAX_LENGTH:LS}=Hn(),RS=Wn();tt=md.exports={};var PS=tt.re=[],IS=tt.safeRe=[],R=tt.src=[],CS=tt.safeSrc=[],P=tt.t={},TS=0,Qa="[a-zA-Z0-9-]",OS=[["\\s",1],["\\d",LS],[Qa,bS]],DS=t=>{for(let[e,r]of OS)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},O=(t,e,r)=>{let n=DS(e),i=TS++;RS(t,i,e),P[t]=i,R[i]=e,CS[i]=n,PS[i]=new RegExp(e,r?"g":void 0),IS[i]=new RegExp(n,r?"g":void 0)};O("NUMERICIDENTIFIER","0|[1-9]\\d*");O("NUMERICIDENTIFIERLOOSE","\\d+");O("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Qa}*`);O("MAINVERSION",`(${R[P.NUMERICIDENTIFIER]})\\.(${R[P.NUMERICIDENTIFIER]})\\.(${R[P.NUMERICIDENTIFIER]})`);O("MAINVERSIONLOOSE",`(${R[P.NUMERICIDENTIFIERLOOSE]})\\.(${R[P.NUMERICIDENTIFIERLOOSE]})\\.(${R[P.NUMERICIDENTIFIERLOOSE]})`);O("PRERELEASEIDENTIFIER",`(?:${R[P.NONNUMERICIDENTIFIER]}|${R[P.NUMERICIDENTIFIER]})`);O("PRERELEASEIDENTIFIERLOOSE",`(?:${R[P.NONNUMERICIDENTIFIER]}|${R[P.NUMERICIDENTIFIERLOOSE]})`);O("PRERELEASE",`(?:-(${R[P.PRERELEASEIDENTIFIER]}(?:\\.${R[P.PRERELEASEIDENTIFIER]})*))`);O("PRERELEASELOOSE",`(?:-?(${R[P.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${R[P.PRERELEASEIDENTIFIERLOOSE]})*))`);O("BUILDIDENTIFIER",`${Qa}+`);O("BUILD",`(?:\\+(${R[P.BUILDIDENTIFIER]}(?:\\.${R[P.BUILDIDENTIFIER]})*))`);O("FULLPLAIN",`v?${R[P.MAINVERSION]}${R[P.PRERELEASE]}?${R[P.BUILD]}?`);O("FULL",`^${R[P.FULLPLAIN]}$`);O("LOOSEPLAIN",`[v=\\s]*${R[P.MAINVERSIONLOOSE]}${R[P.PRERELEASELOOSE]}?${R[P.BUILD]}?`);O("LOOSE",`^${R[P.LOOSEPLAIN]}$`);O("GTLT","((?:<|>)?=?)");O("XRANGEIDENTIFIERLOOSE",`${R[P.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);O("XRANGEIDENTIFIER",`${R[P.NUMERICIDENTIFIER]}|x|X|\\*`);O("XRANGEPLAIN",`[v=\\s]*(${R[P.XRANGEIDENTIFIER]})(?:\\.(${R[P.XRANGEIDENTIFIER]})(?:\\.(${R[P.XRANGEIDENTIFIER]})(?:${R[P.PRERELEASE]})?${R[P.BUILD]}?)?)?`);O("XRANGEPLAINLOOSE",`[v=\\s]*(${R[P.XRANGEIDENTIFIERLOOSE]})(?:\\.(${R[P.XRANGEIDENTIFIERLOOSE]})(?:\\.(${R[P.XRANGEIDENTIFIERLOOSE]})(?:${R[P.PRERELEASELOOSE]})?${R[P.BUILD]}?)?)?`);O("XRANGE",`^${R[P.GTLT]}\\s*${R[P.XRANGEPLAIN]}$`);O("XRANGELOOSE",`^${R[P.GTLT]}\\s*${R[P.XRANGEPLAINLOOSE]}$`);O("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ka}})(?:\\.(\\d{1,${Ka}}))?(?:\\.(\\d{1,${Ka}}))?`);O("COERCE",`${R[P.COERCEPLAIN]}(?:$|[^\\d])`);O("COERCEFULL",R[P.COERCEPLAIN]+`(?:${R[P.PRERELEASE]})?(?:${R[P.BUILD]})?(?:$|[^\\d])`);O("COERCERTL",R[P.COERCE],!0);O("COERCERTLFULL",R[P.COERCEFULL],!0);O("LONETILDE","(?:~>?)");O("TILDETRIM",`(\\s*)${R[P.LONETILDE]}\\s+`,!0);tt.tildeTrimReplace="$1~";O("TILDE",`^${R[P.LONETILDE]}${R[P.XRANGEPLAIN]}$`);O("TILDELOOSE",`^${R[P.LONETILDE]}${R[P.XRANGEPLAINLOOSE]}$`);O("LONECARET","(?:\\^)");O("CARETTRIM",`(\\s*)${R[P.LONECARET]}\\s+`,!0);tt.caretTrimReplace="$1^";O("CARET",`^${R[P.LONECARET]}${R[P.XRANGEPLAIN]}$`);O("CARETLOOSE",`^${R[P.LONECARET]}${R[P.XRANGEPLAINLOOSE]}$`);O("COMPARATORLOOSE",`^${R[P.GTLT]}\\s*(${R[P.LOOSEPLAIN]})$|^$`);O("COMPARATOR",`^${R[P.GTLT]}\\s*(${R[P.FULLPLAIN]})$|^$`);O("COMPARATORTRIM",`(\\s*)${R[P.GTLT]}\\s*(${R[P.LOOSEPLAIN]}|${R[P.XRANGEPLAIN]})`,!0);tt.comparatorTrimReplace="$1$2$3";O("HYPHENRANGE",`^\\s*(${R[P.XRANGEPLAIN]})\\s+-\\s+(${R[P.XRANGEPLAIN]})\\s*$`);O("HYPHENRANGELOOSE",`^\\s*(${R[P.XRANGEPLAINLOOSE]})\\s+-\\s+(${R[P.XRANGEPLAINLOOSE]})\\s*$`);O("STAR","(<|>)?=?\\s*\\*");O("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");O("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var gs=S((JC,gd)=>{"use strict";var NS=Object.freeze({loose:!0}),kS=Object.freeze({}),AS=t=>t?typeof t!="object"?NS:t:kS;gd.exports=AS});var ec=S((XC,yd)=>{"use strict";var Ed=/^[0-9]+$/,wd=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=Ed.test(t),n=Ed.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},FS=(t,e)=>wd(e,t);yd.exports={compareIdentifiers:wd,rcompareIdentifiers:FS}});var ae=S((YC,xd)=>{"use strict";var Es=Wn(),{MAX_LENGTH:Sd,MAX_SAFE_INTEGER:ws}=Hn(),{safeRe:ys,t:Ss}=Hr(),$S=gs(),{compareIdentifiers:tc}=ec(),rc=class t{constructor(e,r){if(r=$S(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Sd)throw new TypeError(`version is longer than ${Sd} characters`);Es("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?ys[Ss.LOOSE]:ys[Ss.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ws||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ws||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ws||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<ws)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Es("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Es("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return tc(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Es("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return tc(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?ys[Ss.PRERELEASELOOSE]:ys[Ss.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),tc(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};xd.exports=rc});var ar=S((KC,_d)=>{"use strict";var vd=ae(),BS=(t,e,r=!1)=>{if(t instanceof vd)return t;try{return new vd(t,e)}catch(n){if(!r)return null;throw n}};_d.exports=BS});var Ld=S((QC,bd)=>{"use strict";var US=ar(),MS=(t,e)=>{let r=US(t,e);return r?r.version:null};bd.exports=MS});var Pd=S((eT,Rd)=>{"use strict";var qS=ar(),HS=(t,e)=>{let r=qS(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Rd.exports=HS});var Td=S((tT,Cd)=>{"use strict";var Id=ae(),WS=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new Id(t instanceof Id?t.version:t,r).inc(e,n,i).version}catch{return null}};Cd.exports=WS});var Nd=S((rT,Dd)=>{"use strict";var Od=ar(),jS=(t,e)=>{let r=Od(t,null,!0),n=Od(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};Dd.exports=jS});var Ad=S((nT,kd)=>{"use strict";var GS=ae(),zS=(t,e)=>new GS(t,e).major;kd.exports=zS});var $d=S((iT,Fd)=>{"use strict";var VS=ae(),ZS=(t,e)=>new VS(t,e).minor;Fd.exports=ZS});var Ud=S((sT,Bd)=>{"use strict";var JS=ae(),XS=(t,e)=>new JS(t,e).patch;Bd.exports=XS});var qd=S((oT,Md)=>{"use strict";var YS=ar(),KS=(t,e)=>{let r=YS(t,e);return r&&r.prerelease.length?r.prerelease:null};Md.exports=KS});var Te=S((aT,Wd)=>{"use strict";var Hd=ae(),QS=(t,e,r)=>new Hd(t,r).compare(new Hd(e,r));Wd.exports=QS});var Gd=S((cT,jd)=>{"use strict";var ex=Te(),tx=(t,e,r)=>ex(e,t,r);jd.exports=tx});var Vd=S((lT,zd)=>{"use strict";var rx=Te(),nx=(t,e)=>rx(t,e,!0);zd.exports=nx});var xs=S((uT,Jd)=>{"use strict";var Zd=ae(),ix=(t,e,r)=>{let n=new Zd(t,r),i=new Zd(e,r);return n.compare(i)||n.compareBuild(i)};Jd.exports=ix});var Yd=S((fT,Xd)=>{"use strict";var sx=xs(),ox=(t,e)=>t.sort((r,n)=>sx(r,n,e));Xd.exports=ox});var Qd=S((dT,Kd)=>{"use strict";var ax=xs(),cx=(t,e)=>t.sort((r,n)=>ax(n,r,e));Kd.exports=cx});var jn=S((hT,eh)=>{"use strict";var lx=Te(),ux=(t,e,r)=>lx(t,e,r)>0;eh.exports=ux});var vs=S((pT,th)=>{"use strict";var fx=Te(),dx=(t,e,r)=>fx(t,e,r)<0;th.exports=dx});var nc=S((mT,rh)=>{"use strict";var hx=Te(),px=(t,e,r)=>hx(t,e,r)===0;rh.exports=px});var ic=S((gT,nh)=>{"use strict";var mx=Te(),gx=(t,e,r)=>mx(t,e,r)!==0;nh.exports=gx});var _s=S((ET,ih)=>{"use strict";var Ex=Te(),wx=(t,e,r)=>Ex(t,e,r)>=0;ih.exports=wx});var bs=S((wT,sh)=>{"use strict";var yx=Te(),Sx=(t,e,r)=>yx(t,e,r)<=0;sh.exports=Sx});var sc=S((yT,oh)=>{"use strict";var xx=nc(),vx=ic(),_x=jn(),bx=_s(),Lx=vs(),Rx=bs(),Px=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return xx(t,r,n);case"!=":return vx(t,r,n);case">":return _x(t,r,n);case">=":return bx(t,r,n);case"<":return Lx(t,r,n);case"<=":return Rx(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};oh.exports=Px});var ch=S((ST,ah)=>{"use strict";var Ix=ae(),Cx=ar(),{safeRe:Ls,t:Rs}=Hr(),Tx=(t,e)=>{if(t instanceof Ix)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Ls[Rs.COERCEFULL]:Ls[Rs.COERCE]);else{let c=e.includePrerelease?Ls[Rs.COERCERTLFULL]:Ls[Rs.COERCERTL],l;for(;(l=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||l.index+l[0].length!==r.index+r[0].length)&&(r=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Cx(`${n}.${i}.${s}${o}${a}`,e)};ah.exports=Tx});var uh=S((xT,lh)=>{"use strict";var oc=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};lh.exports=oc});var Oe=S((vT,ph)=>{"use strict";var Ox=/\s+/g,ac=class t{constructor(e,r){if(r=Nx(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof cc)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(Ox," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!dh(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Mx(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Bx)|(this.options.loose&&Ux))+":"+e,i=fh.get(n);if(i)return i;let s=this.options.loose,o=s?de[ce.HYPHENRANGELOOSE]:de[ce.HYPHENRANGE];e=e.replace(o,Xx(this.options.includePrerelease)),q("hyphen replace",e),e=e.replace(de[ce.COMPARATORTRIM],Ax),q("comparator trim",e),e=e.replace(de[ce.TILDETRIM],Fx),q("tilde trim",e),e=e.replace(de[ce.CARETTRIM],$x),q("caret trim",e);let a=e.split(" ").map(d=>qx(d,this.options)).join(" ").split(/\s+/).map(d=>Jx(d,this.options));s&&(a=a.filter(d=>(q("loose invalid filter",d,this.options),!!d.match(de[ce.COMPARATORLOOSE])))),q("range list",a);let c=new Map,l=a.map(d=>new cc(d,this.options));for(let d of l){if(dh(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return fh.set(n,u),u}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>hh(n,r)&&e.set.some(i=>hh(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new kx(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Yx(this.set[r],e,this.options))return!0;return!1}};ph.exports=ac;var Dx=uh(),fh=new Dx,Nx=gs(),cc=Gn(),q=Wn(),kx=ae(),{safeRe:de,t:ce,comparatorTrimReplace:Ax,tildeTrimReplace:Fx,caretTrimReplace:$x}=Hr(),{FLAG_INCLUDE_PRERELEASE:Bx,FLAG_LOOSE:Ux}=Hn(),dh=t=>t.value==="<0.0.0-0",Mx=t=>t.value==="",hh=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},qx=(t,e)=>(t=t.replace(de[ce.BUILD],""),q("comp",t,e),t=jx(t,e),q("caret",t),t=Hx(t,e),q("tildes",t),t=zx(t,e),q("xrange",t),t=Zx(t,e),q("stars",t),t),he=t=>!t||t.toLowerCase()==="x"||t==="*",Hx=(t,e)=>t.trim().split(/\s+/).map(r=>Wx(r,e)).join(" "),Wx=(t,e)=>{let r=e.loose?de[ce.TILDELOOSE]:de[ce.TILDE];return t.replace(r,(n,i,s,o,a)=>{q("tilde",t,n,i,s,o,a);let c;return he(i)?c="":he(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:he(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(q("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,q("tilde return",c),c})},jx=(t,e)=>t.trim().split(/\s+/).map(r=>Gx(r,e)).join(" "),Gx=(t,e)=>{q("caret",t,e);let r=e.loose?de[ce.CARETLOOSE]:de[ce.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,c)=>{q("caret",t,i,s,o,a,c);let l;return he(s)?l="":he(o)?l=`>=${s}.0.0${n} <${+s+1}.0.0-0`:he(a)?s==="0"?l=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:c?(q("replaceCaret pr",c),s==="0"?o==="0"?l=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(q("no pr"),s==="0"?o==="0"?l=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:l=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:l=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),q("caret return",l),l})},zx=(t,e)=>(q("replaceXRanges",t,e),t.split(/\s+/).map(r=>Vx(r,e)).join(" ")),Vx=(t,e)=>{t=t.trim();let r=e.loose?de[ce.XRANGELOOSE]:de[ce.XRANGE];return t.replace(r,(n,i,s,o,a,c)=>{q("xRange",t,n,i,s,o,a,c);let l=he(s),u=l||he(o),d=u||he(a),g=d;return i==="="&&g&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&g?(u&&(o=0),a=0,i===">"?(i=">=",u?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",u?s=+s+1:o=+o+1),i==="<"&&(c="-0"),n=`${i+s}.${o}.${a}${c}`):u?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:d&&(n=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),q("xRange return",n),n})},Zx=(t,e)=>(q("replaceStars",t,e),t.trim().replace(de[ce.STAR],"")),Jx=(t,e)=>(q("replaceGTE0",t,e),t.trim().replace(de[e.includePrerelease?ce.GTE0PRE:ce.GTE0],"")),Xx=t=>(e,r,n,i,s,o,a,c,l,u,d,g)=>(he(n)?r="":he(i)?r=`>=${n}.0.0${t?"-0":""}`:he(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,he(l)?c="":he(u)?c=`<${+l+1}.0.0-0`:he(d)?c=`<${l}.${+u+1}.0-0`:g?c=`<=${l}.${u}.${d}-${g}`:t?c=`<${l}.${u}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),Yx=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(q(t[n].semver),t[n].semver!==cc.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Gn=S((_T,Sh)=>{"use strict";var zn=Symbol("SemVer ANY"),fc=class t{static get ANY(){return zn}constructor(e,r){if(r=mh(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),uc("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===zn?this.value="":this.value=this.operator+this.semver.version,uc("comp",this)}parse(e){let r=this.options.loose?gh[Eh.COMPARATORLOOSE]:gh[Eh.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new wh(n[2],this.options.loose):this.semver=zn}toString(){return this.value}test(e){if(uc("Comparator.test",e,this.options.loose),this.semver===zn||e===zn)return!0;if(typeof e=="string")try{e=new wh(e,this.options)}catch{return!1}return lc(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new yh(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new yh(this.value,r).test(e.semver):(r=mh(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||lc(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||lc(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Sh.exports=fc;var mh=gs(),{safeRe:gh,t:Eh}=Hr(),lc=sc(),uc=Wn(),wh=ae(),yh=Oe()});var Vn=S((bT,xh)=>{"use strict";var Kx=Oe(),Qx=(t,e,r)=>{try{e=new Kx(e,r)}catch{return!1}return e.test(t)};xh.exports=Qx});var _h=S((LT,vh)=>{"use strict";var e0=Oe(),t0=(t,e)=>new e0(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));vh.exports=t0});var Lh=S((RT,bh)=>{"use strict";var r0=ae(),n0=Oe(),i0=(t,e,r)=>{let n=null,i=null,s=null;try{s=new n0(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new r0(n,r))}),n};bh.exports=i0});var Ph=S((PT,Rh)=>{"use strict";var s0=ae(),o0=Oe(),a0=(t,e,r)=>{let n=null,i=null,s=null;try{s=new o0(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new s0(n,r))}),n};Rh.exports=a0});var Th=S((IT,Ch)=>{"use strict";var dc=ae(),c0=Oe(),Ih=jn(),l0=(t,e)=>{t=new c0(t,e);let r=new dc("0.0.0");if(t.test(r)||(r=new dc("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new dc(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Ih(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Ih(r,s))&&(r=s)}return r&&t.test(r)?r:null};Ch.exports=l0});var Dh=S((CT,Oh)=>{"use strict";var u0=Oe(),f0=(t,e)=>{try{return new u0(t,e).range||"*"}catch{return null}};Oh.exports=f0});var Ps=S((TT,Fh)=>{"use strict";var d0=ae(),Ah=Gn(),{ANY:h0}=Ah,p0=Oe(),m0=Vn(),Nh=jn(),kh=vs(),g0=bs(),E0=_s(),w0=(t,e,r,n)=>{t=new d0(t,n),e=new p0(e,n);let i,s,o,a,c;switch(r){case">":i=Nh,s=g0,o=kh,a=">",c=">=";break;case"<":i=kh,s=E0,o=Nh,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(m0(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],d=null,g=null;if(u.forEach(f=>{f.semver===h0&&(f=new Ah(">=0.0.0")),d=d||f,g=g||f,i(f.semver,d.semver,n)?d=f:o(f.semver,g.semver,n)&&(g=f)}),d.operator===a||d.operator===c||(!g.operator||g.operator===a)&&s(t,g.semver))return!1;if(g.operator===c&&o(t,g.semver))return!1}return!0};Fh.exports=w0});var Bh=S((OT,$h)=>{"use strict";var y0=Ps(),S0=(t,e,r)=>y0(t,e,">",r);$h.exports=S0});var Mh=S((DT,Uh)=>{"use strict";var x0=Ps(),v0=(t,e,r)=>x0(t,e,"<",r);Uh.exports=v0});var Wh=S((NT,Hh)=>{"use strict";var qh=Oe(),_0=(t,e,r)=>(t=new qh(t,r),e=new qh(e,r),t.intersects(e,r));Hh.exports=_0});var Gh=S((kT,jh)=>{"use strict";var b0=Vn(),L0=Te();jh.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((u,d)=>L0(u,d,r));for(let u of o)b0(u,e,r)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,d]of n)u===d?a.push(u):!d&&u===o[0]?a.push("*"):d?u===o[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var Yh=S((AT,Xh)=>{"use strict";var zh=Oe(),pc=Gn(),{ANY:hc}=pc,Zn=Vn(),mc=Te(),R0=(t,e,r={})=>{if(t===e)return!0;t=new zh(t,r),e=new zh(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=I0(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},P0=[new pc(">=0.0.0-0")],Vh=[new pc(">=0.0.0")],I0=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===hc){if(e.length===1&&e[0].semver===hc)return!0;r.includePrerelease?t=P0:t=Vh}if(e.length===1&&e[0].semver===hc){if(r.includePrerelease)return!0;e=Vh}let n=new Set,i,s;for(let f of t)f.operator===">"||f.operator===">="?i=Zh(i,f,r):f.operator==="<"||f.operator==="<="?s=Jh(s,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(i&&s){if(o=mc(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let f of n){if(i&&!Zn(f,String(i),r)||s&&!Zn(f,String(s),r))return null;for(let p of e)if(!Zn(f,String(p),r))return!1;return!0}let a,c,l,u,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,g=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(u=u||f.operator===">"||f.operator===">=",l=l||f.operator==="<"||f.operator==="<=",i){if(g&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===g.major&&f.semver.minor===g.minor&&f.semver.patch===g.patch&&(g=!1),f.operator===">"||f.operator===">="){if(a=Zh(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!Zn(i.semver,String(f),r))return!1}if(s){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(c=Jh(s,f,r),c===f&&c!==s)return!1}else if(s.operator==="<="&&!Zn(s.semver,String(f),r))return!1}if(!f.operator&&(s||i)&&o!==0)return!1}return!(i&&l&&!s&&o!==0||s&&u&&!i&&o!==0||g||d)},Zh=(t,e,r)=>{if(!t)return e;let n=mc(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Jh=(t,e,r)=>{if(!t)return e;let n=mc(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};Xh.exports=R0});var tp=S((FT,ep)=>{"use strict";var gc=Hr(),Kh=Hn(),C0=ae(),Qh=ec(),T0=ar(),O0=Ld(),D0=Pd(),N0=Td(),k0=Nd(),A0=Ad(),F0=$d(),$0=Ud(),B0=qd(),U0=Te(),M0=Gd(),q0=Vd(),H0=xs(),W0=Yd(),j0=Qd(),G0=jn(),z0=vs(),V0=nc(),Z0=ic(),J0=_s(),X0=bs(),Y0=sc(),K0=ch(),Q0=Gn(),ev=Oe(),tv=Vn(),rv=_h(),nv=Lh(),iv=Ph(),sv=Th(),ov=Dh(),av=Ps(),cv=Bh(),lv=Mh(),uv=Wh(),fv=Gh(),dv=Yh();ep.exports={parse:T0,valid:O0,clean:D0,inc:N0,diff:k0,major:A0,minor:F0,patch:$0,prerelease:B0,compare:U0,rcompare:M0,compareLoose:q0,compareBuild:H0,sort:W0,rsort:j0,gt:G0,lt:z0,eq:V0,neq:Z0,gte:J0,lte:X0,cmp:Y0,coerce:K0,Comparator:Q0,Range:ev,satisfies:tv,toComparators:rv,maxSatisfying:nv,minSatisfying:iv,minVersion:sv,validRange:ov,outside:av,gtr:cv,ltr:lv,intersects:uv,simplifyRange:fv,subset:dv,SemVer:C0,re:gc.re,src:gc.src,tokens:gc.t,SEMVER_SPEC_VERSION:Kh.SEMVER_SPEC_VERSION,RELEASE_TYPES:Kh.RELEASE_TYPES,compareIdentifiers:Qh.compareIdentifiers,rcompareIdentifiers:Qh.rcompareIdentifiers}});var Ec=S(($T,rp)=>{rp.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var Is=S(ip=>{var np={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function hv(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(r,n)=>e[n]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(np))ip[t]=hv(np[t])});var lp=S((UT,cp)=>{var pv=require("fs"),Y=require("path"),sp=Ec(),mv=Is(),gv=typeof process=="object"&&process.platform==="win32",op=t=>typeof t=="object"&&t!==null,ap=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function G(t){this.sep=Y.sep,this.fs=pv,op(t)&&op(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}cp.exports=G;G.prototype.makeDir=function(t){let e=this;function r(n){let i=n.split(e.sep)[0];n.split(e.sep).forEach(function(s){if(!(!s||s.substr(-1,1)===":")){i+=e.sep+s;var o;try{o=e.fs.statSync(i)}catch{e.fs.mkdirSync(i)}if(o&&o.isFile())throw mv.FILE_IN_THE_WAY(`"${i}"`)}})}r(t)};G.prototype.writeFileTo=function(t,e,r,n){let i=this;if(i.fs.existsSync(t)){if(!r)return!1;var s=i.fs.statSync(t);if(s.isDirectory())return!1}var o=Y.dirname(t);i.fs.existsSync(o)||i.makeDir(o);var a;try{a=i.fs.openSync(t,"w",438)}catch{i.fs.chmodSync(t,438),a=i.fs.openSync(t,"w",438)}if(a)try{i.fs.writeSync(a,e,0,e.length,0)}finally{i.fs.closeSync(a)}return i.fs.chmodSync(t,n||438),!0};G.prototype.writeFileToAsync=function(t,e,r,n,i){typeof n=="function"&&(i=n,n=void 0);let s=this;s.fs.exists(t,function(o){if(o&&!r)return i(!1);s.fs.stat(t,function(a,c){if(o&&c.isDirectory())return i(!1);var l=Y.dirname(t);s.fs.exists(l,function(u){u||s.makeDir(l),s.fs.open(t,"w",438,function(d,g){d?s.fs.chmod(t,438,function(){s.fs.open(t,"w",438,function(f,p){s.fs.write(p,e,0,e.length,0,function(){s.fs.close(p,function(){s.fs.chmod(t,n||438,function(){i(!0)})})})})}):g?s.fs.write(g,e,0,e.length,0,function(){s.fs.close(g,function(){s.fs.chmod(t,n||438,function(){i(!0)})})}):s.fs.chmod(t,n||438,function(){i(!0)})})})})})};G.prototype.findFiles=function(t){let e=this;function r(n,i,s){typeof i=="boolean"&&(s=i,i=void 0);let o=[];return e.fs.readdirSync(n).forEach(function(a){let c=Y.join(n,a),l=e.fs.statSync(c);(!i||i.test(c))&&o.push(Y.normalize(c)+(l.isDirectory()?e.sep:"")),l.isDirectory()&&s&&(o=o.concat(r(c,i,s)))}),o}return r(t,void 0,!0)};G.prototype.findFilesAsync=function(t,e){let r=this,n=[];r.fs.readdir(t,function(i,s){if(i)return e(i);let o=s.length;if(!o)return e(null,n);s.forEach(function(a){a=Y.join(t,a),r.fs.stat(a,function(c,l){if(c)return e(c);l&&(n.push(Y.normalize(a)+(l.isDirectory()?r.sep:"")),l.isDirectory()?r.findFilesAsync(a,function(u,d){if(u)return e(u);n=n.concat(d),--o||e(null,n)}):--o||e(null,n))})})})};G.prototype.getAttributes=function(){};G.prototype.setAttributes=function(){};G.crc32update=function(t,e){return ap[(t^e)&255]^t>>>8};G.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,r=-1;for(let n=0;n<e;)r=G.crc32update(r,t[n++]);return~r>>>0};G.methodToString=function(t){switch(t){case sp.STORED:return"STORED ("+t+")";case sp.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};G.canonical=function(t){if(!t)return"";let e=Y.posix.normalize("/"+t.split("\\").join("/"));return Y.join(".",e)};G.zipnamefix=function(t){if(!t)return"";let e=Y.posix.normalize("/"+t.split("\\").join("/"));return Y.posix.join(".",e)};G.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let r=t.length>>>0;for(let n=r-1;n>=0;n--)if(e(t[n],n,t))return t[n]};G.sanitize=function(t,e){t=Y.resolve(Y.normalize(t));for(var r=e.split("/"),n=0,i=r.length;n<i;n++){var s=Y.normalize(Y.join(t,r.slice(n,i).join(Y.sep)));if(s.indexOf(t)===0)return s}return Y.normalize(Y.join(t,Y.basename(e)))};G.toBuffer=function(e,r){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?r(e):Buffer.alloc(0)};G.readBigUInt64LE=function(t,e){var r=Buffer.from(t.slice(e,e+8));return r.swap64(),parseInt(`0x${r.toString("hex")}`)};G.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};G.fromDate2DOS=function(t){let e=0,r=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),r=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|r};G.isWin=gv;G.crcTable=ap});var fp=S((MT,up)=>{var Ev=require("path");up.exports=function(t,{fs:e}){var r=t||"",n=s(),i=null;function s(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return r&&e.existsSync(r)?(i=e.statSync(r),n.directory=i.isDirectory(),n.mtime=i.mtime,n.atime=i.atime,n.executable=(73&i.mode)!==0,n.readonly=(128&i.mode)===0,n.hidden=Ev.basename(r)[0]==="."):console.warn("Invalid path: "+r),{get directory(){return n.directory},get readOnly(){return n.readonly},get hidden(){return n.hidden},get mtime(){return n.mtime},get atime(){return n.atime},get executable(){return n.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:r,isDirectory:n.directory,isReadOnly:n.readonly,isHidden:n.hidden,isExecutable:n.executable,mTime:n.mtime,aTime:n.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var hp=S((qT,dp)=>{dp.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var jr=S((HT,Wr)=>{Wr.exports=lp();Wr.exports.Constants=Ec();Wr.exports.Errors=Is();Wr.exports.FileAttr=fp();Wr.exports.decoder=hp()});var mp=S((WT,pp)=>{var Nt=jr(),L=Nt.Constants;pp.exports=function(){var t=20,e=10,r=0,n=0,i=0,s=0,o=0,a=0,c=0,l=0,u=0,d=0,g=0,f=0,p=0;t|=Nt.isWin?2560:768,r|=L.FLG_EFS;let E={extraLen:0},m=h=>Math.max(0,h)>>>0,w=h=>Math.max(0,h)&65535,x=h=>Math.max(0,h)&255;return i=Nt.fromDate2DOS(new Date),{get made(){return t},set made(h){t=h},get version(){return e},set version(h){e=h},get flags(){return r},set flags(h){r=h},get flags_efs(){return(r&L.FLG_EFS)>0},set flags_efs(h){h?r|=L.FLG_EFS:r&=~L.FLG_EFS},get flags_desc(){return(r&L.FLG_DESC)>0},set flags_desc(h){h?r|=L.FLG_DESC:r&=~L.FLG_DESC},get method(){return n},set method(h){switch(h){case L.STORED:this.version=10;case L.DEFLATED:default:this.version=20}n=h},get time(){return Nt.fromDOS2Date(this.timeval)},set time(h){this.timeval=Nt.fromDate2DOS(h)},get timeval(){return i},set timeval(h){i=m(h)},get timeHighByte(){return x(i>>>8)},get crc(){return s},set crc(h){s=m(h)},get compressedSize(){return o},set compressedSize(h){o=m(h)},get size(){return a},set size(h){a=m(h)},get fileNameLength(){return c},set fileNameLength(h){c=h},get extraLength(){return l},set extraLength(h){l=h},get extraLocalLength(){return E.extraLen},set extraLocalLength(h){E.extraLen=h},get commentLength(){return u},set commentLength(h){u=h},get diskNumStart(){return d},set diskNumStart(h){d=m(h)},get inAttr(){return g},set inAttr(h){g=m(h)},get attr(){return f},set attr(h){f=m(h)},get fileAttr(){return(f||0)>>16&4095},get offset(){return p},set offset(h){p=m(h)},get encrypted(){return(r&L.FLG_ENC)===L.FLG_ENC},get centralHeaderSize(){return L.CENHDR+c+l+u},get realDataOffset(){return p+L.LOCHDR+E.fnameLen+E.extraLen},get localHeader(){return E},loadLocalHeaderFromBinary:function(h){var y=h.slice(p,p+L.LOCHDR);if(y.readUInt32LE(0)!==L.LOCSIG)throw Nt.Errors.INVALID_LOC();E.version=y.readUInt16LE(L.LOCVER),E.flags=y.readUInt16LE(L.LOCFLG),E.method=y.readUInt16LE(L.LOCHOW),E.time=y.readUInt32LE(L.LOCTIM),E.crc=y.readUInt32LE(L.LOCCRC),E.compressedSize=y.readUInt32LE(L.LOCSIZ),E.size=y.readUInt32LE(L.LOCLEN),E.fnameLen=y.readUInt16LE(L.LOCNAM),E.extraLen=y.readUInt16LE(L.LOCEXT);let v=p+L.LOCHDR+E.fnameLen,b=v+E.extraLen;return h.slice(v,b)},loadFromBinary:function(h){if(h.length!==L.CENHDR||h.readUInt32LE(0)!==L.CENSIG)throw Nt.Errors.INVALID_CEN();t=h.readUInt16LE(L.CENVEM),e=h.readUInt16LE(L.CENVER),r=h.readUInt16LE(L.CENFLG),n=h.readUInt16LE(L.CENHOW),i=h.readUInt32LE(L.CENTIM),s=h.readUInt32LE(L.CENCRC),o=h.readUInt32LE(L.CENSIZ),a=h.readUInt32LE(L.CENLEN),c=h.readUInt16LE(L.CENNAM),l=h.readUInt16LE(L.CENEXT),u=h.readUInt16LE(L.CENCOM),d=h.readUInt16LE(L.CENDSK),g=h.readUInt16LE(L.CENATT),f=h.readUInt32LE(L.CENATX),p=h.readUInt32LE(L.CENOFF)},localHeaderToBinary:function(){var h=Buffer.alloc(L.LOCHDR);return h.writeUInt32LE(L.LOCSIG,0),h.writeUInt16LE(e,L.LOCVER),h.writeUInt16LE(r,L.LOCFLG),h.writeUInt16LE(n,L.LOCHOW),h.writeUInt32LE(i,L.LOCTIM),h.writeUInt32LE(s,L.LOCCRC),h.writeUInt32LE(o,L.LOCSIZ),h.writeUInt32LE(a,L.LOCLEN),h.writeUInt16LE(c,L.LOCNAM),h.writeUInt16LE(E.extraLen,L.LOCEXT),h},centralHeaderToBinary:function(){var h=Buffer.alloc(L.CENHDR+c+l+u);return h.writeUInt32LE(L.CENSIG,0),h.writeUInt16LE(t,L.CENVEM),h.writeUInt16LE(e,L.CENVER),h.writeUInt16LE(r,L.CENFLG),h.writeUInt16LE(n,L.CENHOW),h.writeUInt32LE(i,L.CENTIM),h.writeUInt32LE(s,L.CENCRC),h.writeUInt32LE(o,L.CENSIZ),h.writeUInt32LE(a,L.CENLEN),h.writeUInt16LE(c,L.CENNAM),h.writeUInt16LE(l,L.CENEXT),h.writeUInt16LE(u,L.CENCOM),h.writeUInt16LE(d,L.CENDSK),h.writeUInt16LE(g,L.CENATT),h.writeUInt32LE(f,L.CENATX),h.writeUInt32LE(p,L.CENOFF),h},toJSON:function(){let h=function(y){return y+" bytes"};return{made:t,version:e,flags:r,method:Nt.methodToString(n),time:this.time,crc:"0x"+s.toString(16).toUpperCase(),compressedSize:h(o),size:h(a),fileNameLength:h(c),extraLength:h(l),commentLength:h(u),diskNumStart:d,inAttr:g,attr:f,offset:p,centralHeaderSize:h(L.CENHDR+c+l+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Ep=S((jT,gp)=>{var Gr=jr(),H=Gr.Constants;gp.exports=function(){var t=0,e=0,r=0,n=0,i=0;return{get diskEntries(){return t},set diskEntries(s){t=e=s},get totalEntries(){return e},set totalEntries(s){e=t=s},get size(){return r},set size(s){r=s},get offset(){return n},set offset(s){n=s},get commentLength(){return i},set commentLength(s){i=s},get mainHeaderSize(){return H.ENDHDR+i},loadFromBinary:function(s){if((s.length!==H.ENDHDR||s.readUInt32LE(0)!==H.ENDSIG)&&(s.length<H.ZIP64HDR||s.readUInt32LE(0)!==H.ZIP64SIG))throw Gr.Errors.INVALID_END();s.readUInt32LE(0)===H.ENDSIG?(t=s.readUInt16LE(H.ENDSUB),e=s.readUInt16LE(H.ENDTOT),r=s.readUInt32LE(H.ENDSIZ),n=s.readUInt32LE(H.ENDOFF),i=s.readUInt16LE(H.ENDCOM)):(t=Gr.readBigUInt64LE(s,H.ZIP64SUB),e=Gr.readBigUInt64LE(s,H.ZIP64TOT),r=Gr.readBigUInt64LE(s,H.ZIP64SIZE),n=Gr.readBigUInt64LE(s,H.ZIP64OFF),i=0)},toBinary:function(){var s=Buffer.alloc(H.ENDHDR+i);return s.writeUInt32LE(H.ENDSIG,0),s.writeUInt32LE(0,4),s.writeUInt16LE(t,H.ENDSUB),s.writeUInt16LE(e,H.ENDTOT),s.writeUInt32LE(r,H.ENDSIZ),s.writeUInt32LE(n,H.ENDOFF),s.writeUInt16LE(i,H.ENDCOM),s.fill(" ",H.ENDHDR),s},toJSON:function(){let s=function(o,a){let c=o.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c};return{diskEntries:t,totalEntries:e,size:r+" bytes",offset:s(n,4),commentLength:i}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var yc=S(wc=>{wc.EntryHeader=mp();wc.MainHeader=Ep()});var yp=S((zT,wp)=>{wp.exports=function(t){var e=require("zlib"),r={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,r)},deflateAsync:function(n){var i=e.createDeflateRaw(r),s=[],o=0;i.on("data",function(a){s.push(a),o+=a.length}),i.on("end",function(){var a=Buffer.alloc(o),c=0;a.fill(0);for(var l=0;l<s.length;l++){var u=s[l];u.copy(a,c),c+=u.length}n&&n(a)}),i.end(t)}}}});var xp=S((VT,Sp)=>{var wv=+(process.versions?process.versions.node:"").split(".")[0]||0;Sp.exports=function(t,e){var r=require("zlib");let n=wv>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return r.inflateRawSync(t,n)},inflateAsync:function(i){var s=r.createInflateRaw(n),o=[],a=0;s.on("data",function(c){o.push(c),a+=c.length}),s.on("end",function(){var c=Buffer.alloc(a),l=0;c.fill(0);for(var u=0;u<o.length;u++){var d=o[u];d.copy(c,l),l+=d.length}i&&i(c)}),s.end(t)}}}});var Rp=S((ZT,Lp)=>{"use strict";var{randomFillSync:vp}=require("crypto"),yv=Is(),Sv=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),bp=(t,e)=>Math.imul(t,e)>>>0,_p=(t,e)=>Sv[(t^e)&255]^t>>>8,Jn=()=>typeof vp=="function"?vp(Buffer.alloc(12)):Jn.node();Jn.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let r=0;r<e;r++)t[r]=Math.random()*256&255;return t};var Cs={genSalt:Jn};function Ts(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let r=0;r<e.length;r++)this.updateKeys(e[r])}Ts.prototype.updateKeys=function(t){let e=this.keys;return e[0]=_p(e[0],t),e[1]+=e[0]&255,e[1]=bp(e[1],134775813)+1,e[2]=_p(e[2],e[1]>>>24),t};Ts.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return bp(t,t^1)>>8&255};function xv(t){let e=new Ts(t);return function(r){let n=Buffer.alloc(r.length),i=0;for(let s of r)n[i++]=e.updateKeys(s^e.next());return n}}function vv(t){let e=new Ts(t);return function(r,n,i=0){n||(n=Buffer.alloc(r.length));for(let s of r){let o=e.next();n[i++]=s^o,e.updateKeys(s)}return n}}function _v(t,e,r){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let n=xv(r),i=n(t.slice(0,12)),s=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(i[11]!==s)throw yv.WRONG_PASSWORD();return n(t.slice(12))}function bv(t){Buffer.isBuffer(t)&&t.length>=12?Cs.genSalt=function(){return t.slice(0,12)}:t==="node"?Cs.genSalt=Jn.node:Cs.genSalt=Jn}function Lv(t,e,r,n=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let i=vv(r),s=Cs.genSalt();s[11]=e.crc>>>24&255,n&&(s[10]=e.crc>>>16&255);let o=Buffer.alloc(t.length+12);return i(s,o),i(t,o,12)}Lp.exports={decrypt:_v,encrypt:Lv,_salter:bv}});var Pp=S(Os=>{Os.Deflater=yp();Os.Inflater=xp();Os.ZipCrypto=Rp()});var xc=S((XT,Ip)=>{var B=jr(),Rv=yc(),z=B.Constants,Sc=Pp();Ip.exports=function(t,e){var r=new Rv.EntryHeader,n=Buffer.alloc(0),i=Buffer.alloc(0),s=!1,o=null,a=Buffer.alloc(0),c=Buffer.alloc(0),l=!0;let u=t,d=typeof u.decoder=="object"?u.decoder:B.decoder;l=d.hasOwnProperty("efs")?d.efs:!1;function g(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(c=r.loadLocalHeaderFromBinary(e),e.slice(r.realDataOffset,r.realDataOffset+r.compressedSize))}function f(h){if(r.flags_desc){let y={},v=r.realDataOffset+r.compressedSize;if(e.readUInt32LE(v)==z.LOCSIG||e.readUInt32LE(v)==z.CENSIG)throw B.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(v)==z.EXTSIG)y.crc=e.readUInt32LE(v+z.EXTCRC),y.compressedSize=e.readUInt32LE(v+z.EXTSIZ),y.size=e.readUInt32LE(v+z.EXTLEN);else if(e.readUInt16LE(v+12)===19280)y.crc=e.readUInt32LE(v+z.EXTCRC-4),y.compressedSize=e.readUInt32LE(v+z.EXTSIZ-4),y.size=e.readUInt32LE(v+z.EXTLEN-4);else throw B.Errors.DESCRIPTOR_UNKNOWN();if(y.compressedSize!==r.compressedSize||y.size!==r.size||y.crc!==r.crc)throw B.Errors.DESCRIPTOR_FAULTY();if(B.crc32(h)!==y.crc)return!1}else if(B.crc32(h)!==r.localHeader.crc)return!1;return!0}function p(h,y,v){if(typeof y>"u"&&typeof h=="string"&&(v=h,h=void 0),s)return h&&y&&y(Buffer.alloc(0),B.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var b=g();if(b.length===0)return h&&y&&y(b),b;if(r.encrypted){if(typeof v!="string"&&!Buffer.isBuffer(v))throw B.Errors.INVALID_PASS_PARAM();b=Sc.ZipCrypto.decrypt(b,r,v)}var _=Buffer.alloc(r.size);switch(r.method){case B.Constants.STORED:if(b.copy(_),f(_))return h&&y&&y(_),_;throw h&&y&&y(_,B.Errors.BAD_CRC()),B.Errors.BAD_CRC();case B.Constants.DEFLATED:var C=new Sc.Inflater(b,r.size);if(h)C.inflateAsync(function(D){D.copy(D,0),y&&(f(D)?y(D):y(D,B.Errors.BAD_CRC()))});else{if(C.inflate(_).copy(_,0),!f(_))throw B.Errors.BAD_CRC(`"${d.decode(n)}"`);return _}break;default:throw h&&y&&y(Buffer.alloc(0),B.Errors.UNKNOWN_METHOD()),B.Errors.UNKNOWN_METHOD()}}function E(h,y){if((!o||!o.length)&&Buffer.isBuffer(e))return h&&y&&y(g()),g();if(o.length&&!s){var v;switch(r.method){case B.Constants.STORED:return r.compressedSize=r.size,v=Buffer.alloc(o.length),o.copy(v),h&&y&&y(v),v;default:case B.Constants.DEFLATED:var b=new Sc.Deflater(o);if(h)b.deflateAsync(function(C){v=Buffer.alloc(C.length),r.compressedSize=C.length,C.copy(v),y&&y(v)});else{var _=b.deflate();return r.compressedSize=_.length,_}b=null;break}}else if(h&&y)y(Buffer.alloc(0));else return Buffer.alloc(0)}function m(h,y){return(h.readUInt32LE(y+4)<<4)+h.readUInt32LE(y)}function w(h){try{for(var y=0,v,b,_;y+4<h.length;)v=h.readUInt16LE(y),y+=2,b=h.readUInt16LE(y),y+=2,_=h.slice(y,y+b),y+=b,z.ID_ZIP64===v&&x(_)}catch{throw B.Errors.EXTRA_FIELD_PARSE_ERROR()}}function x(h){var y,v,b,_;h.length>=z.EF_ZIP64_SCOMP&&(y=m(h,z.EF_ZIP64_SUNCOMP),r.size===z.EF_ZIP64_OR_32&&(r.size=y)),h.length>=z.EF_ZIP64_RHO&&(v=m(h,z.EF_ZIP64_SCOMP),r.compressedSize===z.EF_ZIP64_OR_32&&(r.compressedSize=v)),h.length>=z.EF_ZIP64_DSN&&(b=m(h,z.EF_ZIP64_RHO),r.offset===z.EF_ZIP64_OR_32&&(r.offset=b)),h.length>=z.EF_ZIP64_DSN+4&&(_=h.readUInt32LE(z.EF_ZIP64_DSN),r.diskNumStart===z.EF_ZIP64_OR_16&&(r.diskNumStart=_))}return{get entryName(){return d.decode(n)},get rawEntryName(){return n},set entryName(h){n=B.toBuffer(h,d.encode);var y=n[n.length-1];s=y===47||y===92,r.fileNameLength=n.length},get efs(){return typeof l=="function"?l(this.entryName):l},get extra(){return a},set extra(h){a=h,r.extraLength=h.length,w(h)},get comment(){return d.decode(i)},set comment(h){if(i=B.toBuffer(h,d.encode),r.commentLength=i.length,i.length>65535)throw B.Errors.COMMENT_TOO_LONG()},get name(){var h=d.decode(n);return s?h.substr(h.length-1).split("/").pop():h.split("/").pop()},get isDirectory(){return s},getCompressedData:function(){return E(!1,null)},getCompressedDataAsync:function(h){E(!0,h)},setData:function(h){o=B.toBuffer(h,B.decoder.encode),!s&&o.length?(r.size=o.length,r.method=B.Constants.DEFLATED,r.crc=B.crc32(h),r.changed=!0):r.method=B.Constants.STORED},getData:function(h){return r.changed?o:p(!1,null,h)},getDataAsync:function(h,y){r.changed?h(o):p(!0,h,y)},set attr(h){r.attr=h},get attr(){return r.attr},set header(h){r.loadFromBinary(h)},get header(){return r},packCentralHeader:function(){r.flags_efs=this.efs,r.extraLength=a.length;var h=r.centralHeaderToBinary(),y=B.Constants.CENHDR;return n.copy(h,y),y+=n.length,a.copy(h,y),y+=r.extraLength,i.copy(h,y),h},packLocalHeader:function(){let h=0;r.flags_efs=this.efs,r.extraLocalLength=c.length;let y=r.localHeaderToBinary(),v=Buffer.alloc(y.length+n.length+r.extraLocalLength);return y.copy(v,h),h+=y.length,n.copy(v,h),h+=n.length,c.copy(v,h),h+=c.length,v},toJSON:function(){let h=function(y){return"<"+(y&&y.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:r.toJSON(),compressedData:h(e),data:h(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Op=S((YT,Tp)=>{var Cp=xc(),Pv=yc(),ne=jr();Tp.exports=function(t,e){var r=[],n={},i=Buffer.alloc(0),s=new Pv.MainHeader,o=!1,a=null;let c=new Set,l=e,{noSort:u,decoder:d}=l;t?p(l.readEntries):o=!0;function g(){let m=new Set;for(let w of Object.keys(n)){let x=w.split("/");if(x.pop(),!!x.length)for(let h=0;h<x.length;h++){let y=x.slice(0,h+1).join("/")+"/";m.add(y)}}for(let w of m)if(!(w in n)){let x=new Cp(l);x.entryName=w,x.attr=16,x.temporary=!0,r.push(x),n[x.entryName]=x,c.add(x)}}function f(){if(o=!0,n={},s.diskEntries>(t.length-s.offset)/ne.Constants.CENHDR)throw ne.Errors.DISK_ENTRY_TOO_LARGE();r=new Array(s.diskEntries);for(var m=s.offset,w=0;w<r.length;w++){var x=m,h=new Cp(l,t);h.header=t.slice(x,x+=ne.Constants.CENHDR),h.entryName=t.slice(x,x+=h.header.fileNameLength),h.header.extraLength&&(h.extra=t.slice(x,x+=h.header.extraLength)),h.header.commentLength&&(h.comment=t.slice(x,x+h.header.commentLength)),m+=h.header.centralHeaderSize,r[w]=h,n[h.entryName]=h}c.clear(),g()}function p(m){var w=t.length-ne.Constants.ENDHDR,x=Math.max(0,w-65535),h=x,y=t.length,v=-1,b=0;for((typeof l.trailingSpace=="boolean"?l.trailingSpace:!1)&&(x=0),w;w>=h;w--)if(t[w]===80){if(t.readUInt32LE(w)===ne.Constants.ENDSIG){v=w,b=w,y=w+ne.Constants.ENDHDR,h=w-ne.Constants.END64HDR;continue}if(t.readUInt32LE(w)===ne.Constants.END64SIG){h=x;continue}if(t.readUInt32LE(w)===ne.Constants.ZIP64SIG){v=w,y=w+ne.readBigUInt64LE(t,w+ne.Constants.ZIP64SIZE)+ne.Constants.ZIP64LEAD;break}}if(v==-1)throw ne.Errors.INVALID_FORMAT();s.loadFromBinary(t.slice(v,y)),s.commentLength&&(i=t.slice(b+ne.Constants.ENDHDR)),m&&f()}function E(){r.length>1&&!u&&r.sort((m,w)=>m.entryName.toLowerCase().localeCompare(w.entryName.toLowerCase()))}return{get entries(){return o||f(),r.filter(m=>!c.has(m))},get comment(){return d.decode(i)},set comment(m){i=ne.toBuffer(m,d.encode),s.commentLength=i.length},getEntryCount:function(){return o?r.length:s.diskEntries},forEach:function(m){this.entries.forEach(m)},getEntry:function(m){return o||f(),n[m]||null},setEntry:function(m){o||f(),r.push(m),n[m.entryName]=m,s.totalEntries=r.length},deleteFile:function(m,w=!0){o||f();let x=n[m];this.getEntryChildren(x,w).map(y=>y.entryName).forEach(this.deleteEntry)},deleteEntry:function(m){o||f();let w=n[m],x=r.indexOf(w);x>=0&&(r.splice(x,1),delete n[m],s.totalEntries=r.length)},getEntryChildren:function(m,w=!0){if(o||f(),typeof m=="object")if(m.isDirectory&&w){let x=[],h=m.entryName;for(let y of r)y.entryName.startsWith(h)&&x.push(y);return x}else return[m];return[]},getChildCount:function(m){if(m&&m.isDirectory){let w=this.getEntryChildren(m);return w.includes(m)?w.length-1:w.length}return 0},compressToBuffer:function(){o||f(),E();let m=[],w=[],x=0,h=0;s.size=0,s.offset=0;let y=0;for(let _ of this.entries){let C=_.getCompressedData();_.header.offset=h;let D=_.packLocalHeader(),I=D.length+C.length;h+=I,m.push(D),m.push(C);let T=_.packCentralHeader();w.push(T),s.size+=T.length,x+=I+T.length,y++}x+=s.mainHeaderSize,s.offset=h,s.totalEntries=y,h=0;let v=Buffer.alloc(x);for(let _ of m)_.copy(v,h),h+=_.length;for(let _ of w)_.copy(v,h),h+=_.length;let b=s.toBinary();return i&&i.copy(b,ne.Constants.ENDHDR),b.copy(v,h),t=v,o=!1,v},toAsyncBuffer:function(m,w,x,h){try{o||f(),E();let y=[],v=[],b=0,_=0,C=0;s.size=0,s.offset=0;let D=function(I){if(I.length>0){let T=I.shift(),me=T.entryName+T.extra.toString();x&&x(me),T.getCompressedDataAsync(function(le){h&&h(me),T.header.offset=_;let wr=T.packLocalHeader(),Ll=wr.length+le.length;_+=Ll,y.push(wr),y.push(le);let lo=T.packCentralHeader();v.push(lo),s.size+=lo.length,b+=Ll+lo.length,C++,D(I)})}else{b+=s.mainHeaderSize,s.offset=_,s.totalEntries=C,_=0;let T=Buffer.alloc(b);y.forEach(function(le){le.copy(T,_),_+=le.length}),v.forEach(function(le){le.copy(T,_),_+=le.length});let me=s.toBinary();i&&i.copy(me,ne.Constants.ENDHDR),me.copy(T,_),t=T,o=!1,m(T)}};D(Array.from(this.entries))}catch(y){w(y)}}}}});var kp=S((KT,Np)=>{var W=jr(),V=require("path"),Iv=xc(),Cv=Op(),cr=(...t)=>W.findLast(t,e=>typeof e=="boolean"),Dp=(...t)=>W.findLast(t,e=>typeof e=="string"),Tv=(...t)=>W.findLast(t,e=>typeof e=="function"),Ov={noSort:!1,readEntries:!1,method:W.Constants.NONE,fs:null};Np.exports=function(t,e){let r=null,n=Object.assign(Object.create(null),Ov);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(n,t),t=n.input?n.input:void 0,n.input&&delete n.input),Buffer.isBuffer(t)&&(r=t,n.method=W.Constants.BUFFER,t=void 0)),Object.assign(n,e);let i=new W(n);if((typeof n.decoder!="object"||typeof n.decoder.encode!="function"||typeof n.decoder.decode!="function")&&(n.decoder=W.decoder),t&&typeof t=="string")if(i.fs.existsSync(t))n.method=W.Constants.FILE,n.filename=t,r=i.fs.readFileSync(t);else throw W.Errors.INVALID_FILENAME();let s=new Cv(r,n),{canonical:o,sanitize:a,zipnamefix:c}=W;function l(f){if(f&&s){var p;if(typeof f=="string"&&(p=s.getEntry(V.posix.normalize(f))),typeof f=="object"&&typeof f.entryName<"u"&&typeof f.header<"u"&&(p=s.getEntry(f.entryName)),p)return p}return null}function u(f){let{join:p,normalize:E,sep:m}=V.posix;return p(".",E(m+f.split("\\").join(m)+m))}function d(f){return f instanceof RegExp?(function(p){return function(E){return p.test(E)}})(f):typeof f!="function"?()=>!0:f}let g=(f,p)=>{let E=p.slice(-1);return E=E===i.sep?i.sep:"",V.relative(f,p)+E};return{readFile:function(f,p){var E=l(f);return E&&E.getData(p)||null},childCount:function(f){let p=l(f);if(p)return s.getChildCount(p)},readFileAsync:function(f,p){var E=l(f);E?E.getDataAsync(p):p(null,"getEntry failed for:"+f)},readAsText:function(f,p){var E=l(f);if(E){var m=E.getData();if(m&&m.length)return m.toString(p||"utf8")}return""},readAsTextAsync:function(f,p,E){var m=l(f);m?m.getDataAsync(function(w,x){if(x){p(w,x);return}w&&w.length?p(w.toString(E||"utf8")):p("")}):p("")},deleteFile:function(f,p=!0){var E=l(f);E&&s.deleteFile(E.entryName,p)},deleteEntry:function(f){var p=l(f);p&&s.deleteEntry(p.entryName)},addZipComment:function(f){s.comment=f},getZipComment:function(){return s.comment||""},addZipEntryComment:function(f,p){var E=l(f);E&&(E.comment=p)},getZipEntryComment:function(f){var p=l(f);return p&&p.comment||""},updateFile:function(f,p){var E=l(f);E&&E.setData(p)},addLocalFile:function(f,p,E,m){if(i.fs.existsSync(f)){p=p?u(p):"";let w=V.win32.basename(V.win32.normalize(f));p+=E||w;let x=i.fs.statSync(f),h=x.isFile()?i.fs.readFileSync(f):Buffer.alloc(0);x.isDirectory()&&(p+=i.sep),this.addFile(p,h,m,x)}else throw W.Errors.FILE_NOT_FOUND(f)},addLocalFileAsync:function(f,p){f=typeof f=="object"?f:{localPath:f};let E=V.resolve(f.localPath),{comment:m}=f,{zipPath:w,zipName:x}=f,h=this;i.fs.stat(E,function(y,v){if(y)return p(y,!1);w=w?u(w):"";let b=V.win32.basename(V.win32.normalize(E));if(w+=x||b,v.isFile())i.fs.readFile(E,function(_,C){return _?p(_,!1):(h.addFile(w,C,m,v),setImmediate(p,void 0,!0))});else if(v.isDirectory())return w+=i.sep,h.addFile(w,Buffer.alloc(0),m,v),setImmediate(p,void 0,!0)})},addLocalFolder:function(f,p,E){if(E=d(E),p=p?u(p):"",f=V.normalize(f),i.fs.existsSync(f)){let m=i.findFiles(f),w=this;if(m.length)for(let x of m){let h=V.join(p,g(f,x));E(h)&&w.addLocalFile(x,V.dirname(h))}}else throw W.Errors.FILE_NOT_FOUND(f)},addLocalFolderAsync:function(f,p,E,m){m=d(m),E=E?u(E):"",f=V.normalize(f);var w=this;i.fs.open(f,"r",function(x){if(x&&x.code==="ENOENT")p(void 0,W.Errors.FILE_NOT_FOUND(f));else if(x)p(void 0,x);else{var h=i.findFiles(f),y=-1,v=function(){if(y+=1,y<h.length){var b=h[y],_=g(f,b).split("\\").join("/");_=_.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),m(_)?i.fs.stat(b,function(C,D){C&&p(void 0,C),D.isFile()?i.fs.readFile(b,function(I,T){I?p(void 0,I):(w.addFile(E+_,T,"",D),v())}):(w.addFile(E+_+"/",Buffer.alloc(0),"",D),v())}):process.nextTick(()=>{v()})}else p(!0,void 0)};v()}})},addLocalFolderAsync2:function(f,p){let E=this;f=typeof f=="object"?f:{localPath:f},localPath=V.resolve(u(f.localPath));let{zipPath:m,filter:w,namefix:x}=f;w instanceof RegExp?w=(function(v){return function(b){return v.test(b)}})(w):typeof w!="function"&&(w=function(){return!0}),m=m?u(m):"",x=="latin1"&&(x=v=>v.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof x!="function"&&(x=v=>v);let h=v=>V.join(m,x(g(localPath,v))),y=v=>V.win32.basename(V.win32.normalize(x(v)));i.fs.open(localPath,"r",function(v){v&&v.code==="ENOENT"?p(void 0,W.Errors.FILE_NOT_FOUND(localPath)):v?p(void 0,v):i.findFilesAsync(localPath,function(b,_){if(b)return p(b);_=_.filter(C=>w(h(C))),_.length||p(void 0,!1),setImmediate(_.reverse().reduce(function(C,D){return function(I,T){if(I||T===!1)return setImmediate(C,I,!1);E.addLocalFileAsync({localPath:D,zipPath:V.dirname(h(D)),zipName:y(D)},C)}},p))})})},addLocalFolderPromise:function(f,p){return new Promise((E,m)=>{this.addLocalFolderAsync2(Object.assign({localPath:f},p),(w,x)=>{w&&m(w),x&&E(this)})})},addFile:function(f,p,E,m){f=c(f);let w=l(f),x=w!=null;x||(w=new Iv(n),w.entryName=f),w.comment=E||"";let h=typeof m=="object"&&m instanceof i.fs.Stats;h&&(w.header.time=m.mtime);var y=w.isDirectory?16:0;let v=w.isDirectory?16384:32768;return h?v|=4095&m.mode:typeof m=="number"?v|=4095&m:v|=w.isDirectory?493:420,y=(y|v<<16)>>>0,w.attr=y,w.setData(p),x||s.setEntry(w),w},getEntries:function(f){return s.password=f,s?s.entries:[]},getEntry:function(f){return l(f)},getEntryCount:function(){return s.getEntryCount()},forEach:function(f){return s.forEach(f)},extractEntryTo:function(f,p,E,m,w,x){m=cr(!1,m),w=cr(!1,w),E=cr(!0,E),x=Dp(w,x);var h=l(f);if(!h)throw W.Errors.NO_ENTRY();var y=o(h.entryName),v=a(p,x&&!h.isDirectory?x:E?y:V.basename(y));if(h.isDirectory){var b=s.getEntryChildren(h);return b.forEach(function(D){if(D.isDirectory)return;var I=D.getData();if(!I)throw W.Errors.CANT_EXTRACT_FILE();var T=o(D.entryName),me=a(p,E?T:V.basename(T));let le=w?D.header.fileAttr:void 0;i.writeFileTo(me,I,m,le)}),!0}var _=h.getData(s.password);if(!_)throw W.Errors.CANT_EXTRACT_FILE();if(i.fs.existsSync(v)&&!m)throw W.Errors.CANT_OVERRIDE();let C=w?f.header.fileAttr:void 0;return i.writeFileTo(v,_,m,C),!0},test:function(f){if(!s)return!1;for(var p in s.entries)try{if(p.isDirectory)continue;var E=s.entries[p].getData(f);if(!E)return!1}catch{return!1}return!0},extractAllTo:function(f,p,E,m){if(E=cr(!1,E),m=Dp(E,m),p=cr(!1,p),!s)throw W.Errors.NO_ZIP();s.entries.forEach(function(w){var x=a(f,o(w.entryName));if(w.isDirectory){i.makeDir(x);return}var h=w.getData(m);if(!h)throw W.Errors.CANT_EXTRACT_FILE();let y=E?w.header.fileAttr:void 0;i.writeFileTo(x,h,p,y);try{i.fs.utimesSync(x,w.header.time,w.header.time)}catch{throw W.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(f,p,E,m){if(m=Tv(p,E,m),E=cr(!1,E),p=cr(!1,p),!m)return new Promise((v,b)=>{this.extractAllToAsync(f,p,E,function(_){_?b(_):v(this)})});if(!s){m(W.Errors.NO_ZIP());return}f=V.resolve(f);let w=v=>a(f,V.normalize(o(v.entryName))),x=(v,b)=>new Error(v+': "'+b+'"'),h=[],y=[];s.entries.forEach(v=>{v.isDirectory?h.push(v):y.push(v)});for(let v of h){let b=w(v),_=E?v.header.fileAttr:void 0;try{i.makeDir(b),_&&i.fs.chmodSync(b,_),i.fs.utimesSync(b,v.header.time,v.header.time)}catch{m(x("Unable to create folder",b))}}y.reverse().reduce(function(v,b){return function(_){if(_)v(_);else{let C=V.normalize(o(b.entryName)),D=a(f,C);b.getDataAsync(function(I,T){if(T)v(T);else if(!I)v(W.Errors.CANT_EXTRACT_FILE());else{let me=E?b.header.fileAttr:void 0;i.writeFileToAsync(D,I,p,me,function(le){le||v(x("Unable to write file",D)),i.fs.utimes(D,b.header.time,b.header.time,function(wr){wr?v(x("Unable to set times",D)):v()})})}})}}},m)()},writeZip:function(f,p){if(arguments.length===1&&typeof f=="function"&&(p=f,f=""),!f&&n.filename&&(f=n.filename),!!f){var E=s.compressToBuffer();if(E){var m=i.writeFileTo(f,E,!0);typeof p=="function"&&p(m?null:new Error("failed"),"")}}},writeZipPromise:function(f,p){let{overwrite:E,perm:m}=Object.assign({overwrite:!0},p);return new Promise((w,x)=>{!f&&n.filename&&(f=n.filename),f||x("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(h=>{let y=v=>v?w(v):x("ADM-ZIP: Wasn't able to write zip file");i.writeFileToAsync(f,h,E,m,y)},x)})},toBufferPromise:function(){return new Promise((f,p)=>{s.toAsyncBuffer(f,p)})},toBuffer:function(f,p,E,m){return typeof f=="function"?(s.toAsyncBuffer(f,p,E,m),null):s.compressToBuffer()}}}});var Fp=S((eO,Ap)=>{Ap.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var vc=S((rO,Bp)=>{var $p=Fp();Bp.exports=class{constructor(e){this.hwm=e||16,this.head=new $p(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let r=this.head;this.head=r.next=new $p(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var zr=S((nO,Up)=>{function Dv(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function Nv(t){return Buffer.isEncoding(t)}function kv(t,e,r){return Buffer.alloc(t,e,r)}function Av(t){return Buffer.allocUnsafe(t)}function Fv(t){return Buffer.allocUnsafeSlow(t)}function $v(t,e){return Buffer.byteLength(t,e)}function Bv(t,e){return Buffer.compare(t,e)}function Uv(t,e){return Buffer.concat(t,e)}function Mv(t,e,r,n,i){return U(t).copy(e,r,n,i)}function qv(t,e){return U(t).equals(e)}function Hv(t,e,r,n,i){return U(t).fill(e,r,n,i)}function Wv(t,e,r){return Buffer.from(t,e,r)}function jv(t,e,r,n){return U(t).includes(e,r,n)}function Gv(t,e,r,n){return U(t).indexOf(e,r,n)}function zv(t,e,r,n){return U(t).lastIndexOf(e,r,n)}function Vv(t){return U(t).swap16()}function Zv(t){return U(t).swap32()}function Jv(t){return U(t).swap64()}function U(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function Xv(t,e,r,n){return U(t).toString(e,r,n)}function Yv(t,e,r,n,i){return U(t).write(e,r,n,i)}function Kv(t,e,r){return U(t).writeDoubleLE(e,r)}function Qv(t,e,r){return U(t).writeFloatLE(e,r)}function e_(t,e,r){return U(t).writeUInt32LE(e,r)}function t_(t,e,r){return U(t).writeInt32LE(e,r)}function r_(t,e){return U(t).readDoubleLE(e)}function n_(t,e){return U(t).readFloatLE(e)}function i_(t,e){return U(t).readUInt32LE(e)}function s_(t,e){return U(t).readInt32LE(e)}function o_(t,e,r){return U(t).writeDoubleBE(e,r)}function a_(t,e,r){return U(t).writeFloatBE(e,r)}function c_(t,e,r){return U(t).writeUInt32BE(e,r)}function l_(t,e,r){return U(t).writeInt32BE(e,r)}function u_(t,e){return U(t).readDoubleBE(e)}function f_(t,e){return U(t).readFloatBE(e)}function d_(t,e){return U(t).readUInt32BE(e)}function h_(t,e){return U(t).readInt32BE(e)}Up.exports={isBuffer:Dv,isEncoding:Nv,alloc:kv,allocUnsafe:Av,allocUnsafeSlow:Fv,byteLength:$v,compare:Bv,concat:Uv,copy:Mv,equals:qv,fill:Hv,from:Wv,includes:jv,indexOf:Gv,lastIndexOf:zv,swap16:Vv,swap32:Zv,swap64:Jv,toBuffer:U,toString:Xv,write:Yv,writeDoubleLE:Kv,writeFloatLE:Qv,writeUInt32LE:e_,writeInt32LE:t_,readDoubleLE:r_,readFloatLE:n_,readUInt32LE:i_,readInt32LE:s_,writeDoubleBE:o_,writeFloatBE:a_,writeUInt32BE:c_,writeInt32BE:l_,readDoubleBE:u_,readFloatBE:f_,readUInt32BE:d_,readInt32BE:h_}});var qp=S((sO,Mp)=>{var p_=zr();Mp.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return p_.toString(e,this.encoding)}flush(){return""}}});var Wp=S((aO,Hp)=>{var m_=zr();Hp.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let n=!0;for(let i=Math.max(0,e.byteLength-4),s=e.byteLength;i<s&&n;i++)n=e[i]<=127;if(n)return m_.toString(e,"utf8")}let r="";for(let n=0,i=e.byteLength;n<i;n++){let s=e[n];if(this.bytesNeeded===0){s<=127?r+=String.fromCharCode(s):(this.bytesSeen=1,s>=194&&s<=223?(this.bytesNeeded=2,this.codePoint=s&31):s>=224&&s<=239?(s===224?this.lowerBoundary=160:s===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=s&15):s>=240&&s<=244?(s===240&&(this.lowerBoundary=144),s===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=s&7):r+="\uFFFD");continue}if(s<this.lowerBoundary||s>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,r+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|s&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(r+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return r}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var Gp=S((lO,jp)=>{var g_=qp(),E_=Wp();jp.exports=class{constructor(e="utf8"){switch(this.encoding=w_(e),this.encoding){case"utf8":this.decoder=new E_;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new g_(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let r="";return e&&(r=this.push(e)),r+=this.decoder.flush(),r}};function w_(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var $c=S((uO,pm)=>{var{EventEmitter:y_}=require("events"),$s=new Error("Stream was destroyed"),_c=new Error("Premature close"),Yp=vc(),S_=Gp(),j=(1<<29)-1,rt=1,Tc=2,lr=4,Xn=8,Kp=j^rt,x_=j^Tc,ti=16,Vr=32,Xr=64,At=128,ri=256,Oc=512,ur=1024,bc=2048,Dc=4096,Nc=8192,je=16384,kt=32768,Bs=65536,fr=131072,Qp=ri|Oc,v_=ti|Bs,__=Xr|ti,b_=Dc|At,kc=ri|fr,L_=j^ti,R_=j^Xr,P_=j^(Xr|Bs),zp=j^Bs,I_=j^ri,C_=j^(At|Nc),T_=j^ur,Vp=j^Qp,em=j^kt,O_=j^Vr,tm=j^fr,D_=j^kc,pt=1<<18,Jr=2<<18,ni=4<<18,dr=8<<18,ii=16<<18,Ft=32<<18,Lc=64<<18,Zr=128<<18,Ac=256<<18,hr=512<<18,Us=1024<<18,N_=j^(pt|Ac),rm=j^ni,k_=j^(pt|hr),A_=j^ii,F_=j^dr,nm=j^Zr,$_=j^Jr,im=j^Us,Yn=ti|pt,sm=j^Yn,Fc=je|Ft,nt=lr|Xn|Tc,be=nt|rt,om=nt|Fc,B_=rm&R_,Ms=Zr|kt,U_=Ms&sm,am=be|U_,M_=be|ur|je,Zp=be|je|At,q_=be|ur|At,H_=be|Dc|At|Nc,W_=be|ti|ur|je|Bs|fr,j_=nt|ur|je,G_=Vr|be|kt|Xr,z_=kt|rt,V_=be|hr|Ft,Z_=dr|ii,cm=dr|pt,J_=dr|ii|be|pt,Jp=be|pt|dr|Us,X_=ni|pt,Y_=pt|Ac,K_=be|hr|cm|Ft,Q_=ii|nt|hr|Ft,eb=Jr|be|Zr|ni,tb=hr|Ft|nt,Ds=Symbol.asyncIterator||Symbol("asyncIterator"),Ns=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapWritable:i,byteLength:s,byteLengthWritable:o}={}){this.stream=e,this.queue=new Yp,this.highWaterMark=r,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||s||hm,this.map=i||n,this.afterWrite=ib.bind(this),this.afterUpdateNextTick=ab.bind(this)}get ended(){return(this.stream._duplexState&Ft)!==0}push(e){return(this.stream._duplexState&tb)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=dr,!0):(this.stream._duplexState|=Z_,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=F_),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|hr)&rm}autoBatch(e,r){let n=[],i=this.stream;for(n.push(e);(i._duplexState&Jp)===cm;)n.push(i._writableState.shift());if((i._duplexState&be)!==0)return r(null);i._writev(n,r)}update(){let e=this.stream;e._duplexState|=Jr;do{for(;(e._duplexState&Jp)===dr;){let r=this.shift();e._duplexState|=Y_,e._write(r,this.afterWrite)}(e._duplexState&X_)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=$_}updateNonPrimary(){let e=this.stream;if((e._duplexState&K_)===hr){e._duplexState=e._duplexState|pt,e._final(nb.bind(this));return}if((e._duplexState&nt)===lr){(e._duplexState&Ms)===0&&(e._duplexState|=Yn,e._destroy(lm.bind(this)));return}(e._duplexState&am)===rt&&(e._duplexState=(e._duplexState|Yn)&Kp,e._open(um.bind(this)))}continueUpdate(){return(this.stream._duplexState&Zr)===0?!1:(this.stream._duplexState&=nm,!0)}updateCallback(){(this.stream._duplexState&eb)===ni?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&Zr)===0&&(this.stream._duplexState|=Zr,(this.stream._duplexState&Jr)===0&&queueMicrotask(this.afterUpdateNextTick))}},Rc=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapReadable:i,byteLength:s,byteLengthReadable:o}={}){this.stream=e,this.queue=new Yp,this.highWaterMark=r===0?1:r,this.buffered=0,this.readAhead=r>0,this.error=null,this.pipeline=null,this.byteLength=o||s||hm,this.map=i||n,this.pipeTo=null,this.afterRead=sb.bind(this),this.afterUpdateNextTick=ob.bind(this)}get ended(){return(this.stream._duplexState&je)!==0}pipe(e,r){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof r!="function"&&(r=null),this.stream._duplexState|=Oc,this.pipeTo=e,this.pipeline=new Ic(this.stream,e,r),r&&this.stream.on("error",Xp),ei(e))e._writableState.pipeline=this.pipeline,r&&e.on("error",Xp),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let n=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",n),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",rb.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let r=this.stream;return e===null?(this.highWaterMark=0,r._duplexState=(r._duplexState|ur)&P_,!1):this.map!==null&&(e=this.map(e),e===null)?(r._duplexState&=zp,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),r._duplexState=(r._duplexState|At)&zp,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=C_),e}unshift(e){let r=[this.map!==null?this.map(e):e];for(;this.buffered>0;)r.push(this.shift());for(let n=0;n<r.length-1;n++){let i=r[n];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(r[r.length-1])}read(){let e=this.stream;if((e._duplexState&Zp)===At){let r=this.shift();return this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=Vp),(e._duplexState&bc)!==0&&e.emit("data",r),r}return this.readAhead===!1&&(e._duplexState|=fr,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&Zp)===At&&(e._duplexState&Qp)!==0;){let r=this.shift();this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=Vp),(e._duplexState&bc)!==0&&e.emit("data",r)}}update(){let e=this.stream;e._duplexState|=Vr;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&W_)===fr;)e._duplexState|=v_,e._read(this.afterRead),this.drain();(e._duplexState&H_)===b_&&(e._duplexState|=Nc,e.emit("readable")),(e._duplexState&__)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=O_}updateNonPrimary(){let e=this.stream;if((e._duplexState&q_)===ur&&(e._duplexState=(e._duplexState|je)&T_,e.emit("end"),(e._duplexState&om)===Fc&&(e._duplexState|=lr),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&nt)===lr){(e._duplexState&Ms)===0&&(e._duplexState|=Yn,e._destroy(lm.bind(this)));return}(e._duplexState&am)===rt&&(e._duplexState=(e._duplexState|Yn)&Kp,e._open(um.bind(this)))}continueUpdate(){return(this.stream._duplexState&kt)===0?!1:(this.stream._duplexState&=em,!0)}updateCallback(){(this.stream._duplexState&G_)===Xr?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&z_)===0&&(this.stream._duplexState|=kt,(this.stream._duplexState&Vr)===0&&queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&kt)===0&&(this.stream._duplexState|=kt,(this.stream._duplexState&Vr)===0&&queueMicrotask(this.afterUpdateNextTick))}},Pc=class{constructor(e){this.data=null,this.afterTransform=ub.bind(e),this.afterFinal=null}},Ic=class{constructor(e,r,n){this.from=e,this.to=r,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,r){if(r&&(this.error=r),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&je)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&je)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function rb(){this.stream._duplexState|=Oc,this.updateCallback()}function nb(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&nt)===0&&(e._duplexState|=Ft,e.emit("finish")),(e._duplexState&om)===Fc&&(e._duplexState|=lr),e._duplexState&=k_,(e._duplexState&Jr)===0?this.update():this.updateNextTick()}function lm(t){let e=this.stream;!t&&this.error!==$s&&(t=this.error),t&&e.emit("error",t),e._duplexState|=Xn,e.emit("close");let r=e._readableState,n=e._writableState;if(r!==null&&r.pipeline!==null&&r.pipeline.done(e,t),n!==null){for(;n.drains!==null&&n.drains.length>0;)n.drains.shift().resolve(!1);n.pipeline!==null&&n.pipeline.done(e,t)}}function ib(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=N_,this.drains!==null&&lb(this.drains),(e._duplexState&J_)===ii&&(e._duplexState&=A_,(e._duplexState&Lc)===Lc&&e.emit("drain")),this.updateCallback()}function sb(t){t&&this.stream.destroy(t),this.stream._duplexState&=L_,this.readAhead===!1&&(this.stream._duplexState&ri)===0&&(this.stream._duplexState&=tm),this.updateCallback()}function ob(){(this.stream._duplexState&Vr)===0&&(this.stream._duplexState&=em,this.update())}function ab(){(this.stream._duplexState&Jr)===0&&(this.stream._duplexState&=nm,this.update())}function lb(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function um(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&lr)===0&&((e._duplexState&M_)===0&&(e._duplexState|=Xr),(e._duplexState&V_)===0&&(e._duplexState|=ni),e.emit("open")),e._duplexState&=sm,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function ub(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function fb(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=bc|kc,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=Dc,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=Lc,this._writableState.updateNextTick())}var Kn=class extends y_{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",xb.bind(this))),this.on("newListener",fb)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&Xn)!==0}get destroying(){return(this._duplexState&nt)!==0}destroy(e){(this._duplexState&nt)===0&&(e||(e=$s),this._duplexState=(this._duplexState|lr)&B_,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=Tc,this._predestroy(),this._duplexState&=x_,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},ks=class t extends Kn{constructor(e){super(e),this._duplexState|=rt|Ft|fr,this._readableState=new Rc(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=tm),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let r=new S_(e),n=this._readableState.map||pb;return this._readableState.map=i,this;function i(s){let o=r.push(s);return o===""&&(s.byteLength!==0||r.remaining>0)?null:n(o)}}_read(e){e(null)}pipe(e,r){return this._readableState.updateNextTick(),this._readableState.pipe(e,r),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=kc,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?D_:I_,this}static _fromAsyncIterator(e,r){let n,i=new t({...r,read(o){e.next().then(s).then(o.bind(null,null)).catch(o)},predestroy(){n=e.return()},destroy(o){if(!n)return o(null);n.then(o.bind(null,null)).catch(o)}});return i;function s(o){o.done?i.push(null):i.push(o.value)}}static from(e,r){if(wb(e))return e;if(e[Ds])return this._fromAsyncIterator(e[Ds](),r);Array.isArray(e)||(e=e===void 0?[]:[e]);let n=0;return new t({...r,read(i){this.push(n===e.length?null:e[n++]),i(null)}})}static isBackpressured(e){return(e._duplexState&j_)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&ri)===0}[Ds](){let e=this,r=null,n=null,i=null;return this.on("error",l=>{r=l}),this.on("readable",s),this.on("close",o),{[Ds](){return this},next(){return new Promise(function(l,u){n=l,i=u;let d=e.read();d!==null?a(d):(e._duplexState&Xn)!==0&&a(null)})},return(){return c(null)},throw(l){return c(l)}};function s(){n!==null&&a(e.read())}function o(){n!==null&&a(null)}function a(l){i!==null&&(r?i(r):l===null&&(e._duplexState&je)===0?i($s):n({value:l,done:l===null}),i=n=null)}function c(l){return e.destroy(l),new Promise((u,d)=>{if(e._duplexState&Xn)return u({value:void 0,done:!0});e.once("close",function(){l?d(l):u({value:void 0,done:!0})})})}}},As=class extends Kn{constructor(e){super(e),this._duplexState|=rt|je,this._writableState=new Ns(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=Us}uncork(){this._duplexState&=im,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&Q_)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let r=e._writableState,i=(vb(e)?Math.min(1,r.queue.length):r.queue.length)+(e._duplexState&Ac?1:0);return i===0?Promise.resolve(!0):(r.drains===null&&(r.drains=[]),new Promise(s=>{r.drains.push({writes:i,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Qn=class extends ks{constructor(e){super(e),this._duplexState=rt|this._duplexState&fr,this._writableState=new Ns(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=Us}uncork(){this._duplexState&=im,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Fs=class extends Qn{constructor(e){super(e),this._transformState=new Pc(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,r){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let r=this._transformState.data;this._transformState.data=null,e(null),this._transform(r,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,r){r(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(db.bind(this))}},Cc=class extends Fs{};function db(t,e){let r=this._transformState.afterFinal;if(t)return r(t);e!=null&&this.push(e),this.push(null),r(null)}function hb(...t){return new Promise((e,r)=>fm(...t,n=>{if(n)return r(n);e()}))}function fm(t,...e){let r=Array.isArray(t)?[...t,...e]:[t,...e],n=r.length&&typeof r[r.length-1]=="function"?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let i=r[0],s=null,o=null;for(let l=1;l<r.length;l++)s=r[l],ei(i)?i.pipe(s,c):(a(i,!0,l>1,c),i.pipe(s)),i=s;if(n){let l=!1,u=ei(s)||!!(s._writableState&&s._writableState.autoDestroy);s.on("error",d=>{o===null&&(o=d)}),s.on("finish",()=>{l=!0,u||n(o)}),u&&s.on("close",()=>n(o||(l?null:_c)))}return s;function a(l,u,d,g){l.on("error",g),l.on("close",f);function f(){if(u&&l._readableState&&!l._readableState.ended||d&&l._writableState&&!l._writableState.ended)return g(_c)}}function c(l){if(!(!l||o)){o=l;for(let u of r)u.destroy(l)}}}function pb(t){return t}function dm(t){return!!t._readableState||!!t._writableState}function ei(t){return typeof t._duplexState=="number"&&dm(t)}function mb(t){return!!t._readableState&&t._readableState.ended}function gb(t){return!!t._writableState&&t._writableState.ended}function Eb(t,e={}){let r=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&r===$s?null:r}function wb(t){return ei(t)&&t.readable}function yb(t){return(t._duplexState&rt)!==rt||(t._duplexState&Ms)!==0}function Sb(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function hm(t){return Sb(t)?t.byteLength:1024}function Xp(){}function xb(){this.destroy(new Error("Stream aborted."))}function vb(t){return t._writev!==As.prototype._writev&&t._writev!==Qn.prototype._writev}pm.exports={pipeline:fm,pipelinePromise:hb,isStream:dm,isStreamx:ei,isEnded:mb,isFinished:gb,isDisturbed:yb,getStreamError:Eb,Stream:Kn,Writable:As,Readable:ks,Duplex:Qn,Transform:Fs,PassThrough:Cc}});var Mc=S(Kr=>{var A=zr(),_b="0000000000000000000",bb="7777777777777777777",qs=48,mm=A.from([117,115,116,97,114,0]),Lb=A.from([qs,qs]),Rb=A.from([117,115,116,97,114,32]),Pb=A.from([32,0]),Ib=4095,si=257,Uc=263;Kr.decodeLongPath=function(e,r){return Yr(e,0,e.length,r)};Kr.encodePax=function(e){let r="";e.name&&(r+=Bc(" path="+e.name+`
`)),e.linkname&&(r+=Bc(" linkpath="+e.linkname+`
`));let n=e.pax;if(n)for(let i in n)r+=Bc(" "+i+"="+n[i]+`
`);return A.from(r)};Kr.decodePax=function(e){let r={};for(;e.length;){let n=0;for(;n<e.length&&e[n]!==32;)n++;let i=parseInt(A.toString(e.subarray(0,n)),10);if(!i)return r;let s=A.toString(e.subarray(n+1,i-1)),o=s.indexOf("=");if(o===-1)return r;r[s.slice(0,o)]=s.slice(o+1),e=e.subarray(i)}return r};Kr.encode=function(e){let r=A.alloc(512),n=e.name,i="";if(e.typeflag===5&&n[n.length-1]!=="/"&&(n+="/"),A.byteLength(n)!==n.length)return null;for(;A.byteLength(n)>100;){let s=n.indexOf("/");if(s===-1)return null;i+=i?"/"+n.slice(0,s):n.slice(0,s),n=n.slice(s+1)}return A.byteLength(n)>100||A.byteLength(i)>155||e.linkname&&A.byteLength(e.linkname)>100?null:(A.write(r,n),A.write(r,Bt(e.mode&Ib,6),100),A.write(r,Bt(e.uid,6),108),A.write(r,Bt(e.gid,6),116),Ab(e.size,r,124),A.write(r,Bt(e.mtime.getTime()/1e3|0,11),136),r[156]=qs+Nb(e.type),e.linkname&&A.write(r,e.linkname,157),A.copy(mm,r,si),A.copy(Lb,r,Uc),e.uname&&A.write(r,e.uname,265),e.gname&&A.write(r,e.gname,297),A.write(r,Bt(e.devmajor||0,6),329),A.write(r,Bt(e.devminor||0,6),337),i&&A.write(r,i,345),A.write(r,Bt(Em(r),6),148),r)};Kr.decode=function(e,r,n){let i=e[156]===0?0:e[156]-qs,s=Yr(e,0,100,r),o=$t(e,100,8),a=$t(e,108,8),c=$t(e,116,8),l=$t(e,124,12),u=$t(e,136,12),d=Db(i),g=e[157]===0?null:Yr(e,157,100,r),f=Yr(e,265,32),p=Yr(e,297,32),E=$t(e,329,8),m=$t(e,337,8),w=Em(e);if(w===256)return null;if(w!==$t(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Cb(e))e[345]&&(s=Yr(e,345,155,r)+"/"+s);else if(!Tb(e)){if(!n)throw new Error("Invalid tar header: unknown format.")}return i===0&&s&&s[s.length-1]==="/"&&(i=5),{name:s,mode:o,uid:a,gid:c,size:l,mtime:new Date(1e3*u),type:d,linkname:g,uname:f,gname:p,devmajor:E,devminor:m,pax:null}};function Cb(t){return A.equals(mm,t.subarray(si,si+6))}function Tb(t){return A.equals(Rb,t.subarray(si,si+6))&&A.equals(Pb,t.subarray(Uc,Uc+2))}function Ob(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Db(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function Nb(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function gm(t,e,r,n){for(;r<n;r++)if(t[r]===e)return r;return n}function Em(t){let e=256;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e}function Bt(t,e){return t=t.toString(8),t.length>e?bb.slice(0,e)+" ":_b.slice(0,e-t.length)+t+" "}function kb(t,e,r){e[r]=128;for(let n=11;n>0;n--)e[r+n]=t&255,t=Math.floor(t/256)}function Ab(t,e,r){t.toString(8).length>11?kb(t,e,r):A.write(e,Bt(t,11),r)}function Fb(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let r=[],n;for(n=t.length-1;n>0;n--){let o=t[n];e?r.push(o):r.push(255-o)}let i=0,s=r.length;for(n=0;n<s;n++)i+=r[n]*Math.pow(256,n);return e?i:-1*i}function $t(t,e,r){if(t=t.subarray(e,e+r),e=0,t[e]&128)return Fb(t);{for(;e<t.length&&t[e]===32;)e++;let n=Ob(gm(t,32,e,t.length),t.length,t.length);for(;e<n&&t[e]===0;)e++;return n===e?0:parseInt(A.toString(t.subarray(e,n)),8)}}function Yr(t,e,r,n){return A.toString(t.subarray(e,gm(t,0,e,e+r)),n)}function Bc(t){let e=A.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t}});var vm=S((dO,xm)=>{var{Writable:$b,Readable:Bb,getStreamError:wm}=$c(),Ub=vc(),ym=zr(),Qr=Mc(),Mb=ym.alloc(0),Hc=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new Ub,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return Mb;let r=this._next(e);if(e===r.byteLength)return r;let n=[r];for(;(e-=r.byteLength)>0;)r=this._next(e),n.push(r);return ym.concat(n)}_next(e){let r=this.queue.peek(),n=r.byteLength-this._offset;if(e>=n){let i=this._offset?r.subarray(this._offset,r.byteLength):r;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,i}return this.buffered-=e,this.shifted+=e,r.subarray(this._offset,this._offset+=e)}},Wc=class extends Bb{constructor(e,r,n){super(),this.header=r,this.offset=n,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(wm(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=Sm(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},jc=class extends $b{constructor(e){super(e),e||(e={}),this._buffer=new Hc,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=qc,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=Qr.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=Qr.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=Qr.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=Qr.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?Qr.decodePax(e):Object.assign({},this._paxGlobal,Qr.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=Sm(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(r){return this._continueWrite(r),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let r=this._stream.push(e);return this._missing===0?(this._stream.push(null),r&&this._stream._detach(),r&&this._locked===!1):r}_createStream(){return new Wc(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let r=this._callback;this._callback=qc,r(e)}_write(e,r){this._callback=r,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(wm(this)),e(null)}[Symbol.asyncIterator](){let e=null,r=null,n=null,i=null,s=null,o=this;return this.on("entry",l),this.on("error",g=>{e=g}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(c)},return(){return d(null)},throw(g){return d(g)}};function a(g){if(!s)return;let f=s;s=null,f(g)}function c(g,f){if(e)return f(e);if(i){g({value:i,done:!1}),i=null;return}r=g,n=f,a(null),o._finished&&r&&(r({value:void 0,done:!0}),r=n=null)}function l(g,f,p){s=p,f.on("error",qc),r?(r({value:f,done:!1}),r=n=null):i=f}function u(){a(e),r&&(e?n(e):r({value:void 0,done:!0}),r=n=null)}function d(g){return o.destroy(g),a(g),new Promise((f,p)=>{if(o.destroyed)return f({value:void 0,done:!0});o.once("close",function(){g?p(g):f({value:void 0,done:!0})})})}}};xm.exports=function(e){return new jc(e)};function qc(){}function Sm(t){return t&=511,t&&512-t}});var bm=S((hO,Gc)=>{var _m={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{Gc.exports=require("fs").constants||_m}catch{Gc.exports=_m}});var Cm=S((pO,Im)=>{var{Readable:qb,Writable:Hb,getStreamError:Lm}=$c(),pr=zr(),en=bm(),Hs=Mc(),Wb=493,jb=420,Rm=pr.alloc(1024),Vc=class extends Hb{constructor(e,r,n){super({mapWritable:zb,eagerOpen:!0}),this.written=0,this.header=r,this._callback=n,this._linkname=null,this._isLinkname=r.type==="symlink"&&!r.linkname,this._isVoid=r.type!=="file"&&r.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let r=this._callback;this._callback=null,r(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,r){if(this._isLinkname)return this._linkname=this._linkname?pr.concat([this._linkname,e]):e,r(null);if(this._isVoid)return e.byteLength>0?r(new Error("No body allowed for this entry")):r();if(this.written+=e.byteLength,this._pack.push(e))return r();this._pack._drain=r}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?pr.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),Pm(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return Lm(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},Zc=class extends qb{constructor(e){super(e),this._drain=zc,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,r,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof r=="function"&&(n=r,r=null),n||(n=zc),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=Gb(e.mode)),e.mode||(e.mode=e.type==="directory"?Wb:jb),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=pr.from(r));let i=new Vc(this,e,n);return pr.isBuffer(r)?(e.size=r.byteLength,i.write(r),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(Rm),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let r=Hs.encode(e);if(r){this.push(r);return}}this._encodePax(e)}_encodePax(e){let r=Hs.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:r.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(Hs.encode(n)),this.push(r),Pm(this,r.byteLength),n.size=e.size,n.type=e.type,this.push(Hs.encode(n))}_doDrain(){let e=this._drain;this._drain=zc,e()}_predestroy(){let e=Lm(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let r=this._pending.shift();r.destroy(e),r._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};Im.exports=function(e){return new Zc(e)};function Gb(t){switch(t&en.S_IFMT){case en.S_IFBLK:return"block-device";case en.S_IFCHR:return"character-device";case en.S_IFDIR:return"directory";case en.S_IFIFO:return"fifo";case en.S_IFLNK:return"symlink"}return"file"}function zc(){}function Pm(t,e){e&=511,e&&t.push(Rm.subarray(0,512-e))}function zb(t){return pr.isBuffer(t)?t:pr.from(t)}});var Tm=S(Jc=>{Jc.extract=vm();Jc.pack=Cm()});var Yc=S(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});var km=require("child_process"),Xb=1024*1024,Am={exec(t,e){let r={maxBuffer:2*Xb,windowsHide:!0};(0,km.exec)(t,r,e)},spawn(t,e,r){return(0,km.spawn)(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(s=>{let o=Am.split(s,r),a=[];e.forEach(c=>{a.push(o[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n|\n\n)/).filter(r=>r&&r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return e.forEach(r=>{for(let n=0;r[n];){let i=r[n];i.startsWith(" ")?(r[n-1]+=i.trimLeft(),r.splice(n,1)):n+=1}}),e.map(r=>{let n={};return r.forEach(i=>{let s=i.indexOf(":"),o=i.slice(0,s).trim();n[o]=i.slice(s+1).trim()}),n})}};Xc.default=Am});var $m=S((Fm,Ws)=>{(function(t,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof Ws=="object"&&Ws.exports?Ws.exports=e():t.log=e()})(Fm,function(){"use strict";var t=function(){},e="undefined",r=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],i={},s=null;function o(p,E){var m=p[E];if(typeof m.bind=="function")return m.bind(p);try{return Function.prototype.bind.call(m,p)}catch{return function(){return Function.prototype.apply.apply(m,[p,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===e?!1:p==="trace"&&r?a:console[p]!==void 0?o(console,p):console.log!==void 0?o(console,"log"):t}function l(){for(var p=this.getLevel(),E=0;E<n.length;E++){var m=n[E];this[m]=E<p?t:this.methodFactory(m,p,this.name)}if(this.log=this.debug,typeof console===e&&p<this.levels.SILENT)return"No console available for logging"}function u(p){return function(){typeof console!==e&&(l.call(this),this[p].apply(this,arguments))}}function d(p,E,m){return c(p)||u.apply(this,arguments)}function g(p,E){var m=this,w,x,h,y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function v(I){var T=(n[I]||"silent").toUpperCase();if(!(typeof window===e||!y)){try{window.localStorage[y]=T;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+T+";"}catch{}}}function b(){var I;if(!(typeof window===e||!y)){try{I=window.localStorage[y]}catch{}if(typeof I===e)try{var T=window.document.cookie,me=encodeURIComponent(y),le=T.indexOf(me+"=");le!==-1&&(I=/^([^;]+)/.exec(T.slice(le+me.length+1))[1])}catch{}return m.levels[I]===void 0&&(I=void 0),I}}function _(){if(!(typeof window===e||!y)){try{window.localStorage.removeItem(y)}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function C(I){var T=I;if(typeof T=="string"&&m.levels[T.toUpperCase()]!==void 0&&(T=m.levels[T.toUpperCase()]),typeof T=="number"&&T>=0&&T<=m.levels.SILENT)return T;throw new TypeError("log.setLevel() called with invalid level: "+I)}m.name=p,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=E||d,m.getLevel=function(){return h??x??w},m.setLevel=function(I,T){return h=C(I),T!==!1&&v(h),l.call(m)},m.setDefaultLevel=function(I){x=C(I),b()||m.setLevel(I,!1)},m.resetLevel=function(){h=null,_(),l.call(m)},m.enableAll=function(I){m.setLevel(m.levels.TRACE,I)},m.disableAll=function(I){m.setLevel(m.levels.SILENT,I)},m.rebuild=function(){if(s!==m&&(w=C(s.getLevel())),l.call(m),s===m)for(var I in i)i[I].rebuild()},w=C(s?s.getLevel():"WARN");var D=b();D!=null&&(h=C(D)),l.call(m)}s=new g,s.getLogger=function(E){if(typeof E!="symbol"&&typeof E!="string"||E==="")throw new TypeError("You must supply a name when creating a logger.");var m=i[E];return m||(m=i[E]=new g(E,s.methodFactory)),m};var f=typeof window!==e?window.log:void 0;return s.noConflict=function(){return typeof window!==e&&window.log===s&&(window.log=f),s},s.getLoggers=function(){return i},s.default=s,s})});var Kc=S(ai=>{"use strict";var Yb=ai&&ai.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ai,"__esModule",{value:!0});var Kb=Yb($m());ai.default=Kb.default});var Mm=S(Ge=>{"use strict";var Qb=Ge&&Ge.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),eL=Ge&&Ge.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Bm=Ge&&Ge.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&Qb(r,e,n[i]);return eL(r,e),r}})(),Um=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ge,"__esModule",{value:!0});var tL=Bm(require("os")),js=Bm(require("fs")),Le=Um(Yc()),rL=Um(Kc()),nL=t=>new Promise((e,r)=>{js.existsSync(t)?e():js.mkdir(t,n=>{n?r(n):e()})}),tn={darwin(t){return new Promise((e,r)=>{Le.default.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,s){if(n)r(n);else{let o=s.toString().trim();if(o){r(new Error(o));return}let a=Le.default.stripLine(i.toString(),1),c=a.slice(0,a.indexOf(`
`)),l=Le.default.stripLine(a,1),u=c.indexOf("rxbytes")>=0?10:8,d=Le.default.extractColumns(l,[0,3,u],10).filter(g=>!!String(g[0]).match(/^(udp|tcp)/)).find(g=>{let f=String(g[1]).match(/\.(\d+)$/);return!!(f&&f[1]===String(t))});d&&d[2].length?e(parseInt(d[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},linux(t){return new Promise((e,r)=>{Le.default.exec("netstat -tunlp",function(i,s,o){if(i)r(i);else{let a=o.toString().trim();a&&rL.default.warn(a);let c=Le.default.stripLine(s.toString(),2),l=Le.default.extractColumns(c,[3,6],7).find(u=>{let d=String(u[0]).match(/:(\d+)$/);return!!(d&&d[1]===String(t))});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{Le.default.exec("netstat -ano",function(n,i,s){if(n)r(n);else{let o=s.toString().trim();if(o){r(new Error(o));return}let a=Le.default.stripLine(i.toString(),4),c=Le.default.extractColumns(a,[1,4],5).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});c&&c[1].length&&parseInt(c[1],10)>0?e(parseInt(c[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=tL.tmpdir()+"/.find-process",i=n+"/"+process.pid,s='netstat -tunp >> "'+i+'"';nL(n).then(()=>{Le.default.exec(s,()=>{js.readFile(i,"utf8",(o,a)=>{if(js.unlink(i,()=>{}),o)r(o);else{a=Le.default.stripLine(a,2);let c=Le.default.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};tn.freebsd=tn.darwin;tn.sunos=tn.darwin;function iL(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in tn))return n(new Error(`platform ${e} is unsupported`));let i=tn[e];i(t).then(r,n)})}Ge.default=iL});var Wm=S(ze=>{"use strict";var sL=ze&&ze.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),oL=ze&&ze.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),aL=ze&&ze.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&sL(r,e,n[i]);return oL(r,e),r}})(),cL=ze&&ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ze,"__esModule",{value:!0});var Gs=aL(require("path")),Ut=cL(Yc());function Qc(t,e){return e?t&&t.match?t.match(e)!==null:!1:!0}function qm(t){let e=t.split(Gs.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let s=i.indexOf(" -");if(s>=0){n.push(i.substring(0,s).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(Gs.sep)}function Hm(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return Gs.basename(t.substring(0,e))}return Gs.basename(t)}var mr={darwin(t){return new Promise((e,r)=>{let n;"pid"in t&&t.pid!==void 0?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",Ut.default.exec(n,function(i,s,o){if(i)"pid"in t&&t.pid!==void 0?e([]):r(i);else{let a=o.toString().trim();if(a){r(new Error(a));return}let c=Ut.default.stripLine(s.toString(),1),u=Ut.default.extractColumns(c,[0,1,2,3,4],5).filter(d=>d[0]&&t.pid!==void 0?d[0]===String(t.pid):d[4]&&t.name?Qc(d[4],t.name):!!d[0]).map(d=>{let g=String(d[4]),f=qm(g);return{pid:parseInt(d[0],10),ppid:parseInt(d[1],10),uid:parseInt(d[2],10),gid:parseInt(d[3],10),name:Hm(f),bin:f,cmd:d[4]}});t.config.strict&&t.name&&(u=u.filter(d=>d.name===t.name)),e(u)}})})},win32(t){return new Promise((e,r)=>{let n="[Console]::OutputEncoding = [System.Text.Encoding]::UTF8; Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",i=[],s=Ut.default.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});s.stdout.on("data",o=>{i.push(o.toString())}),s.on("error",o=>{r(new Error("Command '"+n+"' failed with reason: "+o.toString()))}),s.on("close",o=>{if(o!==0)return r(new Error("Command '"+n+"' terminated with code: "+o));let a=Ut.default.parseTable(i.join("")).filter(c=>{if(t.pid!==void 0)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.config.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:Qc(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{Ut.default.exec("ps",function(i,s,o){if(i)t.pid!==void 0?e([]):r(i);else{let a=o.toString().trim();if(a){r(new Error(a));return}let c=Ut.default.stripLine(s.toString(),1),u=Ut.default.extractColumns(c,[0,3],4).filter(d=>d[0]&&t.pid!==void 0?d[0]===String(t.pid):d[1]&&t.name?Qc(d[1],t.name):!!d[0]).map(d=>{let g=String(d[1]),f=qm(g);return{pid:parseInt(d[0],10),ppid:0,name:Hm(f),bin:f,cmd:d[1]}});t.config.strict&&t.name&&(u=u.filter(d=>d.name===t.name)),e(u)}})})}};mr.linux=mr.darwin;mr.sunos=mr.darwin;mr.freebsd=mr.darwin;function lL(t){let e=process.platform,r=mr[e];return r?r(t):Promise.reject(new Error(`Platform "${e}" is not supported`))}ze.default=lL});var Gm=S(ci=>{"use strict";var tl=ci&&ci.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ci,"__esModule",{value:!0});var uL=tl(Mm()),jm=tl(Wm()),fL=tl(Kc()),el={port(t,e){return(0,uL.default)(t).then(r=>el.pid(r,e),()=>[])},pid(t,e){return(0,jm.default)({pid:t,config:e})},name(t,e){return(0,jm.default)({name:t,config:e,skipSelf:!0})}};function dL(t,e,r){let n=Object.assign({logLevel:"warn",strict:typeof r=="boolean"?r:!1},typeof r=="object"?r:{});return n.logLevel&&fL.default.setLevel(n.logLevel),new Promise((i,s)=>{if(!(t in el))s(new Error(`do not support find by "${t}"`));else{let o=/^\d+$/.test(String(e));t==="pid"&&!o?s(new Error("pid must be a number")):t==="port"&&!o?s(new Error("port must be a number")):el[t](e,n).then(i,s)}})}ci.default=dL});var Vm=S(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0})});var Zm=S(Ve=>{"use strict";var hL=Ve&&Ve.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),pL=Ve&&Ve.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hL(e,t,r)},mL=Ve&&Ve.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.default=void 0;var gL=Gm();Object.defineProperty(Ve,"default",{enumerable:!0,get:function(){return mL(gL).default}});pL(Vm(),Ve)});var sl=S((yN,rg)=>{var wN=rg.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var ig=S((SN,ng)=>{var CL=sl();ng.exports=function(t,e){return function(r){var n=[],i,s;function o(l){n.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&o(u),l=="end"&&(i=!0,o(null)),l=="error"&&(s=u)},queue:o},c;return function(l,u){if(i=i||l,l)return r(l,function(){if(c){var d=c;c=null,d(l)}u(l)});c=u,CL(function d(g){if(c)if(u=c,s)c=null,u(s);else if(n.length){var f=n.shift();c=null,u(f===null,f)}else r(i,function(p,E){if(p&&p!==!0)return s=p,g();if(i=i||p)e.call(a);else if(E!==null&&(t.call(a,E),s||i))return r(s||i,function(){c=null,u(s||i)});g(d)})})}}}});var og=S((xN,sg)=>{sg.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var s=t;return t=[],s.length==1?s[0]:Buffer.concat(s)}else if(t.length>1&&n<=(i=t[0].length)){var o=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,o}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var l=t.shift();c+=l.length,a.push(l)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var ug=S((vN,lg)=>{"use strict";var TL=og();function OL(t){return Number.isFinite(t)}function ag(t){return typeof t=="function"}function cg(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(s,o){clearTimeout(i),n(s,o)})}:t}lg.exports=function(t){var e=[],r,n,i=!1,s=TL(),o,a,c;function l(){for(;e.length;)if(e[0].length==null&&s.has(1))e.shift().cb(null,s.get());else if(s.has(e[0].length)){var g=e.shift();g.cb(null,s.get(g.length))}else if(o==!0&&e[0].length&&s.length<e[0].length){var f="stream ended with:"+s.length+" but wanted:"+e[0].length;e.shift().cb(new Error(f))}else if(o)e.shift().cb(o);else return!!e.length;return e.length||!s.has(1)||c}function u(){var g=l();g&&!i&&r&&!i&&!a&&(i=!0,n(null,function(f,p){if(i=!1,f)return o=f,l();s.add(p),u()}))}function d(g){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=cg(g,t),r=g,u()}return d.abort=function(g,f){c=g||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);f&&f(c)})):f()},d.read=function(g,f,p){if(ag(f)&&(p=f,f=t),ag(p))e.push({length:OL(g)?g:null,cb:p}),u();else return a=!0,function(E,m){if(i||s.has(1)){if(E)return r(E,m);e.push({length:null,cb:m}),u()}else cg(r,f)(E,function(w,x){m(w,x)})}},d}});var vg=S((Er,xg)=>{var DL=ig(),NL=ug(),fg=ms(),dg=0,hg=1,pg=2,mg="GOODBYE";function gg(t){let e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return typeof t=="string"&&t===mg?(e.fill(0),[e,null]):(typeof n=="string"?(r=hg,n=Buffer.from(n,"utf-8")):Buffer.isBuffer(n)?r=dg:(r=pg,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function Eg(t){if(t.length!==9)throw new Error("expected header to be 9 bytes long");let e=t[0],r=t.readUInt32BE(1);return{req:t.readInt32BE(5),stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function wg(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(e.type===dg)e.value=t;else if(e.type===hg)e.value=t.toString();else if(e.type===pg)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function yg(t){return DL(function(r){t&&t("encoded: %o",r);let[n,i]=gg(r);this.queue(n),i!==null&&this.queue(i)})}function Sg(t){let e=NL(),r=!1;return function(i){return e(i),function(o,a){if(r)return a(!0);if(o)return e.abort(o,a);e.read(9,function(l,u){if(l)return a(l);let d=Eg(u);if(d.length===0)return r=!0,a(null,mg);e.read(d.length,function(f,p){if(f)return a(f);try{wg(p,d)}catch(E){return a(E)}t&&t("decoded: %o",d),a(null,d)})})}}}Er=xg.exports=function(e,r){let n=r===!0?fg("packet-stream-codec"):typeof r=="string"?fg(r):null;return{source:yg(n)(e.source),sink(i){return e.sink(Sg(n)(i))}}};Er.encodePair=gg;Er.decodeHead=Eg;Er.decodeBody=wg;Er.encode=yg;Er.decode=Sg});var ol=S((_N,_g)=>{function kL(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}function AL(t){console.error("packet-stream asked to read after closed",t)}_g.exports={flat:kL,closedread:AL}});var Rg=S((bN,Lg)=>{var{flat:bg,closedread:FL}=ol();function Zs(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r}Zs.prototype.write=function(t,e){let r=this._ps;e?(this.writeEnd=e,r&&(r.read({req:this.id,stream:!0,end:!0,value:bg(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))):r&&r.read({req:this.id,stream:!0,end:!1,value:t})};Zs.prototype.end=function(t){this.write(null,bg(t||!0))};Zs.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=FL,this._ps=null)};Lg.exports=Zs});var Cg=S((LN,Ig)=>{var Pg=Rg(),{flat:al,closedread:$L}=ol();function Ne(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}Ne.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};Ne.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));let r=this._req_counter++;this._requests.set(r,(n,i)=>{this._requests.delete(r),e(n,i),this._maybedone(n)}),this.read({req:r,stream:!1,end:!1,value:t})};Ne.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let t=this._req_counter++,e=new Pg(t,this,()=>{this._outstreams.delete(t)});return this._outstreams.set(t,e),e};Ne.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};Ne.prototype.destroy=function(t){t=t||al(t),this.ended=t,this._closing=!0;let e=t===!0?new Error("unexpected end of parent stream"):t,r=0;this._requests.forEach(n=>{r++,n(e)}),this._instreams.forEach(n=>{r++,n.writeEnd=!0,n.destroy(e)}),this._outstreams.forEach(n=>{r++,n.writeEnd=!0,n.destroy(e)}),r===0&&t===!0&&(e=null),this._maybedone(e)};Ne.prototype._maybedone=function(t){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,t||!0),this._closed=!0,this._closecbs.forEach(e=>{e(t)}),this.opts=null,this._closecbs.length=0,this.read=$L,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};Ne.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};Ne.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};Ne.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};Ne.prototype._onrequest=function(t){let e=t.req*-1;if(t.req<0)this._requests.has(e)&&this._requests.get(e)(t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){let r=!1;this.opts.request(t.value,(n,i)=>{if(r)throw new Error("cb called twice from local api");r=!0,n?this.read({value:al(n),end:!0,req:e}):this.read({value:i,end:!1,req:e}),this._maybedone()})}else{if(this.ended){let r=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:al(r),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};Ne.prototype._onstream=function(t){if(t.req<0){let e=t.req*-1,r=this._outstreams.get(e);if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&this._outstreams.delete(e),r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{let e=t.req,r=this._instreams.get(e);r||(r=new Pg(e*-1,this,()=>{this._instreams.delete(e)}),this._instreams.set(e,r),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(r)),t.end?(r.writeEnd&&this._instreams.delete(e),r.readEnd=!0,r.read&&r.read(null,t.value),this._maybedone()):r.read?r.read(t.value):console.error("no .read for stream:",r.id,"dropped:",t)}};Ig.exports=t=>new Ne(t)});var Og=S((RN,li)=>{"use strict";var BL=Fn();function UL(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function cl(t,e){let r=[],n=!1,i=!1,s,o,a=UL((c,l)=>{e&&e(c,l),t=null,e=null,s=null,o&&o(c||!0,()=>{})});return t.read=function(c,l){if(n=n||l,s){let u=s;s=null,u(n,c)}else!n&&!i&&r.push(c);n&&a(n!==!0?n:null)},{source(c,l){c?(t&&t.write(null,c),l(c),r.length=0,i=!0,a(c!==!0?c:null)):r.length?l(null,r.shift()):n?l(n):s=l},sink(c){if(n)return o=null,c(n,()=>{});o=c,BL.drain(l=>{if(n)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function Tg(t,e){return cl(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function ML(t){return Tg(t).source}function qL(t,e){return Tg(t,e).sink}li.exports=cl;li.exports.source=ML;li.exports.sink=qL;li.exports.duplex=cl});var Ng=S((PN,Dg)=>{Dg.exports=function(e){var r,n,i;function s(o){return function(a,c){o(a,function(l,u){if(l&&!i)return i=!0,c(null,e);l&&r?c(l):l?n=c:c(null,u)})}}return s.end=function(){return r=!0,n&&n(r),s},s}});var Ag=S((IN,kg)=>{var HL=Ng(),ll=Fn();kg.exports=function(t,e){e=e||"GOODBYE";var r=HL(e);return{source:ll(t.source,r),sink:ll(ll.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var ui=S(Ze=>{"use strict";var Js=Fn();function WL(t){return t?Object.keys(t).length===0:!0}Ze.set=function(e,r,n){let i,s;for(let o=0;o<r.length;o++){let a=r[o];e[a]=e[a]||{},i=e,s=a,e=e[a]}i[s]=n};Ze.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let s=r[i];if(n=e=e[s],e==null)return e}return n};Ze.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let s=r[i];if(n=e=e[s],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function jL(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function GL(t,e){(function r(n,i){let s=e[i];if(n)e.length-1===i?delete n[s]:i<e.length&&r(n[s],i+1);else return;WL(n[s])&&delete n[s]})(t,0)}function zL(t,e){for(let r in e)t[r]=e[r];return t}Ze.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return zL(jL(e,r),n)};Ze.unmount=function(e,r){return GL(e,r)};var Xs=t=>t==="source",Ys=t=>t==="sink",ul=t=>t==="duplex",VL=t=>t==="sync",ZL=t=>t==="async",Fg=t=>VL(t)||ZL(t),JL=t=>Xs(t)||Ys(t)||ul(t);Ze.isRequest=Fg;Ze.isStream=JL;function fl(t){return function(e){e(t||!0,()=>{})}}function $g(t){return{source:Js.error(t),sink:fl(t)}}Ze.errorAsStream=function(e,r){return Xs(e)?Js.error(r):Ys(e)?fl(r):$g(r)};Ze.errorAsStreamOrCb=function(e,r,n){return Fg(e)?n(r):ul(e)?$g(r):Xs(e)?Js.error(r):Ys(e)?fl(r):n(r)};Ze.pipeToStream=function(e,r,n){Xs(e)?r(n):Ys(e)?n(r):ul(e)&&Js(r,n,r)}});var dl=S((TN,Bg)=>{"use strict";function XL(t){return typeof t=="string"?[`Error: ${t}`]:t.stack?t.stack.split(`
`):[`${t.name}: ${t.message}`]}Bg.exports=function(e,r){let n=new Error(r),i=n.stack.split(`
`);i.splice(1,1);let s=XL(e);s[0]="  "+s[0];for(let o=1;o<i.length;o++)if(s.includes(i[o])){i.splice(o);break}return n.stack=i.concat(s).join(`
`),n}});var Hg=S((ON,qg)=>{"use strict";var YL=Cg(),hl=Og(),KL=Ag(),nn=ui(),Ug=dl(),Mg=ms()("muxrpc:psc");qg.exports=function(e,r,n){let i=YL({message(){},request(o,a){if(!Array.isArray(o.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(o)}`));let c=o.name,l=o.args,u=!1,d=!1;l.push((g,f)=>{d=!0,u=!0,a(g,f)});try{e("async",c,l)}catch(g){if(u||d)throw Ug(g,"no callback provided to muxrpc async funtion");a(g)}},stream(o){o.read=function(c,l){if(l)return o.write(null,l);let{name:u,type:d,args:g}=c,f,p;if(o.read=null,!nn.isStream(d))return o.write(null,new Error(`unsupported stream type: ${d}`));try{p=e(d,u,g)}catch(w){f=w}let m=hl[d==="source"?"sink":d==="sink"?"source":"duplex"](o);return nn.pipeToStream(d,m,f?nn.errorAsStream(d,f):p)}},close(o){if(i=null,s.ended=!0,!s.closed&&(s.closed=!0,n)){let a=n;n=null,a(o)}}}),s=KL(hl(i,()=>{}));return s=r?r(s,Mg.enabled?Mg.namespace:!1):s,s.remoteCall=function(o,a,c,l){if(a==="emit")return i.message(c);if(!(nn.isRequest(o)||nn.isStream(o)))throw new Error(`unsupported type: ${JSON.stringify(o)}`);if(nn.isRequest(o))return i.request({name:a,args:c},l);let u=i.stream(),d=hl[o](u,l);return u.write({name:a,args:c,type:o}),d},s.isOpen=function(){return!i.ended},s.close=function(o,a){if(typeof o=="function"&&(a=o,o=!1),!i){a&&a();return}if(o){i.destroy(o),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw Ug(c,"no callback provided for muxrpc close")}),this},s.closed=!1,s}});var jg=S((DN,Wg)=>{"use strict";var QL=dl(),eR=ui();function pl(t,e,r,n){for(let i in e){let s=e[i],o=r?r.concat(i):[i];if(s&&typeof s=="object"){let a=s;t[i]=pl({},a,o,n)}else{let a=s;t[i]=(...c)=>n(a,o,c)}}return t}function tR(t){if(t)throw QL(t,"callback not provided")}function rR(t,e,r,n){t=t||{};function i(s,o,a){let c=typeof a[a.length-1]=="function"?a.pop():s==="sync"||s==="async"?null:tR;if(typeof c=="function"){let l;try{l=r(s,o,a,c)}catch(u){return eR.errorAsStreamOrCb(s,u,c)}return l}else return new Promise((l,u)=>{r(s,o,a,(d,g)=>{d?u(d):l(g)})})}return n?i("async","manifest",[function(s,o){if(s)return n(s);pl(t,o,null,i),n(null,o,t)}]):pl(t,e,null,i),t}Wg.exports=rR});var Vg=S((NN,zg)=>{"use strict";var Ks=ui();function Gg(t){return Array.isArray(t)?t:t.split(".")}function nR(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}zg.exports=function(e){if(nR(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(s){if(s.allow){r={};for(let o of s.allow)Ks.set(r,Gg(o),!0)}else r=null;if(s.deny)for(let o of s.deny)Ks.set(n,Gg(o),!0);else n={};return this}return e&&i(e),i.pre=s=>{if(s=Array.isArray(s)?s:[s],r&&!Ks.prefix(r,s))return new Error(`method:${s} is not in list of allowed methods`);if(n&&Ks.prefix(n,s))return new Error(`method:${s} is on list of disallowed methods`)},i.post=()=>{},i.test=s=>i.pre(s),i.get=()=>({allow:r,deny:n}),i}});var Jg=S((kN,Zg)=>{"use strict";var iR=Vg(),ml=ui();Zg.exports=function(e,r,n){n=iR(n);function i(o,a){return o===ml.get(r,a)}function s(o,a,c){if(a==="emit")throw new Error("emit has been removed");if(o==="async"&&i("sync",a)){let l=c.pop(),u;try{u=ml.get(e,a).apply(this,c)}catch(d){return l(d)}return l(null,u)}if(!i(o,a))throw new Error(`no ${o}:${a}`);return ml.get(e,a).apply(this,c)}return function(a,c,l){let u=n.pre(c,l);if(u)throw u;return s.call(this,a,c,l)}}});var Kg=S((AN,Yg)=>{"use strict";var sR=vg(),oR=require("events").EventEmitter,aR=Hg(),cR=jg(),lR=Jg();function Xg(t,e,r,n,i,s,o){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new oR;s||(s=sR);let l,u={_emit(g,f){return c&&c._emit(g,f),u},id:n},d=aR(lR(r,e,i).bind(u),s,g=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let f=l;l=null,f(g)}});if(cR(c,t,(g,f,p,E)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(g,f,p,E)},a),c._emit=c.emit,o){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",f=>{u.id=f});let g=!0;c.createStream=f=>{if(l=f,g)return g=!1,d;throw new Error("one stream per rpc")}}else c.stream=d;return c.closed=!1,c.close=function(g,f){return d.close(g,f),this},c}Yg.exports=function(t,e,r){return arguments.length>3?Xg.apply(this,arguments):function(n,i,s){return Xg(t,e,n,s,i,r,!0)}}});var gl=S((mt,tE)=>{var FN=ka(),uR=sl();function Qg(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function eE(t,e,r){var n,i=!1,s;function o(){s||(s=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,l(),n?o():t(n=!0,o))}function c(u){l(),n||t(n=u,o)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){uR(function(u){t(null,function(d,g){if(n=n||d,d===!0)return e._isStdio?o():e.end();if(n=n||d)return Qg(e),o(n);if(e._isStdio)e.write(g,function(){u()});else{var f=e.write(g);f===!1?e.once("drain",u):u()}})})})}function fR(t){var e=!1,r=!1,n;function i(){var s=t.read();if(s!==null&&n){var o=n;n=null,o(null,s)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(s){e=s,n&&n(e)}),function(s,o){n=o,e?o(e):r&&i()}}function Qs(t){var e=[],r=[],n,i=!1,s;function o(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),o(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,o()}),t.on("close",function(){n=!0,o()}),t.on("error",function(a){n=a,o()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),Qg(t)}else r.push(c),o()}}var dR=Qs,eo=function(t,e){return function(r){return eE(r,t,e)}},to=function(t){return Qs(t)};mt=tE.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return eE(r,t,e),Qs(t)}:eo(t,e):to(t)};mt.sink=eo;mt.source=to;mt.read=dR;mt.read1=Qs;mt.read2=fR;mt.duplex=function(t,e){return{source:to(t),sink:eo(t,e)}};mt.transform=function(t){return function(e){var r=to(t);return eo(t)(e),r}}});var nE=S(($N,ro)=>{var hR=require("stream");ro.exports=El;ro.exports.source=function(t){return El(null,t)};ro.exports.sink=function(t){return El(t,null)};var rE=typeof setImmediate>"u"?process.nextTick:setImmediate;function El(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,s,o=new hR;o.writable=o.readable=!0,o.write=function(m){return r.length?r.shift()(null,m):n.push(m),r.length||(s=!0),!!r.length},o.end=function(){e?n.length?E():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},o.source=function(m,w){n.length?(w(null,n.shift()),n.length||o.emit("drain")):((i=i||m)?w(i):r.push(w),s&&(s=!1,o.emit("drain")))};var a;t&&(a=t(o.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,d=!1,g=!1;if(o.sink=function(m){e=m,rE(E)},e){o.sink(e),o.paused=!0;var f=o.on.bind(o);o.on=(m,w)=>{var x=f(m,w);return m==="data"&&o.paused&&rE(o.resume.bind(o)),x};var p=o.pipe.bind(o);o.pipe=function(m,w){var x=p(m,w);return o.paused&&o.resume(),x}}function E(){if(d=!1,!(!e||g)){for(;c.length&&!o.paused;)o.emit("data",c.shift());if(!o.paused){if(u)return o.emit("end");g=!0,e(null,function m(w,x){g=!1,o.paused?(w===!0?u=w:w?o.emit("error",w):c.push(x),d=!0):w&&(i=w)!==!0?o.emit("error",w):(i=i||w)?o.emit("end"):(o.emit("data",x),g=!0,e(null,m))})}}}return o.pause=function(){return o.paused=!0,o},o.resume=function(){return o.paused=!1,E(),o},o.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),o.emit("close")},o}});var sE=S((BN,iE)=>{iE.exports=pR;function pR(t,e){typeof t=="function"&&(e=t,t=!1);var r=[],n,i;function s(d,g){d&&(n=d,i&&u(n)),i=g,l()}var o;function a(d){o=o||d||!0,l()}function c(d){if(!o){if(i){u(n,d);return}r.push(d)}}if(t)return{push:c,end:a,source:s,buffer:r};return s.push=c,s.end=a,s.buffer=r,s;function l(){i&&(n?u(n):!r.length&&o?u(o):r.length&&u(null,r.shift()))}function u(d,g){var f=i;if(d&&e){var p=e;e=null,p(d===!0?null:d)}i=null,f(d,g)}}});var uo=N(require("http"));async function fo(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function on(t,e){return new Promise((r,n)=>{let s=uo.request({socketPath:t,path:"/",method:"POST"},o=>r(o));s.on("error",o=>n(o)),s.write(e),s.end()})}var wE=N(require("path"));async function ho(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),s=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,d,g])=>{let f=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:f[1],pgrp:f[2],cwd:c,mntNS:l,cmd:g.replace(/\0/g," "),env:d.split("\0").reduce((p,E)=>{let m=E.indexOf("=");return m!==-1&&(p[E.substr(0,m)]=E.substr(m+1)),p},{})}}),mntNS:s}}var Pl=/VSCODE_REMOTE_CONTAINERS_SESSION=([^ ]+)/;async function pi(t){let{processes:e}=await ho(t);return e.filter(r=>r.env.VSCODE_REMOTE_CONTAINERS_SESSION||Pl.test(r.cmd)).map(r=>({...r,sessionId:r.env.VSCODE_REMOTE_CONTAINERS_SESSION||Pl.exec(r.cmd)[1]}))}var io=N(require("path")),uE=N(require("stream"));var so=N(require("child_process")),vl=require("string_decoder");var Cl=N(require("os")),an=N(require("fs")),Tl=N(require("path"));var Je=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(Je||{}),Il={info:3,debug:2,trace:1},UR=Object.keys(Il).reduce((t,e)=>(t[Il[e]]=e,t),[]);var LE=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function Ol(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function Dl(t,e){let r=IE(t);return{event(n){let i=RE(n,e());i&&r.write(i)},join:r.join}}function gt(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function RE(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${po(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${po(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${po(t.text)}`:void 0;default:throw PE(t)}}function po(t){return t.replace(LE,"").replace(/(\r?\n)?$/,Cl.EOL)}function PE(t){return new Error(`Unknown log event type: ${t.type}`)}function IE(t){let e=[],r=!1,n,i;function s(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function o(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let l=e.join("");e.length=0,an.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?an.mkdir(Tl.dirname(t),{recursive:!0},d=>{d?(s(),console.error(d)):an.appendFile(t,l,g=>{s(),g&&console.error(g),o()})}):(s(),console.error(u))),s(),o()})}}return{write:o,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}function ke(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[31m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var Nl;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(Nl||(Nl={}));var OE=new Array(20).fill(0).map((t,e)=>" ".repeat(e)),yr=200,DE={" ":{"\n":new Array(yr).fill(0).map((t,e)=>`
`+" ".repeat(e)),"\r":new Array(yr).fill(0).map((t,e)=>"\r"+" ".repeat(e)),"\r\n":new Array(yr).fill(0).map((t,e)=>`\r
`+" ".repeat(e))},"	":{"\n":new Array(yr).fill(0).map((t,e)=>`
`+"	".repeat(e)),"\r":new Array(yr).fill(0).map((t,e)=>"\r"+"	".repeat(e)),"\r\n":new Array(yr).fill(0).map((t,e)=>`\r
`+"	".repeat(e))}};var Al;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Al||(Al={}));var Fl;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(Fl||(Fl={}));var $l;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})($l||($l={}));var Bl;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(Bl||(Bl={}));var jl=N(require("events"),1),fe=N(require("fs"),1);var xi=require("events"),bo=N(require("stream"),1),Wl=require("string_decoder"),Ul=typeof process=="object"&&process?process:{stdout:null,stderr:null},UE=t=>!!t&&typeof t=="object"&&(t instanceof ge||t instanceof bo.default||ME(t)||qE(t)),ME=t=>!!t&&typeof t=="object"&&t instanceof xi.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==bo.default.Writable.prototype.pipe,qE=t=>!!t&&typeof t=="object"&&t instanceof xi.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",st=Symbol("EOF"),ot=Symbol("maybeEmitEnd"),Et=Symbol("emittedEnd"),mi=Symbol("emittingEnd"),cn=Symbol("emittedError"),gi=Symbol("closed"),Ml=Symbol("read"),Ei=Symbol("flush"),ql=Symbol("flushChunk"),Ae=Symbol("encoding"),Sr=Symbol("decoder"),K=Symbol("flowing"),ln=Symbol("paused"),xr=Symbol("resume"),Q=Symbol("buffer"),ue=Symbol("pipes"),ee=Symbol("bufferLength"),wo=Symbol("bufferPush"),wi=Symbol("bufferShift"),ie=Symbol("objectMode"),Z=Symbol("destroyed"),yo=Symbol("error"),So=Symbol("emitData"),Hl=Symbol("emitEnd"),xo=Symbol("emitEnd2"),Xe=Symbol("async"),vo=Symbol("abort"),yi=Symbol("aborted"),un=Symbol("signal"),Mt=Symbol("dataListeners"),xe=Symbol("discarded"),fn=t=>Promise.resolve().then(t),HE=t=>t(),WE=t=>t==="end"||t==="finish"||t==="prefinish",jE=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,GE=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Si=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[xr](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},_o=class extends Si{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},zE=t=>!!t.objectMode,VE=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",ge=class extends xi.EventEmitter{[K]=!1;[ln]=!1;[ue]=[];[Q]=[];[ie];[Ae];[Xe];[Sr];[st]=!1;[Et]=!1;[mi]=!1;[gi]=!1;[cn]=null;[ee]=0;[Z]=!1;[un];[yi]=!1;[Mt]=0;[xe]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");zE(r)?(this[ie]=!0,this[Ae]=null):VE(r)?(this[Ae]=r.encoding,this[ie]=!1):(this[ie]=!1,this[Ae]=null),this[Xe]=!!r.async,this[Sr]=this[Ae]?new Wl.StringDecoder(this[Ae]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Q]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ue]});let{signal:n}=r;n&&(this[un]=n,n.aborted?this[vo]():n.addEventListener("abort",()=>this[vo]()))}get bufferLength(){return this[ee]}get encoding(){return this[Ae]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[ie]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Xe]}set async(e){this[Xe]=this[Xe]||!!e}[vo](){var e,r;this[yi]=!0,this.emit("abort",(e=this[un])==null?void 0:e.reason),this.destroy((r=this[un])==null?void 0:r.reason)}get aborted(){return this[yi]}set aborted(e){}write(e,r,n){var s;if(this[yi])return!1;if(this[st])throw new Error("write after end");if(this[Z])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Xe]?fn:HE;if(!this[ie]&&!Buffer.isBuffer(e)){if(GE(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(jE(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[ie]?(this[K]&&this[ee]!==0&&this[Ei](!0),this[K]?this.emit("data",e):this[wo](e),this[ee]!==0&&this.emit("readable"),n&&i(n),this[K]):e.length?(typeof e=="string"&&!(r===this[Ae]&&!((s=this[Sr])!=null&&s.lastNeed))&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Ae]&&(e=this[Sr].write(e)),this[K]&&this[ee]!==0&&this[Ei](!0),this[K]?this.emit("data",e):this[wo](e),this[ee]!==0&&this.emit("readable"),n&&i(n),this[K]):(this[ee]!==0&&this.emit("readable"),n&&i(n),this[K])}read(e){if(this[Z])return null;if(this[xe]=!1,this[ee]===0||e===0||e&&e>this[ee])return this[ot](),null;this[ie]&&(e=null),this[Q].length>1&&!this[ie]&&(this[Q]=[this[Ae]?this[Q].join(""):Buffer.concat(this[Q],this[ee])]);let r=this[Ml](e||null,this[Q][0]);return this[ot](),r}[Ml](e,r){if(this[ie])this[wi]();else{let n=r;e===n.length||e===null?this[wi]():typeof n=="string"?(this[Q][0]=n.slice(e),r=n.slice(0,e),this[ee]-=e):(this[Q][0]=n.subarray(e),r=n.subarray(0,e),this[ee]-=e)}return this.emit("data",r),!this[Q].length&&!this[st]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[st]=!0,this.writable=!1,(this[K]||!this[ln])&&this[ot](),this}[xr](){this[Z]||(!this[Mt]&&!this[ue].length&&(this[xe]=!0),this[ln]=!1,this[K]=!0,this.emit("resume"),this[Q].length?this[Ei]():this[st]?this[ot]():this.emit("drain"))}resume(){return this[xr]()}pause(){this[K]=!1,this[ln]=!0,this[xe]=!1}get destroyed(){return this[Z]}get flowing(){return this[K]}get paused(){return this[ln]}[wo](e){this[ie]?this[ee]+=1:this[ee]+=e.length,this[Q].push(e)}[wi](){return this[ie]?this[ee]-=1:this[ee]-=this[Q][0].length,this[Q].shift()}[Ei](e=!1){do;while(this[ql](this[wi]())&&this[Q].length);!e&&!this[Q].length&&!this[st]&&this.emit("drain")}[ql](e){return this.emit("data",e),this[K]}pipe(e,r){if(this[Z])return e;this[xe]=!1;let n=this[Et];return r=r||{},e===Ul.stdout||e===Ul.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ue].push(r.proxyErrors?new _o(this,e,r):new Si(this,e,r)),this[Xe]?fn(()=>this[xr]()):this[xr]()),e}unpipe(e){let r=this[ue].find(n=>n.dest===e);r&&(this[ue].length===1?(this[K]&&this[Mt]===0&&(this[K]=!1),this[ue]=[]):this[ue].splice(this[ue].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[xe]=!1,this[Mt]++,!this[ue].length&&!this[K]&&this[xr]();else if(e==="readable"&&this[ee]!==0)super.emit("readable");else if(WE(e)&&this[Et])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[cn]){let i=r;this[Xe]?fn(()=>i.call(this,this[cn])):i.call(this,this[cn])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Mt]=this.listeners("data").length,this[Mt]===0&&!this[xe]&&!this[ue].length&&(this[K]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Mt]=0,!this[xe]&&!this[ue].length&&(this[K]=!1)),r}get emittedEnd(){return this[Et]}[ot](){!this[mi]&&!this[Et]&&!this[Z]&&this[Q].length===0&&this[st]&&(this[mi]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[gi]&&this.emit("close"),this[mi]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==Z&&this[Z])return!1;if(e==="data")return!this[ie]&&!n?!1:this[Xe]?(fn(()=>this[So](n)),!0):this[So](n);if(e==="end")return this[Hl]();if(e==="close"){if(this[gi]=!0,!this[Et]&&!this[Z])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[cn]=n,super.emit(yo,n);let s=!this[un]||this.listeners("error").length?super.emit("error",n):!1;return this[ot](),s}else if(e==="resume"){let s=super.emit("resume");return this[ot](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...r);return this[ot](),i}[So](e){for(let n of this[ue])n.dest.write(e)===!1&&this.pause();let r=this[xe]?!1:super.emit("data",e);return this[ot](),r}[Hl](){return this[Et]?!1:(this[Et]=!0,this.readable=!1,this[Xe]?(fn(()=>this[xo]()),!0):this[xo]())}[xo](){if(this[Sr]){let r=this[Sr].end();if(r){for(let n of this[ue])n.dest.write(r);this[xe]||super.emit("data",r)}}for(let r of this[ue])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[ie]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[ie]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[ie])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Ae]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(Z,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[xe]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[st])return r();let s,o,a=d=>{this.off("data",c),this.off("end",l),this.off(Z,u),r(),o(d)},c=d=>{this.off("error",a),this.off("end",l),this.off(Z,u),this.pause(),s({value:d,done:!!this[st]})},l=()=>{this.off("error",a),this.off("data",c),this.off(Z,u),r(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,g)=>{o=g,s=d,this.once(Z,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[xe]=!1;let e=!1,r=()=>(this.pause(),this.off(yo,r),this.off(Z,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(yo,r),this.once(Z,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[Z])return e?this.emit("error",e):this.emit(Z),this;this[Z]=!0,this[xe]=!0,this[Q].length=0,this[ee]=0;let r=this;return typeof r.close=="function"&&!this[gi]&&r.close(),e?this.emit("error",e):this.emit(Z),this}static get isStream(){return UE}};var ZE=fe.default.writev,yt=Symbol("_autoClose"),$e=Symbol("_close"),dn=Symbol("_ended"),$=Symbol("_fd"),Lo=Symbol("_finished"),ct=Symbol("_flags"),Ro=Symbol("_flush"),To=Symbol("_handleChunk"),Oo=Symbol("_makeBuf"),pn=Symbol("_mode"),vi=Symbol("_needDrain"),br=Symbol("_onerror"),Lr=Symbol("_onopen"),Po=Symbol("_onread"),vr=Symbol("_onwrite"),St=Symbol("_open"),Fe=Symbol("_path"),wt=Symbol("_pos"),Ye=Symbol("_queue"),_r=Symbol("_read"),Io=Symbol("_readSize"),at=Symbol("_reading"),hn=Symbol("_remain"),Co=Symbol("_size"),_i=Symbol("_write"),qt=Symbol("_writing"),bi=Symbol("_defaultFlag"),Ht=Symbol("_errored"),Wt=class extends ge{[Ht]=!1;[$];[Fe];[Io];[at]=!1;[Co];[hn];[yt];constructor(e,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Ht]=!1,this[$]=typeof r.fd=="number"?r.fd:void 0,this[Fe]=e,this[Io]=r.readSize||16*1024*1024,this[at]=!1,this[Co]=typeof r.size=="number"?r.size:1/0,this[hn]=this[Co],this[yt]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[$]=="number"?this[_r]():this[St]()}get fd(){return this[$]}get path(){return this[Fe]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[St](){fe.default.open(this[Fe],"r",(e,r)=>this[Lr](e,r))}[Lr](e,r){e?this[br](e):(this[$]=r,this.emit("open",r),this[_r]())}[Oo](){return Buffer.allocUnsafe(Math.min(this[Io],this[hn]))}[_r](){if(!this[at]){this[at]=!0;let e=this[Oo]();if(e.length===0)return process.nextTick(()=>this[Po](null,0,e));fe.default.read(this[$],e,0,e.length,null,(r,n,i)=>this[Po](r,n,i))}}[Po](e,r,n){this[at]=!1,e?this[br](e):this[To](r,n)&&this[_r]()}[$e](){if(this[yt]&&typeof this[$]=="number"){let e=this[$];this[$]=void 0,fe.default.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[br](e){this[at]=!0,this[$e](),this.emit("error",e)}[To](e,r){let n=!1;return this[hn]-=e,e>0&&(n=super.write(e<r.length?r.subarray(0,e):r)),(e===0||this[hn]<=0)&&(n=!1,this[$e](),super.end()),n}emit(e,...r){switch(e){case"prefinish":case"finish":return!1;case"drain":return typeof this[$]=="number"&&this[_r](),!1;case"error":return this[Ht]?!1:(this[Ht]=!0,super.emit(e,...r));default:return super.emit(e,...r)}}},Li=class extends Wt{[St](){let e=!0;try{this[Lr](null,fe.default.openSync(this[Fe],"r")),e=!1}finally{e&&this[$e]()}}[_r](){let e=!0;try{if(!this[at]){this[at]=!0;do{let r=this[Oo](),n=r.length===0?0:fe.default.readSync(this[$],r,0,r.length,null);if(!this[To](n,r))break}while(!0);this[at]=!1}e=!1}finally{e&&this[$e]()}}[$e](){if(this[yt]&&typeof this[$]=="number"){let e=this[$];this[$]=void 0,fe.default.closeSync(e),this.emit("close")}}},lt=class extends jl.default{readable=!1;writable=!0;[Ht]=!1;[qt]=!1;[dn]=!1;[Ye]=[];[vi]=!1;[Fe];[pn];[yt];[$];[bi];[ct];[Lo]=!1;[wt];constructor(e,r){r=r||{},super(r),this[Fe]=e,this[$]=typeof r.fd=="number"?r.fd:void 0,this[pn]=r.mode===void 0?438:r.mode,this[wt]=typeof r.start=="number"?r.start:void 0,this[yt]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[wt]!==void 0?"r+":"w";this[bi]=r.flags===void 0,this[ct]=r.flags===void 0?n:r.flags,this[$]===void 0&&this[St]()}emit(e,...r){if(e==="error"){if(this[Ht])return!1;this[Ht]=!0}return super.emit(e,...r)}get fd(){return this[$]}get path(){return this[Fe]}[br](e){this[$e](),this[qt]=!0,this.emit("error",e)}[St](){fe.default.open(this[Fe],this[ct],this[pn],(e,r)=>this[Lr](e,r))}[Lr](e,r){this[bi]&&this[ct]==="r+"&&e&&e.code==="ENOENT"?(this[ct]="w",this[St]()):e?this[br](e):(this[$]=r,this.emit("open",r),this[qt]||this[Ro]())}end(e,r){return e&&this.write(e,r),this[dn]=!0,!this[qt]&&!this[Ye].length&&typeof this[$]=="number"&&this[vr](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[dn]?(this.emit("error",new Error("write() after end()")),!1):this[$]===void 0||this[qt]||this[Ye].length?(this[Ye].push(e),this[vi]=!0,!1):(this[qt]=!0,this[_i](e),!0)}[_i](e){fe.default.write(this[$],e,0,e.length,this[wt],(r,n)=>this[vr](r,n))}[vr](e,r){e?this[br](e):(this[wt]!==void 0&&typeof r=="number"&&(this[wt]+=r),this[Ye].length?this[Ro]():(this[qt]=!1,this[dn]&&!this[Lo]?(this[Lo]=!0,this[$e](),this.emit("finish")):this[vi]&&(this[vi]=!1,this.emit("drain"))))}[Ro](){if(this[Ye].length===0)this[dn]&&this[vr](null,0);else if(this[Ye].length===1)this[_i](this[Ye].pop());else{let e=this[Ye];this[Ye]=[],ZE(this[$],e,this[wt],(r,n)=>this[vr](r,n))}}[$e](){if(this[yt]&&typeof this[$]=="number"){let e=this[$];this[$]=void 0,fe.default.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},Rr=class extends lt{[St](){let e;if(this[bi]&&this[ct]==="r+")try{e=fe.default.openSync(this[Fe],this[ct],this[pn])}catch(r){if((r==null?void 0:r.code)==="ENOENT")return this[ct]="w",this[St]();throw r}else e=fe.default.openSync(this[Fe],this[ct],this[pn]);this[Lr](null,e)}[$e](){if(this[yt]&&typeof this[$]=="number"){let e=this[$];this[$]=void 0,fe.default.closeSync(e),this.emit("close")}}[_i](e){let r=!0;try{this[vr](null,fe.default.writeSync(this[$],e,0,e.length,this[wt])),r=!1}finally{if(r)try{this[$e]()}catch{}}}};var la=N(require("path"),1);var Kt=N(require("fs"),1),ji=require("path");var JE=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"],["onentry","onReadEntry"]]),Gl=t=>!!t.sync&&!!t.file,zl=t=>!t.sync&&!!t.file,Vl=t=>!!t.sync&&!t.file,Zl=t=>!t.sync&&!t.file;var Jl=t=>!!t.file;var XE=t=>{let e=JE.get(t);return e||t},mn=(t={})=>{if(!t)return{};let e={};for(let[r,n]of Object.entries(t)){let i=XE(r);e[i]=n}return e.chmod===void 0&&e.noChmod===!1&&(e.chmod=!0),delete e.noChmod,e};var Ke=(t,e,r,n,i)=>Object.assign((s=[],o,a)=>{Array.isArray(s)&&(o=s,s={}),typeof o=="function"&&(a=o,o=void 0),o?o=Array.from(o):o=[];let c=mn(s);if(i==null||i(c,o),Gl(c)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return t(c,o)}else if(zl(c)){let l=e(c,o),u=a||void 0;return u?l.then(()=>u(),u):l}else if(Vl(c)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return r(c,o)}else if(Zl(c)){if(typeof a=="function")throw new TypeError("callback only supported with file option");return n(c,o)}else throw new Error("impossible options??")},{syncFile:t,asyncFile:e,syncNoFile:r,asyncNoFile:n,validate:i});var uu=require("events");var Ri=N(require("assert"),1),xt=require("buffer");var Yl=N(require("zlib"),1);var Xl=N(require("zlib"),1),YE=Xl.default.constants||{ZLIB_VERNUM:4736},Pe=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},YE));var KE=xt.Buffer.concat,Pr=Object.getOwnPropertyDescriptor(xt.Buffer,"concat"),QE=t=>t,No=(Pr==null?void 0:Pr.writable)===!0||(Pr==null?void 0:Pr.set)!==void 0?t=>{xt.Buffer.concat=t?QE:KE}:t=>{},jt=Symbol("_superWrite"),Ir=class extends Error{code;errno;constructor(e,r){super("zlib: "+e.message,{cause:e}),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,r??this.constructor)}get name(){return"ZlibError"}},ko=Symbol("flushFlag"),gn=class extends ge{#e=!1;#r=!1;#n;#s;#i;#t;#o;get sawError(){return this.#e}get handle(){return this.#t}get flushFlag(){return this.#n}constructor(e,r){var n;if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");if(super(e),this.#n=e.flush??0,this.#s=e.finishFlush??0,this.#i=e.fullFlushFlag??0,typeof Yl[r]!="function")throw new TypeError("Compression method not supported: "+r);try{this.#t=new Yl[r](e)}catch(i){throw new Ir(i,this.constructor)}this.#o=i=>{this.#e||(this.#e=!0,this.close(),this.emit("error",i))},(n=this.#t)==null||n.on("error",i=>this.#o(new Ir(i))),this.once("end",()=>this.close)}close(){this.#t&&(this.#t.close(),this.#t=void 0,this.emit("close"))}reset(){var e,r;if(!this.#e)return(0,Ri.default)(this.#t,"zlib binding closed"),(r=(e=this.#t).reset)==null?void 0:r.call(e)}flush(e){this.ended||(typeof e!="number"&&(e=this.#i),this.write(Object.assign(xt.Buffer.alloc(0),{[ko]:e})))}end(e,r,n){return typeof e=="function"&&(n=e,r=void 0,e=void 0),typeof r=="function"&&(n=r,r=void 0),e&&(r?this.write(e,r):this.write(e)),this.flush(this.#s),this.#r=!0,super.end(n)}get ended(){return this.#r}[jt](e){return super.write(e)}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=xt.Buffer.from(e,r)),this.#e)return;(0,Ri.default)(this.#t,"zlib binding closed");let i=this.#t._handle,s=i.close;i.close=()=>{};let o=this.#t.close;this.#t.close=()=>{},No(!0);let a;try{let l=typeof e[ko]=="number"?e[ko]:this.#n;a=this.#t._processChunk(e,l),No(!1)}catch(l){No(!1),this.#o(new Ir(l,this.write))}finally{this.#t&&(this.#t._handle=i,i.close=s,this.#t.close=o,this.#t.removeAllListeners("error"))}this.#t&&this.#t.on("error",l=>this.#o(new Ir(l,this.write)));let c;if(a)if(Array.isArray(a)&&a.length>0){let l=a[0];c=this[jt](xt.Buffer.from(l));for(let u=1;u<a.length;u++)c=this[jt](a[u])}else c=this[jt](xt.Buffer.from(a));return n&&n(),c}},Pi=class extends gn{#e;#r;constructor(e,r){e=e||{},e.flush=e.flush||Pe.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Pe.Z_FINISH,e.fullFlushFlag=Pe.Z_FULL_FLUSH,super(e,r),this.#e=e.level,this.#r=e.strategy}params(e,r){if(!this.sawError){if(!this.handle)throw new Error("cannot switch params when binding is closed");if(!this.handle.params)throw new Error("not supported in this implementation");if(this.#e!==e||this.#r!==r){this.flush(Pe.Z_SYNC_FLUSH),(0,Ri.default)(this.handle,"zlib binding closed");let n=this.handle.flush;this.handle.flush=(i,s)=>{typeof i=="function"&&(s=i,i=this.flushFlag),this.flush(i),s==null||s()};try{this.handle.params(e,r)}finally{this.handle.flush=n}this.handle&&(this.#e=e,this.#r=r)}}}};var Ii=class extends Pi{#e;constructor(e){super(e,"Gzip"),this.#e=e&&!!e.portable}[jt](e){return this.#e?(this.#e=!1,e[9]=255,super[jt](e)):super[jt](e)}};var Ci=class extends Pi{constructor(e){super(e,"Unzip")}},Ti=class extends gn{constructor(e,r){e=e||{},e.flush=e.flush||Pe.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Pe.BROTLI_OPERATION_FINISH,e.fullFlushFlag=Pe.BROTLI_OPERATION_FLUSH,super(e,r)}},Oi=class extends Ti{constructor(e){super(e,"BrotliCompress")}},Di=class extends Ti{constructor(e){super(e,"BrotliDecompress")}},Ni=class extends gn{constructor(e,r){e=e||{},e.flush=e.flush||Pe.ZSTD_e_continue,e.finishFlush=e.finishFlush||Pe.ZSTD_e_end,e.fullFlushFlag=Pe.ZSTD_e_flush,super(e,r)}},ki=class extends Ni{constructor(e){super(e,"ZstdCompress")}},Ai=class extends Ni{constructor(e){super(e,"ZstdDecompress")}};var Vt=require("path");var Kl=(t,e)=>{if(Number.isSafeInteger(t))t<0?rw(t,e):tw(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},tw=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},rw=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=eu(i):i===0?e[n-1]=0:(r=!0,e[n-1]=tu(i))}},Ql=t=>{let e=t[0],r=e===128?iw(t.subarray(1,t.length)):e===255?nw(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},nw=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var s=Number(t[i]),o;n?o=eu(s):s===0?o=s:(n=!0,o=tu(s)),o!==0&&(r-=o*Math.pow(256,e-i-1))}return r},iw=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=Number(t[n]);i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},eu=t=>(255^t)&255,tu=t=>(255^t)+1&255;var Fi=t=>$i.has(t);var $i=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]),ru=new Map(Array.from($i).map(t=>[t[1],t[0]]));var ve=class{cksumValid=!1;needPax=!1;nullBlock=!1;block;path;mode;uid;gid;size;cksum;#e="Unsupported";linkpath;uname;gname;devmaj=0;devmin=0;atime;ctime;mtime;charset;comment;constructor(e,r=0,n,i){Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.#r(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");this.path=(n==null?void 0:n.path)??Gt(e,r,100),this.mode=(n==null?void 0:n.mode)??(i==null?void 0:i.mode)??vt(e,r+100,8),this.uid=(n==null?void 0:n.uid)??(i==null?void 0:i.uid)??vt(e,r+108,8),this.gid=(n==null?void 0:n.gid)??(i==null?void 0:i.gid)??vt(e,r+116,8),this.size=(n==null?void 0:n.size)??(i==null?void 0:i.size)??vt(e,r+124,12),this.mtime=(n==null?void 0:n.mtime)??(i==null?void 0:i.mtime)??Ao(e,r+136,12),this.cksum=vt(e,r+148,12),i&&this.#r(i,!0),n&&this.#r(n);let s=Gt(e,r+156,1);if(Fi(s)&&(this.#e=s||"0"),this.#e==="0"&&this.path.slice(-1)==="/"&&(this.#e="5"),this.#e==="5"&&(this.size=0),this.linkpath=Gt(e,r+157,100),e.subarray(r+257,r+265).toString()==="ustar\x0000")if(this.uname=(n==null?void 0:n.uname)??(i==null?void 0:i.uname)??Gt(e,r+265,32),this.gname=(n==null?void 0:n.gname)??(i==null?void 0:i.gname)??Gt(e,r+297,32),this.devmaj=(n==null?void 0:n.devmaj)??(i==null?void 0:i.devmaj)??vt(e,r+329,8)??0,this.devmin=(n==null?void 0:n.devmin)??(i==null?void 0:i.devmin)??vt(e,r+337,8)??0,e[r+475]!==0){let a=Gt(e,r+345,155);this.path=a+"/"+this.path}else{let a=Gt(e,r+345,130);a&&(this.path=a+"/"+this.path),this.atime=(n==null?void 0:n.atime)??(i==null?void 0:i.atime)??Ao(e,r+476,12),this.ctime=(n==null?void 0:n.ctime)??(i==null?void 0:i.ctime)??Ao(e,r+488,12)}let o=256;for(let a=r;a<r+148;a++)o+=e[a];for(let a=r+156;a<r+512;a++)o+=e[a];this.cksumValid=o===this.cksum,this.cksum===void 0&&o===256&&(this.nullBlock=!0)}#r(e,r=!1){Object.assign(this,Object.fromEntries(Object.entries(e).filter(([n,i])=>!(i==null||n==="path"&&r||n==="linkpath"&&r||n==="global"))))}encode(e,r=0){if(e||(e=this.block=Buffer.alloc(512)),this.#e==="Unsupported"&&(this.#e="0"),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=ow(this.path||"",n),s=i[0],o=i[1];this.needPax=!!i[2],this.needPax=zt(e,r,100,s)||this.needPax,this.needPax=_t(e,r+100,8,this.mode)||this.needPax,this.needPax=_t(e,r+108,8,this.uid)||this.needPax,this.needPax=_t(e,r+116,8,this.gid)||this.needPax,this.needPax=_t(e,r+124,12,this.size)||this.needPax,this.needPax=Fo(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this.#e.charCodeAt(0),this.needPax=zt(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=zt(e,r+265,32,this.uname)||this.needPax,this.needPax=zt(e,r+297,32,this.gname)||this.needPax,this.needPax=_t(e,r+329,8,this.devmaj)||this.needPax,this.needPax=_t(e,r+337,8,this.devmin)||this.needPax,this.needPax=zt(e,r+345,n,o)||this.needPax,e[r+475]!==0?this.needPax=zt(e,r+345,155,o)||this.needPax:(this.needPax=zt(e,r+345,130,o)||this.needPax,this.needPax=Fo(e,r+476,12,this.atime)||this.needPax,this.needPax=Fo(e,r+488,12,this.ctime)||this.needPax);let a=256;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,_t(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}get type(){return this.#e==="Unsupported"?this.#e:$i.get(this.#e)}get typeKey(){return this.#e}set type(e){let r=String(ru.get(e));if(Fi(r)||r==="Unsupported")this.#e=r;else if(Fi(e))this.#e=e;else throw new TypeError("invalid entry type: "+e)}},ow=(t,e)=>{let n=t,i="",s,o=Vt.posix.parse(t).root||".";if(Buffer.byteLength(n)<100)s=[n,i,!1];else{i=Vt.posix.dirname(n),n=Vt.posix.basename(n);do Buffer.byteLength(n)<=100&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(i)<=e?s=[n.slice(0,99),i,!0]:(n=Vt.posix.join(Vt.posix.basename(i),n),i=Vt.posix.dirname(i));while(i!==o&&s===void 0);s||(s=[t.slice(0,99),"",!0])}return s},Gt=(t,e,r)=>t.subarray(e,e+r).toString("utf8").replace(/\0.*/,""),Ao=(t,e,r)=>aw(vt(t,e,r)),aw=t=>t===void 0?void 0:new Date(t*1e3),vt=(t,e,r)=>Number(t[e])&128?Ql(t.subarray(e,e+r)):lw(t,e,r),cw=t=>isNaN(t)?void 0:t,lw=(t,e,r)=>cw(parseInt(t.subarray(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),uw={12:8589934591,8:2097151},_t=(t,e,r,n)=>n===void 0?!1:n>uw[r]||n<0?(Kl(n,t.subarray(e,e+r)),!0):(fw(t,e,r,n),!1),fw=(t,e,r,n)=>t.write(dw(n,r),e,r,"ascii"),dw=(t,e)=>hw(Math.floor(t).toString(8),e),hw=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",Fo=(t,e,r,n)=>n===void 0?!1:_t(t,e,r,n.getTime()/1e3),pw=new Array(156).join("\0"),zt=(t,e,r,n)=>n===void 0?!1:(t.write(n+pw,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);var iu=require("path");var bt=class t{atime;mtime;ctime;charset;comment;gid;uid;gname;uname;linkpath;dev;ino;nlink;path;size;mode;global;constructor(e,r=!1){this.atime=e.atime,this.charset=e.charset,this.comment=e.comment,this.ctime=e.ctime,this.dev=e.dev,this.gid=e.gid,this.global=r,this.gname=e.gname,this.ino=e.ino,this.linkpath=e.linkpath,this.mtime=e.mtime,this.nlink=e.nlink,this.path=e.path,this.size=e.size,this.uid=e.uid,this.uname=e.uname}encode(){let e=this.encodeBody();if(e==="")return Buffer.allocUnsafe(0);let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new ve({path:("PaxHeader/"+(0,iu.basename)(this.path??"")).slice(0,99),mode:this.mode||420,uid:this.uid,gid:this.gid,size:r,mtime:this.mtime,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime,ctime:this.ctime}).encode(i),i.write(e,512,r,"utf8");for(let s=r+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===void 0)return"";let r=this[e],n=r instanceof Date?r.getTime()/1e3:r,i=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+n+`
`,s=Buffer.byteLength(i),o=Math.floor(Math.log(s)/Math.log(10))+1;return s+o>=Math.pow(10,o)&&(o+=1),o+s+i}static parse(e,r,n=!1){return new t(mw(gw(e),r),n)}},mw=(t,e)=>e?Object.assign({},e,t):t,gw=t=>t.replace(/\n$/,"").split(`
`).reduce(Ew,Object.create(null)),Ew=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.slice((r+" ").length);let n=e.split("="),i=n.shift();if(!i)return t;let s=i.replace(/^SCHILY\.(dev|ino|nlink)/,"$1"),o=n.join("=");return t[s]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(s)?new Date(Number(o)*1e3):/^[0-9]+$/.test(o)?+o:o,t};var ww=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,k=ww!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/");var Cr=class extends ge{extended;globalExtended;header;startBlockSize;blockRemain;remain;type;meta=!1;ignore=!1;path;mode;uid;gid;uname;gname;size=0;mtime;atime;ctime;linkpath;dev;ino;nlink;invalid=!1;absolute;unsupported=!1;constructor(e,r,n){switch(super({}),this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.remain=e.size??0,this.startBlockSize=512*Math.ceil(this.remain/512),this.blockRemain=this.startBlockSize,this.type=e.type,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}if(!e.path)throw new Error("no path provided for tar.ReadEntry");this.path=k(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=this.remain,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=e.linkpath?k(e.linkpath):void 0,this.uname=e.uname,this.gname=e.gname,r&&this.#e(r),n&&this.#e(n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.subarray(0,n))}#e(e,r=!1){e.path&&(e.path=k(e.path)),e.linkpath&&(e.linkpath=k(e.linkpath)),Object.assign(this,Object.fromEntries(Object.entries(e).filter(([n,i])=>!(i==null||n==="path"&&r))))}};var Zt=(t,e,r,n={})=>{t.file&&(n.file=t.file),t.cwd&&(n.cwd=t.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!t.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),t.emit("warn",e,r,n)):r instanceof Error?t.emit("error",Object.assign(r,n)):t.emit("error",Object.assign(new Error(`${e}: ${r}`),n))};var yw=1024*1024,qo=Buffer.from([31,139]),Ho=Buffer.from([40,181,47,253]),Sw=Math.max(qo.length,Ho.length),Ie=Symbol("state"),Jt=Symbol("writeEntry"),ut=Symbol("readEntry"),$o=Symbol("nextEntry"),su=Symbol("processEntry"),Qe=Symbol("extendedHeader"),En=Symbol("globalExtendedHeader"),Lt=Symbol("meta"),ou=Symbol("emitMeta"),M=Symbol("buffer"),ft=Symbol("queue"),Rt=Symbol("ended"),Bo=Symbol("emittedEnd"),Xt=Symbol("emit"),J=Symbol("unzip"),Bi=Symbol("consumeChunk"),Ui=Symbol("consumeChunkSub"),Uo=Symbol("consumeBody"),au=Symbol("consumeMeta"),cu=Symbol("consumeHeader"),wn=Symbol("consuming"),Mo=Symbol("bufferConcat"),Mi=Symbol("maybeEnd"),Tr=Symbol("writing"),Pt=Symbol("aborted"),qi=Symbol("onDone"),Yt=Symbol("sawValidEntry"),Hi=Symbol("sawNullBlock"),Wi=Symbol("sawEOF"),lu=Symbol("closeStream"),xw=()=>!0,dt=class extends uu.EventEmitter{file;strict;maxMetaEntrySize;filter;brotli;zstd;writable=!0;readable=!1;[ft]=[];[M];[ut];[Jt];[Ie]="begin";[Lt]="";[Qe];[En];[Rt]=!1;[J];[Pt]=!1;[Yt];[Hi]=!1;[Wi]=!1;[Tr]=!1;[wn]=!1;[Bo]=!1;constructor(e={}){super(),this.file=e.file||"",this.on(qi,()=>{(this[Ie]==="begin"||this[Yt]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(qi,e.ondone):this.on(qi,()=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||yw,this.filter=typeof e.filter=="function"?e.filter:xw;let r=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!(e.gzip||e.zstd)&&e.brotli!==void 0?e.brotli:r?void 0:!1;let n=e.file&&(e.file.endsWith(".tar.zst")||e.file.endsWith(".tzst"));this.zstd=!(e.gzip||e.brotli)&&e.zstd!==void 0?e.zstd:n?!0:void 0,this.on("end",()=>this[lu]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onReadEntry=="function"&&this.on("entry",e.onReadEntry)}warn(e,r,n={}){Zt(this,e,r,n)}[cu](e,r){this[Yt]===void 0&&(this[Yt]=!1);let n;try{n=new ve(e,r,this[Qe],this[En])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Hi]?(this[Wi]=!0,this[Ie]==="begin"&&(this[Ie]="header"),this[Xt]("eof")):(this[Hi]=!0,this[Xt]("nullBlock"));else if(this[Hi]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&!/^(Global)?ExtendedHeader$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[Jt]=new Cr(n,this[Qe],this[En]);if(!this[Yt])if(s.remain){let o=()=>{s.invalid||(this[Yt]=!0)};s.on("end",o)}else this[Yt]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[Xt]("ignoredEntry",s),this[Ie]="ignore",s.resume()):s.size>0&&(this[Lt]="",s.on("data",o=>this[Lt]+=o),this[Ie]="meta"):(this[Qe]=void 0,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[Xt]("ignoredEntry",s),this[Ie]=s.remain?"ignore":"header",s.resume()):(s.remain?this[Ie]="body":(this[Ie]="header",s.end()),this[ut]?this[ft].push(s):(this[ft].push(s),this[$o]())))}}}[lu](){queueMicrotask(()=>this.emit("close"))}[su](e){let r=!0;if(!e)this[ut]=void 0,r=!1;else if(Array.isArray(e)){let[n,...i]=e;this.emit(n,...i)}else this[ut]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",()=>this[$o]()),r=!1);return r}[$o](){do;while(this[su](this[ft].shift()));if(!this[ft].length){let e=this[ut];!e||e.flowing||e.size===e.remain?this[Tr]||this.emit("drain"):e.once("drain",()=>this.emit("drain"))}}[Uo](e,r){let n=this[Jt];if(!n)throw new Error("attempt to consume body without entry??");let i=n.blockRemain??0,s=i>=e.length&&r===0?e:e.subarray(r,r+i);return n.write(s),n.blockRemain||(this[Ie]="header",this[Jt]=void 0,n.end()),s.length}[au](e,r){let n=this[Jt],i=this[Uo](e,r);return!this[Jt]&&n&&this[ou](n),i}[Xt](e,r,n){!this[ft].length&&!this[ut]?this.emit(e,r,n):this[ft].push([e,r,n])}[ou](e){switch(this[Xt]("meta",this[Lt]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Qe]=bt.parse(this[Lt],this[Qe],!1);break;case"GlobalExtendedHeader":this[En]=bt.parse(this[Lt],this[En],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":{let r=this[Qe]??Object.create(null);this[Qe]=r,r.path=this[Lt].replace(/\0.*/,"");break}case"NextFileHasLongLinkpath":{let r=this[Qe]||Object.create(null);this[Qe]=r,r.linkpath=this[Lt].replace(/\0.*/,"");break}default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Pt]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e,r,n){var o;if(typeof r=="function"&&(n=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof r=="string"?r:"utf8")),this[Pt])return n==null||n(),!1;if((this[J]===void 0||this.brotli===void 0&&this[J]===!1)&&e){if(this[M]&&(e=Buffer.concat([this[M],e]),this[M]=void 0),e.length<Sw)return this[M]=e,n==null||n(),!0;for(let l=0;this[J]===void 0&&l<qo.length;l++)e[l]!==qo[l]&&(this[J]=!1);let a=!1;if(this[J]===!1&&this.zstd!==!1){a=!0;for(let l=0;l<Ho.length;l++)if(e[l]!==Ho[l]){a=!1;break}}let c=this.brotli===void 0&&!a;if(this[J]===!1&&c)if(e.length<512)if(this[Rt])this.brotli=!0;else return this[M]=e,n==null||n(),!0;else try{new ve(e.subarray(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[J]===void 0||this[J]===!1&&(this.brotli||a)){let l=this[Rt];this[Rt]=!1,this[J]=this[J]===void 0?new Ci({}):a?new Ai({}):new Di({}),this[J].on("data",d=>this[Bi](d)),this[J].on("error",d=>this.abort(d)),this[J].on("end",()=>{this[Rt]=!0,this[Bi]()}),this[Tr]=!0;let u=!!this[J][l?"end":"write"](e);return this[Tr]=!1,n==null||n(),u}}this[Tr]=!0,this[J]?this[J].write(e):this[Bi](e),this[Tr]=!1;let s=this[ft].length?!1:this[ut]?this[ut].flowing:!0;return!s&&!this[ft].length&&((o=this[ut])==null||o.once("drain",()=>this.emit("drain"))),n==null||n(),s}[Mo](e){e&&!this[Pt]&&(this[M]=this[M]?Buffer.concat([this[M],e]):e)}[Mi](){if(this[Rt]&&!this[Bo]&&!this[Pt]&&!this[wn]){this[Bo]=!0;let e=this[Jt];if(e&&e.blockRemain){let r=this[M]?this[M].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[M]&&e.write(this[M]),e.end()}this[Xt](qi)}}[Bi](e){var r;if(this[wn]&&e)this[Mo](e);else if(!e&&!this[M])this[Mi]();else if(e){if(this[wn]=!0,this[M]){this[Mo](e);let n=this[M];this[M]=void 0,this[Ui](n)}else this[Ui](e);for(;this[M]&&((r=this[M])==null?void 0:r.length)>=512&&!this[Pt]&&!this[Wi];){let n=this[M];this[M]=void 0,this[Ui](n)}this[wn]=!1}(!this[M]||this[Rt])&&this[Mi]()}[Ui](e){let r=0,n=e.length;for(;r+512<=n&&!this[Pt]&&!this[Wi];)switch(this[Ie]){case"begin":case"header":this[cu](e,r),r+=512;break;case"ignore":case"body":r+=this[Uo](e,r);break;case"meta":r+=this[au](e,r);break;default:throw new Error("invalid state: "+this[Ie])}r<n&&(this[M]?this[M]=Buffer.concat([e.subarray(r),this[M]]):this[M]=e.subarray(r))}end(e,r,n){return typeof e=="function"&&(n=e,r=void 0,e=void 0),typeof r=="function"&&(n=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,r)),n&&this.once("finish",n),this[Pt]||(this[J]?(e&&this[J].write(e),this[J].end()):(this[Rt]=!0,(this.brotli===void 0||this.zstd===void 0)&&(e=e||Buffer.alloc(0)),e&&this.write(e),this[Mi]())),this}};var It=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)};var vw=t=>{let e=t.onReadEntry;t.onReadEntry=e?r=>{e(r),r.resume()}:r=>r.resume()},Wo=(t,e)=>{let r=new Map(e.map(s=>[It(s),!0])),n=t.filter,i=(s,o="")=>{let a=o||(0,ji.parse)(s).root||".",c;if(s===a)c=!1;else{let l=r.get(s);l!==void 0?c=l:c=i((0,ji.dirname)(s),a)}return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(It(s)):s=>i(It(s))},_w=t=>{let e=new dt(t),r=t.file,n;try{n=Kt.default.openSync(r,"r");let i=Kt.default.fstatSync(n),s=t.maxReadSize||16*1024*1024;if(i.size<s){let o=Buffer.allocUnsafe(i.size),a=Kt.default.readSync(n,o,0,i.size,0);e.end(a===o.byteLength?o:o.subarray(0,a))}else{let o=0,a=Buffer.allocUnsafe(s);for(;o<i.size;){let c=Kt.default.readSync(n,a,0,s,o);if(c===0)break;o+=c,e.write(a.subarray(0,c))}e.end()}}finally{if(typeof n=="number")try{Kt.default.closeSync(n)}catch{}}},bw=(t,e)=>{let r=new dt(t),n=t.maxReadSize||16*1024*1024,i=t.file;return new Promise((o,a)=>{r.on("error",a),r.on("end",o),Kt.default.stat(i,(c,l)=>{if(c)a(c);else{let u=new Wt(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})})},ht=Ke(_w,bw,t=>new dt(t),t=>new dt(t),(t,e)=>{e!=null&&e.length&&Wo(t,e),t.noResume||vw(t)});var Ln=N(require("fs"),1);var Be=N(require("fs"),1);var Zo=N(require("path"),1);var jo=(t,e,r)=>(t&=4095,r&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t);var du=require("path"),{isAbsolute:Lw,parse:fu}=du.win32,yn=t=>{let e="",r=fu(t);for(;Lw(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.slice(n.length),e+=n,r=fu(t)}return[e,t]};var Gi=["|","<",">","?",":"],Go=Gi.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),Rw=new Map(Gi.map((t,e)=>[t,Go[e]])),Pw=new Map(Go.map((t,e)=>[t,Gi[e]])),zo=t=>Gi.reduce((e,r)=>e.split(r).join(Rw.get(r)),t),hu=t=>Go.reduce((e,r)=>e.split(r).join(Pw.get(r)),t);var yu=(t,e)=>e?(t=k(t).replace(/^\.(\/|$)/,""),It(e)+"/"+t):k(t),Iw=16*1024*1024,mu=Symbol("process"),gu=Symbol("file"),Eu=Symbol("directory"),Jo=Symbol("symlink"),wu=Symbol("hardlink"),Sn=Symbol("header"),zi=Symbol("read"),Xo=Symbol("lstat"),Vi=Symbol("onlstat"),Yo=Symbol("onread"),Ko=Symbol("onreadlink"),Qo=Symbol("openfile"),ea=Symbol("onopenfile"),Ct=Symbol("close"),Zi=Symbol("mode"),ta=Symbol("awaitDrain"),Vo=Symbol("ondrain"),et=Symbol("prefix"),xn=class extends ge{path;portable;myuid=process.getuid&&process.getuid()||0;myuser=process.env.USER||"";maxReadSize;linkCache;statCache;preservePaths;cwd;strict;mtime;noPax;noMtime;prefix;fd;blockLen=0;blockRemain=0;buf;pos=0;remain=0;length=0;offset=0;win32;absolute;header;type;linkpath;stat;onWriteEntry;#e=!1;constructor(e,r={}){let n=mn(r);super(),this.path=k(e),this.portable=!!n.portable,this.maxReadSize=n.maxReadSize||Iw,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=k(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime,this.prefix=n.prefix?k(n.prefix):void 0,this.onWriteEntry=n.onWriteEntry,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let i=!1;if(!this.preservePaths){let[o,a]=yn(this.path);o&&typeof a=="string"&&(this.path=a,i=o)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=hu(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=k(n.absolute||Zo.default.resolve(this.cwd,e)),this.path===""&&(this.path="./"),i&&this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:this,path:i+this.path});let s=this.statCache.get(this.absolute);s?this[Vi](s):this[Xo]()}warn(e,r,n={}){return Zt(this,e,r,n)}emit(e,...r){return e==="error"&&(this.#e=!0),super.emit(e,...r)}[Xo](){Be.default.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Vi](r)})}[Vi](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Cw(e),this.emit("stat",e),this[mu]()}[mu](){switch(this.type){case"File":return this[gu]();case"Directory":return this[Eu]();case"SymbolicLink":return this[Jo]();default:return this.end()}}[Zi](e){return jo(e,this.type==="Directory",this.portable)}[et](e){return yu(e,this.prefix)}[Sn](){var r,n;if(!this.stat)throw new Error("cannot write header before stat");this.type==="Directory"&&this.portable&&(this.noMtime=!0),(r=this.onWriteEntry)==null||r.call(this,this),this.header=new ve({path:this[et](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[et](this.linkpath):this.linkpath,mode:this[Zi](this.stat.mode),uid:this.portable?void 0:this.stat.uid,gid:this.portable?void 0:this.stat.gid,size:this.stat.size,mtime:this.noMtime?void 0:this.mtime||this.stat.mtime,type:this.type==="Unsupported"?void 0:this.type,uname:this.portable?void 0:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?void 0:this.stat.atime,ctime:this.portable?void 0:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new bt({atime:this.portable?void 0:this.header.atime,ctime:this.portable?void 0:this.header.ctime,gid:this.portable?void 0:this.header.gid,mtime:this.noMtime?void 0:this.mtime||this.header.mtime,path:this[et](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[et](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?void 0:this.header.uid,uname:this.portable?void 0:this.header.uname,dev:this.portable?void 0:this.stat.dev,ino:this.portable?void 0:this.stat.ino,nlink:this.portable?void 0:this.stat.nlink}).encode());let e=(n=this.header)==null?void 0:n.block;if(!e)throw new Error("failed to encode header");super.write(e)}[Eu](){if(!this.stat)throw new Error("cannot create directory entry without stat");this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Sn](),this.end()}[Jo](){Be.default.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Ko](r)})}[Ko](e){this.linkpath=k(e),this[Sn](),this.end()}[wu](e){if(!this.stat)throw new Error("cannot create link entry without stat");this.type="Link",this.linkpath=k(Zo.default.relative(this.cwd,e)),this.stat.size=0,this[Sn](),this.end()}[gu](){if(!this.stat)throw new Error("cannot create file entry without stat");if(this.stat.nlink>1){let e=`${this.stat.dev}:${this.stat.ino}`,r=this.linkCache.get(e);if((r==null?void 0:r.indexOf(this.cwd))===0)return this[wu](r);this.linkCache.set(e,this.absolute)}if(this[Sn](),this.stat.size===0)return this.end();this[Qo]()}[Qo](){Be.default.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[ea](r)})}[ea](e){if(this.fd=e,this.#e)return this[Ct]();if(!this.stat)throw new Error("should stat before calling onopenfile");this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[zi]()}[zi](){let{fd:e,buf:r,offset:n,length:i,pos:s}=this;if(e===void 0||r===void 0)throw new Error("cannot read file without first opening");Be.default.read(e,r,n,i,s,(o,a)=>{if(o)return this[Ct](()=>this.emit("error",o));this[Yo](a)})}[Ct](e=()=>{}){this.fd!==void 0&&Be.default.close(this.fd,e)}[Yo](e){if(e<=0&&this.remain>0){let i=Object.assign(new Error("encountered unexpected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[Ct](()=>this.emit("error",i))}if(e>this.remain){let i=Object.assign(new Error("did not encounter expected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[Ct](()=>this.emit("error",i))}if(!this.buf)throw new Error("should have created buffer prior to reading");if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.subarray(this.offset,this.offset+e);this.write(r)?this[Vo]():this[ta](()=>this[Vo]())}[ta](e){this.once("drain",e)}write(e,r,n){if(typeof r=="function"&&(n=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof r=="string"?r:"utf8")),this.blockRemain<e.length){let i=Object.assign(new Error("writing more data than expected"),{path:this.absolute});return this.emit("error",i)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e,null,n)}[Vo](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Ct](e=>e?this.emit("error",e):this.end());if(!this.buf)throw new Error("buffer lost somehow in ONDRAIN");this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[zi]()}},Ji=class extends xn{sync=!0;[Xo](){this[Vi](Be.default.lstatSync(this.absolute))}[Jo](){this[Ko](Be.default.readlinkSync(this.absolute))}[Qo](){this[ea](Be.default.openSync(this.absolute,"r"))}[zi](){let e=!0;try{let{fd:r,buf:n,offset:i,length:s,pos:o}=this;if(r===void 0||n===void 0)throw new Error("fd and buf must be set in READ method");let a=Be.default.readSync(r,n,i,s,o);this[Yo](a),e=!1}finally{if(e)try{this[Ct](()=>{})}catch{}}}[ta](e){e()}[Ct](e=()=>{}){this.fd!==void 0&&Be.default.closeSync(this.fd),e()}},Or=class extends ge{blockLen=0;blockRemain=0;buf=0;pos=0;remain=0;length=0;preservePaths;portable;strict;noPax;noMtime;readEntry;type;prefix;path;mode;uid;gid;uname;gname;header;mtime;atime;ctime;linkpath;size;onWriteEntry;warn(e,r,n={}){return Zt(this,e,r,n)}constructor(e,r={}){var a,c;let n=mn(r);super(),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.onWriteEntry=n.onWriteEntry,this.readEntry=e;let{type:i}=e;if(i==="Unsupported")throw new Error("writing entry that should be ignored");this.type=i,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix,this.path=k(e.path),this.mode=e.mode!==void 0?this[Zi](e.mode):void 0,this.uid=this.portable?void 0:e.uid,this.gid=this.portable?void 0:e.gid,this.uname=this.portable?void 0:e.uname,this.gname=this.portable?void 0:e.gname,this.size=e.size,this.mtime=this.noMtime?void 0:n.mtime||e.mtime,this.atime=this.portable?void 0:e.atime,this.ctime=this.portable?void 0:e.ctime,this.linkpath=e.linkpath!==void 0?k(e.linkpath):void 0,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let s=!1;if(!this.preservePaths){let[l,u]=yn(this.path);l&&typeof u=="string"&&(this.path=u,s=l)}this.remain=e.size,this.blockRemain=e.startBlockSize,(a=this.onWriteEntry)==null||a.call(this,this),this.header=new ve({path:this[et](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[et](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?void 0:this.uid,gid:this.portable?void 0:this.gid,size:this.size,mtime:this.noMtime?void 0:this.mtime,type:this.type,uname:this.portable?void 0:this.uname,atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime}),s&&this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path}),this.header.encode()&&!this.noPax&&super.write(new bt({atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime,gid:this.portable?void 0:this.gid,mtime:this.noMtime?void 0:this.mtime,path:this[et](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[et](this.linkpath):this.linkpath,size:this.size,uid:this.portable?void 0:this.uid,uname:this.portable?void 0:this.uname,dev:this.portable?void 0:this.readEntry.dev,ino:this.portable?void 0:this.readEntry.ino,nlink:this.portable?void 0:this.readEntry.nlink}).encode());let o=(c=this.header)==null?void 0:c.block;if(!o)throw new Error("failed to encode header");super.write(o),e.pipe(this)}[et](e){return yu(e,this.prefix)}[Zi](e){return jo(e,this.type==="Directory",this.portable)}write(e,r,n){typeof r=="function"&&(n=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof r=="string"?r:"utf8"));let i=e.length;if(i>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=i,super.write(e,n)}end(e,r,n){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),typeof e=="function"&&(n=e,r=void 0,e=void 0),typeof r=="function"&&(n=r,r=void 0),typeof e=="string"&&(e=Buffer.from(e,r??"utf8")),n&&this.once("finish",n),e?super.end(e,n):super.end(n),this}},Cw=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";var Xi=class t{tail;head;length=0;static create(e=[]){return new t(e)}constructor(e=[]){for(let r of e)this.push(r)}*[Symbol.iterator](){for(let e=this.head;e;e=e.next)yield e.value}removeNode(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");let r=e.next,n=e.prev;return r&&(r.prev=n),n&&(n.next=r),e===this.head&&(this.head=r),e===this.tail&&(this.tail=n),this.length--,e.next=void 0,e.prev=void 0,e.list=void 0,r}unshiftNode(e){if(e===this.head)return;e.list&&e.list.removeNode(e);let r=this.head;e.list=this,e.next=r,r&&(r.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}pushNode(e){if(e===this.tail)return;e.list&&e.list.removeNode(e);let r=this.tail;e.list=this,e.prev=r,r&&(r.next=e),this.tail=e,this.head||(this.head=e),this.length++}push(...e){for(let r=0,n=e.length;r<n;r++)Ow(this,e[r]);return this.length}unshift(...e){for(var r=0,n=e.length;r<n;r++)Dw(this,e[r]);return this.length}pop(){if(!this.tail)return;let e=this.tail.value,r=this.tail;return this.tail=this.tail.prev,this.tail?this.tail.next=void 0:this.head=void 0,r.list=void 0,this.length--,e}shift(){if(!this.head)return;let e=this.head.value,r=this.head;return this.head=this.head.next,this.head?this.head.prev=void 0:this.tail=void 0,r.list=void 0,this.length--,e}forEach(e,r){r=r||this;for(let n=this.head,i=0;n;i++)e.call(r,n.value,i,this),n=n.next}forEachReverse(e,r){r=r||this;for(let n=this.tail,i=this.length-1;n;i--)e.call(r,n.value,i,this),n=n.prev}get(e){let r=0,n=this.head;for(;n&&r<e;r++)n=n.next;if(r===e&&n)return n.value}getReverse(e){let r=0,n=this.tail;for(;n&&r<e;r++)n=n.prev;if(r===e&&n)return n.value}map(e,r){r=r||this;let n=new t;for(let i=this.head;i;)n.push(e.call(r,i.value,this)),i=i.next;return n}mapReverse(e,r){r=r||this;var n=new t;for(let i=this.tail;i;)n.push(e.call(r,i.value,this)),i=i.prev;return n}reduce(e,r){let n,i=this.head;if(arguments.length>1)n=r;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;i;s++)n=e(n,i.value,s),i=i.next;return n}reduceReverse(e,r){let n,i=this.tail;if(arguments.length>1)n=r;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(let s=this.length-1;i;s--)n=e(n,i.value,s),i=i.prev;return n}toArray(){let e=new Array(this.length);for(let r=0,n=this.head;n;r++)e[r]=n.value,n=n.next;return e}toArrayReverse(){let e=new Array(this.length);for(let r=0,n=this.tail;n;r++)e[r]=n.value,n=n.prev;return e}slice(e=0,r=this.length){r<0&&(r+=this.length),e<0&&(e+=this.length);let n=new t;if(r<e||r<0)return n;e<0&&(e=0),r>this.length&&(r=this.length);let i=this.head,s=0;for(s=0;i&&s<e;s++)i=i.next;for(;i&&s<r;s++,i=i.next)n.push(i.value);return n}sliceReverse(e=0,r=this.length){r<0&&(r+=this.length),e<0&&(e+=this.length);let n=new t;if(r<e||r<0)return n;e<0&&(e=0),r>this.length&&(r=this.length);let i=this.length,s=this.tail;for(;s&&i>r;i--)s=s.prev;for(;s&&i>e;i--,s=s.prev)n.push(s.value);return n}splice(e,r=0,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);let i=this.head;for(let o=0;i&&o<e;o++)i=i.next;let s=[];for(let o=0;i&&o<r;o++)s.push(i.value),i=this.removeNode(i);i?i!==this.tail&&(i=i.prev):i=this.tail;for(let o of n)i=Tw(this,i,o);return s}reverse(){let e=this.head,r=this.tail;for(let n=e;n;n=n.prev){let i=n.prev;n.prev=n.next,n.next=i}return this.head=r,this.tail=e,this}};function Tw(t,e,r){let n=e,i=e?e.next:t.head,s=new vn(r,n,i,t);return s.next===void 0&&(t.tail=s),s.prev===void 0&&(t.head=s),t.length++,s}function Ow(t,e){t.tail=new vn(e,t.tail,void 0,t),t.head||(t.head=t.tail),t.length++}function Dw(t,e){t.head=new vn(e,void 0,t.head,t),t.tail||(t.tail=t.head),t.length++}var vn=class{list;next;prev;value;constructor(e,r,n,i){this.list=i,this.value=e,r?(r.next=this,this.prev=r):this.prev=void 0,n?(n.prev=this,this.next=n):this.next=void 0}};var ca=N(require("path"),1);var rs=class{path;absolute;entry;stat;readdir;pending=!1;ignore=!1;piped=!1;constructor(e,r){this.path=e||"./",this.absolute=r}},Su=Buffer.alloc(1024),Yi=Symbol("onStat"),_n=Symbol("ended"),Ue=Symbol("queue"),Qt=Symbol("current"),er=Symbol("process"),bn=Symbol("processing"),ra=Symbol("processJob"),Me=Symbol("jobs"),na=Symbol("jobDone"),Ki=Symbol("addFSEntry"),xu=Symbol("addTarEntry"),oa=Symbol("stat"),aa=Symbol("readdir"),Qi=Symbol("onreaddir"),es=Symbol("pipe"),vu=Symbol("entry"),ia=Symbol("entryOpt"),ts=Symbol("writeEntryClass"),_u=Symbol("write"),sa=Symbol("ondrain"),Tt=class extends ge{sync=!1;opt;cwd;maxReadSize;preservePaths;strict;noPax;prefix;linkCache;statCache;file;portable;zip;readdirCache;noDirRecurse;follow;noMtime;mtime;filter;jobs;[ts];onWriteEntry;[Ue];[Me]=0;[bn]=!1;[_n]=!1;constructor(e={}){if(super(),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=k(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this.onWriteEntry=e.onWriteEntry,this[ts]=xn,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,e.gzip||e.brotli||e.zstd){if((e.gzip?1:0)+(e.brotli?1:0)+(e.zstd?1:0)>1)throw new TypeError("gzip, brotli, zstd are mutually exclusive");if(e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new Ii(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new Oi(e.brotli)),e.zstd&&(typeof e.zstd!="object"&&(e.zstd={}),this.zip=new ki(e.zstd)),!this.zip)throw new Error("impossible");let r=this.zip;r.on("data",n=>super.write(n)),r.on("end",()=>super.end()),r.on("drain",()=>this[sa]()),this.on("resume",()=>r.resume())}else this.on("drain",this[sa]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,e.mtime&&(this.mtime=e.mtime),this.filter=typeof e.filter=="function"?e.filter:()=>!0,this[Ue]=new Xi,this[Me]=0,this.jobs=Number(e.jobs)||4,this[bn]=!1,this[_n]=!1}[_u](e){return super.write(e)}add(e){return this.write(e),this}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e&&this.add(e),this[_n]=!0,this[er](),n&&n(),this}write(e){if(this[_n])throw new Error("write after end");return e instanceof Cr?this[xu](e):this[Ki](e),this.flowing}[xu](e){let r=k(ca.default.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new rs(e.path,r);n.entry=new Or(e,this[ia](n)),n.entry.on("end",()=>this[na](n)),this[Me]+=1,this[Ue].push(n)}this[er]()}[Ki](e){let r=k(ca.default.resolve(this.cwd,e));this[Ue].push(new rs(e,r)),this[er]()}[oa](e){e.pending=!0,this[Me]+=1;let r=this.follow?"stat":"lstat";Ln.default[r](e.absolute,(n,i)=>{e.pending=!1,this[Me]-=1,n?this.emit("error",n):this[Yi](e,i)})}[Yi](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)?r.isFile()&&r.nlink>1&&e===this[Qt]&&!this.linkCache.get(`${r.dev}:${r.ino}`)&&!this.sync&&this[ra](e):e.ignore=!0,this[er]()}[aa](e){e.pending=!0,this[Me]+=1,Ln.default.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[Me]-=1,r)return this.emit("error",r);this[Qi](e,n)})}[Qi](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[er]()}[er](){if(!this[bn]){this[bn]=!0;for(let e=this[Ue].head;e&&this[Me]<this.jobs;e=e.next)if(this[ra](e.value),e.value.ignore){let r=e.next;this[Ue].removeNode(e),e.next=r}this[bn]=!1,this[_n]&&!this[Ue].length&&this[Me]===0&&(this.zip?this.zip.end(Su):(super.write(Su),super.end()))}}get[Qt](){return this[Ue]&&this[Ue].head&&this[Ue].head.value}[na](e){this[Ue].shift(),this[Me]-=1,this[er]()}[ra](e){if(!e.pending){if(e.entry){e===this[Qt]&&!e.piped&&this[es](e);return}if(!e.stat){let r=this.statCache.get(e.absolute);r?this[Yi](e,r):this[oa](e)}if(e.stat&&!e.ignore){if(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir){let r=this.readdirCache.get(e.absolute);if(r?this[Qi](e,r):this[aa](e),!e.readdir)return}if(e.entry=this[vu](e),!e.entry){e.ignore=!0;return}e===this[Qt]&&!e.piped&&this[es](e)}}}[ia](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix,onWriteEntry:this.onWriteEntry}}[vu](e){this[Me]+=1;try{return new this[ts](e.path,this[ia](e)).on("end",()=>this[na](e)).on("error",n=>this.emit("error",n))}catch(r){this.emit("error",r)}}[sa](){this[Qt]&&this[Qt].entry&&this[Qt].entry.resume()}[es](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[Ki](o+i)});let r=e.entry,n=this.zip;if(!r)throw new Error("cannot pipe without source");n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}warn(e,r,n={}){Zt(this,e,r,n)}},tr=class extends Tt{sync=!0;constructor(e){super(e),this[ts]=Ji}pause(){}resume(){}[oa](e){let r=this.follow?"statSync":"lstatSync";this[Yi](e,Ln.default[r](e.absolute))}[aa](e){this[Qi](e,Ln.default.readdirSync(e.absolute))}[es](e){let r=e.entry,n=this.zip;if(e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[Ki](o+i)}),!r)throw new Error("Cannot pipe without source");n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[_u](i)})}};var Nw=(t,e)=>{let r=new tr(t),n=new Rr(t.file,{mode:t.mode||438});r.pipe(n),bu(r,e)},kw=(t,e)=>{let r=new Tt(t),n=new lt(t.file,{mode:t.mode||438});r.pipe(n);let i=new Promise((s,o)=>{n.on("error",o),n.on("close",s),r.on("error",o)});return Lu(r,e),i},bu=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?ht({file:la.default.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onReadEntry:n=>t.add(n)}):t.add(r)}),t.end()},Lu=async(t,e)=>{for(let r=0;r<e.length;r++){let n=String(e[r]);n.charAt(0)==="@"?await ht({file:la.default.resolve(String(t.cwd),n.slice(1)),noResume:!0,onReadEntry:i=>{t.add(i)}}):t.add(n)}t.end()},Aw=(t,e)=>{let r=new tr(t);return bu(r,e),r},Fw=(t,e)=>{let r=new Tt(t);return Lu(r,e),r},Ru=Ke(Nw,kw,Aw,Fw,(t,e)=>{if(!(e!=null&&e.length))throw new TypeError("no paths specified to add to archive")});var Pa=N(require("fs"),1);var Hu=N(require("assert"),1),Ra=require("crypto"),F=N(require("fs"),1),_e=N(require("path"),1);var ua=N(require("fs"),1),$w=process.env.__FAKE_PLATFORM__||process.platform,Bw=$w==="win32",{O_CREAT:Uw,O_TRUNC:Mw,O_WRONLY:qw}=ua.default.constants,Pu=Number(process.env.__FAKE_FS_O_FILENAME__)||ua.default.constants.UV_FS_O_FILEMAP||0,Hw=Bw&&!!Pu,Ww=512*1024,jw=Pu|Mw|Uw|qw,fa=Hw?t=>t<Ww?jw:"w":()=>"w";var Rn=N(require("fs"),1),Dr=N(require("path"),1),da=(t,e,r)=>{try{return Rn.default.lchownSync(t,e,r)}catch(n){if((n==null?void 0:n.code)!=="ENOENT")throw n}},ns=(t,e,r,n)=>{Rn.default.lchown(t,e,r,i=>{n(i&&(i==null?void 0:i.code)!=="ENOENT"?i:null)})},Gw=(t,e,r,n,i)=>{if(e.isDirectory())ha(Dr.default.resolve(t,e.name),r,n,s=>{if(s)return i(s);let o=Dr.default.resolve(t,e.name);ns(o,r,n,i)});else{let s=Dr.default.resolve(t,e.name);ns(s,r,n,i)}},ha=(t,e,r,n)=>{Rn.default.readdir(t,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return ns(t,e,r,n);let o=s.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--o===0)return ns(t,e,r,n)}};for(let l of s)Gw(t,l,e,r,c)})},zw=(t,e,r,n)=>{e.isDirectory()&&pa(Dr.default.resolve(t,e.name),r,n),da(Dr.default.resolve(t,e.name),r,n)},pa=(t,e,r)=>{let n;try{n=Rn.default.readdirSync(t,{withFileTypes:!0})}catch(i){let s=i;if((s==null?void 0:s.code)==="ENOENT")return;if((s==null?void 0:s.code)==="ENOTDIR"||(s==null?void 0:s.code)==="ENOTSUP")return da(t,e,r);throw s}for(let i of n)zw(t,i,e,r);return da(t,e,r)};var Ee=N(require("fs"),1),Iu=N(require("fs/promises"),1),Cn=N(require("path"),1);var Pn=class extends Error{path;code;syscall="chdir";constructor(e,r){super(`${r}: Cannot cd into '${e}'`),this.path=e,this.code=r}get name(){return"CwdError"}};var In=class extends Error{path;symlink;syscall="symlink";code="TAR_SYMLINK_ERROR";constructor(e,r){super("TAR_SYMLINK_ERROR: Cannot extract through symbolic link"),this.symlink=e,this.path=r}get name(){return"SymlinkError"}};var Vw=(t,e)=>{Ee.default.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Pn(t,(r==null?void 0:r.code)||"ENOTDIR")),e(r)})},Cu=(t,e,r)=>{t=k(t);let n=e.umask??18,i=e.mode|448,s=(i&n)!==0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,d=k(e.cwd),g=(E,m)=>{E?r(E):m&&c?ha(m,o,a,w=>g(w)):s?Ee.default.chmod(t,i,r):r()};if(t===d)return Vw(t,g);if(l)return Iu.default.mkdir(t,{mode:i,recursive:!0}).then(E=>g(null,E??void 0),g);let p=k(Cn.default.relative(d,t)).split("/");ma(d,p,i,u,d,void 0,g)},ma=(t,e,r,n,i,s,o)=>{if(!e.length)return o(null,s);let a=e.shift(),c=k(Cn.default.resolve(t+"/"+a));Ee.default.mkdir(c,r,Tu(c,e,r,n,i,s,o))},Tu=(t,e,r,n,i,s,o)=>a=>{a?Ee.default.lstat(t,(c,l)=>{if(c)c.path=c.path&&k(c.path),o(c);else if(l.isDirectory())ma(t,e,r,n,i,s,o);else if(n)Ee.default.unlink(t,u=>{if(u)return o(u);Ee.default.mkdir(t,r,Tu(t,e,r,n,i,s,o))});else{if(l.isSymbolicLink())return o(new In(t,t+"/"+e.join("/")));o(a)}}):(s=s||t,ma(t,e,r,n,i,s,o))},Zw=t=>{let e=!1,r;try{e=Ee.default.statSync(t).isDirectory()}catch(n){r=n==null?void 0:n.code}finally{if(!e)throw new Pn(t,r??"ENOTDIR")}},Ou=(t,e)=>{t=k(t);let r=e.umask??18,n=e.mode|448,i=(n&r)!==0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,l=e.unlink,u=k(e.cwd),d=E=>{E&&a&&pa(E,s,o),i&&Ee.default.chmodSync(t,n)};if(t===u)return Zw(u),d();if(c)return d(Ee.default.mkdirSync(t,{mode:n,recursive:!0})??void 0);let f=k(Cn.default.relative(u,t)).split("/"),p;for(let E=f.shift(),m=u;E&&(m+="/"+E);E=f.shift()){m=k(Cn.default.resolve(m));try{Ee.default.mkdirSync(m,n),p=p||m}catch{let x=Ee.default.lstatSync(m);if(x.isDirectory())continue;if(l){Ee.default.unlinkSync(m),Ee.default.mkdirSync(m,n),p=p||m;continue}else if(x.isSymbolicLink())return new In(m,m+"/"+f.join("/"))}}return d(p)};var Ea=require("path");var ga=Object.create(null),Du=1e4,Nr=new Set,Nu=t=>{Nr.has(t)?Nr.delete(t):ga[t]=t.normalize("NFD").toLocaleLowerCase("en").toLocaleUpperCase("en"),Nr.add(t);let e=ga[t],r=Nr.size-Du;if(r>Du/10){for(let n of Nr)if(Nr.delete(n),delete ga[n],--r<=0)break}return e};var Jw=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Xw=Jw==="win32",Yw=t=>t.split("/").slice(0,-1).reduce((r,n)=>{let i=r[r.length-1];return i!==void 0&&(n=(0,Ea.join)(i,n)),r.push(n||"/"),r},[]),is=class{#e=new Map;#r=new Map;#n=new Set;reserve(e,r){e=Xw?["win32 parallelization disabled"]:e.map(i=>It((0,Ea.join)(Nu(i))));let n=new Set(e.map(i=>Yw(i)).reduce((i,s)=>i.concat(s)));this.#r.set(r,{dirs:n,paths:e});for(let i of e){let s=this.#e.get(i);s?s.push(r):this.#e.set(i,[r])}for(let i of n){let s=this.#e.get(i);if(!s)this.#e.set(i,[new Set([r])]);else{let o=s[s.length-1];o instanceof Set?o.add(r):s.push(new Set([r]))}}return this.#i(r)}#s(e){let r=this.#r.get(e);if(!r)throw new Error("function does not have any path reservations");return{paths:r.paths.map(n=>this.#e.get(n)),dirs:[...r.dirs].map(n=>this.#e.get(n))}}check(e){let{paths:r,dirs:n}=this.#s(e);return r.every(i=>i&&i[0]===e)&&n.every(i=>i&&i[0]instanceof Set&&i[0].has(e))}#i(e){return this.#n.has(e)||!this.check(e)?!1:(this.#n.add(e),e(()=>this.#t(e)),!0)}#t(e){if(!this.#n.has(e))return!1;let r=this.#r.get(e);if(!r)throw new Error("invalid reservation");let{paths:n,dirs:i}=r,s=new Set;for(let o of n){let a=this.#e.get(o);if(!a||(a==null?void 0:a[0])!==e)continue;let c=a[1];if(!c){this.#e.delete(o);continue}if(a.shift(),typeof c=="function")s.add(c);else for(let l of c)s.add(l)}for(let o of i){let a=this.#e.get(o),c=a==null?void 0:a[0];if(!(!a||!(c instanceof Set)))if(c.size===1&&a.length===1){this.#e.delete(o);continue}else if(c.size===1){a.shift();let l=a[0];typeof l=="function"&&s.add(l)}else c.delete(e)}return this.#n.delete(e),s.forEach(o=>this.#i(o)),!0}};var ku=Symbol("onEntry"),xa=Symbol("checkFs"),Au=Symbol("checkFs2"),va=Symbol("isReusable"),Ce=Symbol("makeFs"),_a=Symbol("file"),ba=Symbol("directory"),as=Symbol("link"),Fu=Symbol("symlink"),$u=Symbol("hardlink"),Bu=Symbol("unsupported"),Uu=Symbol("checkPath"),wa=Symbol("stripAbsolutePath"),Ot=Symbol("mkdir"),se=Symbol("onError"),ss=Symbol("pending"),Mu=Symbol("pend"),kr=Symbol("unpend"),ya=Symbol("ended"),Sa=Symbol("maybeClose"),La=Symbol("skip"),Tn=Symbol("doChown"),On=Symbol("uid"),Dn=Symbol("gid"),Nn=Symbol("checkedCwd"),Kw=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,kn=Kw==="win32",Qw=1024,ey=(t,e)=>{if(!kn)return F.default.unlink(t,e);let r=t+".DELETE."+(0,Ra.randomBytes)(16).toString("hex");F.default.rename(t,r,n=>{if(n)return e(n);F.default.unlink(r,e)})},ty=t=>{if(!kn)return F.default.unlinkSync(t);let e=t+".DELETE."+(0,Ra.randomBytes)(16).toString("hex");F.default.renameSync(t,e),F.default.unlinkSync(e)},qu=(t,e,r)=>t!==void 0&&t===t>>>0?t:e!==void 0&&e===e>>>0?e:r,Ar=class extends dt{[ya]=!1;[Nn]=!1;[ss]=0;reservations=new is;transform;writable=!0;readable=!1;uid;gid;setOwner;preserveOwner;processGid;processUid;maxDepth;forceChown;win32;newer;keep;noMtime;preservePaths;unlink;cwd;strip;processUmask;umask;dmode;fmode;chmod;constructor(e={}){if(e.ondone=()=>{this[ya]=!0,this[Sa]()},super(e),this.transform=e.transform,this.chmod=!!e.chmod,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=void 0,this.gid=void 0,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=!!(process.getuid&&process.getuid()===0):this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():void 0,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():void 0,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:Qw,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||kn,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=k(_e.default.resolve(e.cwd||process.cwd())),this.strip=Number(e.strip)||0,this.processUmask=this.chmod?typeof e.processUmask=="number"?e.processUmask:process.umask():0,this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[ku](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[Sa](){this[ya]&&this[ss]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[wa](e,r){let n=e[r];if(!n||this.preservePaths)return!0;let i=n.split("/");if(i.includes("..")||kn&&/^[a-z]:\.\.$/i.test(i[0]??"")){if(r==="path")return this.warn("TAR_ENTRY_ERROR",`${r} contains '..'`,{entry:e,[r]:n}),!1;{let a=_e.default.posix.dirname(e.path),c=_e.default.posix.normalize(_e.default.posix.join(a,n));if(c.startsWith("../")||c==="..")return this.warn("TAR_ENTRY_ERROR",`${r} escapes extraction directory`,{entry:e,[r]:n}),!1}}let[s,o]=yn(n);return s&&(e[r]=String(o),this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute ${r}`,{entry:e,[r]:n})),!0}[Uu](e){let r=k(e.path),n=r.split("/");if(this.strip){if(n.length<this.strip)return!1;if(e.type==="Link"){let i=k(String(e.linkpath)).split("/");if(i.length>=this.strip)e.linkpath=i.slice(this.strip).join("/");else return!1}n.splice(0,this.strip),e.path=n.join("/")}if(isFinite(this.maxDepth)&&n.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:r,depth:n.length,maxDepth:this.maxDepth}),!1;if(!this[wa](e,"path")||!this[wa](e,"linkpath"))return!1;if(_e.default.isAbsolute(e.path)?e.absolute=k(_e.default.resolve(e.path)):e.absolute=k(_e.default.resolve(this.cwd,e.path)),!this.preservePaths&&typeof e.absolute=="string"&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:k(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:i}=_e.default.win32.parse(String(e.absolute));e.absolute=i+zo(String(e.absolute).slice(i.length));let{root:s}=_e.default.win32.parse(e.path);e.path=s+zo(e.path.slice(s.length))}return!0}[ku](e){if(!this[Uu](e))return e.resume();switch(Hu.default.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[xa](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[Bu](e)}}[se](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[kr](),r.resume())}[Ot](e,r,n){Cu(k(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cwd:this.cwd,mode:r},n)}[Tn](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[On](e){return qu(this.uid,e.uid,this.processUid)}[Dn](e){return qu(this.gid,e.gid,this.processGid)}[_a](e,r){let n=typeof e.mode=="number"?e.mode&4095:this.fmode,i=new lt(String(e.absolute),{flags:fa(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&F.default.close(i.fd,()=>{}),i.write=()=>!0,this[se](c,e),r()});let s=1,o=c=>{if(c){i.fd&&F.default.close(i.fd,()=>{}),this[se](c,e),r();return}--s===0&&i.fd!==void 0&&F.default.close(i.fd,l=>{l?this[se](l,e):this[kr](),r()})};i.on("finish",()=>{let c=String(e.absolute),l=i.fd;if(typeof l=="number"&&e.mtime&&!this.noMtime){s++;let u=e.atime||new Date,d=e.mtime;F.default.futimes(l,u,d,g=>g?F.default.utimes(c,u,d,f=>o(f&&g)):o())}if(typeof l=="number"&&this[Tn](e)){s++;let u=this[On](e),d=this[Dn](e);typeof u=="number"&&typeof d=="number"&&F.default.fchown(l,u,d,g=>g?F.default.chown(c,u,d,f=>o(f&&g)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[se](c,e),r()}),e.pipe(a)),a.pipe(i)}[ba](e,r){let n=typeof e.mode=="number"?e.mode&4095:this.dmode;this[Ot](String(e.absolute),n,i=>{if(i){this[se](i,e),r();return}let s=1,o=()=>{--s===0&&(r(),this[kr](),e.resume())};e.mtime&&!this.noMtime&&(s++,F.default.utimes(String(e.absolute),e.atime||new Date,e.mtime,o)),this[Tn](e)&&(s++,F.default.chown(String(e.absolute),Number(this[On](e)),Number(this[Dn](e)),o)),o()})}[Bu](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Fu](e,r){this[as](e,String(e.linkpath),"symlink",r)}[$u](e,r){let n=k(_e.default.resolve(this.cwd,String(e.linkpath)));this[as](e,n,"link",r)}[Mu](){this[ss]++}[kr](){this[ss]--,this[Sa]()}[La](e){this[kr](),e.resume()}[va](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!kn}[xa](e){this[Mu]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[Au](e,n))}[Au](e,r){let n=a=>{r(a)},i=()=>{this[Ot](this.cwd,this.dmode,a=>{if(a){this[se](a,e),n();return}this[Nn]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=k(_e.default.dirname(String(e.absolute)));if(a!==this.cwd)return this[Ot](a,this.dmode,c=>{if(c){this[se](c,e),n();return}o()})}o()},o=()=>{F.default.lstat(String(e.absolute),(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>(e.mtime??c.mtime))){this[La](e),n();return}if(a||this[va](e,c))return this[Ce](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=this.chmod&&e.mode&&(c.mode&4095)!==e.mode,u=d=>this[Ce](d??null,e,n);return l?F.default.chmod(String(e.absolute),Number(e.mode),u):u()}if(e.absolute!==this.cwd)return F.default.rmdir(String(e.absolute),l=>this[Ce](l??null,e,n))}if(e.absolute===this.cwd)return this[Ce](null,e,n);ey(String(e.absolute),l=>this[Ce](l??null,e,n))})};this[Nn]?s():i()}[Ce](e,r,n){if(e){this[se](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[_a](r,n);case"Link":return this[$u](r,n);case"SymbolicLink":return this[Fu](r,n);case"Directory":case"GNUDumpDir":return this[ba](r,n)}}[as](e,r,n,i){F.default[n](r,String(e.absolute),s=>{s?this[se](s,e):(this[kr](),e.resume()),i()})}},os=t=>{try{return[null,t()]}catch(e){return[e,null]}},An=class extends Ar{sync=!0;[Ce](e,r){return super[Ce](e,r,()=>{})}[xa](e){if(!this[Nn]){let s=this[Ot](this.cwd,this.dmode);if(s)return this[se](s,e);this[Nn]=!0}if(e.absolute!==this.cwd){let s=k(_e.default.dirname(String(e.absolute)));if(s!==this.cwd){let o=this[Ot](s,this.dmode);if(o)return this[se](o,e)}}let[r,n]=os(()=>F.default.lstatSync(String(e.absolute)));if(n&&(this.keep||this.newer&&n.mtime>(e.mtime??n.mtime)))return this[La](e);if(r||this[va](e,n))return this[Ce](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=this.chmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?os(()=>{F.default.chmodSync(String(e.absolute),Number(e.mode))}):[];return this[Ce](a,e)}let[s]=os(()=>F.default.rmdirSync(String(e.absolute)));this[Ce](s,e)}let[i]=e.absolute===this.cwd?[]:os(()=>ty(String(e.absolute)));this[Ce](i,e)}[_a](e,r){let n=typeof e.mode=="number"?e.mode&4095:this.fmode,i=a=>{let c;try{F.default.closeSync(s)}catch(l){c=l}(a||c)&&this[se](a||c,e),r()},s;try{s=F.default.openSync(String(e.absolute),fa(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[se](a,e)),e.pipe(o)),o.on("data",a=>{try{F.default.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",()=>{let a=null;if(e.mtime&&!this.noMtime){let c=e.atime||new Date,l=e.mtime;try{F.default.futimesSync(s,c,l)}catch(u){try{F.default.utimesSync(String(e.absolute),c,l)}catch{a=u}}}if(this[Tn](e)){let c=this[On](e),l=this[Dn](e);try{F.default.fchownSync(s,Number(c),Number(l))}catch(u){try{F.default.chownSync(String(e.absolute),Number(c),Number(l))}catch{a=a||u}}}i(a)})}[ba](e,r){let n=typeof e.mode=="number"?e.mode&4095:this.dmode,i=this[Ot](String(e.absolute),n);if(i){this[se](i,e),r();return}if(e.mtime&&!this.noMtime)try{F.default.utimesSync(String(e.absolute),e.atime||new Date,e.mtime)}catch{}if(this[Tn](e))try{F.default.chownSync(String(e.absolute),Number(this[On](e)),Number(this[Dn](e)))}catch{}r(),e.resume()}[Ot](e,r){try{return Ou(k(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cwd:this.cwd,mode:r})}catch(n){return n}}[as](e,r,n,i){let s=`${n}Sync`;try{F.default[s](r,String(e.absolute)),i(),e.resume()}catch(o){return this[se](o,e)}}};var ry=t=>{let e=new An(t),r=t.file,n=Pa.default.statSync(r),i=t.maxReadSize||16*1024*1024;new Li(r,{readSize:i,size:n.size}).pipe(e)},ny=(t,e)=>{let r=new Ar(t),n=t.maxReadSize||16*1024*1024,i=t.file;return new Promise((o,a)=>{r.on("error",a),r.on("close",o),Pa.default.stat(i,(c,l)=>{if(c)a(c);else{let u=new Wt(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})})},Wu=Ke(ry,ny,t=>new An(t),t=>new Ar(t),(t,e)=>{e!=null&&e.length&&Wo(t,e)});var we=N(require("fs"),1),Ia=N(require("path"),1);var iy=(t,e)=>{let r=new tr(t),n=!0,i,s;try{try{i=we.default.openSync(t.file,"r+")}catch(c){if((c==null?void 0:c.code)==="ENOENT")i=we.default.openSync(t.file,"w+");else throw c}let o=we.default.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let u=0,d=0;u<512;u+=d){if(d=we.default.readSync(i,a,u,a.length-u,s+u),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new ve(a);if(!c.cksumValid)break;let l=512*Math.ceil((c.size||0)/512);if(s+l+512>o.size)break;s+=l,t.mtimeCache&&c.mtime&&t.mtimeCache.set(String(c.path),c.mtime)}n=!1,sy(t,r,s,i,e)}finally{if(n)try{we.default.closeSync(i)}catch{}}},sy=(t,e,r,n,i)=>{let s=new Rr(t.file,{fd:n,start:r});e.pipe(s),ay(e,i)},oy=(t,e)=>{e=Array.from(e);let r=new Tt(t),n=(s,o,a)=>{let c=(f,p)=>{f?we.default.close(s,E=>a(f)):a(null,p)},l=0;if(o===0)return c(null,0);let u=0,d=Buffer.alloc(512),g=(f,p)=>{if(f||typeof p>"u")return c(f);if(u+=p,u<512&&p)return we.default.read(s,d,u,d.length-u,l+u,g);if(l===0&&d[0]===31&&d[1]===139)return c(new Error("cannot append to compressed archives"));if(u<512)return c(null,l);let E=new ve(d);if(!E.cksumValid)return c(null,l);let m=512*Math.ceil((E.size??0)/512);if(l+m+512>o||(l+=m+512,l>=o))return c(null,l);t.mtimeCache&&E.mtime&&t.mtimeCache.set(String(E.path),E.mtime),u=0,we.default.read(s,d,0,512,l,g)};we.default.read(s,d,0,512,l,g)};return new Promise((s,o)=>{r.on("error",o);let a="r+",c=(l,u)=>{if(l&&l.code==="ENOENT"&&a==="r+")return a="w+",we.default.open(t.file,a,c);if(l||!u)return o(l);we.default.fstat(u,(d,g)=>{if(d)return we.default.close(u,()=>o(d));n(u,g.size,(f,p)=>{if(f)return o(f);let E=new lt(t.file,{fd:u,start:p});r.pipe(E),E.on("error",o),E.on("close",s),cy(r,e)})})};we.default.open(t.file,a,c)})},ay=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?ht({file:Ia.default.resolve(t.cwd,r.slice(1)),sync:!0,noResume:!0,onReadEntry:n=>t.add(n)}):t.add(r)}),t.end()},cy=async(t,e)=>{for(let r=0;r<e.length;r++){let n=String(e[r]);n.charAt(0)==="@"?await ht({file:Ia.default.resolve(String(t.cwd),n.slice(1)),noResume:!0,onReadEntry:i=>t.add(i)}):t.add(n)}t.end()},rr=Ke(iy,oy,()=>{throw new TypeError("file is required")},()=>{throw new TypeError("file is required")},(t,e)=>{if(!Jl(t))throw new TypeError("file is required");if(t.gzip||t.brotli||t.zstd||t.file.endsWith(".br")||t.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!(e!=null&&e.length))throw new TypeError("no paths specified to add/replace")});var ly=Ke(rr.syncFile,rr.asyncFile,rr.syncNoFile,rr.asyncNoFile,(t,e=[])=>{var r,n;(n=(r=rr).validate)==null||n.call(r,t,e),uy(t)}),uy=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>{var i;return e(r,n)&&!((((i=t.mtimeCache)==null?void 0:i.get(r))??n.mtime??0)>(n.mtime??0))}:(r,n)=>{var i;return!((((i=t.mtimeCache)==null?void 0:i.get(r))??n.mtime??0)>(n.mtime??0))}};var gR=N(Fn());var Fy=N(require("path")),Aa=require("string_decoder");var He="\u2404";async function Dt(t,e,r,n="linux",i="Container"){let s=typeof t=="function",o=n==="win32",a=r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},c=s?await t({env:o?Fa(a):a,cmd:o?"powershell":"/bin/sh",args:o?["-NoProfile","-Command","-"]:[],output:e}):t;if(!s){let f=o?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${He}; /bin/sh'
`;c.stdin.write(f),await new Promise(E=>{let m="",w=new Aa.StringDecoder;c.stdout.on("data",function x(h){m+=w.write(h),m.includes(f)&&(c.stdout.off("data",x),E())})})}let l=$y(c),u;async function d(f,p){let E=u=(async()=>{try{await u}catch{}return g($n(n,f),p)})();try{return await Promise.race([E,l.unexpectedExit])}finally{l.disposeStdioListeners(),u===E&&(u=void 0)}}async function g(f,p){let E=`Run in ${i.toLowerCase()}: ${f.replace(/\n.*/g,"")}`,m;if((p==null?void 0:p.logOutput)!=="silent"&&(m=e.start(E,p==null?void 0:p.logLevel)),c.stdin.destroyed){e.write("Stdin closed!");let{code:C,signal:D}=await c.exit;return Promise.reject({message:`Shell server terminated (code: ${C}, signal: ${D})`,code:C,signal:D})}n==="win32"?c.stdin.write(`[Console]::Write('${He}'); ( ${f} ); [Console]::Write("${He}$LastExitCode ${He}"); [Console]::Error.Write('${He}')
`):c.stdin.write(`echo -n ${He}; ( ${f} ); echo -n ${He}$?${He}; echo -n ${He} >&2
`);let[w,x]=Jf(c.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(C,D,I)=>{D===1&&I===0&&e.write(C,p==null?void 0:p.logLevel)}:()=>{}),h=Jf(c.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(C,D,I)=>{D===0&&I===0&&e.write(C,p==null?void 0:p.logLevel)}:()=>{})[0];p!=null&&p.stdin&&(await w,c.stdin.write(p==null?void 0:p.stdin));let[y,v]=await x,[b]=await h,_=parseInt(v,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(y,p==null?void 0:p.logLevel),e.write(b,p==null?void 0:p.logLevel),_&&e.write(`Exit code ${_}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&_&&e.write(`Exit code ${_}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(E,m,p==null?void 0:p.logLevel),_?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${f}`,code:_,stdout:y,stderr:b}):{stdout:y,stderr:b}}return{exec:d,process:c,platform:n,path:$n(n,Fy)}}function Jf(t,e,r){let n=e.map(()=>{let u;return{promise:new Promise((g,f)=>u={resolve:g,reject:f}),...u}}),i=new Aa.StringDecoder("utf8"),s=[],o=0,a=[];function c(u){let d=i.write(u);l(d)}function l(u){let d=u.indexOf(He);if(d!==-1){let g=u.substr(0,d);s.push(g),r(g,o,a.length),a.push(s.join("")),s.length=0,a.length===e[o]&&(n[o].resolve(a),o++,a=[],o===e.length&&t.off("data",c)),d+1<u.length&&l(u.substr(d+1))}else s.push(u),r(u,o,a.length)}return t.on("data",c),n.map(u=>u.promise)}function $y(t){let e,r=new Promise((c,l)=>e=l),n=[],i=[],s=c=>n.push(c),o=c=>i.push(c);return t.stdout.on("data",s),t.stderr.on("data",o),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",s),t.stderr.off("data",o),n.length=0,i.length=0}}}var LL=N(dd());var RL=N(tp());var PL=N(kp()),IL=N(Tm());var X=N(require("fs")),it=require("util");var oi=(0,it.promisify)(X.readFile),Vb=(0,it.promisify)(X.writeFile),gO=(0,it.promisify)(X.appendFile),Om=(0,it.promisify)(X.rename),Dm=(0,it.promisify)(X.readdir),Zb=(0,it.promisify)(X.unlink);var Jb=(0,it.promisify)(X.rmdir),Nm=(0,it.promisify)(X.rm),EO=(0,it.promisify)(X.copyFile);var EL=N(Zm());async function gr(t){return new Promise(e=>setTimeout(e,t))}var De=N(require("path")),tg=N(require("fs"));async function Vs(t,e=process.cwd(),r=process.env){if(process.platform!=="win32")return t;if(De.isAbsolute(t))return await il(t)||t;if(/[/\\]/.test(t)){let o=De.join(e,t);return await il(o)||o}let n,i;if(r){for(let o of Object.keys(r))if(o.toLowerCase()==="path"){let a=r[o];typeof a=="string"&&(n=a,i=a.split(De.delimiter).filter(Boolean),i.push(De.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(i===void 0||i.length===0){let o=new Error(`No PATH to look up executable '${t}'.`);throw o.code="ENOENT",o}for(let o of i){let a;De.isAbsolute(o)?a=De.join(o,t):a=De.join(e,o,t);let c=await il(a);if(c)return c}let s=new Error(`Exectuable '${t}' not found on PATH '${n}'.`);throw s.code="ENOENT",s}var Km=process.env.PATHEXT,Qm=Km?Km.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function il(t){if(Qm.indexOf(De.extname(t))!==-1)return await eg(t)?t:void 0;for(let e of Qm){let r=t+e;if(await eg(r))return r}}function eg(t){return new Promise(e=>tg.stat(t,(r,n)=>e(!r&&n.isFile())))}var Ok=Kg(),Dk=gl(),Nk=nE(),kk=sE();var Uk=gl();var cE=/^\\\\wsl(\.localhost|\$)?\\/;function no(t){return cE.test(t.toLowerCase())}function wl(t){let e=t.toLowerCase(),r=cE.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function yl(t,e,r){let{stdout:n}=await pe({exec:rn(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r}),i=n.toString().trim();if(i.startsWith("/mnt/wsl/")&&e.match(/^[a-zA-Z]:/)){let s=`/mnt/${e[0].toLowerCase()}${e.substring(2).replace(/\\/g,"/")}`;try{return await pe({exec:rn(void 0),cmd:"wsl",args:["-d",t,"-e","test","-e",s],output:r}),s}catch(o){(o==null?void 0:o.code)!==1&&r.write(`Error checking WSL path: ${(o==null?void 0:o.stack)||(o==null?void 0:o.message)||o}`)}}return i}function xl(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var rA=io.join(__dirname,"..","..","node_modules",".bin","ts-node"),Ym=io.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function pe(t){let{exec:e,cmd:r,args:n,cwd:i,env:s,stdin:o,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:i,env:s,output:a});return new Promise((u,d)=>{let g=[],f=[],p=c==="continuous"?new vl.StringDecoder:void 0;l.stdout.on("data",w=>{g.push(w),c==="continuous"&&a.write(p.write(w))}),l.stdout.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let E=c==="continuous"?new vl.StringDecoder:void 0;l.stderr.on("data",w=>{f.push(w),c==="continuous"&&a.write(ke(E.write(w)))}),l.stderr.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let m=[];l.exit.then(({code:w})=>{try{m.forEach(y=>y.dispose());let x=Buffer.concat(g),h=Buffer.concat(f);(c===!0||w&&c==="onerror")&&(a.write(x.toString().replace(/\r?\n/g,`\r
`)),a.write(ke(h.toString()))),c&&w&&a.write(`Exit code ${w}`),w?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:x,stderr:h,code:w}):u({stdout:x,stderr:h})}catch(x){d(x)}},w=>{c&&(w!=null&&w.message)&&a.write(ke(w==null?void 0:w.message)),d(w)}),o instanceof Buffer?(l.stdin.write(o,w=>{w&&d(w)}),l.stdin.end()):o instanceof uE.Readable?o.pipe(l.stdin):typeof o=="function"&&m.push(o(w=>l.stdin.write(w)))})}function rn(t){return async function(e){let{cmd:r,args:n,output:i}=e,s=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,o=i.start(s),a=e.cwd||t,c=e.env?{...process.env,...e.env}:process.env,l=await Vs(r,a,c),u=so.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((d,g)=>{u.once("error",f=>{i.stop(s,o),g(f)}),u.once("close",(f,p)=>{i.stop(s,o),d({code:f,signal:p})})}),async terminate(){u.kill("SIGKILL")}}}}function Sl(t,e,r,n){return async function(i){let{env:s,cmd:o,args:a,output:c}=i,l=i.cwd||r,u=l?`cd '${l}' && `:"",d=Object.keys(s||{}).map(y=>s[y]===void 0?"":`${y}='${s[y]}' `).join(""),g=(a||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),f=`${u}${d}${o}${g}`,p=f!==o?["/bin/sh","-c",f]:[f],E=[...e,...p],m=`Run: ${t} ${E.join(" ").replace(/\n.*/g,"")}`,w=c.start(m),x=await Vs(t,process.cwd(),process.env),h=so.spawn(x,E,{windowsHide:!0,env:n?{...process.env,...n}:void 0});return{stdin:h.stdin,stdout:h.stdout,stderr:h.stderr,exit:new Promise((y,v)=>{h.once("error",b=>{c.stop(m,w),v(b)}),h.once("close",(b,_)=>{c.stop(m,w),y({code:b,signal:_})})}),async terminate(){h.kill("SIGKILL")}}}}async function sn(t,e){if(no(t)){let r=wl(t),n=await yl(r,t,e);return Sl("wsl",["-d",r,"-e"],n)}return rn(t)}function $n(t,e){return e&&typeof e=="object"&&"win32"in e?t==="win32"?e.win32:e.posix:e}function Fa(t){return t?{...t,PSModulePath:void 0}:{PSModulePath:void 0}}var yR=0;function oo(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++yR)}:{}}async function fi(t,e){var i;let r,n;try{for(let s=0,o=7;s<o;s++)try{return await di(t,"rm","-f",e)}catch(a){let c=((i=a==null?void 0:a.stderr)==null?void 0:i.toString().toLowerCase())||"";if(s===o-1||!c.includes("already in progress"))throw a;n||(r=await SR(t,{container:[e],event:["destroy"]}),n=new Promise(l=>{r.stdout.on("data",()=>{l(),r.terminate(),n=new Promise(()=>{})})})),await Promise.race([n,gr(1e3)])}}finally{r&&r.terminate()}throw new Error("Unreachable")}async function SR(t,e){let{exec:r,cmd:n,args:i,env:s,output:o}=ao(t),a=[];for(let g in e)for(let f of e[g])a.push("--filter",`${g}=${f}`);let c="isPodman"in t&&t.isPodman?"json":"{{json .}}",l=(i||[]).concat(["events","--format",c,...a]),u=await r({cmd:n,args:l,env:s,output:o}),d=[];return u.stderr.on("data",g=>d.push(g)),u.exit.then(({code:g,signal:f})=>{d.length&&o.write(ke(Buffer.concat(d).toString())),(g||f&&f!=="SIGKILL")&&o.write(ke(`Docker events terminated (code: ${g}, signal: ${f}).`))},g=>{o.write(ke(g&&(g.stack||g.message)))}),u}async function di(t,...e){let r=ao(t);return pe({...r,args:(r.args||[]).concat(e)})}async function fE(t,...e){let r=ao(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return pe({...r,args:(r.args||[]).concat(e)})}function hi(t,e,r){return async function(n){let{exec:i,cmd:s,args:o,env:a}=ao(t),{argsPrefix:c,args:l}=_R(e,r,n,!1);return i({cmd:s,args:(o||[]).concat(l),env:a,output:xR(n.output,s,c)})}}function xR(t,e,r){return vR(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function vR(t,e,r){let n=new RegExp(xl(e),"g");return gt({...t,get dimensions(){return t.dimensions},event:s=>t.event("text"in s?{...s,text:s.text.replace(n,r)}:s)})}function _R(t,e,r,n){let{env:i,cwd:s,cmd:o,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),s&&c.push("-w",s),c.push(t);let l=c.slice();return c.push(o),a&&c.push(...a),{argsPrefix:l,args:c}}function ao(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...oo(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...oo(t.env)},output:t.output}:{...t,env:{...t.env,...oo(t.env)}}}async function dE(t,e){let r={exec:await sn(t.cwd,e),cmd:t.dockerCLI,env:t.env,output:e};if(t.rebuild){let{stdout:n,stderr:i}=await fi(r,t.containerId);e.write("Command output: "+JSON.stringify({stdout:n.toString(),stderr:i.toString()}))}else if(!t.shutdownAction||t.shutdownAction==="stopCompose"){let n=hi(r,t.containerId,t.user),i=await Dt(n,e);if((await pi(i)).filter(o=>o.sessionId!==t.sessionId).length===0){let o=["--project-name",t.projectName];t.composeFiles.forEach(c=>o.push("-f",c)),t.envFile&&o.push("--env-file",t.envFile),o.push("stop","-t","0"),t.runServices&&t.runServices.length&&(o.push(...t.runServices),t.runServices.indexOf(t.service)===-1&&o.push(t.service));let a;try{let c={...r,cmd:t.dockerComposeCLI.cmd,args:t.dockerComposeCLI.args};if(t.buildContainerRunArgs){let{stdout:d}=await di(r,...t.buildContainerRunArgs);a=d.toString().trim(),c={exec:hi(r,a,"root"),cmd:"docker",args:["compose"],env:{},output:e}}let{stdout:l,stderr:u}=await fE(c,...o);e.write("Command output: "+JSON.stringify({stdout:l.toString(),stderr:u.toString()}))}finally{a&&await fi(r,a)}}}}async function hE(t,e){let r={exec:await sn(t.cwd,e),cmd:t.dockerCLI,env:t.env,output:e};if(t.rebuild){let{stdout:n,stderr:i}=await fi(r,t.containerId);e.write("Command output: "+JSON.stringify({stdout:n.toString(),stderr:i.toString()}))}else if(!t.shutdownAction||t.shutdownAction==="stopContainer"){let n=hi(r,t.containerId,t.user),i=await Dt(n,e);if((await pi(i)).filter(o=>o.sessionId!==t.sessionId).length===0){let{stdout:o,stderr:a}=await di(r,"stop",t.containerId);e.write("Command output: "+JSON.stringify({stdout:o.toString(),stderr:a.toString()}))}}}var co=process.argv[2],pE=process.argv[3],_l=Je[process.argv[4]]||3,bR=new Date(parseInt(process.argv[6],10)),mE=process.argv[5]?wE.join(process.argv[5],`shutdownMonitor-${bR.toISOString().replace(/:/g,"-")}.log`):void 0,bl=[],gE=mE?Dl(mE,()=>Math.min(2,_l)):void 0;gE&&bl.push(gE);bl.push({event:t=>{1>=_l&&on(co,JSON.stringify({type:"log",event:t})).catch(e=>{console.error(e)})}});var re=gt(Ol(bl));re.write("Starting monitor process...");var LR=Date.now(),Re;(async()=>{let t=0;for(;;)try{let e=await on(co,JSON.stringify({type:"poll"})),r=await fo(e);re.write("Received message: "+JSON.stringify(r));for(let n of r)if(n.type==="cleanup"){try{await EE(!0)}catch(i){re.write("Unexpected error: "+(i&&(i.stack||i.message)||String(i)))}return}else n.type==="configure"&&(Re=n.options,Re.logLevel&&(_l=Re.logLevel),on(co,JSON.stringify({type:"reply",sequence:n.sequence})).catch(i=>{re.write("Error confirming configuration: "+(i&&(i.stack||i.message)||String(i)))}));t=0}catch(e){if(re.write("Error polling extension: "+(e&&(e.stack||e.message)||String(e))),e&&(e.code==="ECONNREFUSED"||e.code==="ENOENT")){await EE(!1);return}++t>=5&&await gr(1e3)}})().catch(t=>{re.write("Unexpected error: "+(t&&(t.stack||t.message)||String(t)))});async function EE(t){if(re.write(`Cleaning up after ${Date.now()-LR} ms...`),Re)switch(Re.delay&&(re.write(`Delaying for ${Re.delay} ms.`),await gr(Re.delay)),pE){case"dockerCompose":await dE(Re,re);break;case"singleContainer":await hE(Re,re);break;case"test":let{stdout:e,stderr:r}=await pe({exec:await sn(Re.cwd,re),cmd:Re.cmd,args:Re.args,env:Re.env,output:re});re.write("Command output: "+JSON.stringify({stdout:e.toString(),stderr:r.toString()}));break;default:re.write(`Type does not exist: ${pE}`);break}else re.write("Not configured!");if(re.write("Done."),t)try{let e=await on(co,JSON.stringify({type:"done"})),r=await fo(e);re.write("Received reply: "+JSON.stringify(r))}catch(e){re.write("Error confirming to extension: "+(e&&(e.stack||e.message)||String(e)))}}
//# sourceMappingURL=shutdownMonitorProcess.js.map
