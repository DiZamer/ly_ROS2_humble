/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var yK=Object.create;var pC=Object.defineProperty;var CK=Object.getOwnPropertyDescriptor;var EK=Object.getOwnPropertyNames;var SK=Object.getPrototypeOf,xK=Object.prototype.hasOwnProperty;var ne=(e,t)=>()=>(e&&(t=e(e=0)),t);var V=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),hC=(e,t)=>{for(var n in t)pC(e,n,{get:t[n],enumerable:!0})},NF=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of EK(t))!xK.call(e,o)&&o!==n&&pC(e,o,{get:()=>t[o],enumerable:!(r=CK(t,o))||r.enumerable});return e};var W=(e,t,n)=>(n=e!=null?yK(SK(e)):{},NF(t||!e||!e.__esModule?pC(n,"default",{value:e,enumerable:!0}):n,e)),_K=e=>NF(pC({},"__esModule",{value:!0}),e);var Ar=V((Jde,OF)=>{"use strict";var c0=Object.defineProperty,DK=Object.getOwnPropertyDescriptor,IK=Object.getOwnPropertyNames,PK=Object.prototype.hasOwnProperty,bK=(e,t)=>{for(var n in t)c0(e,n,{get:t[n],enumerable:!0})},TK=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of IK(t))!PK.call(e,o)&&o!==n&&c0(e,o,{get:()=>t[o],enumerable:!(r=DK(t,o))||r.enumerable});return e},kK=e=>TK(c0({},"__esModule",{value:!0}),e),AF={};bK(AF,{config:()=>FK,t:()=>FF});OF.exports=kK(AF);var RK=require("fs"),NK=require("fs/promises");async function LK(e){if(e.protocol==="file:")return await(0,NK.readFile)(e,"utf8");if(e.protocol==="http:"||e.protocol==="https:"){let t=await fetch(e.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!t.ok){let r=`Unexpected ${t.status} response while trying to read ${e}`;try{r+=`: ${await t.text()}`}catch{}throw new Error(r)}return await t.text()}throw new Error("Unsupported protocol")}function AK(e){return(0,RK.readFileSync)(e,"utf8")}var Vu;function FK(e){if("contents"in e){typeof e.contents=="string"?Vu=JSON.parse(e.contents):Vu=e.contents;return}if("fsPath"in e){let t=AK(e.fsPath),n=JSON.parse(t);Vu=LF(n)?n.contents.bundle:n;return}if(e.uri){let t=e.uri;return typeof e.uri=="string"&&(t=new URL(e.uri)),new Promise((n,r)=>{LK(t).then(o=>{try{let i=JSON.parse(o);Vu=LF(i)?i.contents.bundle:i,n()}catch(i){r(i)}}).catch(o=>{r(o)})})}}function FF(...e){let t=e[0],n,r,o;if(typeof t=="string")n=t,r=t,e.splice(0,1),o=!e||typeof e[0]!="object"?e:e[0];else if(t instanceof Array){let s=e.slice(1);if(t.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=t[0];for(let c=1;c<t.length;c++)a+=`{${c-1}}`+t[c];return FF(a,...s)}else r=t.message,n=r,t.comment&&t.comment.length>0&&(n+=`/${Array.isArray(t.comment)?t.comment.join(""):t.comment}`),o=t.args??{};let i=Vu==null?void 0:Vu[n];return i?typeof i=="string"?gC(i,o):i.comment?gC(i.message,o):gC(r,o):gC(r,o)}var OK=/{([^}]+)}/g;function gC(e,t){return Object.keys(t).length===0?e:e.replace(OK,(n,r)=>t[r]??n)}function LF(e){var t;return typeof((t=e==null?void 0:e.contents)==null?void 0:t.bundle)=="object"&&typeof(e==null?void 0:e.version)=="string"}});var iO=V((Cme,oO)=>{var vm=1e3,wm=vm*60,ym=wm*60,Ku=ym*24,e5=Ku*7,t5=Ku*365.25;oO.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return n5(e);if(n==="number"&&isFinite(e))return t.long?o5(e):r5(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function n5(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*t5;case"weeks":case"week":case"w":return n*e5;case"days":case"day":case"d":return n*Ku;case"hours":case"hour":case"hrs":case"hr":case"h":return n*ym;case"minutes":case"minute":case"mins":case"min":case"m":return n*wm;case"seconds":case"second":case"secs":case"sec":case"s":return n*vm;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r5(e){var t=Math.abs(e);return t>=Ku?Math.round(e/Ku)+"d":t>=ym?Math.round(e/ym)+"h":t>=wm?Math.round(e/wm)+"m":t>=vm?Math.round(e/vm)+"s":e+"ms"}function o5(e){var t=Math.abs(e);return t>=Ku?DC(e,t,Ku,"day"):t>=ym?DC(e,t,ym,"hour"):t>=wm?DC(e,t,wm,"minute"):t>=vm?DC(e,t,vm,"second"):e+" ms"}function DC(e,t,n,r){var o=t>=n*1.5;return Math.round(e/n)+" "+r+(o?"s":"")}});var y0=V((Eme,sO)=>{function i5(e){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=iO(),n.destroy=l,Object.keys(e).forEach(u=>{n[u]=e[u]}),n.names=[],n.skips=[],n.formatters={};function t(u){let f=0;for(let m=0;m<u.length;m++)f=(f<<5)-f+u.charCodeAt(m),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=t;function n(u){let f,m=null,d,p;function g(...h){if(!g.enabled)return;let w=g,C=Number(new Date),v=C-(f||C);w.diff=v,w.prev=f,w.curr=C,f=C,h[0]=n.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let y=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(I,_)=>{if(I==="%%")return"%";y++;let A=n.formatters[_];if(typeof A=="function"){let U=h[y];I=A.call(w,U),h.splice(y,1),y--}return I}),n.formatArgs.call(w,h),(w.log||n.log).apply(w,h)}return g.namespace=u,g.useColors=n.useColors(),g.color=n.selectColor(u),g.extend=r,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(u)),p),set:h=>{m=h}}),typeof n.init=="function"&&n.init(g),g}function r(u,f){let m=n(this.namespace+(typeof f>"u"?":":f)+u);return m.log=this.log,m}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of f)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function i(u,f){let m=0,d=0,p=-1,g=0;for(;m<u.length;)if(d<f.length&&(f[d]===u[m]||f[d]==="*"))f[d]==="*"?(p=d,g=m,d++):(m++,d++);else if(p!==-1)d=p+1,g++,m=g;else return!1;for(;d<f.length&&f[d]==="*";)d++;return d===f.length}function s(){let u=[...n.names,...n.skips.map(f=>"-"+f)].join(",");return n.enable(""),u}function a(u){for(let f of n.skips)if(i(u,f))return!1;for(let f of n.names)if(i(u,f))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}sO.exports=i5});var aO=V((So,IC)=>{So.formatArgs=a5;So.save=c5;So.load=l5;So.useColors=s5;So.storage=u5();So.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();So.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s5(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a5(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+IC.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),e.splice(r,0,t)}So.log=console.debug||console.log||(()=>{});function c5(e){try{e?So.storage.setItem("debug",e):So.storage.removeItem("debug")}catch{}}function l5(){let e;try{e=So.storage.getItem("debug")||So.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function u5(){try{return localStorage}catch{}}IC.exports=y0()(So);var{formatters:f5}=IC.exports;f5.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var lO=V((Sme,cO)=>{"use strict";cO.exports=(e,t)=>{t=t||process.argv;let n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),o=t.indexOf("--");return r!==-1&&(o===-1?!0:r<o)}});var fO=V((xme,uO)=>{"use strict";var d5=require("os"),Ji=lO(),Fr=process.env,Cm;Ji("no-color")||Ji("no-colors")||Ji("color=false")?Cm=!1:(Ji("color")||Ji("colors")||Ji("color=true")||Ji("color=always"))&&(Cm=!0);"FORCE_COLOR"in Fr&&(Cm=Fr.FORCE_COLOR.length===0||parseInt(Fr.FORCE_COLOR,10)!==0);function m5(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function p5(e){if(Cm===!1)return 0;if(Ji("color=16m")||Ji("color=full")||Ji("color=truecolor"))return 3;if(Ji("color=256"))return 2;if(e&&!e.isTTY&&Cm!==!0)return 0;let t=Cm?1:0;if(process.platform==="win32"){let n=d5.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Fr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in Fr)||Fr.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in Fr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Fr.TEAMCITY_VERSION)?1:0;if(Fr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Fr){let n=parseInt((Fr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Fr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Fr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Fr.TERM)||"COLORTERM"in Fr?1:(Fr.TERM==="dumb",t)}function C0(e){let t=p5(e);return m5(t)}uO.exports={supportsColor:C0,stdout:C0(process.stdout),stderr:C0(process.stderr)}});var mO=V((tr,bC)=>{var h5=require("tty"),PC=require("util");tr.init=S5;tr.log=y5;tr.formatArgs=v5;tr.save=C5;tr.load=E5;tr.useColors=g5;tr.destroy=PC.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");tr.colors=[6,2,3,4,5,1];try{let e=fO();e&&(e.stderr||e).level>=2&&(tr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}tr.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),r=process.env[t];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),e[n]=r,e},{});function g5(){return"colors"in tr.inspectOpts?!!tr.inspectOpts.colors:h5.isatty(process.stderr.fd)}function v5(e){let{namespace:t,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${t} \x1B[0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(o+"m+"+bC.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=w5()+t+" "+e[0]}function w5(){return tr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function y5(...e){return process.stderr.write(PC.formatWithOptions(tr.inspectOpts,...e)+`
`)}function C5(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function E5(){return process.env.DEBUG}function S5(e){e.inspectOpts={};let t=Object.keys(tr.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=tr.inspectOpts[t[n]]}bC.exports=y0()(tr);var{formatters:dO}=bC.exports;dO.o=function(e){return this.inspectOpts.colors=this.useColors,PC.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};dO.O=function(e){return this.inspectOpts.colors=this.useColors,PC.inspect(e,this.inspectOpts)}});var TC=V((_me,E0)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?E0.exports=aO():E0.exports=mO()});var hO=V((Dme,pO)=>{var vg;pO.exports=function(){if(!vg){try{vg=TC()("follow-redirects")}catch{}typeof vg!="function"&&(vg=function(){})}vg.apply(null,arguments)}});var kC=V((Ime,L0)=>{var yg=require("url"),wg=yg.URL,x5=require("http"),_5=require("https"),I0=require("stream").Writable,P0=require("assert"),gO=hO();(function(){var t=typeof process<"u",n=typeof window<"u"&&typeof document<"u",r=Xu(Error.captureStackTrace);!t&&(n||!r)&&console.warn("The follow-redirects package should be excluded from browser builds.")})();var b0=!1;try{P0(new wg(""))}catch(e){b0=e.code==="ERR_INVALID_URL"}var D5=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],T0=["abort","aborted","connect","error","socket","timeout"],k0=Object.create(null);T0.forEach(function(e){k0[e]=function(t,n,r){this._redirectable.emit(e,t,n,r)}});var x0=Cg("ERR_INVALID_URL","Invalid URL",TypeError),_0=Cg("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),I5=Cg("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",_0),P5=Cg("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),b5=Cg("ERR_STREAM_WRITE_AFTER_END","write after end"),T5=I0.prototype.destroy||wO;function xo(e,t){I0.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(r){try{n._processResponse(r)}catch(o){n.emit("error",o instanceof _0?o:new _0({cause:o}))}},this._performRequest()}xo.prototype=Object.create(I0.prototype);xo.prototype.abort=function(){N0(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};xo.prototype.destroy=function(e){return N0(this._currentRequest,e),T5.call(this,e),this};xo.prototype.write=function(e,t,n){if(this._ending)throw new b5;if(!Ju(e)&&!N5(e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(Xu(t)&&(n=t,t=null),e.length===0){n&&n();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new P5),this.abort())};xo.prototype.end=function(e,t,n){if(Xu(e)?(n=e,e=t=null):Xu(t)&&(n=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,o=this._currentRequest;this.write(e,t,function(){r._ended=!0,o.end(null,null,n)}),this._ending=!0}};xo.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};xo.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};xo.prototype.setTimeout=function(e,t){var n=this;function r(s){s.setTimeout(e),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),i()},e),r(s)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",o)}return t&&this.on("timeout",t),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){xo.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(xo.prototype,e,{get:function(){return this._currentRequest[e]}})});xo.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};xo.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=t.request(this._options,this._onNativeResponse);r._redirectable=this;for(var o of T0)r.on(o,k0[o]);if(this._currentUrl=/^\//.test(this._options.path)?yg.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(l){if(r===s._currentRequest)if(l)s.emit("error",l);else if(i<a.length){var u=a[i++];r.finished||r.write(u.data,u.encoding,c)}else s._ended&&r.end()})()}};xo.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n=e.headers.location;if(!n||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(N0(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new I5;var r,o=this._options.beforeRedirect;o&&(r=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var i=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],S0(/^content-/i,this._options.headers));var s=S0(/^host$/i,this._options.headers),a=R0(this._currentUrl),c=s||a.host,l=/^\w+:/.test(n)?this._currentUrl:yg.format(Object.assign(a,{host:c})),u=k5(n,l);if(gO("redirecting to",u.href),this._isRedirect=!0,D0(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!R5(u.host,c))&&S0(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),Xu(o)){var f={headers:e.headers,statusCode:t},m={url:l,method:i,headers:r};o(this._options,f,m),this._sanitizeOptions(this._options)}this._performRequest()};function vO(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach(function(r){var o=r+":",i=n[o]=e[r],s=t[r]=Object.create(i);function a(l,u,f){return L5(l)?l=D0(l):Ju(l)?l=D0(R0(l)):(f=u,u=yO(l),l={protocol:o}),Xu(u)&&(f=u,u=null),u=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},l,u),u.nativeProtocols=n,!Ju(u.host)&&!Ju(u.hostname)&&(u.hostname="::1"),P0.equal(u.protocol,o,"protocol mismatch"),gO("options",u),new xo(u,f)}function c(l,u,f){var m=s.request(l,u,f);return m.end(),m}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),t}function wO(){}function R0(e){var t;if(b0)t=new wg(e);else if(t=yO(yg.parse(e)),!Ju(t.protocol))throw new x0({input:e});return t}function k5(e,t){return b0?new wg(e,t):R0(yg.resolve(t,e))}function yO(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new x0({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new x0({input:e.href||e});return e}function D0(e,t){var n=t||{};for(var r of D5)n[r]=e[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),n.port!==""&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function S0(e,t){var n;for(var r in t)e.test(r)&&(n=t[r],delete t[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function Cg(e,t,n){function r(o){Xu(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),r}function N0(e,t){for(var n of T0)e.removeListener(n,k0[n]);e.on("error",wO),e.destroy(t)}function R5(e,t){P0(Ju(e)&&Ju(t));var n=e.length-t.length-1;return n>0&&e[n]==="."&&e.endsWith(t)}function Ju(e){return typeof e=="string"||e instanceof String}function Xu(e){return typeof e=="function"}function N5(e){return typeof e=="object"&&"length"in e}function L5(e){return wg&&e instanceof wg}L0.exports=vO({http:x5,https:_5});L0.exports.wrap=vO});var Jg=V((xhe,x1)=>{"use strict";var s9="2.0.0",a9=Number.MAX_SAFE_INTEGER||9007199254740991,c9=16,l9=250,u9=["major","premajor","minor","preminor","patch","prepatch","prerelease"];x1.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:c9,MAX_SAFE_BUILD_LENGTH:l9,MAX_SAFE_INTEGER:a9,RELEASE_TYPES:u9,SEMVER_SPEC_VERSION:s9,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Xg=V((_he,_1)=>{"use strict";var f9=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};_1.exports=f9});var Om=V((Gs,D1)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:qP,MAX_SAFE_BUILD_LENGTH:d9,MAX_LENGTH:m9}=Jg(),p9=Xg();Gs=D1.exports={};var h9=Gs.re=[],g9=Gs.safeRe=[],he=Gs.src=[],v9=Gs.safeSrc=[],ge=Gs.t={},w9=0,zP="[a-zA-Z0-9-]",y9=[["\\s",1],["\\d",m9],[zP,d9]],C9=e=>{for(let[t,n]of y9)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e},je=(e,t,n)=>{let r=C9(t),o=w9++;p9(e,o,t),ge[e]=o,he[o]=t,v9[o]=r,h9[o]=new RegExp(t,n?"g":void 0),g9[o]=new RegExp(r,n?"g":void 0)};je("NUMERICIDENTIFIER","0|[1-9]\\d*");je("NUMERICIDENTIFIERLOOSE","\\d+");je("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${zP}*`);je("MAINVERSION",`(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})`);je("MAINVERSIONLOOSE",`(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASEIDENTIFIER",`(?:${he[ge.NONNUMERICIDENTIFIER]}|${he[ge.NUMERICIDENTIFIER]})`);je("PRERELEASEIDENTIFIERLOOSE",`(?:${he[ge.NONNUMERICIDENTIFIER]}|${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASE",`(?:-(${he[ge.PRERELEASEIDENTIFIER]}(?:\\.${he[ge.PRERELEASEIDENTIFIER]})*))`);je("PRERELEASELOOSE",`(?:-?(${he[ge.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${he[ge.PRERELEASEIDENTIFIERLOOSE]})*))`);je("BUILDIDENTIFIER",`${zP}+`);je("BUILD",`(?:\\+(${he[ge.BUILDIDENTIFIER]}(?:\\.${he[ge.BUILDIDENTIFIER]})*))`);je("FULLPLAIN",`v?${he[ge.MAINVERSION]}${he[ge.PRERELEASE]}?${he[ge.BUILD]}?`);je("FULL",`^${he[ge.FULLPLAIN]}$`);je("LOOSEPLAIN",`[v=\\s]*${he[ge.MAINVERSIONLOOSE]}${he[ge.PRERELEASELOOSE]}?${he[ge.BUILD]}?`);je("LOOSE",`^${he[ge.LOOSEPLAIN]}$`);je("GTLT","((?:<|>)?=?)");je("XRANGEIDENTIFIERLOOSE",`${he[ge.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);je("XRANGEIDENTIFIER",`${he[ge.NUMERICIDENTIFIER]}|x|X|\\*`);je("XRANGEPLAIN",`[v=\\s]*(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:${he[ge.PRERELEASE]})?${he[ge.BUILD]}?)?)?`);je("XRANGEPLAINLOOSE",`[v=\\s]*(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:${he[ge.PRERELEASELOOSE]})?${he[ge.BUILD]}?)?)?`);je("XRANGE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAIN]}$`);je("XRANGELOOSE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAINLOOSE]}$`);je("COERCEPLAIN",`(^|[^\\d])(\\d{1,${qP}})(?:\\.(\\d{1,${qP}}))?(?:\\.(\\d{1,${qP}}))?`);je("COERCE",`${he[ge.COERCEPLAIN]}(?:$|[^\\d])`);je("COERCEFULL",he[ge.COERCEPLAIN]+`(?:${he[ge.PRERELEASE]})?(?:${he[ge.BUILD]})?(?:$|[^\\d])`);je("COERCERTL",he[ge.COERCE],!0);je("COERCERTLFULL",he[ge.COERCEFULL],!0);je("LONETILDE","(?:~>?)");je("TILDETRIM",`(\\s*)${he[ge.LONETILDE]}\\s+`,!0);Gs.tildeTrimReplace="$1~";je("TILDE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAIN]}$`);je("TILDELOOSE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAINLOOSE]}$`);je("LONECARET","(?:\\^)");je("CARETTRIM",`(\\s*)${he[ge.LONECARET]}\\s+`,!0);Gs.caretTrimReplace="$1^";je("CARET",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAIN]}$`);je("CARETLOOSE",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAINLOOSE]}$`);je("COMPARATORLOOSE",`^${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]})$|^$`);je("COMPARATOR",`^${he[ge.GTLT]}\\s*(${he[ge.FULLPLAIN]})$|^$`);je("COMPARATORTRIM",`(\\s*)${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]}|${he[ge.XRANGEPLAIN]})`,!0);Gs.comparatorTrimReplace="$1$2$3";je("HYPHENRANGE",`^\\s*(${he[ge.XRANGEPLAIN]})\\s+-\\s+(${he[ge.XRANGEPLAIN]})\\s*$`);je("HYPHENRANGELOOSE",`^\\s*(${he[ge.XRANGEPLAINLOOSE]})\\s+-\\s+(${he[ge.XRANGEPLAINLOOSE]})\\s*$`);je("STAR","(<|>)?=?\\s*\\*");je("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");je("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var _E=V((Dhe,I1)=>{"use strict";var E9=Object.freeze({loose:!0}),S9=Object.freeze({}),x9=e=>e?typeof e!="object"?E9:e:S9;I1.exports=x9});var KP=V((Ihe,T1)=>{"use strict";var P1=/^[0-9]+$/,b1=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let n=P1.test(e),r=P1.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},_9=(e,t)=>b1(t,e);T1.exports={compareIdentifiers:b1,rcompareIdentifiers:_9}});var $r=V((Phe,R1)=>{"use strict";var DE=Xg(),{MAX_LENGTH:k1,MAX_SAFE_INTEGER:IE}=Jg(),{safeRe:PE,t:bE}=Om(),D9=_E(),{compareIdentifiers:JP}=KP(),XP=class e{constructor(t,n){if(n=D9(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>k1)throw new TypeError(`version is longer than ${k1} characters`);DE("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?PE[bE.LOOSE]:PE[bE.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>IE||this.major<0)throw new TypeError("Invalid major version");if(this.minor>IE||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>IE||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<IE)return i}return o}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(DE("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],o=t.prerelease[n];if(DE("prerelease compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return JP(r,o)}while(++n)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let n=0;do{let r=this.build[n],o=t.build[n];if(DE("build compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return JP(r,o)}while(++n)}inc(t,n,r){if(t.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let o=`-${n}`.match(this.options.loose?PE[bE.PRERELEASELOOSE]:PE[bE.PRERELEASE]);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(n){let i=[n,o];r===!1&&(i=[n]),JP(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};R1.exports=XP});var gf=V((bhe,L1)=>{"use strict";var N1=$r(),I9=(e,t,n=!1)=>{if(e instanceof N1)return e;try{return new N1(e,t)}catch(r){if(!n)return null;throw r}};L1.exports=I9});var F1=V((The,A1)=>{"use strict";var P9=gf(),b9=(e,t)=>{let n=P9(e,t);return n?n.version:null};A1.exports=b9});var U1=V((khe,O1)=>{"use strict";var T9=gf(),k9=(e,t)=>{let n=T9(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};O1.exports=k9});var H1=V((Rhe,M1)=>{"use strict";var $1=$r(),R9=(e,t,n,r,o)=>{typeof n=="string"&&(o=r,r=n,n=void 0);try{return new $1(e instanceof $1?e.version:e,n).inc(t,r,o).version}catch{return null}};M1.exports=R9});var j1=V((Nhe,W1)=>{"use strict";var B1=gf(),N9=(e,t)=>{let n=B1(e,null,!0),r=B1(t,null,!0),o=n.compare(r);if(o===0)return null;let i=o>0,s=i?n:r,a=i?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};W1.exports=N9});var Y1=V((Lhe,V1)=>{"use strict";var L9=$r(),A9=(e,t)=>new L9(e,t).major;V1.exports=A9});var q1=V((Ahe,G1)=>{"use strict";var F9=$r(),O9=(e,t)=>new F9(e,t).minor;G1.exports=O9});var K1=V((Fhe,z1)=>{"use strict";var U9=$r(),$9=(e,t)=>new U9(e,t).patch;z1.exports=$9});var X1=V((Ohe,J1)=>{"use strict";var M9=gf(),H9=(e,t)=>{let n=M9(e,t);return n&&n.prerelease.length?n.prerelease:null};J1.exports=H9});var xi=V((Uhe,Q1)=>{"use strict";var Z1=$r(),B9=(e,t,n)=>new Z1(e,n).compare(new Z1(t,n));Q1.exports=B9});var tU=V(($he,eU)=>{"use strict";var W9=xi(),j9=(e,t,n)=>W9(t,e,n);eU.exports=j9});var rU=V((Mhe,nU)=>{"use strict";var V9=xi(),Y9=(e,t)=>V9(e,t,!0);nU.exports=Y9});var TE=V((Hhe,iU)=>{"use strict";var oU=$r(),G9=(e,t,n)=>{let r=new oU(e,n),o=new oU(t,n);return r.compare(o)||r.compareBuild(o)};iU.exports=G9});var aU=V((Bhe,sU)=>{"use strict";var q9=TE(),z9=(e,t)=>e.sort((n,r)=>q9(n,r,t));sU.exports=z9});var lU=V((Whe,cU)=>{"use strict";var K9=TE(),J9=(e,t)=>e.sort((n,r)=>K9(r,n,t));cU.exports=J9});var Zg=V((jhe,uU)=>{"use strict";var X9=xi(),Z9=(e,t,n)=>X9(e,t,n)>0;uU.exports=Z9});var kE=V((Vhe,fU)=>{"use strict";var Q9=xi(),e7=(e,t,n)=>Q9(e,t,n)<0;fU.exports=e7});var ZP=V((Yhe,dU)=>{"use strict";var t7=xi(),n7=(e,t,n)=>t7(e,t,n)===0;dU.exports=n7});var QP=V((Ghe,mU)=>{"use strict";var r7=xi(),o7=(e,t,n)=>r7(e,t,n)!==0;mU.exports=o7});var RE=V((qhe,pU)=>{"use strict";var i7=xi(),s7=(e,t,n)=>i7(e,t,n)>=0;pU.exports=s7});var NE=V((zhe,hU)=>{"use strict";var a7=xi(),c7=(e,t,n)=>a7(e,t,n)<=0;hU.exports=c7});var eb=V((Khe,gU)=>{"use strict";var l7=ZP(),u7=QP(),f7=Zg(),d7=RE(),m7=kE(),p7=NE(),h7=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return l7(e,n,r);case"!=":return u7(e,n,r);case">":return f7(e,n,r);case">=":return d7(e,n,r);case"<":return m7(e,n,r);case"<=":return p7(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};gU.exports=h7});var wU=V((Jhe,vU)=>{"use strict";var g7=$r(),v7=gf(),{safeRe:LE,t:AE}=Om(),w7=(e,t)=>{if(e instanceof g7)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?LE[AE.COERCEFULL]:LE[AE.COERCE]);else{let c=t.includePrerelease?LE[AE.COERCERTLFULL]:LE[AE.COERCERTL],l;for(;(l=c.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],o=n[3]||"0",i=n[4]||"0",s=t.includePrerelease&&n[5]?`-${n[5]}`:"",a=t.includePrerelease&&n[6]?`+${n[6]}`:"";return v7(`${r}.${o}.${i}${s}${a}`,t)};vU.exports=w7});var CU=V((Xhe,yU)=>{"use strict";var tb=class{constructor(){this.max=1e3,this.map=new Map}get(t){let n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(t,n)}return this}};yU.exports=tb});var _i=V((Zhe,_U)=>{"use strict";var y7=/\s+/g,nb=class e{constructor(t,n){if(n=E7(n),t instanceof e)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new e(t.raw,n);if(t instanceof rb)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t.trim().replace(y7," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(o=>!SU(o[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&b7(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let n=this.set[t];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let r=((this.options.includePrerelease&&I7)|(this.options.loose&&P7))+":"+t,o=EU.get(r);if(o)return o;let i=this.options.loose,s=i?Qr[Mr.HYPHENRANGELOOSE]:Qr[Mr.HYPHENRANGE];t=t.replace(s,$7(this.options.includePrerelease)),At("hyphen replace",t),t=t.replace(Qr[Mr.COMPARATORTRIM],x7),At("comparator trim",t),t=t.replace(Qr[Mr.TILDETRIM],_7),At("tilde trim",t),t=t.replace(Qr[Mr.CARETTRIM],D7),At("caret trim",t);let a=t.split(" ").map(f=>T7(f,this.options)).join(" ").split(/\s+/).map(f=>U7(f,this.options));i&&(a=a.filter(f=>(At("loose invalid filter",f,this.options),!!f.match(Qr[Mr.COMPARATORLOOSE])))),At("range list",a);let c=new Map,l=a.map(f=>new rb(f,this.options));for(let f of l){if(SU(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return EU.set(r,u),u}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(r=>xU(r,n)&&t.set.some(o=>xU(o,n)&&r.every(i=>o.every(s=>i.intersects(s,n)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new S7(t,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(M7(this.set[n],t,this.options))return!0;return!1}};_U.exports=nb;var C7=CU(),EU=new C7,E7=_E(),rb=Qg(),At=Xg(),S7=$r(),{safeRe:Qr,t:Mr,comparatorTrimReplace:x7,tildeTrimReplace:_7,caretTrimReplace:D7}=Om(),{FLAG_INCLUDE_PRERELEASE:I7,FLAG_LOOSE:P7}=Jg(),SU=e=>e.value==="<0.0.0-0",b7=e=>e.value==="",xU=(e,t)=>{let n=!0,r=e.slice(),o=r.pop();for(;n&&r.length;)n=r.every(i=>o.intersects(i,t)),o=r.pop();return n},T7=(e,t)=>(e=e.replace(Qr[Mr.BUILD],""),At("comp",e,t),e=N7(e,t),At("caret",e),e=k7(e,t),At("tildes",e),e=A7(e,t),At("xrange",e),e=O7(e,t),At("stars",e),e),eo=e=>!e||e.toLowerCase()==="x"||e==="*",k7=(e,t)=>e.trim().split(/\s+/).map(n=>R7(n,t)).join(" "),R7=(e,t)=>{let n=t.loose?Qr[Mr.TILDELOOSE]:Qr[Mr.TILDE];return e.replace(n,(r,o,i,s,a)=>{At("tilde",e,r,o,i,s,a);let c;return eo(o)?c="":eo(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:eo(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(At("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,At("tilde return",c),c})},N7=(e,t)=>e.trim().split(/\s+/).map(n=>L7(n,t)).join(" "),L7=(e,t)=>{At("caret",e,t);let n=t.loose?Qr[Mr.CARETLOOSE]:Qr[Mr.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(o,i,s,a,c)=>{At("caret",e,o,i,s,a,c);let l;return eo(i)?l="":eo(s)?l=`>=${i}.0.0${r} <${+i+1}.0.0-0`:eo(a)?i==="0"?l=`>=${i}.${s}.0${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.0${r} <${+i+1}.0.0-0`:c?(At("replaceCaret pr",c),i==="0"?s==="0"?l=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(At("no pr"),i==="0"?s==="0"?l=`>=${i}.${s}.${a}${r} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),At("caret return",l),l})},A7=(e,t)=>(At("replaceXRanges",e,t),e.split(/\s+/).map(n=>F7(n,t)).join(" ")),F7=(e,t)=>{e=e.trim();let n=t.loose?Qr[Mr.XRANGELOOSE]:Qr[Mr.XRANGE];return e.replace(n,(r,o,i,s,a,c)=>{At("xRange",e,r,o,i,s,a,c);let l=eo(i),u=l||eo(s),f=u||eo(a),m=f;return o==="="&&m&&(o=""),c=t.includePrerelease?"-0":"",l?o===">"||o==="<"?r="<0.0.0-0":r="*":o&&m?(u&&(s=0),a=0,o===">"?(o=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",u?i=+i+1:s=+s+1),o==="<"&&(c="-0"),r=`${o+i}.${s}.${a}${c}`):u?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(r=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),At("xRange return",r),r})},O7=(e,t)=>(At("replaceStars",e,t),e.trim().replace(Qr[Mr.STAR],"")),U7=(e,t)=>(At("replaceGTE0",e,t),e.trim().replace(Qr[t.includePrerelease?Mr.GTE0PRE:Mr.GTE0],"")),$7=e=>(t,n,r,o,i,s,a,c,l,u,f,m)=>(eo(r)?n="":eo(o)?n=`>=${r}.0.0${e?"-0":""}`:eo(i)?n=`>=${r}.${o}.0${e?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${e?"-0":""}`,eo(l)?c="":eo(u)?c=`<${+l+1}.0.0-0`:eo(f)?c=`<${l}.${+u+1}.0-0`:m?c=`<=${l}.${u}.${f}-${m}`:e?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),M7=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let r=0;r<e.length;r++)if(At(e[r].semver),e[r].semver!==rb.ANY&&e[r].semver.prerelease.length>0){let o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}});var Qg=V((Qhe,kU)=>{"use strict";var ev=Symbol("SemVer ANY"),sb=class e{static get ANY(){return ev}constructor(t,n){if(n=DU(n),t instanceof e){if(t.loose===!!n.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),ib("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===ev?this.value="":this.value=this.operator+this.semver.version,ib("comp",this)}parse(t){let n=this.options.loose?IU[PU.COMPARATORLOOSE]:IU[PU.COMPARATOR],r=t.match(n);if(!r)throw new TypeError(`Invalid comparator: ${t}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new bU(r[2],this.options.loose):this.semver=ev}toString(){return this.value}test(t){if(ib("Comparator.test",t,this.options.loose),this.semver===ev||t===ev)return!0;if(typeof t=="string")try{t=new bU(t,this.options)}catch{return!1}return ob(t,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new TU(t.value,n).test(this.value):t.operator===""?t.value===""?!0:new TU(this.value,n).test(t.semver):(n=DU(n),n.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||ob(this.semver,"<",t.semver,n)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||ob(this.semver,">",t.semver,n)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};kU.exports=sb;var DU=_E(),{safeRe:IU,t:PU}=Om(),ob=eb(),ib=Xg(),bU=$r(),TU=_i()});var tv=V((ege,RU)=>{"use strict";var H7=_i(),B7=(e,t,n)=>{try{t=new H7(t,n)}catch{return!1}return t.test(e)};RU.exports=B7});var LU=V((tge,NU)=>{"use strict";var W7=_i(),j7=(e,t)=>new W7(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));NU.exports=j7});var FU=V((nge,AU)=>{"use strict";var V7=$r(),Y7=_i(),G7=(e,t,n)=>{let r=null,o=null,i=null;try{i=new Y7(t,n)}catch{return null}return e.forEach(s=>{i.test(s)&&(!r||o.compare(s)===-1)&&(r=s,o=new V7(r,n))}),r};AU.exports=G7});var UU=V((rge,OU)=>{"use strict";var q7=$r(),z7=_i(),K7=(e,t,n)=>{let r=null,o=null,i=null;try{i=new z7(t,n)}catch{return null}return e.forEach(s=>{i.test(s)&&(!r||o.compare(s)===1)&&(r=s,o=new q7(r,n))}),r};OU.exports=K7});var HU=V((oge,MU)=>{"use strict";var ab=$r(),J7=_i(),$U=Zg(),X7=(e,t)=>{e=new J7(e,t);let n=new ab("0.0.0");if(e.test(n)||(n=new ab("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){let o=e.set[r],i=null;o.forEach(s=>{let a=new ab(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||$U(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!n||$U(n,i))&&(n=i)}return n&&e.test(n)?n:null};MU.exports=X7});var WU=V((ige,BU)=>{"use strict";var Z7=_i(),Q7=(e,t)=>{try{return new Z7(e,t).range||"*"}catch{return null}};BU.exports=Q7});var FE=V((sge,GU)=>{"use strict";var eJ=$r(),YU=Qg(),{ANY:tJ}=YU,nJ=_i(),rJ=tv(),jU=Zg(),VU=kE(),oJ=NE(),iJ=RE(),sJ=(e,t,n,r)=>{e=new eJ(e,r),t=new nJ(t,r);let o,i,s,a,c;switch(n){case">":o=jU,i=oJ,s=VU,a=">",c=">=";break;case"<":o=VU,i=iJ,s=jU,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rJ(e,t,r))return!1;for(let l=0;l<t.set.length;++l){let u=t.set[l],f=null,m=null;if(u.forEach(d=>{d.semver===tJ&&(d=new YU(">=0.0.0")),f=f||d,m=m||d,o(d.semver,f.semver,r)?f=d:s(d.semver,m.semver,r)&&(m=d)}),f.operator===a||f.operator===c||(!m.operator||m.operator===a)&&i(e,m.semver))return!1;if(m.operator===c&&s(e,m.semver))return!1}return!0};GU.exports=sJ});var zU=V((age,qU)=>{"use strict";var aJ=FE(),cJ=(e,t,n)=>aJ(e,t,">",n);qU.exports=cJ});var JU=V((cge,KU)=>{"use strict";var lJ=FE(),uJ=(e,t,n)=>lJ(e,t,"<",n);KU.exports=uJ});var QU=V((lge,ZU)=>{"use strict";var XU=_i(),fJ=(e,t,n)=>(e=new XU(e,n),t=new XU(t,n),e.intersects(t,n));ZU.exports=fJ});var t$=V((uge,e$)=>{"use strict";var dJ=tv(),mJ=xi();e$.exports=(e,t,n)=>{let r=[],o=null,i=null,s=e.sort((u,f)=>mJ(u,f,n));for(let u of s)dJ(u,t,n)?(i=u,o||(o=u)):(i&&r.push([o,i]),i=null,o=null);o&&r.push([o,null]);let a=[];for(let[u,f]of r)u===f?a.push(u):!f&&u===s[0]?a.push("*"):f?u===s[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return c.length<l.length?c:t}});var a$=V((fge,s$)=>{"use strict";var n$=_i(),ub=Qg(),{ANY:lb}=ub,nv=tv(),fb=xi(),pJ=(e,t,n={})=>{if(e===t)return!0;e=new n$(e,n),t=new n$(t,n);let r=!1;e:for(let o of e.set){for(let i of t.set){let s=gJ(o,i,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},hJ=[new ub(">=0.0.0-0")],r$=[new ub(">=0.0.0")],gJ=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===lb){if(t.length===1&&t[0].semver===lb)return!0;n.includePrerelease?e=hJ:e=r$}if(t.length===1&&t[0].semver===lb){if(n.includePrerelease)return!0;t=r$}let r=new Set,o,i;for(let d of e)d.operator===">"||d.operator===">="?o=o$(o,d,n):d.operator==="<"||d.operator==="<="?i=i$(i,d,n):r.add(d.semver);if(r.size>1)return null;let s;if(o&&i){if(s=fb(o.semver,i.semver,n),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let d of r){if(o&&!nv(d,String(o),n)||i&&!nv(d,String(i),n))return null;for(let p of t)if(!nv(d,String(p),n))return!1;return!0}let a,c,l,u,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of t){if(u=u||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",o){if(m&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===m.major&&d.semver.minor===m.minor&&d.semver.patch===m.patch&&(m=!1),d.operator===">"||d.operator===">="){if(a=o$(o,d,n),a===d&&a!==o)return!1}else if(o.operator===">="&&!nv(o.semver,String(d),n))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(c=i$(i,d,n),c===d&&c!==i)return!1}else if(i.operator==="<="&&!nv(i.semver,String(d),n))return!1}if(!d.operator&&(i||o)&&s!==0)return!1}return!(o&&l&&!i&&s!==0||i&&u&&!o&&s!==0||m||f)},o$=(e,t,n)=>{if(!e)return t;let r=fb(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},i$=(e,t,n)=>{if(!e)return t;let r=fb(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};s$.exports=pJ});var mb=V((dge,u$)=>{"use strict";var db=Om(),c$=Jg(),vJ=$r(),l$=KP(),wJ=gf(),yJ=F1(),CJ=U1(),EJ=H1(),SJ=j1(),xJ=Y1(),_J=q1(),DJ=K1(),IJ=X1(),PJ=xi(),bJ=tU(),TJ=rU(),kJ=TE(),RJ=aU(),NJ=lU(),LJ=Zg(),AJ=kE(),FJ=ZP(),OJ=QP(),UJ=RE(),$J=NE(),MJ=eb(),HJ=wU(),BJ=Qg(),WJ=_i(),jJ=tv(),VJ=LU(),YJ=FU(),GJ=UU(),qJ=HU(),zJ=WU(),KJ=FE(),JJ=zU(),XJ=JU(),ZJ=QU(),QJ=t$(),eX=a$();u$.exports={parse:wJ,valid:yJ,clean:CJ,inc:EJ,diff:SJ,major:xJ,minor:_J,patch:DJ,prerelease:IJ,compare:PJ,rcompare:bJ,compareLoose:TJ,compareBuild:kJ,sort:RJ,rsort:NJ,gt:LJ,lt:AJ,eq:FJ,neq:OJ,gte:UJ,lte:$J,cmp:MJ,coerce:HJ,Comparator:BJ,Range:WJ,satisfies:jJ,toComparators:VJ,maxSatisfying:YJ,minSatisfying:GJ,minVersion:qJ,validRange:zJ,outside:KJ,gtr:JJ,ltr:XJ,intersects:ZJ,simplifyRange:QJ,subset:eX,SemVer:vJ,re:db.re,src:db.src,tokens:db.t,SEMVER_SPEC_VERSION:c$.SEMVER_SPEC_VERSION,RELEASE_TYPES:c$.RELEASE_TYPES,compareIdentifiers:l$.compareIdentifiers,rcompareIdentifiers:l$.rcompareIdentifiers}});var pb=V((mge,f$)=>{f$.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var OE=V(m$=>{var d$={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function tX(e){return function(...t){return t.length&&(e=e.replace(/\{(\d)\}/g,(n,r)=>t[r]||"")),new Error("ADM-ZIP: "+e)}}for(let e of Object.keys(d$))m$[e]=tX(d$[e])});var w$=V((hge,v$)=>{var nX=require("fs"),Wn=require("path"),p$=pb(),rX=OE(),oX=typeof process=="object"&&process.platform==="win32",h$=e=>typeof e=="object"&&e!==null,g$=new Uint32Array(256).map((e,t)=>{for(let n=0;n<8;n++)(t&1)!==0?t=3988292384^t>>>1:t>>>=1;return t>>>0});function sn(e){this.sep=Wn.sep,this.fs=nX,h$(e)&&h$(e.fs)&&typeof e.fs.statSync=="function"&&(this.fs=e.fs)}v$.exports=sn;sn.prototype.makeDir=function(e){let t=this;function n(r){let o=r.split(t.sep)[0];r.split(t.sep).forEach(function(i){if(!(!i||i.substr(-1,1)===":")){o+=t.sep+i;var s;try{s=t.fs.statSync(o)}catch{t.fs.mkdirSync(o)}if(s&&s.isFile())throw rX.FILE_IN_THE_WAY(`"${o}"`)}})}n(e)};sn.prototype.writeFileTo=function(e,t,n,r){let o=this;if(o.fs.existsSync(e)){if(!n)return!1;var i=o.fs.statSync(e);if(i.isDirectory())return!1}var s=Wn.dirname(e);o.fs.existsSync(s)||o.makeDir(s);var a;try{a=o.fs.openSync(e,"w",438)}catch{o.fs.chmodSync(e,438),a=o.fs.openSync(e,"w",438)}if(a)try{o.fs.writeSync(a,t,0,t.length,0)}finally{o.fs.closeSync(a)}return o.fs.chmodSync(e,r||438),!0};sn.prototype.writeFileToAsync=function(e,t,n,r,o){typeof r=="function"&&(o=r,r=void 0);let i=this;i.fs.exists(e,function(s){if(s&&!n)return o(!1);i.fs.stat(e,function(a,c){if(s&&c.isDirectory())return o(!1);var l=Wn.dirname(e);i.fs.exists(l,function(u){u||i.makeDir(l),i.fs.open(e,"w",438,function(f,m){f?i.fs.chmod(e,438,function(){i.fs.open(e,"w",438,function(d,p){i.fs.write(p,t,0,t.length,0,function(){i.fs.close(p,function(){i.fs.chmod(e,r||438,function(){o(!0)})})})})}):m?i.fs.write(m,t,0,t.length,0,function(){i.fs.close(m,function(){i.fs.chmod(e,r||438,function(){o(!0)})})}):i.fs.chmod(e,r||438,function(){o(!0)})})})})})};sn.prototype.findFiles=function(e){let t=this;function n(r,o,i){typeof o=="boolean"&&(i=o,o=void 0);let s=[];return t.fs.readdirSync(r).forEach(function(a){let c=Wn.join(r,a),l=t.fs.statSync(c);(!o||o.test(c))&&s.push(Wn.normalize(c)+(l.isDirectory()?t.sep:"")),l.isDirectory()&&i&&(s=s.concat(n(c,o,i)))}),s}return n(e,void 0,!0)};sn.prototype.findFilesAsync=function(e,t){let n=this,r=[];n.fs.readdir(e,function(o,i){if(o)return t(o);let s=i.length;if(!s)return t(null,r);i.forEach(function(a){a=Wn.join(e,a),n.fs.stat(a,function(c,l){if(c)return t(c);l&&(r.push(Wn.normalize(a)+(l.isDirectory()?n.sep:"")),l.isDirectory()?n.findFilesAsync(a,function(u,f){if(u)return t(u);r=r.concat(f),--s||t(null,r)}):--s||t(null,r))})})})};sn.prototype.getAttributes=function(){};sn.prototype.setAttributes=function(){};sn.crc32update=function(e,t){return g$[(e^t)&255]^e>>>8};sn.crc32=function(e){typeof e=="string"&&(e=Buffer.from(e,"utf8"));let t=e.length,n=-1;for(let r=0;r<t;)n=sn.crc32update(n,e[r++]);return~n>>>0};sn.methodToString=function(e){switch(e){case p$.STORED:return"STORED ("+e+")";case p$.DEFLATED:return"DEFLATED ("+e+")";default:return"UNSUPPORTED ("+e+")"}};sn.canonical=function(e){if(!e)return"";let t=Wn.posix.normalize("/"+e.split("\\").join("/"));return Wn.join(".",t)};sn.zipnamefix=function(e){if(!e)return"";let t=Wn.posix.normalize("/"+e.split("\\").join("/"));return Wn.posix.join(".",t)};sn.findLast=function(e,t){if(!Array.isArray(e))throw new TypeError("arr is not array");let n=e.length>>>0;for(let r=n-1;r>=0;r--)if(t(e[r],r,e))return e[r]};sn.sanitize=function(e,t){e=Wn.resolve(Wn.normalize(e));for(var n=t.split("/"),r=0,o=n.length;r<o;r++){var i=Wn.normalize(Wn.join(e,n.slice(r,o).join(Wn.sep)));if(i.indexOf(e)===0)return i}return Wn.normalize(Wn.join(e,Wn.basename(t)))};sn.toBuffer=function(t,n){return Buffer.isBuffer(t)?t:t instanceof Uint8Array?Buffer.from(t):typeof t=="string"?n(t):Buffer.alloc(0)};sn.readBigUInt64LE=function(e,t){var n=Buffer.from(e.slice(t,t+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};sn.fromDOS2Date=function(e){return new Date((e>>25&127)+1980,Math.max((e>>21&15)-1,0),Math.max(e>>16&31,1),e>>11&31,e>>5&63,(e&31)<<1)};sn.fromDate2DOS=function(e){let t=0,n=0;return e.getFullYear()>1979&&(t=(e.getFullYear()-1980&127)<<9|e.getMonth()+1<<5|e.getDate(),n=e.getHours()<<11|e.getMinutes()<<5|e.getSeconds()>>1),t<<16|n};sn.isWin=oX;sn.crcTable=g$});var C$=V((gge,y$)=>{var iX=require("path");y$.exports=function(e,{fs:t}){var n=e||"",r=i(),o=null;function i(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&t.existsSync(n)?(o=t.statSync(n),r.directory=o.isDirectory(),r.mtime=o.mtime,r.atime=o.atime,r.executable=(73&o.mode)!==0,r.readonly=(128&o.mode)===0,r.hidden=iX.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var S$=V((vge,E$)=>{E$.exports={efs:!0,encode:e=>Buffer.from(e,"utf8"),decode:e=>e.toString("utf8")}});var $m=V((wge,Um)=>{Um.exports=w$();Um.exports.Constants=pb();Um.exports.Errors=OE();Um.exports.FileAttr=C$();Um.exports.decoder=S$()});var _$=V((yge,x$)=>{var ul=$m(),de=ul.Constants;x$.exports=function(){var e=20,t=10,n=0,r=0,o=0,i=0,s=0,a=0,c=0,l=0,u=0,f=0,m=0,d=0,p=0;e|=ul.isWin?2560:768,n|=de.FLG_EFS;let g={extraLen:0},h=v=>Math.max(0,v)>>>0,w=v=>Math.max(0,v)&65535,C=v=>Math.max(0,v)&255;return o=ul.fromDate2DOS(new Date),{get made(){return e},set made(v){e=v},get version(){return t},set version(v){t=v},get flags(){return n},set flags(v){n=v},get flags_efs(){return(n&de.FLG_EFS)>0},set flags_efs(v){v?n|=de.FLG_EFS:n&=~de.FLG_EFS},get flags_desc(){return(n&de.FLG_DESC)>0},set flags_desc(v){v?n|=de.FLG_DESC:n&=~de.FLG_DESC},get method(){return r},set method(v){switch(v){case de.STORED:this.version=10;case de.DEFLATED:default:this.version=20}r=v},get time(){return ul.fromDOS2Date(this.timeval)},set time(v){this.timeval=ul.fromDate2DOS(v)},get timeval(){return o},set timeval(v){o=h(v)},get timeHighByte(){return C(o>>>8)},get crc(){return i},set crc(v){i=h(v)},get compressedSize(){return s},set compressedSize(v){s=h(v)},get size(){return a},set size(v){a=h(v)},get fileNameLength(){return c},set fileNameLength(v){c=v},get extraLength(){return l},set extraLength(v){l=v},get extraLocalLength(){return g.extraLen},set extraLocalLength(v){g.extraLen=v},get commentLength(){return u},set commentLength(v){u=v},get diskNumStart(){return f},set diskNumStart(v){f=h(v)},get inAttr(){return m},set inAttr(v){m=h(v)},get attr(){return d},set attr(v){d=h(v)},get fileAttr(){return(d||0)>>16&4095},get offset(){return p},set offset(v){p=h(v)},get encrypted(){return(n&de.FLG_ENC)===de.FLG_ENC},get centralHeaderSize(){return de.CENHDR+c+l+u},get realDataOffset(){return p+de.LOCHDR+g.fnameLen+g.extraLen},get localHeader(){return g},loadLocalHeaderFromBinary:function(v){var y=v.slice(p,p+de.LOCHDR);if(y.readUInt32LE(0)!==de.LOCSIG)throw ul.Errors.INVALID_LOC();g.version=y.readUInt16LE(de.LOCVER),g.flags=y.readUInt16LE(de.LOCFLG),g.method=y.readUInt16LE(de.LOCHOW),g.time=y.readUInt32LE(de.LOCTIM),g.crc=y.readUInt32LE(de.LOCCRC),g.compressedSize=y.readUInt32LE(de.LOCSIZ),g.size=y.readUInt32LE(de.LOCLEN),g.fnameLen=y.readUInt16LE(de.LOCNAM),g.extraLen=y.readUInt16LE(de.LOCEXT);let S=p+de.LOCHDR+g.fnameLen,I=S+g.extraLen;return v.slice(S,I)},loadFromBinary:function(v){if(v.length!==de.CENHDR||v.readUInt32LE(0)!==de.CENSIG)throw ul.Errors.INVALID_CEN();e=v.readUInt16LE(de.CENVEM),t=v.readUInt16LE(de.CENVER),n=v.readUInt16LE(de.CENFLG),r=v.readUInt16LE(de.CENHOW),o=v.readUInt32LE(de.CENTIM),i=v.readUInt32LE(de.CENCRC),s=v.readUInt32LE(de.CENSIZ),a=v.readUInt32LE(de.CENLEN),c=v.readUInt16LE(de.CENNAM),l=v.readUInt16LE(de.CENEXT),u=v.readUInt16LE(de.CENCOM),f=v.readUInt16LE(de.CENDSK),m=v.readUInt16LE(de.CENATT),d=v.readUInt32LE(de.CENATX),p=v.readUInt32LE(de.CENOFF)},localHeaderToBinary:function(){var v=Buffer.alloc(de.LOCHDR);return v.writeUInt32LE(de.LOCSIG,0),v.writeUInt16LE(t,de.LOCVER),v.writeUInt16LE(n,de.LOCFLG),v.writeUInt16LE(r,de.LOCHOW),v.writeUInt32LE(o,de.LOCTIM),v.writeUInt32LE(i,de.LOCCRC),v.writeUInt32LE(s,de.LOCSIZ),v.writeUInt32LE(a,de.LOCLEN),v.writeUInt16LE(c,de.LOCNAM),v.writeUInt16LE(g.extraLen,de.LOCEXT),v},centralHeaderToBinary:function(){var v=Buffer.alloc(de.CENHDR+c+l+u);return v.writeUInt32LE(de.CENSIG,0),v.writeUInt16LE(e,de.CENVEM),v.writeUInt16LE(t,de.CENVER),v.writeUInt16LE(n,de.CENFLG),v.writeUInt16LE(r,de.CENHOW),v.writeUInt32LE(o,de.CENTIM),v.writeUInt32LE(i,de.CENCRC),v.writeUInt32LE(s,de.CENSIZ),v.writeUInt32LE(a,de.CENLEN),v.writeUInt16LE(c,de.CENNAM),v.writeUInt16LE(l,de.CENEXT),v.writeUInt16LE(u,de.CENCOM),v.writeUInt16LE(f,de.CENDSK),v.writeUInt16LE(m,de.CENATT),v.writeUInt32LE(d,de.CENATX),v.writeUInt32LE(p,de.CENOFF),v},toJSON:function(){let v=function(y){return y+" bytes"};return{made:e,version:t,flags:n,method:ul.methodToString(r),time:this.time,crc:"0x"+i.toString(16).toUpperCase(),compressedSize:v(s),size:v(a),fileNameLength:v(c),extraLength:v(l),commentLength:v(u),diskNumStart:f,inAttr:m,attr:d,offset:p,centralHeaderSize:v(de.CENHDR+c+l+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var I$=V((Cge,D$)=>{var Mm=$m(),Xt=Mm.Constants;D$.exports=function(){var e=0,t=0,n=0,r=0,o=0;return{get diskEntries(){return e},set diskEntries(i){e=t=i},get totalEntries(){return t},set totalEntries(i){t=e=i},get size(){return n},set size(i){n=i},get offset(){return r},set offset(i){r=i},get commentLength(){return o},set commentLength(i){o=i},get mainHeaderSize(){return Xt.ENDHDR+o},loadFromBinary:function(i){if((i.length!==Xt.ENDHDR||i.readUInt32LE(0)!==Xt.ENDSIG)&&(i.length<Xt.ZIP64HDR||i.readUInt32LE(0)!==Xt.ZIP64SIG))throw Mm.Errors.INVALID_END();i.readUInt32LE(0)===Xt.ENDSIG?(e=i.readUInt16LE(Xt.ENDSUB),t=i.readUInt16LE(Xt.ENDTOT),n=i.readUInt32LE(Xt.ENDSIZ),r=i.readUInt32LE(Xt.ENDOFF),o=i.readUInt16LE(Xt.ENDCOM)):(e=Mm.readBigUInt64LE(i,Xt.ZIP64SUB),t=Mm.readBigUInt64LE(i,Xt.ZIP64TOT),n=Mm.readBigUInt64LE(i,Xt.ZIP64SIZE),r=Mm.readBigUInt64LE(i,Xt.ZIP64OFF),o=0)},toBinary:function(){var i=Buffer.alloc(Xt.ENDHDR+o);return i.writeUInt32LE(Xt.ENDSIG,0),i.writeUInt32LE(0,4),i.writeUInt16LE(e,Xt.ENDSUB),i.writeUInt16LE(t,Xt.ENDTOT),i.writeUInt32LE(n,Xt.ENDSIZ),i.writeUInt32LE(r,Xt.ENDOFF),i.writeUInt16LE(o,Xt.ENDCOM),i.fill(" ",Xt.ENDHDR),i},toJSON:function(){let i=function(s,a){let c=s.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c};return{diskEntries:e,totalEntries:t,size:n+" bytes",offset:i(r,4),commentLength:o}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var gb=V(hb=>{hb.EntryHeader=_$();hb.MainHeader=I$()});var b$=V((Sge,P$)=>{P$.exports=function(e){var t=require("zlib"),n={chunkSize:(parseInt(e.length/1024)+1)*1024};return{deflate:function(){return t.deflateRawSync(e,n)},deflateAsync:function(r){var o=t.createDeflateRaw(n),i=[],s=0;o.on("data",function(a){i.push(a),s+=a.length}),o.on("end",function(){var a=Buffer.alloc(s),c=0;a.fill(0);for(var l=0;l<i.length;l++){var u=i[l];u.copy(a,c),c+=u.length}r&&r(a)}),o.end(e)}}}});var k$=V((xge,T$)=>{var sX=+(process.versions?process.versions.node:"").split(".")[0]||0;T$.exports=function(e,t){var n=require("zlib");let r=sX>=15&&t>0?{maxOutputLength:t}:{};return{inflate:function(){return n.inflateRawSync(e,r)},inflateAsync:function(o){var i=n.createInflateRaw(r),s=[],a=0;i.on("data",function(c){s.push(c),a+=c.length}),i.on("end",function(){var c=Buffer.alloc(a),l=0;c.fill(0);for(var u=0;u<s.length;u++){var f=s[u];f.copy(c,l),l+=f.length}o&&o(c)}),i.end(e)}}}});var F$=V((_ge,A$)=>{"use strict";var{randomFillSync:R$}=require("crypto"),aX=OE(),cX=new Uint32Array(256).map((e,t)=>{for(let n=0;n<8;n++)(t&1)!==0?t=t>>>1^3988292384:t>>>=1;return t>>>0}),L$=(e,t)=>Math.imul(e,t)>>>0,N$=(e,t)=>cX[(e^t)&255]^e>>>8,rv=()=>typeof R$=="function"?R$(Buffer.alloc(12)):rv.node();rv.node=()=>{let e=Buffer.alloc(12),t=e.length;for(let n=0;n<t;n++)e[n]=Math.random()*256&255;return e};var UE={genSalt:rv};function $E(e){let t=Buffer.isBuffer(e)?e:Buffer.from(e);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<t.length;n++)this.updateKeys(t[n])}$E.prototype.updateKeys=function(e){let t=this.keys;return t[0]=N$(t[0],e),t[1]+=t[0]&255,t[1]=L$(t[1],134775813)+1,t[2]=N$(t[2],t[1]>>>24),e};$E.prototype.next=function(){let e=(this.keys[2]|2)>>>0;return L$(e,e^1)>>8&255};function lX(e){let t=new $E(e);return function(n){let r=Buffer.alloc(n.length),o=0;for(let i of n)r[o++]=t.updateKeys(i^t.next());return r}}function uX(e){let t=new $E(e);return function(n,r,o=0){r||(r=Buffer.alloc(n.length));for(let i of n){let s=t.next();r[o++]=i^s,t.updateKeys(i)}return r}}function fX(e,t,n){if(!e||!Buffer.isBuffer(e)||e.length<12)return Buffer.alloc(0);let r=lX(n),o=r(e.slice(0,12)),i=(t.flags&8)===8?t.timeHighByte:t.crc>>>24;if(o[11]!==i)throw aX.WRONG_PASSWORD();return r(e.slice(12))}function dX(e){Buffer.isBuffer(e)&&e.length>=12?UE.genSalt=function(){return e.slice(0,12)}:e==="node"?UE.genSalt=rv.node:UE.genSalt=rv}function mX(e,t,n,r=!1){e==null&&(e=Buffer.alloc(0)),Buffer.isBuffer(e)||(e=Buffer.from(e.toString()));let o=uX(n),i=UE.genSalt();i[11]=t.crc>>>24&255,r&&(i[10]=t.crc>>>16&255);let s=Buffer.alloc(e.length+12);return o(i,s),o(e,s,12)}A$.exports={decrypt:fX,encrypt:mX,_salter:dX}});var O$=V(ME=>{ME.Deflater=b$();ME.Inflater=k$();ME.ZipCrypto=F$()});var wb=V((Ige,U$)=>{var Et=$m(),pX=gb(),an=Et.Constants,vb=O$();U$.exports=function(e,t){var n=new pX.EntryHeader,r=Buffer.alloc(0),o=Buffer.alloc(0),i=!1,s=null,a=Buffer.alloc(0),c=Buffer.alloc(0),l=!0;let u=e,f=typeof u.decoder=="object"?u.decoder:Et.decoder;l=f.hasOwnProperty("efs")?f.efs:!1;function m(){return!t||!(t instanceof Uint8Array)?Buffer.alloc(0):(c=n.loadLocalHeaderFromBinary(t),t.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function d(v){if(n.flags_desc){let y={},S=n.realDataOffset+n.compressedSize;if(t.readUInt32LE(S)==an.LOCSIG||t.readUInt32LE(S)==an.CENSIG)throw Et.Errors.DESCRIPTOR_NOT_EXIST();if(t.readUInt32LE(S)==an.EXTSIG)y.crc=t.readUInt32LE(S+an.EXTCRC),y.compressedSize=t.readUInt32LE(S+an.EXTSIZ),y.size=t.readUInt32LE(S+an.EXTLEN);else if(t.readUInt16LE(S+12)===19280)y.crc=t.readUInt32LE(S+an.EXTCRC-4),y.compressedSize=t.readUInt32LE(S+an.EXTSIZ-4),y.size=t.readUInt32LE(S+an.EXTLEN-4);else throw Et.Errors.DESCRIPTOR_UNKNOWN();if(y.compressedSize!==n.compressedSize||y.size!==n.size||y.crc!==n.crc)throw Et.Errors.DESCRIPTOR_FAULTY();if(Et.crc32(v)!==y.crc)return!1}else if(Et.crc32(v)!==n.localHeader.crc)return!1;return!0}function p(v,y,S){if(typeof y>"u"&&typeof v=="string"&&(S=v,v=void 0),i)return v&&y&&y(Buffer.alloc(0),Et.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var I=m();if(I.length===0)return v&&y&&y(I),I;if(n.encrypted){if(typeof S!="string"&&!Buffer.isBuffer(S))throw Et.Errors.INVALID_PASS_PARAM();I=vb.ZipCrypto.decrypt(I,n,S)}var _=Buffer.alloc(n.size);switch(n.method){case Et.Constants.STORED:if(I.copy(_),d(_))return v&&y&&y(_),_;throw v&&y&&y(_,Et.Errors.BAD_CRC()),Et.Errors.BAD_CRC();case Et.Constants.DEFLATED:var A=new vb.Inflater(I,n.size);if(v)A.inflateAsync(function(U){U.copy(U,0),y&&(d(U)?y(U):y(U,Et.Errors.BAD_CRC()))});else{if(A.inflate(_).copy(_,0),!d(_))throw Et.Errors.BAD_CRC(`"${f.decode(r)}"`);return _}break;default:throw v&&y&&y(Buffer.alloc(0),Et.Errors.UNKNOWN_METHOD()),Et.Errors.UNKNOWN_METHOD()}}function g(v,y){if((!s||!s.length)&&Buffer.isBuffer(t))return v&&y&&y(m()),m();if(s.length&&!i){var S;switch(n.method){case Et.Constants.STORED:return n.compressedSize=n.size,S=Buffer.alloc(s.length),s.copy(S),v&&y&&y(S),S;default:case Et.Constants.DEFLATED:var I=new vb.Deflater(s);if(v)I.deflateAsync(function(A){S=Buffer.alloc(A.length),n.compressedSize=A.length,A.copy(S),y&&y(S)});else{var _=I.deflate();return n.compressedSize=_.length,_}I=null;break}}else if(v&&y)y(Buffer.alloc(0));else return Buffer.alloc(0)}function h(v,y){return(v.readUInt32LE(y+4)<<4)+v.readUInt32LE(y)}function w(v){try{for(var y=0,S,I,_;y+4<v.length;)S=v.readUInt16LE(y),y+=2,I=v.readUInt16LE(y),y+=2,_=v.slice(y,y+I),y+=I,an.ID_ZIP64===S&&C(_)}catch{throw Et.Errors.EXTRA_FIELD_PARSE_ERROR()}}function C(v){var y,S,I,_;v.length>=an.EF_ZIP64_SCOMP&&(y=h(v,an.EF_ZIP64_SUNCOMP),n.size===an.EF_ZIP64_OR_32&&(n.size=y)),v.length>=an.EF_ZIP64_RHO&&(S=h(v,an.EF_ZIP64_SCOMP),n.compressedSize===an.EF_ZIP64_OR_32&&(n.compressedSize=S)),v.length>=an.EF_ZIP64_DSN&&(I=h(v,an.EF_ZIP64_RHO),n.offset===an.EF_ZIP64_OR_32&&(n.offset=I)),v.length>=an.EF_ZIP64_DSN+4&&(_=v.readUInt32LE(an.EF_ZIP64_DSN),n.diskNumStart===an.EF_ZIP64_OR_16&&(n.diskNumStart=_))}return{get entryName(){return f.decode(r)},get rawEntryName(){return r},set entryName(v){r=Et.toBuffer(v,f.encode);var y=r[r.length-1];i=y===47||y===92,n.fileNameLength=r.length},get efs(){return typeof l=="function"?l(this.entryName):l},get extra(){return a},set extra(v){a=v,n.extraLength=v.length,w(v)},get comment(){return f.decode(o)},set comment(v){if(o=Et.toBuffer(v,f.encode),n.commentLength=o.length,o.length>65535)throw Et.Errors.COMMENT_TOO_LONG()},get name(){var v=f.decode(r);return i?v.substr(v.length-1).split("/").pop():v.split("/").pop()},get isDirectory(){return i},getCompressedData:function(){return g(!1,null)},getCompressedDataAsync:function(v){g(!0,v)},setData:function(v){s=Et.toBuffer(v,Et.decoder.encode),!i&&s.length?(n.size=s.length,n.method=Et.Constants.DEFLATED,n.crc=Et.crc32(v),n.changed=!0):n.method=Et.Constants.STORED},getData:function(v){return n.changed?s:p(!1,null,v)},getDataAsync:function(v,y){n.changed?v(s):p(!0,v,y)},set attr(v){n.attr=v},get attr(){return n.attr},set header(v){n.loadFromBinary(v)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var v=n.centralHeaderToBinary(),y=Et.Constants.CENHDR;return r.copy(v,y),y+=r.length,a.copy(v,y),y+=n.extraLength,o.copy(v,y),v},packLocalHeader:function(){let v=0;n.flags_efs=this.efs,n.extraLocalLength=c.length;let y=n.localHeaderToBinary(),S=Buffer.alloc(y.length+r.length+n.extraLocalLength);return y.copy(S,v),v+=y.length,r.copy(S,v),v+=r.length,c.copy(S,v),v+=c.length,S},toJSON:function(){let v=function(y){return"<"+(y&&y.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:v(t),data:v(s)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var H$=V((Pge,M$)=>{var $$=wb(),hX=gb(),wr=$m();M$.exports=function(e,t){var n=[],r={},o=Buffer.alloc(0),i=new hX.MainHeader,s=!1,a=null;let c=new Set,l=t,{noSort:u,decoder:f}=l;e?p(l.readEntries):s=!0;function m(){let h=new Set;for(let w of Object.keys(r)){let C=w.split("/");if(C.pop(),!!C.length)for(let v=0;v<C.length;v++){let y=C.slice(0,v+1).join("/")+"/";h.add(y)}}for(let w of h)if(!(w in r)){let C=new $$(l);C.entryName=w,C.attr=16,C.temporary=!0,n.push(C),r[C.entryName]=C,c.add(C)}}function d(){if(s=!0,r={},i.diskEntries>(e.length-i.offset)/wr.Constants.CENHDR)throw wr.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(i.diskEntries);for(var h=i.offset,w=0;w<n.length;w++){var C=h,v=new $$(l,e);v.header=e.slice(C,C+=wr.Constants.CENHDR),v.entryName=e.slice(C,C+=v.header.fileNameLength),v.header.extraLength&&(v.extra=e.slice(C,C+=v.header.extraLength)),v.header.commentLength&&(v.comment=e.slice(C,C+v.header.commentLength)),h+=v.header.centralHeaderSize,n[w]=v,r[v.entryName]=v}c.clear(),m()}function p(h){var w=e.length-wr.Constants.ENDHDR,C=Math.max(0,w-65535),v=C,y=e.length,S=-1,I=0;for((typeof l.trailingSpace=="boolean"?l.trailingSpace:!1)&&(C=0),w;w>=v;w--)if(e[w]===80){if(e.readUInt32LE(w)===wr.Constants.ENDSIG){S=w,I=w,y=w+wr.Constants.ENDHDR,v=w-wr.Constants.END64HDR;continue}if(e.readUInt32LE(w)===wr.Constants.END64SIG){v=C;continue}if(e.readUInt32LE(w)===wr.Constants.ZIP64SIG){S=w,y=w+wr.readBigUInt64LE(e,w+wr.Constants.ZIP64SIZE)+wr.Constants.ZIP64LEAD;break}}if(S==-1)throw wr.Errors.INVALID_FORMAT();i.loadFromBinary(e.slice(S,y)),i.commentLength&&(o=e.slice(I+wr.Constants.ENDHDR)),h&&d()}function g(){n.length>1&&!u&&n.sort((h,w)=>h.entryName.toLowerCase().localeCompare(w.entryName.toLowerCase()))}return{get entries(){return s||d(),n.filter(h=>!c.has(h))},get comment(){return f.decode(o)},set comment(h){o=wr.toBuffer(h,f.encode),i.commentLength=o.length},getEntryCount:function(){return s?n.length:i.diskEntries},forEach:function(h){this.entries.forEach(h)},getEntry:function(h){return s||d(),r[h]||null},setEntry:function(h){s||d(),n.push(h),r[h.entryName]=h,i.totalEntries=n.length},deleteFile:function(h,w=!0){s||d();let C=r[h];this.getEntryChildren(C,w).map(y=>y.entryName).forEach(this.deleteEntry)},deleteEntry:function(h){s||d();let w=r[h],C=n.indexOf(w);C>=0&&(n.splice(C,1),delete r[h],i.totalEntries=n.length)},getEntryChildren:function(h,w=!0){if(s||d(),typeof h=="object")if(h.isDirectory&&w){let C=[],v=h.entryName;for(let y of n)y.entryName.startsWith(v)&&C.push(y);return C}else return[h];return[]},getChildCount:function(h){if(h&&h.isDirectory){let w=this.getEntryChildren(h);return w.includes(h)?w.length-1:w.length}return 0},compressToBuffer:function(){s||d(),g();let h=[],w=[],C=0,v=0;i.size=0,i.offset=0;let y=0;for(let _ of this.entries){let A=_.getCompressedData();_.header.offset=v;let U=_.packLocalHeader(),R=U.length+A.length;v+=R,h.push(U),h.push(A);let E=_.packCentralHeader();w.push(E),i.size+=E.length,C+=R+E.length,y++}C+=i.mainHeaderSize,i.offset=v,i.totalEntries=y,v=0;let S=Buffer.alloc(C);for(let _ of h)_.copy(S,v),v+=_.length;for(let _ of w)_.copy(S,v),v+=_.length;let I=i.toBinary();return o&&o.copy(I,wr.Constants.ENDHDR),I.copy(S,v),e=S,s=!1,S},toAsyncBuffer:function(h,w,C,v){try{s||d(),g();let y=[],S=[],I=0,_=0,A=0;i.size=0,i.offset=0;let U=function(R){if(R.length>0){let E=R.shift(),x=E.entryName+E.extra.toString();C&&C(x),E.getCompressedDataAsync(function(b){v&&v(x),E.header.offset=_;let D=E.packLocalHeader(),T=D.length+b.length;_+=T,y.push(D),y.push(b);let k=E.packCentralHeader();S.push(k),i.size+=k.length,I+=T+k.length,A++,U(R)})}else{I+=i.mainHeaderSize,i.offset=_,i.totalEntries=A,_=0;let E=Buffer.alloc(I);y.forEach(function(b){b.copy(E,_),_+=b.length}),S.forEach(function(b){b.copy(E,_),_+=b.length});let x=i.toBinary();o&&o.copy(x,wr.Constants.ENDHDR),x.copy(E,_),e=E,s=!1,h(E)}};U(Array.from(this.entries))}catch(y){w(y)}}}}});var j$=V((bge,W$)=>{var Zt=$m(),cn=require("path"),gX=wb(),vX=H$(),vf=(...e)=>Zt.findLast(e,t=>typeof t=="boolean"),B$=(...e)=>Zt.findLast(e,t=>typeof t=="string"),wX=(...e)=>Zt.findLast(e,t=>typeof t=="function"),yX={noSort:!1,readEntries:!1,method:Zt.Constants.NONE,fs:null};W$.exports=function(e,t){let n=null,r=Object.assign(Object.create(null),yX);e&&typeof e=="object"&&(e instanceof Uint8Array||(Object.assign(r,e),e=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(e)&&(n=e,r.method=Zt.Constants.BUFFER,e=void 0)),Object.assign(r,t);let o=new Zt(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=Zt.decoder),e&&typeof e=="string")if(o.fs.existsSync(e))r.method=Zt.Constants.FILE,r.filename=e,n=o.fs.readFileSync(e);else throw Zt.Errors.INVALID_FILENAME();let i=new vX(n,r),{canonical:s,sanitize:a,zipnamefix:c}=Zt;function l(d){if(d&&i){var p;if(typeof d=="string"&&(p=i.getEntry(cn.posix.normalize(d))),typeof d=="object"&&typeof d.entryName<"u"&&typeof d.header<"u"&&(p=i.getEntry(d.entryName)),p)return p}return null}function u(d){let{join:p,normalize:g,sep:h}=cn.posix;return p(".",g(h+d.split("\\").join(h)+h))}function f(d){return d instanceof RegExp?(function(p){return function(g){return p.test(g)}})(d):typeof d!="function"?()=>!0:d}let m=(d,p)=>{let g=p.slice(-1);return g=g===o.sep?o.sep:"",cn.relative(d,p)+g};return{readFile:function(d,p){var g=l(d);return g&&g.getData(p)||null},childCount:function(d){let p=l(d);if(p)return i.getChildCount(p)},readFileAsync:function(d,p){var g=l(d);g?g.getDataAsync(p):p(null,"getEntry failed for:"+d)},readAsText:function(d,p){var g=l(d);if(g){var h=g.getData();if(h&&h.length)return h.toString(p||"utf8")}return""},readAsTextAsync:function(d,p,g){var h=l(d);h?h.getDataAsync(function(w,C){if(C){p(w,C);return}w&&w.length?p(w.toString(g||"utf8")):p("")}):p("")},deleteFile:function(d,p=!0){var g=l(d);g&&i.deleteFile(g.entryName,p)},deleteEntry:function(d){var p=l(d);p&&i.deleteEntry(p.entryName)},addZipComment:function(d){i.comment=d},getZipComment:function(){return i.comment||""},addZipEntryComment:function(d,p){var g=l(d);g&&(g.comment=p)},getZipEntryComment:function(d){var p=l(d);return p&&p.comment||""},updateFile:function(d,p){var g=l(d);g&&g.setData(p)},addLocalFile:function(d,p,g,h){if(o.fs.existsSync(d)){p=p?u(p):"";let w=cn.win32.basename(cn.win32.normalize(d));p+=g||w;let C=o.fs.statSync(d),v=C.isFile()?o.fs.readFileSync(d):Buffer.alloc(0);C.isDirectory()&&(p+=o.sep),this.addFile(p,v,h,C)}else throw Zt.Errors.FILE_NOT_FOUND(d)},addLocalFileAsync:function(d,p){d=typeof d=="object"?d:{localPath:d};let g=cn.resolve(d.localPath),{comment:h}=d,{zipPath:w,zipName:C}=d,v=this;o.fs.stat(g,function(y,S){if(y)return p(y,!1);w=w?u(w):"";let I=cn.win32.basename(cn.win32.normalize(g));if(w+=C||I,S.isFile())o.fs.readFile(g,function(_,A){return _?p(_,!1):(v.addFile(w,A,h,S),setImmediate(p,void 0,!0))});else if(S.isDirectory())return w+=o.sep,v.addFile(w,Buffer.alloc(0),h,S),setImmediate(p,void 0,!0)})},addLocalFolder:function(d,p,g){if(g=f(g),p=p?u(p):"",d=cn.normalize(d),o.fs.existsSync(d)){let h=o.findFiles(d),w=this;if(h.length)for(let C of h){let v=cn.join(p,m(d,C));g(v)&&w.addLocalFile(C,cn.dirname(v))}}else throw Zt.Errors.FILE_NOT_FOUND(d)},addLocalFolderAsync:function(d,p,g,h){h=f(h),g=g?u(g):"",d=cn.normalize(d);var w=this;o.fs.open(d,"r",function(C){if(C&&C.code==="ENOENT")p(void 0,Zt.Errors.FILE_NOT_FOUND(d));else if(C)p(void 0,C);else{var v=o.findFiles(d),y=-1,S=function(){if(y+=1,y<v.length){var I=v[y],_=m(d,I).split("\\").join("/");_=_.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),h(_)?o.fs.stat(I,function(A,U){A&&p(void 0,A),U.isFile()?o.fs.readFile(I,function(R,E){R?p(void 0,R):(w.addFile(g+_,E,"",U),S())}):(w.addFile(g+_+"/",Buffer.alloc(0),"",U),S())}):process.nextTick(()=>{S()})}else p(!0,void 0)};S()}})},addLocalFolderAsync2:function(d,p){let g=this;d=typeof d=="object"?d:{localPath:d},localPath=cn.resolve(u(d.localPath));let{zipPath:h,filter:w,namefix:C}=d;w instanceof RegExp?w=(function(S){return function(I){return S.test(I)}})(w):typeof w!="function"&&(w=function(){return!0}),h=h?u(h):"",C=="latin1"&&(C=S=>S.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof C!="function"&&(C=S=>S);let v=S=>cn.join(h,C(m(localPath,S))),y=S=>cn.win32.basename(cn.win32.normalize(C(S)));o.fs.open(localPath,"r",function(S){S&&S.code==="ENOENT"?p(void 0,Zt.Errors.FILE_NOT_FOUND(localPath)):S?p(void 0,S):o.findFilesAsync(localPath,function(I,_){if(I)return p(I);_=_.filter(A=>w(v(A))),_.length||p(void 0,!1),setImmediate(_.reverse().reduce(function(A,U){return function(R,E){if(R||E===!1)return setImmediate(A,R,!1);g.addLocalFileAsync({localPath:U,zipPath:cn.dirname(v(U)),zipName:y(U)},A)}},p))})})},addLocalFolderPromise:function(d,p){return new Promise((g,h)=>{this.addLocalFolderAsync2(Object.assign({localPath:d},p),(w,C)=>{w&&h(w),C&&g(this)})})},addFile:function(d,p,g,h){d=c(d);let w=l(d),C=w!=null;C||(w=new gX(r),w.entryName=d),w.comment=g||"";let v=typeof h=="object"&&h instanceof o.fs.Stats;v&&(w.header.time=h.mtime);var y=w.isDirectory?16:0;let S=w.isDirectory?16384:32768;return v?S|=4095&h.mode:typeof h=="number"?S|=4095&h:S|=w.isDirectory?493:420,y=(y|S<<16)>>>0,w.attr=y,w.setData(p),C||i.setEntry(w),w},getEntries:function(d){return i.password=d,i?i.entries:[]},getEntry:function(d){return l(d)},getEntryCount:function(){return i.getEntryCount()},forEach:function(d){return i.forEach(d)},extractEntryTo:function(d,p,g,h,w,C){h=vf(!1,h),w=vf(!1,w),g=vf(!0,g),C=B$(w,C);var v=l(d);if(!v)throw Zt.Errors.NO_ENTRY();var y=s(v.entryName),S=a(p,C&&!v.isDirectory?C:g?y:cn.basename(y));if(v.isDirectory){var I=i.getEntryChildren(v);return I.forEach(function(U){if(U.isDirectory)return;var R=U.getData();if(!R)throw Zt.Errors.CANT_EXTRACT_FILE();var E=s(U.entryName),x=a(p,g?E:cn.basename(E));let b=w?U.header.fileAttr:void 0;o.writeFileTo(x,R,h,b)}),!0}var _=v.getData(i.password);if(!_)throw Zt.Errors.CANT_EXTRACT_FILE();if(o.fs.existsSync(S)&&!h)throw Zt.Errors.CANT_OVERRIDE();let A=w?d.header.fileAttr:void 0;return o.writeFileTo(S,_,h,A),!0},test:function(d){if(!i)return!1;for(var p in i.entries)try{if(p.isDirectory)continue;var g=i.entries[p].getData(d);if(!g)return!1}catch{return!1}return!0},extractAllTo:function(d,p,g,h){if(g=vf(!1,g),h=B$(g,h),p=vf(!1,p),!i)throw Zt.Errors.NO_ZIP();i.entries.forEach(function(w){var C=a(d,s(w.entryName));if(w.isDirectory){o.makeDir(C);return}var v=w.getData(h);if(!v)throw Zt.Errors.CANT_EXTRACT_FILE();let y=g?w.header.fileAttr:void 0;o.writeFileTo(C,v,p,y);try{o.fs.utimesSync(C,w.header.time,w.header.time)}catch{throw Zt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(d,p,g,h){if(h=wX(p,g,h),g=vf(!1,g),p=vf(!1,p),!h)return new Promise((S,I)=>{this.extractAllToAsync(d,p,g,function(_){_?I(_):S(this)})});if(!i){h(Zt.Errors.NO_ZIP());return}d=cn.resolve(d);let w=S=>a(d,cn.normalize(s(S.entryName))),C=(S,I)=>new Error(S+': "'+I+'"'),v=[],y=[];i.entries.forEach(S=>{S.isDirectory?v.push(S):y.push(S)});for(let S of v){let I=w(S),_=g?S.header.fileAttr:void 0;try{o.makeDir(I),_&&o.fs.chmodSync(I,_),o.fs.utimesSync(I,S.header.time,S.header.time)}catch{h(C("Unable to create folder",I))}}y.reverse().reduce(function(S,I){return function(_){if(_)S(_);else{let A=cn.normalize(s(I.entryName)),U=a(d,A);I.getDataAsync(function(R,E){if(E)S(E);else if(!R)S(Zt.Errors.CANT_EXTRACT_FILE());else{let x=g?I.header.fileAttr:void 0;o.writeFileToAsync(U,R,p,x,function(b){b||S(C("Unable to write file",U)),o.fs.utimes(U,I.header.time,I.header.time,function(D){D?S(C("Unable to set times",U)):S()})})}})}}},h)()},writeZip:function(d,p){if(arguments.length===1&&typeof d=="function"&&(p=d,d=""),!d&&r.filename&&(d=r.filename),!!d){var g=i.compressToBuffer();if(g){var h=o.writeFileTo(d,g,!0);typeof p=="function"&&p(h?null:new Error("failed"),"")}}},writeZipPromise:function(d,p){let{overwrite:g,perm:h}=Object.assign({overwrite:!0},p);return new Promise((w,C)=>{!d&&r.filename&&(d=r.filename),d||C("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(v=>{let y=S=>S?w(S):C("ADM-ZIP: Wasn't able to write zip file");o.writeFileToAsync(d,v,g,h,y)},C)})},toBufferPromise:function(){return new Promise((d,p)=>{i.toAsyncBuffer(d,p)})},toBuffer:function(d,p,g,h){return typeof d=="function"?(i.toAsyncBuffer(d,p,g,h),null):i.compressToBuffer()}}}});var Y$=V((kge,V$)=>{V$.exports=class{constructor(t){if(!(t>0)||(t-1&t)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(t){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){let t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var yb=V((Nge,q$)=>{var G$=Y$();q$.exports=class{constructor(t){this.hwm=t||16,this.head=new G$(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(t){if(this.length++,!this.head.push(t)){let n=this.head;this.head=n.next=new G$(2*this.head.buffer.length),this.head.push(t)}}shift(){this.length!==0&&this.length--;let t=this.tail.shift();if(t===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return t}peek(){let t=this.tail.peek();return t===void 0&&this.tail.next?this.tail.next.peek():t}isEmpty(){return this.length===0}}});var Hm=V((Lge,z$)=>{function CX(e){return Buffer.isBuffer(e)||e instanceof Uint8Array}function EX(e){return Buffer.isEncoding(e)}function SX(e,t,n){return Buffer.alloc(e,t,n)}function xX(e){return Buffer.allocUnsafe(e)}function _X(e){return Buffer.allocUnsafeSlow(e)}function DX(e,t){return Buffer.byteLength(e,t)}function IX(e,t){return Buffer.compare(e,t)}function PX(e,t){return Buffer.concat(e,t)}function bX(e,t,n,r,o){return St(e).copy(t,n,r,o)}function TX(e,t){return St(e).equals(t)}function kX(e,t,n,r,o){return St(e).fill(t,n,r,o)}function RX(e,t,n){return Buffer.from(e,t,n)}function NX(e,t,n,r){return St(e).includes(t,n,r)}function LX(e,t,n,r){return St(e).indexOf(t,n,r)}function AX(e,t,n,r){return St(e).lastIndexOf(t,n,r)}function FX(e){return St(e).swap16()}function OX(e){return St(e).swap32()}function UX(e){return St(e).swap64()}function St(e){return Buffer.isBuffer(e)?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength)}function $X(e,t,n,r){return St(e).toString(t,n,r)}function MX(e,t,n,r,o){return St(e).write(t,n,r,o)}function HX(e,t,n){return St(e).writeDoubleLE(t,n)}function BX(e,t,n){return St(e).writeFloatLE(t,n)}function WX(e,t,n){return St(e).writeUInt32LE(t,n)}function jX(e,t,n){return St(e).writeInt32LE(t,n)}function VX(e,t){return St(e).readDoubleLE(t)}function YX(e,t){return St(e).readFloatLE(t)}function GX(e,t){return St(e).readUInt32LE(t)}function qX(e,t){return St(e).readInt32LE(t)}function zX(e,t,n){return St(e).writeDoubleBE(t,n)}function KX(e,t,n){return St(e).writeFloatBE(t,n)}function JX(e,t,n){return St(e).writeUInt32BE(t,n)}function XX(e,t,n){return St(e).writeInt32BE(t,n)}function ZX(e,t){return St(e).readDoubleBE(t)}function QX(e,t){return St(e).readFloatBE(t)}function eZ(e,t){return St(e).readUInt32BE(t)}function tZ(e,t){return St(e).readInt32BE(t)}z$.exports={isBuffer:CX,isEncoding:EX,alloc:SX,allocUnsafe:xX,allocUnsafeSlow:_X,byteLength:DX,compare:IX,concat:PX,copy:bX,equals:TX,fill:kX,from:RX,includes:NX,indexOf:LX,lastIndexOf:AX,swap16:FX,swap32:OX,swap64:UX,toBuffer:St,toString:$X,write:MX,writeDoubleLE:HX,writeFloatLE:BX,writeUInt32LE:WX,writeInt32LE:jX,readDoubleLE:VX,readFloatLE:YX,readUInt32LE:GX,readInt32LE:qX,writeDoubleBE:zX,writeFloatBE:KX,writeUInt32BE:JX,writeInt32BE:XX,readDoubleBE:ZX,readFloatBE:QX,readUInt32BE:eZ,readInt32BE:tZ}});var J$=V((Fge,K$)=>{var nZ=Hm();K$.exports=class{constructor(t){this.encoding=t}get remaining(){return 0}decode(t){return nZ.toString(t,this.encoding)}flush(){return""}}});var Z$=V((Uge,X$)=>{var rZ=Hm();X$.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(t){if(this.bytesNeeded===0){let r=!0;for(let o=Math.max(0,t.byteLength-4),i=t.byteLength;o<i&&r;o++)r=t[o]<=127;if(r)return rZ.toString(t,"utf8")}let n="";for(let r=0,o=t.byteLength;r<o;r++){let i=t[r];if(this.bytesNeeded===0){i<=127?n+=String.fromCharCode(i):(this.bytesSeen=1,i>=194&&i<=223?(this.bytesNeeded=2,this.codePoint=i&31):i>=224&&i<=239?(i===224?this.lowerBoundary=160:i===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=i&15):i>=240&&i<=244?(i===240&&(this.lowerBoundary=144),i===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=i&7):n+="\uFFFD");continue}if(i<this.lowerBoundary||i>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|i&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let t=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,t}}});var eM=V((Mge,Q$)=>{var oZ=J$(),iZ=Z$();Q$.exports=class{constructor(t="utf8"){switch(this.encoding=sZ(t),this.encoding){case"utf8":this.decoder=new iZ;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new oZ(this.encoding)}}get remaining(){return this.decoder.remaining}push(t){return typeof t=="string"?t:this.decoder.decode(t)}write(t){return this.push(t)}end(t){let n="";return t&&(n=this.push(t)),n+=this.decoder.flush(),n}};function sZ(e){switch(e=e.toLowerCase(),e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:throw new Error("Unknown encoding: "+e)}}});var Ab=V((Hge,xM)=>{var{EventEmitter:aZ}=require("events"),YE=new Error("Stream was destroyed"),Cb=new Error("Premature close"),sM=yb(),cZ=eM(),Qt=(1<<29)-1,qs=1,Pb=2,wf=4,ov=8,aM=Qt^qs,lZ=Qt^Pb,lv=16,Bm=32,Vm=64,dl=128,uv=256,bb=512,yf=1024,Eb=2048,Tb=4096,kb=8192,os=16384,fl=32768,GE=65536,Cf=131072,cM=uv|bb,uZ=lv|GE,fZ=Vm|lv,dZ=Tb|dl,Rb=uv|Cf,mZ=Qt^lv,pZ=Qt^Vm,hZ=Qt^(Vm|GE),tM=Qt^GE,gZ=Qt^uv,vZ=Qt^(dl|kb),wZ=Qt^yf,nM=Qt^cM,lM=Qt^fl,yZ=Qt^Bm,uM=Qt^Cf,CZ=Qt^Rb,Ka=1<<18,jm=2<<18,fv=4<<18,Ef=8<<18,dv=16<<18,ml=32<<18,Sb=64<<18,Wm=128<<18,Nb=256<<18,Sf=512<<18,qE=1024<<18,EZ=Qt^(Ka|Nb),fM=Qt^fv,SZ=Qt^(Ka|Sf),xZ=Qt^dv,_Z=Qt^Ef,dM=Qt^Wm,DZ=Qt^jm,mM=Qt^qE,iv=lv|Ka,pM=Qt^iv,Lb=os|ml,zs=wf|ov|Pb,Ko=zs|qs,hM=zs|Lb,IZ=fM&pZ,zE=Wm|fl,PZ=zE&pM,gM=Ko|PZ,bZ=Ko|yf|os,rM=Ko|os|dl,TZ=Ko|yf|dl,kZ=Ko|Tb|dl|kb,RZ=Ko|lv|yf|os|GE|Cf,NZ=zs|yf|os,LZ=Bm|Ko|fl|Vm,AZ=fl|qs,FZ=Ko|Sf|ml,OZ=Ef|dv,vM=Ef|Ka,UZ=Ef|dv|Ko|Ka,oM=Ko|Ka|Ef|qE,$Z=fv|Ka,MZ=Ka|Nb,HZ=Ko|Sf|vM|ml,BZ=dv|zs|Sf|ml,WZ=jm|Ko|Wm|fv,jZ=Sf|ml|zs,HE=Symbol.asyncIterator||Symbol("asyncIterator"),BE=class{constructor(t,{highWaterMark:n=16384,map:r=null,mapWritable:o,byteLength:i,byteLengthWritable:s}={}){this.stream=t,this.queue=new sM,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||i||SM,this.map=o||r,this.afterWrite=GZ.bind(this),this.afterUpdateNextTick=KZ.bind(this)}get ended(){return(this.stream._duplexState&ml)!==0}push(t){return(this.stream._duplexState&jZ)!==0?!1:(this.map!==null&&(t=this.map(t)),this.buffered+=this.byteLength(t),this.queue.push(t),this.buffered<this.highWaterMark?(this.stream._duplexState|=Ef,!0):(this.stream._duplexState|=OZ,!1))}shift(){let t=this.queue.shift();return this.buffered-=this.byteLength(t),this.buffered===0&&(this.stream._duplexState&=_Z),t}end(t){typeof t=="function"?this.stream.once("finish",t):t!=null&&this.push(t),this.stream._duplexState=(this.stream._duplexState|Sf)&fM}autoBatch(t,n){let r=[],o=this.stream;for(r.push(t);(o._duplexState&oM)===vM;)r.push(o._writableState.shift());if((o._duplexState&Ko)!==0)return n(null);o._writev(r,n)}update(){let t=this.stream;t._duplexState|=jm;do{for(;(t._duplexState&oM)===Ef;){let n=this.shift();t._duplexState|=MZ,t._write(n,this.afterWrite)}(t._duplexState&$Z)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);t._duplexState&=DZ}updateNonPrimary(){let t=this.stream;if((t._duplexState&HZ)===Sf){t._duplexState=t._duplexState|Ka,t._final(YZ.bind(this));return}if((t._duplexState&zs)===wf){(t._duplexState&zE)===0&&(t._duplexState|=iv,t._destroy(wM.bind(this)));return}(t._duplexState&gM)===qs&&(t._duplexState=(t._duplexState|iv)&aM,t._open(yM.bind(this)))}continueUpdate(){return(this.stream._duplexState&Wm)===0?!1:(this.stream._duplexState&=dM,!0)}updateCallback(){(this.stream._duplexState&WZ)===fv?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&Wm)===0&&(this.stream._duplexState|=Wm,(this.stream._duplexState&jm)===0&&queueMicrotask(this.afterUpdateNextTick))}},xb=class{constructor(t,{highWaterMark:n=16384,map:r=null,mapReadable:o,byteLength:i,byteLengthReadable:s}={}){this.stream=t,this.queue=new sM,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=s||i||SM,this.map=o||r,this.pipeTo=null,this.afterRead=qZ.bind(this),this.afterUpdateNextTick=zZ.bind(this)}get ended(){return(this.stream._duplexState&os)!==0}pipe(t,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=bb,this.pipeTo=t,this.pipeline=new Db(this.stream,t,n),n&&this.stream.on("error",iM),cv(t))t._writableState.pipeline=this.pipeline,n&&t.on("error",iM),t.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,t),o=this.pipeline.done.bind(this.pipeline,t,null);t.on("error",r),t.on("close",o),t.on("finish",this.pipeline.finished.bind(this.pipeline))}t.on("drain",VZ.bind(this)),this.stream.emit("piping",t),t.emit("pipe",this.stream)}push(t){let n=this.stream;return t===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|yf)&hZ,!1):this.map!==null&&(t=this.map(t),t===null)?(n._duplexState&=tM,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(t),this.queue.push(t),n._duplexState=(n._duplexState|dl)&tM,this.buffered<this.highWaterMark)}shift(){let t=this.queue.shift();return this.buffered-=this.byteLength(t),this.buffered===0&&(this.stream._duplexState&=vZ),t}unshift(t){let n=[this.map!==null?this.map(t):t];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let o=n[r];this.buffered+=this.byteLength(o),this.queue.push(o)}this.push(n[n.length-1])}read(){let t=this.stream;if((t._duplexState&rM)===dl){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(t._duplexState&=nM),(t._duplexState&Eb)!==0&&t.emit("data",n),n}return this.readAhead===!1&&(t._duplexState|=Cf,this.updateNextTick()),null}drain(){let t=this.stream;for(;(t._duplexState&rM)===dl&&(t._duplexState&cM)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(t._duplexState&=nM),(t._duplexState&Eb)!==0&&t.emit("data",n)}}update(){let t=this.stream;t._duplexState|=Bm;do{for(this.drain();this.buffered<this.highWaterMark&&(t._duplexState&RZ)===Cf;)t._duplexState|=uZ,t._read(this.afterRead),this.drain();(t._duplexState&kZ)===dZ&&(t._duplexState|=kb,t.emit("readable")),(t._duplexState&fZ)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);t._duplexState&=yZ}updateNonPrimary(){let t=this.stream;if((t._duplexState&TZ)===yf&&(t._duplexState=(t._duplexState|os)&wZ,t.emit("end"),(t._duplexState&hM)===Lb&&(t._duplexState|=wf),this.pipeTo!==null&&this.pipeTo.end()),(t._duplexState&zs)===wf){(t._duplexState&zE)===0&&(t._duplexState|=iv,t._destroy(wM.bind(this)));return}(t._duplexState&gM)===qs&&(t._duplexState=(t._duplexState|iv)&aM,t._open(yM.bind(this)))}continueUpdate(){return(this.stream._duplexState&fl)===0?!1:(this.stream._duplexState&=lM,!0)}updateCallback(){(this.stream._duplexState&LZ)===Vm?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&AZ)===0&&(this.stream._duplexState|=fl,(this.stream._duplexState&Bm)===0&&queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&fl)===0&&(this.stream._duplexState|=fl,(this.stream._duplexState&Bm)===0&&queueMicrotask(this.afterUpdateNextTick))}},_b=class{constructor(t){this.data=null,this.afterTransform=XZ.bind(t),this.afterFinal=null}},Db=class{constructor(t,n,r){this.from=t,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(t,n){if(n&&(this.error=n),t===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&os)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(t===this.from&&(this.from=null,this.to!==null)){(t._duplexState&os)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function VZ(){this.stream._duplexState|=bb,this.updateCallback()}function YZ(e){let t=this.stream;e&&t.destroy(e),(t._duplexState&zs)===0&&(t._duplexState|=ml,t.emit("finish")),(t._duplexState&hM)===Lb&&(t._duplexState|=wf),t._duplexState&=SZ,(t._duplexState&jm)===0?this.update():this.updateNextTick()}function wM(e){let t=this.stream;!e&&this.error!==YE&&(e=this.error),e&&t.emit("error",e),t._duplexState|=ov,t.emit("close");let n=t._readableState,r=t._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(t,e),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(t,e)}}function GZ(e){let t=this.stream;e&&t.destroy(e),t._duplexState&=EZ,this.drains!==null&&JZ(this.drains),(t._duplexState&UZ)===dv&&(t._duplexState&=xZ,(t._duplexState&Sb)===Sb&&t.emit("drain")),this.updateCallback()}function qZ(e){e&&this.stream.destroy(e),this.stream._duplexState&=mZ,this.readAhead===!1&&(this.stream._duplexState&uv)===0&&(this.stream._duplexState&=uM),this.updateCallback()}function zZ(){(this.stream._duplexState&Bm)===0&&(this.stream._duplexState&=lM,this.update())}function KZ(){(this.stream._duplexState&jm)===0&&(this.stream._duplexState&=dM,this.update())}function JZ(e){for(let t=0;t<e.length;t++)--e[t].writes===0&&(e.shift().resolve(!0),t--)}function yM(e){let t=this.stream;e&&t.destroy(e),(t._duplexState&wf)===0&&((t._duplexState&bZ)===0&&(t._duplexState|=Vm),(t._duplexState&FZ)===0&&(t._duplexState|=fv),t.emit("open")),t._duplexState&=pM,t._writableState!==null&&t._writableState.updateCallback(),t._readableState!==null&&t._readableState.updateCallback()}function XZ(e,t){t!=null&&this.push(t),this._writableState.afterWrite(e)}function ZZ(e){this._readableState!==null&&(e==="data"&&(this._duplexState|=Eb|Rb,this._readableState.updateNextTick()),e==="readable"&&(this._duplexState|=Tb,this._readableState.updateNextTick())),this._writableState!==null&&e==="drain"&&(this._duplexState|=Sb,this._writableState.updateNextTick())}var sv=class extends aZ{constructor(t){super(),this._duplexState=0,this._readableState=null,this._writableState=null,t&&(t.open&&(this._open=t.open),t.destroy&&(this._destroy=t.destroy),t.predestroy&&(this._predestroy=t.predestroy),t.signal&&t.signal.addEventListener("abort",cQ.bind(this))),this.on("newListener",ZZ)}_open(t){t(null)}_destroy(t){t(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&ov)!==0}get destroying(){return(this._duplexState&zs)!==0}destroy(t){(this._duplexState&zs)===0&&(t||(t=YE),this._duplexState=(this._duplexState|wf)&IZ,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=t),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=t),this._duplexState|=Pb,this._predestroy(),this._duplexState&=lZ,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},WE=class e extends sv{constructor(t){super(t),this._duplexState|=qs|ml|Cf,this._readableState=new xb(this,t),t&&(this._readableState.readAhead===!1&&(this._duplexState&=uM),t.read&&(this._read=t.read),t.eagerOpen&&this._readableState.updateNextTick(),t.encoding&&this.setEncoding(t.encoding))}setEncoding(t){let n=new cZ(t),r=this._readableState.map||tQ;return this._readableState.map=o,this;function o(i){let s=n.push(i);return s===""&&(i.byteLength!==0||n.remaining>0)?null:r(s)}}_read(t){t(null)}pipe(t,n){return this._readableState.updateNextTick(),this._readableState.pipe(t,n),t}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(t){return this._readableState.updateNextTickIfOpen(),this._readableState.push(t)}unshift(t){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(t)}resume(){return this._duplexState|=Rb,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?CZ:gZ,this}static _fromAsyncIterator(t,n){let r,o=new e({...n,read(s){t.next().then(i).then(s.bind(null,null)).catch(s)},predestroy(){r=t.return()},destroy(s){if(!r)return s(null);r.then(s.bind(null,null)).catch(s)}});return o;function i(s){s.done?o.push(null):o.push(s.value)}}static from(t,n){if(iQ(t))return t;if(t[HE])return this._fromAsyncIterator(t[HE](),n);Array.isArray(t)||(t=t===void 0?[]:[t]);let r=0;return new e({...n,read(o){this.push(r===t.length?null:t[r++]),o(null)}})}static isBackpressured(t){return(t._duplexState&NZ)!==0||t._readableState.buffered>=t._readableState.highWaterMark}static isPaused(t){return(t._duplexState&uv)===0}[HE](){let t=this,n=null,r=null,o=null;return this.on("error",l=>{n=l}),this.on("readable",i),this.on("close",s),{[HE](){return this},next(){return new Promise(function(l,u){r=l,o=u;let f=t.read();f!==null?a(f):(t._duplexState&ov)!==0&&a(null)})},return(){return c(null)},throw(l){return c(l)}};function i(){r!==null&&a(t.read())}function s(){r!==null&&a(null)}function a(l){o!==null&&(n?o(n):l===null&&(t._duplexState&os)===0?o(YE):r({value:l,done:l===null}),o=r=null)}function c(l){return t.destroy(l),new Promise((u,f)=>{if(t._duplexState&ov)return u({value:void 0,done:!0});t.once("close",function(){l?f(l):u({value:void 0,done:!0})})})}}},jE=class extends sv{constructor(t){super(t),this._duplexState|=qs|os,this._writableState=new BE(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final),t.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=qE}uncork(){this._duplexState&=mM,this._writableState.updateNextTick()}_writev(t,n){n(null)}_write(t,n){this._writableState.autoBatch(t,n)}_final(t){t(null)}static isBackpressured(t){return(t._duplexState&BZ)!==0}static drained(t){if(t.destroyed)return Promise.resolve(!1);let n=t._writableState,o=(lQ(t)?Math.min(1,n.queue.length):n.queue.length)+(t._duplexState&Nb?1:0);return o===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(i=>{n.drains.push({writes:o,resolve:i})}))}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}},av=class extends WE{constructor(t){super(t),this._duplexState=qs|this._duplexState&Cf,this._writableState=new BE(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final))}cork(){this._duplexState|=qE}uncork(){this._duplexState&=mM,this._writableState.updateNextTick()}_writev(t,n){n(null)}_write(t,n){this._writableState.autoBatch(t,n)}_final(t){t(null)}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}},VE=class extends av{constructor(t){super(t),this._transformState=new _b(this),t&&(t.transform&&(this._transform=t.transform),t.flush&&(this._flush=t.flush))}_write(t,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=t:this._transform(t,this._transformState.afterTransform)}_read(t){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,t(null),this._transform(n,this._transformState.afterTransform)}else t(null)}destroy(t){super.destroy(t),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(t,n){n(null,t)}_flush(t){t(null)}_final(t){this._transformState.afterFinal=t,this._flush(QZ.bind(this))}},Ib=class extends VE{};function QZ(e,t){let n=this._transformState.afterFinal;if(e)return n(e);t!=null&&this.push(t),this.push(null),n(null)}function eQ(...e){return new Promise((t,n)=>CM(...e,r=>{if(r)return n(r);t()}))}function CM(e,...t){let n=Array.isArray(e)?[...e,...t]:[e,...t],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let o=n[0],i=null,s=null;for(let l=1;l<n.length;l++)i=n[l],cv(o)?o.pipe(i,c):(a(o,!0,l>1,c),o.pipe(i)),o=i;if(r){let l=!1,u=cv(i)||!!(i._writableState&&i._writableState.autoDestroy);i.on("error",f=>{s===null&&(s=f)}),i.on("finish",()=>{l=!0,u||r(s)}),u&&i.on("close",()=>r(s||(l?null:Cb)))}return i;function a(l,u,f,m){l.on("error",m),l.on("close",d);function d(){if(u&&l._readableState&&!l._readableState.ended||f&&l._writableState&&!l._writableState.ended)return m(Cb)}}function c(l){if(!(!l||s)){s=l;for(let u of n)u.destroy(l)}}}function tQ(e){return e}function EM(e){return!!e._readableState||!!e._writableState}function cv(e){return typeof e._duplexState=="number"&&EM(e)}function nQ(e){return!!e._readableState&&e._readableState.ended}function rQ(e){return!!e._writableState&&e._writableState.ended}function oQ(e,t={}){let n=e._readableState&&e._readableState.error||e._writableState&&e._writableState.error;return!t.all&&n===YE?null:n}function iQ(e){return cv(e)&&e.readable}function sQ(e){return(e._duplexState&qs)!==qs||(e._duplexState&zE)!==0}function aQ(e){return typeof e=="object"&&e!==null&&typeof e.byteLength=="number"}function SM(e){return aQ(e)?e.byteLength:1024}function iM(){}function cQ(){this.destroy(new Error("Stream aborted."))}function lQ(e){return e._writev!==jE.prototype._writev&&e._writev!==av.prototype._writev}xM.exports={pipeline:CM,pipelinePromise:eQ,isStream:EM,isStreamx:cv,isEnded:nQ,isFinished:rQ,isDisturbed:sQ,getStreamError:oQ,Stream:sv,Writable:jE,Readable:WE,Duplex:av,Transform:VE,PassThrough:Ib}});var Ub=V(Gm=>{var lt=Hm(),uQ="0000000000000000000",fQ="7777777777777777777",KE=48,_M=lt.from([117,115,116,97,114,0]),dQ=lt.from([KE,KE]),mQ=lt.from([117,115,116,97,114,32]),pQ=lt.from([32,0]),hQ=4095,mv=257,Ob=263;Gm.decodeLongPath=function(t,n){return Ym(t,0,t.length,n)};Gm.encodePax=function(t){let n="";t.name&&(n+=Fb(" path="+t.name+`
`)),t.linkname&&(n+=Fb(" linkpath="+t.linkname+`
`));let r=t.pax;if(r)for(let o in r)n+=Fb(" "+o+"="+r[o]+`
`);return lt.from(n)};Gm.decodePax=function(t){let n={};for(;t.length;){let r=0;for(;r<t.length&&t[r]!==32;)r++;let o=parseInt(lt.toString(t.subarray(0,r)),10);if(!o)return n;let i=lt.toString(t.subarray(r+1,o-1)),s=i.indexOf("=");if(s===-1)return n;n[i.slice(0,s)]=i.slice(s+1),t=t.subarray(o)}return n};Gm.encode=function(t){let n=lt.alloc(512),r=t.name,o="";if(t.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),lt.byteLength(r)!==r.length)return null;for(;lt.byteLength(r)>100;){let i=r.indexOf("/");if(i===-1)return null;o+=o?"/"+r.slice(0,i):r.slice(0,i),r=r.slice(i+1)}return lt.byteLength(r)>100||lt.byteLength(o)>155||t.linkname&&lt.byteLength(t.linkname)>100?null:(lt.write(n,r),lt.write(n,hl(t.mode&hQ,6),100),lt.write(n,hl(t.uid,6),108),lt.write(n,hl(t.gid,6),116),SQ(t.size,n,124),lt.write(n,hl(t.mtime.getTime()/1e3|0,11),136),n[156]=KE+CQ(t.type),t.linkname&&lt.write(n,t.linkname,157),lt.copy(_M,n,mv),lt.copy(dQ,n,Ob),t.uname&&lt.write(n,t.uname,265),t.gname&&lt.write(n,t.gname,297),lt.write(n,hl(t.devmajor||0,6),329),lt.write(n,hl(t.devminor||0,6),337),o&&lt.write(n,o,345),lt.write(n,hl(IM(n),6),148),n)};Gm.decode=function(t,n,r){let o=t[156]===0?0:t[156]-KE,i=Ym(t,0,100,n),s=pl(t,100,8),a=pl(t,108,8),c=pl(t,116,8),l=pl(t,124,12),u=pl(t,136,12),f=yQ(o),m=t[157]===0?null:Ym(t,157,100,n),d=Ym(t,265,32),p=Ym(t,297,32),g=pl(t,329,8),h=pl(t,337,8),w=IM(t);if(w===256)return null;if(w!==pl(t,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(gQ(t))t[345]&&(i=Ym(t,345,155,n)+"/"+i);else if(!vQ(t)){if(!r)throw new Error("Invalid tar header: unknown format.")}return o===0&&i&&i[i.length-1]==="/"&&(o=5),{name:i,mode:s,uid:a,gid:c,size:l,mtime:new Date(1e3*u),type:f,linkname:m,uname:d,gname:p,devmajor:g,devminor:h,pax:null}};function gQ(e){return lt.equals(_M,e.subarray(mv,mv+6))}function vQ(e){return lt.equals(mQ,e.subarray(mv,mv+6))&&lt.equals(pQ,e.subarray(Ob,Ob+2))}function wQ(e,t,n){return typeof e!="number"?n:(e=~~e,e>=t?t:e>=0||(e+=t,e>=0)?e:0)}function yQ(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function CQ(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function DM(e,t,n,r){for(;n<r;n++)if(e[n]===t)return n;return r}function IM(e){let t=256;for(let n=0;n<148;n++)t+=e[n];for(let n=156;n<512;n++)t+=e[n];return t}function hl(e,t){return e=e.toString(8),e.length>t?fQ.slice(0,t)+" ":uQ.slice(0,t-e.length)+e+" "}function EQ(e,t,n){t[n]=128;for(let r=11;r>0;r--)t[n+r]=e&255,e=Math.floor(e/256)}function SQ(e,t,n){e.toString(8).length>11?EQ(e,t,n):lt.write(t,hl(e,11),n)}function xQ(e){let t;if(e[0]===128)t=!0;else if(e[0]===255)t=!1;else return null;let n=[],r;for(r=e.length-1;r>0;r--){let s=e[r];t?n.push(s):n.push(255-s)}let o=0,i=n.length;for(r=0;r<i;r++)o+=n[r]*Math.pow(256,r);return t?o:-1*o}function pl(e,t,n){if(e=e.subarray(t,t+n),t=0,e[t]&128)return xQ(e);{for(;t<e.length&&e[t]===32;)t++;let r=wQ(DM(e,32,t,e.length),e.length,e.length);for(;t<r&&e[t]===0;)t++;return r===t?0:parseInt(lt.toString(e.subarray(t,r)),8)}}function Ym(e,t,n,r){return lt.toString(e.subarray(t,DM(e,0,t,t+n)),r)}function Fb(e){let t=lt.byteLength(e),n=Math.floor(Math.log(t)/Math.log(10))+1;return t+n>=Math.pow(10,n)&&n++,t+n+e}});var RM=V((Wge,kM)=>{var{Writable:_Q,Readable:DQ,getStreamError:PM}=Ab(),IQ=yb(),bM=Hm(),qm=Ub(),PQ=bM.alloc(0),Mb=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new IQ,this._offset=0}push(t){this.buffered+=t.byteLength,this.queue.push(t)}shiftFirst(t){return this._buffered===0?null:this._next(t)}shift(t){if(t>this.buffered)return null;if(t===0)return PQ;let n=this._next(t);if(t===n.byteLength)return n;let r=[n];for(;(t-=n.byteLength)>0;)n=this._next(t),r.push(n);return bM.concat(r)}_next(t){let n=this.queue.peek(),r=n.byteLength-this._offset;if(t>=r){let o=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,o}return this.buffered-=t,this.shifted+=t,n.subarray(this._offset,this._offset+=t)}},Hb=class extends DQ{constructor(t,n,r){super(),this.header=n,this.offset=r,this._parent=t}_read(t){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),t(null)}_predestroy(){this._parent.destroy(PM(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=TM(this.header.size),this._parent._update())}_destroy(t){this._detach(),t(null)}},Bb=class extends _Q{constructor(t){super(t),t||(t={}),this._buffer=new Mb,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=$b,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=t.filenameEncoding||"utf-8",this._allowUnknownFormat=!!t.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(t){if(this._locked=!1,t){this.destroy(t),this._continueWrite(t);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=qm.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(t){return this._continueWrite(t),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(t){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=qm.decodeLongPath(t,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=qm.decodeLongPath(t,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=qm.decodePax(t);break;case"pax-header":this._pax=this._paxGlobal===null?qm.decodePax(t):Object.assign({},this._paxGlobal,qm.decodePax(t));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=TM(this._header.size);let t=this._buffer.shift(this._header.size);try{this._decodeLongHeader(t)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let t=this._buffer.shiftFirst(this._missing);if(t===null)return!1;this._missing-=t.byteLength;let n=this._stream.push(t);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new Hb(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let t=this._buffer.shiftFirst(this._missing);t!==null&&(this._missing-=t.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(t){let n=this._callback;this._callback=$b,n(t)}_write(t,n){this._callback=n,this._buffer.push(t),this._update()}_final(t){this._finished=this._missing===0&&this._buffer.buffered===0,t(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(t){this._stream&&this._stream.destroy(PM(this)),t(null)}[Symbol.asyncIterator](){let t=null,n=null,r=null,o=null,i=null,s=this;return this.on("entry",l),this.on("error",m=>{t=m}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(c)},return(){return f(null)},throw(m){return f(m)}};function a(m){if(!i)return;let d=i;i=null,d(m)}function c(m,d){if(t)return d(t);if(o){m({value:o,done:!1}),o=null;return}n=m,r=d,a(null),s._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function l(m,d,p){i=p,d.on("error",$b),n?(n({value:d,done:!1}),n=r=null):o=d}function u(){a(t),n&&(t?r(t):n({value:void 0,done:!0}),n=r=null)}function f(m){return s.destroy(m),a(m),new Promise((d,p)=>{if(s.destroyed)return d({value:void 0,done:!0});s.once("close",function(){m?p(m):d({value:void 0,done:!0})})})}}};kM.exports=function(t){return new Bb(t)};function $b(){}function TM(e){return e&=511,e&&512-e}});var LM=V((jge,Wb)=>{var NM={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{Wb.exports=require("fs").constants||NM}catch{Wb.exports=NM}});var $M=V((Vge,UM)=>{var{Readable:bQ,Writable:TQ,getStreamError:AM}=Ab(),xf=Hm(),zm=LM(),JE=Ub(),kQ=493,RQ=420,FM=xf.alloc(1024),Vb=class extends TQ{constructor(t,n,r){super({mapWritable:LQ,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=t,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(t){this._openCallback=t,this._pack._stream===this&&this._continueOpen()}_continuePack(t){if(this._callback===null)return;let n=this._callback;this._callback=null,n(t)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let t=this._openCallback;if(this._openCallback=null,t!==null){if(this._pack.destroying)return t(new Error("pack stream destroyed"));if(this._pack._finalized)return t(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),t(null)}}_write(t,n){if(this._isLinkname)return this._linkname=this._linkname?xf.concat([this._linkname,t]):t,n(null);if(this._isVoid)return t.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=t.byteLength,this._pack.push(t))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?xf.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),OM(this._pack,this.header.size),this._pack._done(this))}_final(t){if(this.written!==this.header.size)return t(new Error("Size mismatch"));this._finish(),t(null)}_getError(){return AM(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(t){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),t()}},Yb=class extends bQ{constructor(t){super(t),this._drain=jb,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(t,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=jb),(!t.size||t.type==="symlink")&&(t.size=0),t.type||(t.type=NQ(t.mode)),t.mode||(t.mode=t.type==="directory"?kQ:RQ),t.uid||(t.uid=0),t.gid||(t.gid=0),t.mtime||(t.mtime=new Date),typeof n=="string"&&(n=xf.from(n));let o=new Vb(this,t,r);return xf.isBuffer(n)?(t.size=n.byteLength,o.write(n),o.end(),o):(o._isVoid,o)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(FM),this.push(null))}_done(t){t===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(t){if(!t.pax){let n=JE.encode(t);if(n){this.push(n);return}}this._encodePax(t)}_encodePax(t){let n=JE.encodePax({name:t.name,linkname:t.linkname,pax:t.pax}),r={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:n.byteLength,mtime:t.mtime,type:"pax-header",linkname:t.linkname&&"PaxHeader",uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};this.push(JE.encode(r)),this.push(n),OM(this,n.byteLength),r.size=t.size,r.type=t.type,this.push(JE.encode(r))}_doDrain(){let t=this._drain;this._drain=jb,t()}_predestroy(){let t=AM(this);for(this._stream&&this._stream.destroy(t);this._pending.length;){let n=this._pending.shift();n.destroy(t),n._continueOpen()}this._doDrain()}_read(t){this._doDrain(),t()}};UM.exports=function(t){return new Yb(t)};function NQ(e){switch(e&zm.S_IFMT){case zm.S_IFBLK:return"block-device";case zm.S_IFCHR:return"character-device";case zm.S_IFDIR:return"directory";case zm.S_IFIFO:return"fifo";case zm.S_IFLNK:return"symlink"}return"file"}function jb(){}function OM(e,t){t&=511,t&&e.push(FM.subarray(0,512-t))}function LQ(e){return xf.isBuffer(e)?e:xf.from(e)}});var MM=V(Gb=>{Gb.extract=RM();Gb.pack=$M()});var qb=V((Jge,WM)=>{WM.exports=function(t,n,r){t(n),r&&r(n===!0?null:n)}});var ZE=V((Xge,VM)=>{"use strict";var jM=qb();VM.exports=function(t,n){if(!t)return function(o,i){return o?jM(i,o,n):i(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(o){return t[o]}));var r=0;return function(o,i){if(o)return jM(i,o,n);r>=t.length?i(!0):i(null,t[r++])}}});var GM=V((Zge,YM)=>{"use strict";var OQ=ZE();YM.exports=function(e){return OQ(Object.keys(e))}});var zb=V((Qge,qM)=>{"use strict";var UQ=qb();qM.exports=function(t,n){return function(r,o){if(r)return UQ(o,r,n);if(t!=null){var i=t;t=null,o(null,i)}else o(!0)}}});var KM=V((eve,zM)=>{"use strict";zM.exports=function(t){var n=0;return t=t||1/0,function(r,o){if(r)return o&&o(r);if(n>t)return o(!0);o(null,n++)}}});var XM=V((tve,JM)=>{"use strict";JM.exports=function(t){return t=t||Math.random,function(n,r){return n?r&&r(n):r(null,t())}}});var QM=V((nve,ZM)=>{"use strict";ZM.exports=function(){return function(t,n){n(!0)}}});var tH=V((rve,eH)=>{"use strict";eH.exports=function(t){return function(n,r){r(t)}}});var rH=V((ove,nH)=>{"use strict";nH.exports={keys:GM(),once:zb(),values:ZE(),count:KM(),infinite:XM(),empty:QM(),error:tH()}});var Km=V((ive,oH)=>{"use strict";oH.exports=function(t,n){var r,o,i;n||(i=new Error("no done callback supplied"));function s(a){if(r=a,o)return s.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,r(null,function(f,m){if(u=!0,f=f||o){if(l=!1,n)n(f===!0?null:f);else if(f&&f!==!0)throw console.warn(i),f}else t&&t(m)===!1||o?(l=!1,r(o||!0,n||function(){})):l||c()}),!u){l=!1;return}})()}return s.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),o=a||!0,r)return r(o,c||function(){})},s}});var sH=V((sve,iH)=>{"use strict";var $Q=Km();iH.exports=function(t){return $Q(null,t)}});var cH=V((ave,aH)=>{"use strict";var MQ=Km();aH.exports=function(t){return MQ(function(n){console.log(n)},t)}});var Jm=V((cve,lH)=>{lH.exports=function(t){return t&&(typeof t=="string"?function(n){return n[t]}:typeof t=="object"&&typeof t.exec=="function"?function(n){var r=t.exec(n);return r&&r[0]}:t)}});var dH=V((lve,fH)=>{"use strict";function uH(e){return e}var HQ=Jm(),BQ=Km();fH.exports=function(t,n){var r=!1;return n?t=HQ(t)||uH:(n=t,t=uH),BQ(function(o){if(t(o))return r=!0,n(null,o),!1},function(o){r||n(o===!0?null:o,null)})}});var QE=V((uve,mH)=>{"use strict";var WQ=Km();mH.exports=function(t,n,r){r||(r=n,n=null);var o=WQ(function(i){n=t(n,i)},function(i){r(i,n)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return r(s===!0?null:s);n=a,o(i)})}:o}});var Kb=V((fve,pH)=>{"use strict";var jQ=QE();pH.exports=function(t){return jQ(function(n,r){return n.push(r),n},[],t)}});var gH=V((dve,hH)=>{"use strict";var VQ=Kb();hH.exports=function(){return t=>{let n,r,o=new Promise((i,s)=>{n=i,r=s});return VQ((i,s)=>{i?r(i):n(s)})(t),o}}});var wH=V((mve,vH)=>{"use strict";var YQ=QE();vH.exports=function(t){return YQ(function(n,r){return n+r},"",t)}});var CH=V((pve,yH)=>{"use strict";yH.exports={drain:Km(),onEnd:sH(),log:cH(),find:dH(),reduce:QE(),collect:Kb(),collectAsPromise:gH(),concat:wH()}});var SH=V((hve,EH)=>{"use strict";function GQ(e){return e}var qQ=Jm();EH.exports=function(t){return t?(t=qQ(t),function(n){return function(r,o){n(r,function(i,s){try{s=i?null:t(s)}catch(a){return n(a,function(){return o(a)})}o(i,s)})}}):GQ}});var _H=V((gve,xH)=>{"use strict";function zQ(e){return e}var KQ=Jm();xH.exports=function(t){if(!t)return zQ;t=KQ(t);var n=!1,r,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,n?i(a,function(l){n?r=c:c(a)}):i(a,function(l){c(a)})):i(null,function(l,u){l?c(l):o?c(o):(n=!0,t(u,function(f,m){n=!1,o?(c(o),r&&r(o)):f?s(f,c):c(null,m)}))})}}}});var Jb=V((vve,DH)=>{var JQ=Jm();function XQ(e){return e}DH.exports=function(t){return typeof t=="object"&&typeof t.test=="function"?function(n){return t.test(n)}:JQ(t)||XQ}});var eS=V((wve,IH)=>{"use strict";var ZQ=Jb();IH.exports=function(t){return t=ZQ(t),function(n){return function r(o,i){for(var s,a=!0;a;)a=!1,s=!0,n(o,function(c,l){if(!c&&!t(l))return s?a=!0:r(c,i);i(c,l)}),s=!1}}}});var bH=V((yve,PH)=>{"use strict";var QQ=Jb(),eee=eS();PH.exports=function(t){return t=QQ(t),eee(function(n){return!t(n)})}});var kH=V((Cve,TH)=>{"use strict";TH.exports=function(t,n){var r=!1;function o(i){r||!n||(r=!0,n(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,l){c?o(c):t&&t(l),a(c,l)})}}}});var NH=V((Eve,RH)=>{"use strict";RH.exports=function(t,n){n=n||{};var r=n.last||!1,o=!1;if(typeof t=="number"){r=!0;var i=t;t=function(){return--i}}return function(s){function a(c){s(!0,function(l){r=!1,c(l||!0)})}return function(c,l){o&&!c?r?a(l):l(o):(o=c)?s(o,l):s(null,function(u,f){(o=o||u)?l(o):t(f)?l(null,f):(o=!0,r?l(null,f):a(l))})}}}});var Xb=V((Sve,LH)=>{"use strict";function tee(e){return e}var nee=Jm(),ree=eS();LH.exports=function(t,n){t=nee(t)||tee;var r={};return ree(function(o){var i=t(o);return r[i]?!!n:(r[i]=!0,!n)})}});var FH=V((xve,AH)=>{"use strict";var oee=Xb();AH.exports=function(t){return oee(t,!0)}});var UH=V((_ve,OH)=>{"use strict";var iee=ZE(),see=zb();OH.exports=function(){return function(t){var n;return function(r,o){r?n?n(r,function(a){t(a||r,o)}):t(r,o):n?i():s();function i(){n(null,function(a,c){a?a===!0?s():t(!0,function(l){o(a)}):o(null,c)})}function s(){n=null,t(null,function(a,c){if(a)return o(a);c&&typeof c=="object"?c=iee(c):typeof c!="function"&&(c=see(c)),n=c,i()})}}}}});var MH=V((Dve,$H)=>{"use strict";$H.exports={map:SH(),asyncMap:_H(),filter:eS(),filterNot:bH(),through:kH(),take:NH(),unique:Xb(),nonUnique:FH(),flatten:UH()}});var Zb=V((Ive,HH)=>{"use strict";HH.exports=function e(t){var n=arguments.length;if(typeof t=="function"&&t.length===1){for(var r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(a){if(r==null)throw new TypeError("partial sink should only be called once!");var c=r;switch(r=null,n){case 1:return e(a,c[0]);case 2:return e(a,c[0],c[1]);case 3:return e(a,c[0],c[1],c[2]);case 4:return e(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),e.apply(null,c)}}}var i=t;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<n;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var hv=V((_f,VH)=>{"use strict";var BH=rH(),WH=CH(),jH=MH();_f=VH.exports=Zb();_f.pull=_f;for(is in BH)_f[is]=BH[is];var is;for(is in jH)_f[is]=jH[is];var is;for(is in WH)_f[is]=WH[is];var is});var lT=V((twe,d2)=>{var ewe=d2.exports=function(e){(function t(){var n=!0,r=!1,o=!1;do o=!0,n=!1,e.call(this,function(){o?n=!0:t()}),o=!1;while(n)})()}});var p2=V((nwe,m2)=>{var xee=lT();m2.exports=function(e,t){return function(n){var r=[],o,i;function s(l){r.push(l)}e=e||function(l){this.queue(l)},t=t||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(o=!0,s(null)),l=="error"&&(i=u)},queue:s},c;return function(l,u){if(o=o||l,l)return n(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,xee(function f(m){if(c)if(u=c,i)c=null,u(i);else if(r.length){var d=r.shift();c=null,u(d===null,d)}else n(o,function(p,g){if(p&&p!==!0)return i=p,m();if(o=o||p)t.call(a);else if(g!==null&&(e.call(a,g),i||o))return n(i||o,function(){c=null,u(i||o)});m(f)})})}}}});var g2=V((rwe,h2)=>{h2.exports=function(){var e=[],t=0;function n(){return e.reduce(function(r,o){return r+o.length},0)}return{length:t,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=t=t+r.length,e.push(r),this},has:function(r){return r==null?t>0:t>=r},get:function(r){var o;if(r==null||r===t){t=0;var i=e;return e=[],i.length==1?i[0]:Buffer.concat(i)}else if(e.length>1&&r<=(o=e[0].length)){var s=e[0].slice(0,r);return r===o?e.shift():e[0]=e[0].slice(r,o),t-=r,s}else if(r<t){for(var a=[],c=0;c+e[0].length<r;){var l=e.shift();c+=l.length,a.push(l)}return c<r&&(a.push(e[0].slice(0,r-c)),e[0]=e[0].slice(r-c,e[0].length),this.length=t=t-r),Buffer.concat(a)}else throw new Error("could not get "+r+" bytes")}}}});var C2=V((owe,y2)=>{"use strict";var _ee=g2();function Dee(e){return Number.isFinite(e)}function v2(e){return typeof e=="function"}function w2(e,t){return t?function(n,r){var o=setTimeout(function(){e(new Error("pull-reader: read exceeded timeout"),r)},t);e(n,function(i,s){clearTimeout(o),r(i,s)})}:e}y2.exports=function(e){var t=[],n,r,o=!1,i=_ee(),s,a,c;function l(){for(;t.length;)if(t[0].length==null&&i.has(1))t.shift().cb(null,i.get());else if(i.has(t[0].length)){var m=t.shift();m.cb(null,i.get(m.length))}else if(s==!0&&t[0].length&&i.length<t[0].length){var d="stream ended with:"+i.length+" but wanted:"+t[0].length;t.shift().cb(new Error(d))}else if(s)t.shift().cb(s);else return!!t.length;return t.length||!i.has(1)||c}function u(){var m=l();m&&!o&&n&&!o&&!a&&(o=!0,r(null,function(d,p){if(o=!1,d)return s=d,l();i.add(p),u()}))}function f(m){if(c){for(;t.length;)t.shift().cb(c);return cb&&cb(c)}r=w2(m,e),n=m,u()}return f.abort=function(m,d){c=m||!0,n?(o=!0,n(c,function(){for(;t.length;)t.shift().cb(c);d&&d(c)})):d()},f.read=function(m,d,p){if(v2(d)&&(p=d,d=e),v2(p))t.push({length:Dee(m)?m:null,cb:p}),u();else return a=!0,function(g,h){if(o||i.has(1)){if(g)return n(g,h);t.push({length:null,cb:h}),u()}else w2(n,d)(g,function(w,C){h(w,C)})}},f}});var N2=V((If,R2)=>{var Iee=p2(),Pee=C2(),E2=TC(),S2=0,x2=1,_2=2,D2="GOODBYE";function I2(e){let t=Buffer.alloc(9),n=0,r=e.value!==void 0?e.value:e.end;return typeof e=="string"&&e===D2?(t.fill(0),[t,null]):(typeof r=="string"?(n=x2,r=Buffer.from(r,"utf-8")):Buffer.isBuffer(r)?n=S2:(n=_2,r=Buffer.from(JSON.stringify(r),"utf-8")),n=e.stream<<3|e.end<<2|n,t[0]=n,t.writeUInt32BE(r.length,1),t.writeInt32BE(e.req||0,5),[t,r])}function P2(e){if(e.length!==9)throw new Error("expected header to be 9 bytes long");let t=e[0],n=e.readUInt32BE(1);return{req:e.readInt32BE(5),stream:!!(t&8),end:!!(t&4),value:null,length:n,type:t&3}}function b2(e,t){if(e.length!==t.length)throw new Error("incorrect length, expected:"+t.length+" found:"+e.length);if(t.type===S2)t.value=e;else if(t.type===x2)t.value=e.toString();else if(t.type===_2)t.value=JSON.parse(e.toString());else throw new Error("unknown message type");return t}function T2(e){return Iee(function(n){e&&e("encoded: %o",n);let[r,o]=I2(n);this.queue(r),o!==null&&this.queue(o)})}function k2(e){let t=Pee(),n=!1;return function(o){return t(o),function(s,a){if(n)return a(!0);if(s)return t.abort(s,a);t.read(9,function(l,u){if(l)return a(l);let f=P2(u);if(f.length===0)return n=!0,a(null,D2);t.read(f.length,function(d,p){if(d)return a(d);try{b2(p,f)}catch(g){return a(g)}e&&e("decoded: %o",f),a(null,f)})})}}}If=R2.exports=function(t,n){let r=n===!0?E2("packet-stream-codec"):typeof n=="string"?E2(n):null;return{source:T2(r)(t.source),sink(o){return t.sink(k2(r)(o))}}};If.encodePair=I2;If.decodeHead=P2;If.decodeBody=b2;If.encode=T2;If.decode=k2});var uT=V((iwe,L2)=>{function bee(e){return e&&(e===!0?!0:{message:e.message,name:e.name,stack:e.stack})}function Tee(e){console.error("packet-stream asked to read after closed",e)}L2.exports={flat:bee,closedread:Tee}});var O2=V((swe,F2)=>{var{flat:A2,closedread:kee}=uT();function oS(e,t,n){this.id=e,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=t,this._remove=n}oS.prototype.write=function(e,t){let n=this._ps;t?(this.writeEnd=t,n&&(n.read({req:this.id,stream:!0,end:!0,value:A2(t)}),this.readEnd&&this.destroy(t),n._maybedone(t))):n&&n.read({req:this.id,stream:!0,end:!1,value:e})};oS.prototype.end=function(e){this.write(null,A2(e||!0))};oS.prototype.destroy=function(e){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}this.write(null,e)}this._ps&&(this._remove(),this._remove=null,this.read=kee,this._ps=null)};F2.exports=oS});var M2=V((awe,$2)=>{var U2=O2(),{flat:fT,closedread:Ree}=uT();function bi(e){this.ended=!1,this.opts=e,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,e.close&&this._closecbs.push(e.close)}bi.prototype.message=function(e){this.read({req:0,stream:!1,end:!1,value:e})};bi.prototype.request=function(e,t){if(this._closing)return t(new Error("parent stream is closing"));let n=this._req_counter++;this._requests.set(n,(r,o)=>{this._requests.delete(n),t(r,o),this._maybedone(r)}),this.read({req:n,stream:!1,end:!1,value:e})};bi.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let e=this._req_counter++,t=new U2(e,this,()=>{this._outstreams.delete(e)});return this._outstreams.set(e,t),t};bi.prototype.close=function(e){if(!e)throw new Error("packet-stream.close *must* have callback");if(this._closed)return e();this._closecbs.push(e),this._closing=!0,this._maybedone()};bi.prototype.destroy=function(e){e=e||fT(e),this.ended=e,this._closing=!0;let t=e===!0?new Error("unexpected end of parent stream"):e,n=0;this._requests.forEach(r=>{n++,r(t)}),this._instreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(t)}),this._outstreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(t)}),n===0&&e===!0&&(t=null),this._maybedone(t)};bi.prototype._maybedone=function(e){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,e||!0),this._closed=!0,this._closecbs.forEach(t=>{t(e)}),this.opts=null,this._closecbs.length=0,this.read=Ree,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};bi.prototype.read=function(e){console.error("please overwrite read method to do IO",e)};bi.prototype.write=function(e,t){this.ended||(t?this.destroy(t):e.req&&!e.stream?this._onrequest(e):e.req&&e.stream?this._onstream(e):this._onmessage(e))};bi.prototype._onmessage=function(e){this.opts&&typeof this.opts.message=="function"&&this.opts.message(e.value)};bi.prototype._onrequest=function(e){let t=e.req*-1;if(e.req<0)this._requests.has(t)&&this._requests.get(t)(e.end?e.value:null,e.end?null:e.value);else if(this.opts&&typeof this.opts.request=="function"){let n=!1;this.opts.request(e.value,(r,o)=>{if(n)throw new Error("cb called twice from local api");n=!0,r?this.read({value:fT(r),end:!0,req:t}):this.read({value:o,end:!1,req:t}),this._maybedone()})}else{if(this.ended){let n=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:fT(n),end:!0,stream:!1,req:t})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:t});this._maybedone()}};bi.prototype._onstream=function(e){if(e.req<0){let t=e.req*-1,n=this._outstreams.get(t);if(!n)return console.error("no stream for incoming msg",e);e.end?(n.writeEnd&&this._outstreams.delete(t),n.readEnd=!0,n.read(null,e.value),this._maybedone()):n.read(e.value)}else{let t=e.req,n=this._instreams.get(t);n||(n=new U2(t*-1,this,()=>{this._instreams.delete(t)}),this._instreams.set(t,n),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)),e.end?(n.writeEnd&&this._instreams.delete(t),n.readEnd=!0,n.read&&n.read(null,e.value),this._maybedone()):n.read?n.read(e.value):console.error("no .read for stream:",n.id,"dropped:",e)}};$2.exports=e=>new bi(e)});var B2=V((cwe,yv)=>{"use strict";var Nee=hv();function Lee(e){let t=!1;return(n,r)=>{t||(t=!0,e(n,r))}}function dT(e,t){let n=[],r=!1,o=!1,i,s,a=Lee((c,l)=>{t&&t(c,l),e=null,t=null,i=null,s&&s(c||!0,()=>{})});return e.read=function(c,l){if(r=r||l,i){let u=i;i=null,u(r,c)}else!r&&!o&&n.push(c);r&&a(r!==!0?r:null)},{source(c,l){c?(e&&e.write(null,c),l(c),n.length=0,o=!0,a(c!==!0?c:null)):n.length?l(null,n.shift()):r?l(r):i=l},sink(c){if(r)return s=null,c(r,()=>{});s=c,Nee.drain(l=>{if(r)return!1;e.write(l)},l=>{e&&!e.writeEnd&&e.write(null,l||!0),a&&a(l)})(c)}}}function H2(e,t){return dT(e,n=>{e.writeEnd||e.write(null,n||!0),t&&t(n)})}function Aee(e){return H2(e).source}function Fee(e,t){return H2(e,t).sink}yv.exports=dT;yv.exports.source=Aee;yv.exports.sink=Fee;yv.exports.duplex=dT});var j2=V((lwe,W2)=>{W2.exports=function(t){var n,r,o;function i(s){return function(a,c){s(a,function(l,u){if(l&&!o)return o=!0,c(null,t);l&&n?c(l):l?r=c:c(null,u)})}}return i.end=function(){return n=!0,r&&r(n),i},i}});var Y2=V((uwe,V2)=>{var Oee=j2(),mT=hv();V2.exports=function(e,t){t=t||"GOODBYE";var n=Oee(t);return{source:mT(e.source,n),sink:mT(mT.filter(function(r){if(r!==t)return!0;n.end()}),e.sink)}}});var Cv=V(as=>{"use strict";var iS=hv();function Uee(e){return e?Object.keys(e).length===0:!0}as.set=function(t,n,r){let o,i;for(let s=0;s<n.length;s++){let a=n[s];t[a]=t[a]||{},o=t,i=a,t=t[a]}o[i]=r};as.get=function(t,n){if(typeof n=="string")return t[n];let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=t=t[i],t==null)return t}return r};as.prefix=function(t,n){let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=t=t[i],typeof t!="object")return t}return typeof r!="object"?!!r:!1};function $ee(e,t){for(let n in t){let r=t[n];e[r]||(e[r]={}),e=e[r]}return e}function Mee(e,t){(function n(r,o){let i=t[o];if(r)t.length-1===o?delete r[i]:o<t.length&&n(r[i],o+1);else return;Uee(r[i])&&delete r[i]})(e,0)}function Hee(e,t){for(let n in t)e[n]=t[n];return e}as.mount=function(t,n,r){if(!Array.isArray(n))throw new Error("path must be array of strings");return Hee($ee(t,n),r)};as.unmount=function(t,n){return Mee(t,n)};var sS=e=>e==="source",aS=e=>e==="sink",pT=e=>e==="duplex",Bee=e=>e==="sync",Wee=e=>e==="async",G2=e=>Bee(e)||Wee(e),jee=e=>sS(e)||aS(e)||pT(e);as.isRequest=G2;as.isStream=jee;function hT(e){return function(t){t(e||!0,()=>{})}}function q2(e){return{source:iS.error(e),sink:hT(e)}}as.errorAsStream=function(t,n){return sS(t)?iS.error(n):aS(t)?hT(n):q2(n)};as.errorAsStreamOrCb=function(t,n,r){return G2(t)?r(n):pT(t)?q2(n):sS(t)?iS.error(n):aS(t)?hT(n):r(n)};as.pipeToStream=function(t,n,r){sS(t)?n(r):aS(t)?r(n):pT(t)&&iS(n,r,n)}});var gT=V((dwe,z2)=>{"use strict";function Vee(e){return typeof e=="string"?[`Error: ${e}`]:e.stack?e.stack.split(`
`):[`${e.name}: ${e.message}`]}z2.exports=function(t,n){let r=new Error(n),o=r.stack.split(`
`);o.splice(1,1);let i=Vee(t);i[0]="  "+i[0];for(let s=1;s<o.length;s++)if(i.includes(o[s])){o.splice(s);break}return r.stack=o.concat(i).join(`
`),r}});var Z2=V((mwe,X2)=>{"use strict";var Yee=M2(),vT=B2(),Gee=Y2(),Qm=Cv(),K2=gT(),J2=TC()("muxrpc:psc");X2.exports=function(t,n,r){let o=Yee({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,f=!1;l.push((m,d)=>{f=!0,u=!0,a(m,d)});try{t("async",c,l)}catch(m){if(u||f)throw K2(m,"no callback provided to muxrpc async funtion");a(m)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:f,args:m}=c,d,p;if(s.read=null,!Qm.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{p=t(f,u,m)}catch(w){d=w}let h=vT[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return Qm.pipeToStream(f,h,d?Qm.errorAsStream(f,d):p)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,r)){let a=r;r=null,a(s)}}}),i=Gee(vT(o,()=>{}));return i=n?n(i,J2.enabled?J2.namespace:!1):i,i.remoteCall=function(s,a,c,l){if(a==="emit")return o.message(c);if(!(Qm.isRequest(s)||Qm.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(Qm.isRequest(s))return o.request({name:a,args:c},l);let u=o.stream(),f=vT[s](u,l);return u.write({name:a,args:c,type:s}),f},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw K2(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var eB=V((pwe,Q2)=>{"use strict";var qee=gT(),zee=Cv();function wT(e,t,n,r){for(let o in t){let i=t[o],s=n?n.concat(o):[o];if(i&&typeof i=="object"){let a=i;e[o]=wT({},a,s,r)}else{let a=i;e[o]=(...c)=>r(a,s,c)}}return e}function Kee(e){if(e)throw qee(e,"callback not provided")}function Jee(e,t,n,r){e=e||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:Kee;if(typeof c=="function"){let l;try{l=n(i,s,a,c)}catch(u){return zee.errorAsStreamOrCb(i,u,c)}return l}else return new Promise((l,u)=>{n(i,s,a,(f,m)=>{f?u(f):l(m)})})}return r?o("async","manifest",[function(i,s){if(i)return r(i);wT(e,s,null,o),r(null,s,e)}]):wT(e,t,null,o),e}Q2.exports=Jee});var rB=V((hwe,nB)=>{"use strict";var cS=Cv();function tB(e){return Array.isArray(e)?e:e.split(".")}function Xee(e){return e&&typeof e.pre=="function"&&typeof e.test=="function"&&typeof e.post=="function"}nB.exports=function(t){if(Xee(t))return t;if(typeof t=="function")return{pre:t};let n=null,r={};function o(i){if(i.allow){n={};for(let s of i.allow)cS.set(n,tB(s),!0)}else n=null;if(i.deny)for(let s of i.deny)cS.set(r,tB(s),!0);else r={};return this}return t&&o(t),o.pre=i=>{if(i=Array.isArray(i)?i:[i],n&&!cS.prefix(n,i))return new Error(`method:${i} is not in list of allowed methods`);if(r&&cS.prefix(r,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:n,deny:r}),o}});var iB=V((gwe,oB)=>{"use strict";var Zee=rB(),yT=Cv();oB.exports=function(t,n,r){r=Zee(r);function o(s,a){return s===yT.get(n,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let l=c.pop(),u;try{u=yT.get(t,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return yT.get(t,a).apply(this,c)}return function(a,c,l){let u=r.pre(c,l);if(u)throw u;return i.call(this,a,c,l)}}});var cB=V((vwe,aB)=>{"use strict";var Qee=N2(),ete=require("events").EventEmitter,tte=Z2(),nte=eB(),rte=iB();function sB(e,t,n,r,o,i,s){let a;typeof e=="function"&&(a=e,e={}),t=t||{},e=e||{};let c=new ete;i||(i=Qee);let l,u={_emit(m,d){return c&&c._emit(m,d),u},id:r},f=tte(rte(n,t,o).bind(u),i,m=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let d=l;l=null,d(m)}});if(nte(c,e,(m,d,p,g)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(m,d,p,g)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",d=>{u.id=d});let m=!0;c.createStream=d=>{if(l=d,m)return m=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(m,d){return f.close(m,d),this},c}aB.exports=function(e,t,n){return arguments.length>3?sB.apply(this,arguments):function(r,o,i){return sB(e,t,r,i,o,n,!0)}}});var dS=V((Ja,fB)=>{var wwe=Zb(),ote=lT();function lB(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function uB(e,t,n){var r,o=!1,i;function s(){i||(i=!0,n&&n(r===!0?null:r))}function a(){o||(o=!0,l(),r?s():e(r=!0,s))}function c(u){l(),r||e(r=u,s)}function l(){t.on("finish",a),t.removeListener("close",a),t.removeListener("error",c)}t.on("close",a),t.on("finish",a),t.on("error",c),process.nextTick(function(){ote(function(u){e(null,function(f,m){if(r=r||f,f===!0)return t._isStdio?s():t.end();if(r=r||f)return lB(t),s(r);if(t._isStdio)t.write(m,function(){u()});else{var d=t.write(m);d===!1?t.once("drain",u):u()}})})})}function ite(e){var t=!1,n=!1,r;function o(){var i=e.read();if(i!==null&&r){var s=r;r=null,s(null,i)}}return e.on("readable",function(){n=!0,r&&o()}).on("end",function(){t=!0,r&&r(t)}).on("error",function(i){t=i,r&&r(t)}),function(i,s){r=s,t?s(t):n&&o()}}function lS(e){var t=[],n=[],r,o=!1,i;function s(){for(;(t.length||r)&&n.length;)n.shift()(t.length?null:r,t.shift());!t.length&&o&&(o=!1,e.resume())}return e.on("data",function(a){t.push(a),s(),t.length&&e.pause&&(o=!0,e.pause())}),e.on("end",function(){r=!0,s()}),e.on("close",function(){r=!0,s()}),e.on("error",function(a){r=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;n.length;)n.shift()(a);c(a)};var l=u;if(r)return u();e.once("close",u),lB(e)}else n.push(c),s()}}var ste=lS,uS=function(e,t){return function(n){return uB(n,e,t)}},fS=function(e){return lS(e)};Ja=fB.exports=function(e,t){return e.writable&&e.write?e.readable?function(n){return uB(n,e,t),lS(e)}:uS(e,t):fS(e)};Ja.sink=uS;Ja.source=fS;Ja.read=ste;Ja.read1=lS;Ja.read2=ite;Ja.duplex=function(e,t){return{source:fS(e),sink:uS(e,t)}};Ja.transform=function(e){return function(t){var n=fS(e);return uS(e)(t),n}}});var mB=V((ywe,mS)=>{var ate=require("stream");mS.exports=CT;mS.exports.source=function(e){return CT(null,e)};mS.exports.sink=function(e){return CT(e,null)};var dB=typeof setImmediate>"u"?process.nextTick:setImmediate;function CT(e,t){e&&typeof e=="object"&&(t=e.source,e=e.sink);var n=[],r=[],o,i,s=new ate;s.writable=s.readable=!0,s.write=function(h){return n.length?n.shift()(null,h):r.push(h),n.length||(i=!0),!!n.length},s.end=function(){t?r.length?g():t(o=!0,n.length?n.shift():function(){}):n.length&&n.shift()(!0)},s.source=function(h,w){r.length?(w(null,r.shift()),r.length||s.emit("drain")):((o=o||h)?w(o):n.push(w),i&&(i=!1,s.emit("drain")))};var a;e&&(a=e(s.source)),a&&!t&&(t=a);var c=[],l=[],u=!1,f=!1,m=!1;if(s.sink=function(h){t=h,dB(g)},t){s.sink(t),s.paused=!0;var d=s.on.bind(s);s.on=(h,w)=>{var C=d(h,w);return h==="data"&&s.paused&&dB(s.resume.bind(s)),C};var p=s.pipe.bind(s);s.pipe=function(h,w){var C=p(h,w);return s.paused&&s.resume(),C}}function g(){if(f=!1,!(!t||m)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");m=!0,t(null,function h(w,C){m=!1,s.paused?(w===!0?u=w:w?s.emit("error",w):c.push(C),f=!0):w&&(o=w)!==!0?s.emit("error",w):(o=o||w)?s.emit("end"):(s.emit("data",C),m=!0,t(null,h))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,g(),s},s.destroy=function(){!o&&t&&t(o=!0,function(){}),o=!0,n.length&&n.shift()(!0),s.emit("close")},s}});var hB=V((Cwe,pB)=>{pB.exports=cte;function cte(e,t){typeof e=="function"&&(t=e,e=!1);var n=[],r,o;function i(f,m){f&&(r=f,o&&u(r)),o=m,l()}var s;function a(f){s=s||f||!0,l()}function c(f){if(!s){if(o){u(r,f);return}n.push(f)}}if(e)return{push:c,end:a,source:i,buffer:n};return i.push=c,i.end=a,i.buffer=n,i;function l(){o&&(r?u(r):!n.length&&s?u(s):n.length&&u(null,n.shift()))}function u(f,m){var d=o;if(f&&t){var p=t;t=null,p(f===!0?null:f)}o=null,d(f,m)}}});var $T=V(UT=>{"use strict";Object.defineProperty(UT,"__esModule",{value:!0});var YB=require("child_process"),Wte=1024*1024,GB={exec(e,t){let n={maxBuffer:2*Wte,windowsHide:!0};(0,YB.exec)(e,n,t)},spawn(e,t,n){return(0,YB.spawn)(e,t,n)},stripLine(e,t){let n=0;for(;t-- >0;){let r=e.indexOf(`
`,n);r>=0&&(n=r+1)}return n>0?e.substring(n):e},split(e,t){let n=e.trim().split(/\s+/);return n.length>t&&(n[t-1]=n.slice(t-1).join(" ")),n},extractColumns(e,t,n){let r=e.split(/(\r\n|\n|\r)/),o=[];return n||(n=Math.max.apply(null,t)+1),r.forEach(i=>{let s=GB.split(i,n),a=[];t.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(e){let t=e.split(/(\r\n\r\n|\r\n\n|\n\r\n|\n\n)/).filter(n=>n&&n.trim().length>0).map(n=>n.split(/(\r\n|\n|\r)/).filter(r=>r.trim().length>0));return t.forEach(n=>{for(let r=0;n[r];){let o=n[r];o.startsWith(" ")?(n[r-1]+=o.trimLeft(),n.splice(r,1)):r+=1}}),t.map(n=>{let r={};return n.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();r[s]=o.slice(i+1).trim()}),r})}};UT.default=GB});var zB=V((qB,FS)=>{(function(e,t){"use strict";typeof define=="function"&&define.amd?define(t):typeof FS=="object"&&FS.exports?FS.exports=t():e.log=t()})(qB,function(){"use strict";var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function s(p,g){var h=p[g];if(typeof h.bind=="function")return h.bind(p);try{return Function.prototype.bind.call(h,p)}catch{return function(){return Function.prototype.apply.apply(h,[p,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===t?!1:p==="trace"&&n?a:console[p]!==void 0?s(console,p):console.log!==void 0?s(console,"log"):e}function l(){for(var p=this.getLevel(),g=0;g<r.length;g++){var h=r[g];this[h]=g<p?e:this.methodFactory(h,p,this.name)}if(this.log=this.debug,typeof console===t&&p<this.levels.SILENT)return"No console available for logging"}function u(p){return function(){typeof console!==t&&(l.call(this),this[p].apply(this,arguments))}}function f(p,g,h){return c(p)||u.apply(this,arguments)}function m(p,g){var h=this,w,C,v,y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function S(R){var E=(r[R]||"silent").toUpperCase();if(!(typeof window===t||!y)){try{window.localStorage[y]=E;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+E+";"}catch{}}}function I(){var R;if(!(typeof window===t||!y)){try{R=window.localStorage[y]}catch{}if(typeof R===t)try{var E=window.document.cookie,x=encodeURIComponent(y),b=E.indexOf(x+"=");b!==-1&&(R=/^([^;]+)/.exec(E.slice(b+x.length+1))[1])}catch{}return h.levels[R]===void 0&&(R=void 0),R}}function _(){if(!(typeof window===t||!y)){try{window.localStorage.removeItem(y)}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function A(R){var E=R;if(typeof E=="string"&&h.levels[E.toUpperCase()]!==void 0&&(E=h.levels[E.toUpperCase()]),typeof E=="number"&&E>=0&&E<=h.levels.SILENT)return E;throw new TypeError("log.setLevel() called with invalid level: "+R)}h.name=p,h.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},h.methodFactory=g||f,h.getLevel=function(){return v??C??w},h.setLevel=function(R,E){return v=A(R),E!==!1&&S(v),l.call(h)},h.setDefaultLevel=function(R){C=A(R),I()||h.setLevel(R,!1)},h.resetLevel=function(){v=null,_(),l.call(h)},h.enableAll=function(R){h.setLevel(h.levels.TRACE,R)},h.disableAll=function(R){h.setLevel(h.levels.SILENT,R)},h.rebuild=function(){if(i!==h&&(w=A(i.getLevel())),l.call(h),i===h)for(var R in o)o[R].rebuild()},w=A(i?i.getLevel():"WARN");var U=I();U!=null&&(v=A(U)),l.call(h)}i=new m,i.getLogger=function(g){if(typeof g!="symbol"&&typeof g!="string"||g==="")throw new TypeError("You must supply a name when creating a logger.");var h=o[g];return h||(h=o[g]=new m(g,i.methodFactory)),h};var d=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=d),i},i.getLoggers=function(){return o},i.default=i,i})});var MT=V(Rv=>{"use strict";var jte=Rv&&Rv.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rv,"__esModule",{value:!0});var Vte=jte(zB());Rv.default=Vte.default});var XB=V(ls=>{"use strict";var Yte=ls&&ls.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),Gte=ls&&ls.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),KB=ls&&ls.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Yte(n,t,r[o]);return Gte(n,t),n}})(),JB=ls&&ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ls,"__esModule",{value:!0});var qte=KB(require("os")),OS=KB(require("fs")),Zo=JB($T()),zte=JB(MT()),Kte=e=>new Promise((t,n)=>{OS.existsSync(e)?t():OS.mkdir(e,r=>{r?n(r):t()})}),lp={darwin(e){return new Promise((t,n)=>{Zo.default.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(r,o,i){if(r)n(r);else{let s=i.toString().trim();if(s){n(new Error(s));return}let a=Zo.default.stripLine(o.toString(),1),c=a.slice(0,a.indexOf(`
`)),l=Zo.default.stripLine(a,1),u=c.indexOf("rxbytes")>=0?10:8,f=Zo.default.extractColumns(l,[0,3,u],10).filter(m=>!!String(m[0]).match(/^(udp|tcp)/)).find(m=>{let d=String(m[1]).match(/\.(\d+)$/);return!!(d&&d[1]===String(e))});f&&f[2].length?t(parseInt(f[2],10)):n(new Error(`pid of port (${e}) not found`))}})})},linux(e){return new Promise((t,n)=>{Zo.default.exec("netstat -tunlp",function(o,i,s){if(o)n(o);else{let a=s.toString().trim();a&&zte.default.warn(a);let c=Zo.default.stripLine(i.toString(),2),l=Zo.default.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);return!!(f&&f[1]===String(e))});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?t(parseInt(u,10)):n(new Error(`pid of port (${e}) not found`))}else n(new Error(`pid of port (${e}) not found`))}})})},win32(e){return new Promise((t,n)=>{Zo.default.exec("netstat -ano",function(r,o,i){if(r)n(r);else{let s=i.toString().trim();if(s){n(new Error(s));return}let a=Zo.default.stripLine(o.toString(),4),c=Zo.default.extractColumns(a,[1,4],5).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(e))});c&&c[1].length&&parseInt(c[1],10)>0?t(parseInt(c[1],10)):n(new Error(`pid of port (${e}) not found`))}})})},android(e){return new Promise((t,n)=>{let r=qte.tmpdir()+"/.find-process",o=r+"/"+process.pid,i='netstat -tunp >> "'+o+'"';Kte(r).then(()=>{Zo.default.exec(i,()=>{OS.readFile(o,"utf8",(s,a)=>{if(OS.unlink(o,()=>{}),s)n(s);else{a=Zo.default.stripLine(a,2);let c=Zo.default.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(e))});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?t(parseInt(l,10)):n(new Error(`pid of port (${e}) not found`))}else n(new Error(`pid of port (${e}) not found`))}})})})})}};lp.freebsd=lp.darwin;lp.sunos=lp.darwin;function Jte(e){let t=process.platform;return new Promise((n,r)=>{if(!(t in lp))return r(new Error(`platform ${t} is unsupported`));let o=lp[t];o(e).then(n,r)})}ls.default=Jte});var eW=V(us=>{"use strict";var Xte=us&&us.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),Zte=us&&us.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),Qte=us&&us.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(n){var r=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[r.length]=o);return r},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r=e(t),o=0;o<r.length;o++)r[o]!=="default"&&Xte(n,t,r[o]);return Zte(n,t),n}})(),ene=us&&us.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(us,"__esModule",{value:!0});var US=Qte(require("path")),Dl=ene($T());function HT(e,t){return t?e&&e.match?e.match(t)!==null:!1:!0}function ZB(e){let t=e.split(US.sep),n=t[t.length-1];n&&(t[t.length-1]=n.split(" ")[0]);let r=[];for(let o of t){let i=o.indexOf(" -");if(i>=0){r.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){r.push(o.trim());break}r.push(o)}return r.join(US.sep)}function QB(e){if(process.platform==="darwin"){let t=e.indexOf(".app/");if(t>=0)return US.basename(e.substring(0,t))}return US.basename(e)}var Af={darwin(e){return new Promise((t,n)=>{let r;"pid"in e&&e.pid!==void 0?r=`ps -p ${e.pid} -ww -o pid,ppid,uid,gid,args`:r="ps ax -ww -o pid,ppid,uid,gid,args",Dl.default.exec(r,function(o,i,s){if(o)"pid"in e&&e.pid!==void 0?t([]):n(o);else{let a=s.toString().trim();if(a){n(new Error(a));return}let c=Dl.default.stripLine(i.toString(),1),u=Dl.default.extractColumns(c,[0,1,2,3,4],5).filter(f=>f[0]&&e.pid!==void 0?f[0]===String(e.pid):f[4]&&e.name?HT(f[4],e.name):!!f[0]).map(f=>{let m=String(f[4]),d=ZB(m);return{pid:parseInt(f[0],10),ppid:parseInt(f[1],10),uid:parseInt(f[2],10),gid:parseInt(f[3],10),name:QB(d),bin:d,cmd:f[4]}});e.config.strict&&e.name&&(u=u.filter(f=>f.name===e.name)),t(u)}})})},win32(e){return new Promise((t,n)=>{let r="[Console]::OutputEncoding = [System.Text.Encoding]::UTF8; Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=Dl.default.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("error",s=>{n(new Error("Command '"+r+"' failed with reason: "+s.toString()))}),i.on("close",s=>{if(s!==0)return n(new Error("Command '"+r+"' terminated with code: "+s));let a=Dl.default.parseTable(o.join("")).filter(c=>{if(e.pid!==void 0)return c.ProcessId===String(e.pid);if(e.name){let l=c.Name||"";return e.config.strict?l===e.name||l.endsWith(".exe")&&l.slice(0,-4)===e.name:HT(c.CommandLine||l,e.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));t(a)})})},android(e){return new Promise((t,n)=>{Dl.default.exec("ps",function(o,i,s){if(o)e.pid!==void 0?t([]):n(o);else{let a=s.toString().trim();if(a){n(new Error(a));return}let c=Dl.default.stripLine(i.toString(),1),u=Dl.default.extractColumns(c,[0,3],4).filter(f=>f[0]&&e.pid!==void 0?f[0]===String(e.pid):f[1]&&e.name?HT(f[1],e.name):!!f[0]).map(f=>{let m=String(f[1]),d=ZB(m);return{pid:parseInt(f[0],10),ppid:0,name:QB(d),bin:d,cmd:f[1]}});e.config.strict&&e.name&&(u=u.filter(f=>f.name===e.name)),t(u)}})})}};Af.linux=Af.darwin;Af.sunos=Af.darwin;Af.freebsd=Af.darwin;function tne(e){let t=process.platform,n=Af[t];return n?n(e):Promise.reject(new Error(`Platform "${t}" is not supported`))}us.default=tne});var nW=V(Nv=>{"use strict";var WT=Nv&&Nv.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nv,"__esModule",{value:!0});var nne=WT(XB()),tW=WT(eW()),rne=WT(MT()),BT={port(e,t){return(0,nne.default)(e).then(n=>BT.pid(n,t),()=>[])},pid(e,t){return(0,tW.default)({pid:e,config:t})},name(e,t){return(0,tW.default)({name:e,config:t,skipSelf:!0})}};function one(e,t,n){let r=Object.assign({logLevel:"warn",strict:typeof n=="boolean"?n:!1},typeof n=="object"?n:{});return r.logLevel&&rne.default.setLevel(r.logLevel),new Promise((o,i)=>{if(!(e in BT))i(new Error(`do not support find by "${e}"`));else{let s=/^\d+$/.test(String(t));e==="pid"&&!s?i(new Error("pid must be a number")):e==="port"&&!s?i(new Error("port must be a number")):BT[e](t,r).then(o,i)}})}Nv.default=one});var oW=V(rW=>{"use strict";Object.defineProperty(rW,"__esModule",{value:!0})});var iW=V(fs=>{"use strict";var ine=fs&&fs.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),sne=fs&&fs.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&ine(t,e,n)},ane=fs&&fs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fs,"__esModule",{value:!0});fs.default=void 0;var cne=nW();Object.defineProperty(fs,"default",{enumerable:!0,get:function(){return ane(cne).default}});sne(oW(),fs)});var Ip,ic,ea,ws,Pp,rw,Vk=ne(()=>{Ip="function",ic="object",ea="undefined",ws="prototype",Pp=Object,rw=Pp[ws]});function ta(e,t){return e||t}function Nn(e,t){return e[t]}function Yn(e,t){try{return{v:e.apply(this,t)}}catch(n){return{e:n}}}function wse(e,t){var n=Yn(e);return n.e?t:n.v}function Mx(e){return function(t){return typeof t===e}}function jV(e){var t="[object "+e+"]";return function(n){return!!(n&&Hx(n)===t)}}function Hx(e){return aR[$x].call(e)}function cR(e,t){return typeof e===t}function Ve(e){return typeof e===zf||e===zf}function yse(e){return!Bx(e)}function ae(e){return e===kn||Ve(e)}function Cse(e){return e===kn||!Bx(e)}function Bx(e){return!!e||e!==No}function Ese(e){return!Yk&&(Yk=["string","number","boolean",zf,"symbol","bigint"]),e!==iw&&Yk.indexOf(e)!==-1}function en(e){return!e&&ae(e)?!1:!!e&&typeof e===iw}function so(e){return!!(e&&e.then&&ke(e.then))}function lR(e){return!e||!ys(e)}function ys(e){return!(!e||wse(function(){return!(e&&0+e)},!e))}function ur(e,t){return!!e&&aR.hasOwnProperty[Er](e,t)}function Sse(e,t){return ur(e,t)||!!jx(e,t)}function Ie(e,t,n){if(e&&en(e)){for(var r in e)if(Cs(e,r)&&t[Er](n||e,r,e[r])===-1)break}}function VV(e){var t={};if(t[kx.c]=!0,t[kx.e]=!0,e.l){t.get=function(){return e.l.v};var n=jx(e.l,"v");n&&n.set&&(t.set=function(r){e.l.v=r})}return Ie(e,function(r,o){t[kx[r]]=yse(o)?t[kx[r]]:o}),t}function uR(e,t,n,r,o,i){var s={e:i,c:o};return n&&(s.g=n),r&&(s.s=r),Lo(e,t,VV(s))}function gt(e,t,n){return Lo(e,t,VV(n))}function GV(e,t,n,r,o){var i={};return Ie(e,function(s,a){Fx(i,s,t?a:s),Fx(i,a,n?a:s)}),r?r(i):i}function Fx(e,t,n,r){Lo(e,t,{value:n,enumerable:!0,writable:!1})}function Ee(e,t){var n=iR,r=aR[$x][Er](e);r===xse&&(e={stack:Cn(e.stack),message:Cn(e.message),name:Cn(e.name)});try{n=JSON.stringify(e,kn,t?typeof t=="number"?t:4:No),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):kn)||Cn(e)}catch(o){n=" - "+Ee(o,t)}return r+": "+n}function Ln(e){throw new Error(e)}function xr(e){throw new TypeError(e)}function zV(e){return e}function _se(e){return e[rR]||kn}function Es(e){return qV&&Ie(e,function(t,n){(we(n)||en(n))&&Es(n)}),ao(e)}function KV(e){return GV(e,1,0,ao)}function Dse(e){return GV(e,0,0,ao)}function Ise(e){var t={};return Ie(e,function(n,r){Fx(t,n,r[1]),Fx(t,r[0],r[1])}),ao(t)}function JV(e){return Ise(e)}function ZV(){var e;return typeof globalThis!==zf&&(e=globalThis),!e&&typeof self!==zf&&(e=self),!e&&typeof window!==zf&&(e=window),!e&&typeof global!==zf&&(e=global),e}function QV(){if(!Gk){var e=Yn(ZV).v||{};Gk=e[OV]=e[OV]||{}}return Gk}function Np(e,t,n){var r=t?t[e]:kn;return function(o){var i=(o?o[e]:kn)||r;if(i||n){var s=arguments;return(i||n).apply(o,i?ac[Er](s,1):s)}xr('"'+Cn(e)+'" not defined for '+Ee(o))}}function Pse(e){return function(t){return t[e]}}function bse(e,t,n){return ae(e)&&xr("Invalid "+Ee(e)),n<0?iR:(t=t||0,t<0&&(t=ra(t+e[Kf],0)),Ve(n)?UV(e,t):UV(e,t,t+n))}function Zf(e,t){return Gn(e,0,t)}function Tse(){if(!qk){var e=QV();qk=e.gblSym=e.gblSym||{k:{},s:{}}}return qk}function dR(e){var t={description:Cn(e),toString:function(){return sR+"("+e+")"}};return t[vse]=!0,t}function kse(e){var t=Tse();if(!Cs(t.k,e)){var n=dR(e),r=_r(t.s).length;n[$V]=function(){return r+"_"+n[$x]()},t.k[e]=n,t.s[n[$V]()]=Cn(e)}return t.k[e]}function Rse(e){!Rx&&(Rx={});var t,n=XV[e];return n&&(t=Rx[n]=Rx[n]||dR(sR+"."+n)),t}function Gl(){Rn=QV()}function eY(e){var t={};return!Rn&&Gl(),t.b=Rn.lzy,Lo(t,"v",{configurable:!0,get:function(){var n=e();return Rn.lzy||Lo(t,"v",{value:n}),t.b=Rn.lzy,n}}),t}function ii(e){return Lo({toJSON:function(){return e}},"v",{value:e})}function cw(e,t){var n;return function(){return!Rn&&Gl(),(!n||Rn.lzy)&&(n=ii(Yn(e,t).v)),n.v}}function co(e){return!Rn&&Gl(),(!ow||e===!1||Rn.lzy)&&(ow=ii(Yn(ZV).v||kn)),ow.v}function vt(e,t){var n;if(!ow||t===!1?n=co(t):n=ow.v,n&&n[e])return n[e];if(e===tY)try{return window}catch{}return kn}function Qf(){return!!An()}function Lp(){return!!Fn()}function lw(){return!!qn()}function mR(){return!!Vx()}function Yx(){return Tp=ii(Yn(vt,[sR]).v),Tp}function Nse(e){var t=(Rn.lzy?0:Tp)||Yx();return t.v?t.v[e]:No}function rY(){return!!Lse()}function Lse(){return!Rn&&Gl(),((Rn.lzy?0:Tp)||Yx()).v}function uw(e,t){var n=XV[e];!Rn&&Gl();var r=(Rn.lzy?0:Tp)||Yx();return r.v?r.v[n||e]:t?No:Rse(e)}function Ap(e,t){!Rn&&Gl();var n=(Rn.lzy?0:Tp)||Yx();return n.v?n.v(e):t?kn:dR(e)}function Gx(e){return!Rn&&Gl(),zk=(Rn.lzy?0:zk)||ii(Yn(Nse,["for"]).v),(zk.v||kse)(e)}function Ox(e){return!!e&&ke(e.next)}function pR(e){return!Cse(e)&&ke(e[uw(3)])}function qx(e,t,n){if(e&&(Ox(e)||(!Nx&&(Nx=ii(uw(3))),e=e[Nx.v]?e[Nx.v]():kn),Ox(e))){var r=No,o=No;try{for(var i=0;!(o=e.next()).done&&t[Er](n||e,o.value,i,e)!==-1;)i++}catch(s){r={e:s},e.throw&&(o=kn,e.throw(r))}finally{try{o&&!o.done&&e.return&&e.return(o)}finally{if(r)throw r.e}}}}function bp(e,t,n){return e.apply(t,n)}function Ss(e,t){return!Ve(t)&&e&&(we(t)?bp(e.push,e,t):Ox(t)||pR(t)?qx(t,function(n){e.push(n)}):e.push(t)),e}function ee(e,t,n){if(e)for(var r=e[Kf]>>>0,o=0;o<r&&!(o in e&&t[Er](n||e,e[o],o,e)===-1);o++);}function Fp(e,t,n){return((e?e.slice:kn)||ac).apply(e,ac[Er](arguments,1))}function Ase(e,t,n){return wt(e,t,n)!==-1}function Fse(e){if(!e)return{};var t=typeof e;t!==iw&&t!==Ux&&xr("Prototype must be an Object or function: "+Ee(e));function n(){}return n[sc]=e,new n}function oY(e,t){var n=oi.setPrototypeOf||function(r,o){var i;!Kk&&(Kk=ii((i={},i[rR]=[],i instanceof Array))),Kk.v?r[rR]=o:Ie(o,function(s,a){return r[s]=a})};return n(e,t)}function Ose(e,t,n){Yn(gt,[t,Ax,{v:e,c:!0,e:!1}]),t=oY(t,n);function r(){this[Lx]=t,Yn(gt,[this,Ax,{v:e,c:!0,e:!1}])}return t[sc]=n===kn?ia(n):(r[sc]=n[sc],new r),t}function MV(e,t){t&&(e[Ax]=t)}function gR(e,t,n){var r=n||Error,o=r[sc][Ax],i=Error.captureStackTrace;return Ose(e,function(){var s=this,a=arguments;try{Yn(MV,[r,e]);var c=bp(r,s,ac[Er](a))||s;if(c!==s){var l=oR(s);l!==oR(c)&&oY(c,l)}return i&&i(c,s[Lx]),t&&t(c,a),c}finally{Yn(MV,[r,o])}},r)}function En(){return(Date.now||Use)()}function Use(){return new Date().getTime()}function $se(e){return function(n){return ae(n)&&xr("strTrim called ["+Ee(n)+"]"),n&&n.replace&&(n=n.replace(e,iR)),n}}function Dr(e){if(!e||typeof e!==iw)return!1;Zk||(Zk=Lp()?Fn():!0);var t=!1;if(e!==Zk){Xk||(Jk=Function[sc][$x],Xk=Jk[Er](oi));try{var n=oR(e);t=!n,t||(ur(n,Lx)&&(n=n[Lx]),t=!!(n&&typeof n===Ux&&Jk[Er](n)===Xk))}catch{}}return t}function Hse(e){return e.value&&aY(e),!0}function Bse(e,t,n,r){var o;return ee(e,function(i){if(i.k===t)return o=i,-1}),o||(o={k:t,v:t},e.push(o),r(o)),o.v}function vR(e,t,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:i},a=typeof t,c=!1,l=t===kn;l||(t&&a===iw?c=Dr(t):l=Ese(a));var u={type:a,isPrim:l,isPlain:c,value:t,result:t,path:i,origin:n.src,copy:function(f,m){return vR(e,f,m?s:n,m)},copyTo:function(f,m){return sY(e,f,m,s)}};return u.isPrim?o&&o[Er](n,u)?u.result:t:Bse(e,t,i,function(f){gt(u,"result",{g:function(){return f.v},s:function(p){f.v=p}});for(var m=0,d=o;!(d||(m<HV.length?HV[m++]:Hse))[Er](n,u);)d=kn})}function sY(e,t,n,r){if(!ae(n))for(var o in n)t[o]=vR(e,n[o],r,o);return t}function Wse(e,t,n){var r={handler:n,src:t,path:[]};return sY([],e,t,r)}function jse(e,t){var n={handler:t,src:e};return vR([],e,n)}function Vse(e){var t=e.value;if(we(t)){var n=e.result=[];return n.length=t.length,e.copyTo(n,t),!0}return!1}function Yse(e){var t=e.value;return Wx(t)?(e.result=new Date(t.getTime()),!0):!1}function Gse(e){return e.type===Ux}function aY(e){var t=e.value;if(t&&e.isPlain){var n=e.result={};return e.copyTo(n,t),!0}return!1}function qse(e,t){return ee(t,function(n){Wse(e,n)}),e}function wR(e,t,n,r,o,i,s){return qse(jse(e)||{},ac[Er](arguments))}function ed(){return!Rn&&Gl(),(!Qk||Rn.lzy)&&(Qk=ii(Yn(vt,["performance"]).v)),Qk.v}function dw(){var e=ed();return e&&e.now?e.now():En()}function zse(e,t,n){Re(e)||xr("'"+Ee(e)+"' is not a string");var r=Re(t)?t:Cn(t),o=!Ve(n)&&n<e[Kf]?n:e[Kf];return Gn(e,o-r[Kf],o)===r}function Kse(e,t,n){Re(e)||xr("'"+Ee(e)+"' is not a string");var r=Re(t)?t:Cn(t),o=n>0?n:0;return Gn(e,o,o+r[Kf])===r}function Xse(e,t,n){var r=!0,o=e?t(kn):kn,i;function s(){return r=!1,o&&o[tR]&&o[tR](),i}function a(){o&&n(o),o=kn}function c(){return o=t(o),r||s(),i}function l(u){!u&&o&&a(),u&&!o&&c()}return i={cancel:a,refresh:c},i[nR]=function(){return o&&o[nR]?o[nR]():r},i[eR]=function(){return r=!0,o&&o[eR]&&o[eR](),i},i[tR]=s,i=Lo(i,Jse,{get:function(){return!!o},set:l}),{h:i,dn:function(){o=kn}}}function yR(e,t,n){var r=we(t),o=r?t.length:0,i=(o>0?t[0]:r?No:t)||setTimeout,s=(o>1?t[1]:No)||clearTimeout,a=n[0];n[0]=function(){c.dn(),bp(a,No,ac[Er](arguments))};var c=Xse(e,function(l){if(l){if(l.refresh)return l.refresh(),l;bp(s,No,[l])}return bp(i,No,n)},function(l){bp(s,No,[l])});return c.h}function si(e,t){return yR(!0,No,ac[Er](arguments))}function lY(e,t,n){return yR(!0,e,ac[Er](arguments,1))}function uY(e,t){return yR(!1,No,ac[Er](arguments))}var No,kn,iR,Ux,iw,sc,rR,zf,Lx,sR,vse,Kf,Ax,Er,$x,oi,aR,BV,Jf,sw,WV,aw,ac,Yk,Re,ke,we,Wx,Sr,na,Xf,jx,Cs,kx,Lo,YV,Cn,xse,qV,kp,_r,ao,fR,oR,XV,OV,Gk,Rp,Yl,ra,UV,Gn,oa,$V,qk,Rx,Rn,tY,ow,An,Fn,qn,Vx,nY,Tp,zk,Nx,wt,cc,hR,fw,ia,Kk,Mse,nt,Ai,iY,Jk,Xk,Zk,HV,Op,Qk,cY,td,Fi,Up,eR,tR,nR,Jse,Ne=ne(()=>{No=void 0,kn=null,iR="",Ux="function",iw="object",sc="prototype",rR="__proto__",zf="undefined",Lx="constructor",sR="Symbol",vse="_polyfill",Kf="length",Ax="name",Er="call",$x="toString",oi=ta(Object),aR=Nn(oi,sc),BV=ta(String),Jf=Nn(BV,sc),sw=ta(Math),WV=ta(Array),aw=Nn(WV,sc),ac=Nn(aw,"slice");Re=Mx("string"),ke=Mx(Ux);we=Nn(WV,"isArray"),Wx=jV("Date"),Sr=Mx("number"),na=Mx("boolean"),Xf=jV("Error");jx=Nn(oi,"getOwnPropertyDescriptor");Cs=ta(Nn(oi,"hasOwn"),Sse);kx={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};Lo=Nn(oi,"defineProperty"),YV=Nn(oi,"defineProperties");Cn=ta(BV),xse="[object Error]";qV=Nn(oi,"freeze");kp=Nn(oi,"assign"),_r=Nn(oi,"keys");ao=ta(qV,zV),fR=ta(Nn(oi,"seal"),zV),oR=ta(Nn(oi,"getPrototypeOf"),_se);XV=Dse({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),OV="__tsUtils$gblCfg";Rp=Np;Yl=Nn(sw,"min"),ra=Nn(sw,"max"),UV=Rp("slice",Jf),Gn=Rp("substring",Jf),oa=Np("substr",Jf,bse);$V="_urid";tY="window";An=cw(vt,["document"]);Fn=cw(vt,[tY]);qn=cw(vt,["navigator"]);Vx=cw(vt,["history"]),nY=cw(function(){return!!Yn(function(){return process&&(process.versions||{}).node}).v});wt=Rp("indexOf",aw),cc=Rp("map",aw);hR=Np("includes",aw,Ase),fw=Rp("reduce",aw),ia=ta(Nn(oi,"create"),Fse);Mse=$se(/^\s+|(?=\s)\s+$/g),nt=Np("trim",Jf,Mse),Ai=Nn(sw,"floor"),iY=Nn(sw,"ceil");HV=[Vse,aY,Gse,Yse];Op=Pse(Kf);cY=Nn(sw,"round"),td=Np("endsWith",Jf,zse);Fi=Rp("indexOf",Jf),Up=Np("startsWith",Jf,Kse);eR="ref",tR="unref",nR="hasRef",Jse="enabled"});function Ao(e,t){typeof t!==Ip&&t!==null&&xr("Class extends value "+String(t)+" is not a constructor or null"),CR(e,t);function n(){this.constructor=e}e[ws]=t===null?ia(t):(n[ws]=t[ws],new n)}function zx(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var HDe,BDe,fY,Qse,Oi,CR,dY=ne(()=>{Ne();Vk();HDe=(co()||{}).Symbol,BDe=(co()||{}).Reflect,fY="hasOwnProperty",Qse=function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)rw[fY].call(t,o)&&(e[o]=t[o])}return e},Oi=kp||Qse,CR=function(e,t){return CR=Pp.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[fY](o)&&(n[o]=r[o])},CR(e,t)}});var mY=ne(()=>{});var Fo=ne(()=>{Vk();dY();mY();Ne()});function Zx(e){return e&&(e===bR[lc]||e===Array[lc])}function TR(e){return Zx(e)||e===Function[lc]}function nd(e){var t;if(e){if(pw)return pw(e);var n=e[PR]||e[lc]||(e[Qx]?e[Qx][lc]:null);t=e[Jx]||n,ur(e,Jx)||(delete e[ER],t=e[Jx]=e[ER]||e[Jx],e[ER]=n)}return t}function n_(e,t){var n=[];if(gY)n=gY(e);else for(var r in e)typeof r=="string"&&ur(e,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)t(n[o])}function kR(e,t,n){return t!==Qx&&typeof e[t]===e_&&(n||ur(e,t))&&t!==PR&&t!==lc}function r_(e){xr("DynamicProto: "+e)}function tae(e){var t=ia(null);return n_(e,function(n){!t[n]&&kR(e,n,!1)&&(t[n]=e[n])}),t}function RR(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function nae(e,t,n,r){function o(c,l,u){var f=l[u];if(f[xR]&&r){var m=c[t_]||{};m[mw]!==!1&&(f=(m[l[$p]]||{})[u]||f)}return function(){return f.apply(c,arguments)}}var i=ia(null);n_(n,function(c){i[c]=o(t,n,c)});for(var s=nd(e),a=[];s&&!TR(s)&&!RR(a,s);)n_(s,function(c){!i[c]&&kR(s,c,!pw)&&(i[c]=o(t,s,c))}),a.push(s),s=nd(s);return i}function rae(e,t,n,r){var o=null;if(e&&ur(n,$p)){var i=e[t_]||ia(null);if(o=(i[n[$p]]||ia(null))[t],o||r_("Missing ["+t+"] "+e_),!o[_R]&&i[mw]!==!1){for(var s=!ur(e,t),a=nd(e),c=[];s&&a&&!TR(a)&&!RR(c,a);){var l=a[t];if(l){s=l===r;break}c.push(a),a=nd(a)}try{s&&(e[t]=o),o[_R]=1}catch{i[mw]=!1}}}return o}function oae(e,t,n){var r=t[e];return r===n&&(r=nd(t)[e]),typeof r!==e_&&r_("["+e+"] is not a "+e_),r}function iae(e,t,n,r,o){function i(c,l){var u=function(){var f=rae(this,l,c,u)||oae(l,c,u);return f.apply(this,arguments)};return u[xR]=1,u}if(!Zx(e)){var s=n[t_]=n[t_]||ia(null);if(!Zx(s)){var a=s[t]=s[t]||ia(null);s[mw]!==!1&&(s[mw]=!!o),Zx(a)||n_(n,function(c){kR(n,c,!1)&&n[c]!==r[c]&&(a[c]=n[c],delete n[c],(!ur(e,c)||e[c]&&!e[c][xR])&&(e[c]=i(e,c)))})}}}function sae(e,t){if(pw){for(var n=[],r=nd(t);r&&!TR(r)&&!RR(n,r);){if(r===e)return!0;n.push(r),r=nd(r)}return!1}return!0}function SR(e,t){return ur(e,lc)?e.name||t||pY:((e||{})[Qx]||{}).name||t||pY}function Xe(e,t,n,r){ur(e,lc)||r_("theClass is an invalid class definition.");var o=e[lc];sae(o,t)||r_("["+SR(e)+"] not in hierarchy of ["+SR(t)+"]");var i=null;ur(o,$p)?i=o[$p]:(i=eae+SR(e,"_")+"$"+IR.n,IR.n++,o[$p]=i);var s=Xe[wY],a=!!s[Xx];a&&r&&r[Xx]!==void 0&&(a=!!r[Xx]);var c=tae(t),l=nae(o,t,c,a);n(t,l);var u=!!pw&&!!s[DR];u&&r&&(u=!!r[DR]),iae(o,i,t,c,u!==!1)}var Kx,Qx,lc,e_,t_,xR,$p,eae,_R,mw,wY,pY,PR,Jx,hY,ER,Xx,DR,bR,pw,gY,vY,IR,fr=ne(()=>{Ne();Qx="constructor",lc="prototype",e_="function",t_="_dynInstFuncs",xR="_isDynProxy",$p="_dynClass",eae="_dynCls$",_R="_dynInstChk",mw=_R,wY="_dfOpts",pY="_unknown_",PR="__proto__",Jx="_dyn"+PR,hY="__dynProto$Gbl",ER="_dynInstProto",Xx="useBaseInst",DR="setInstFuncs",bR=Object,pw=bR.getPrototypeOf,gY=bR.getOwnPropertyNames,vY=co(),IR=vY[hY]||(vY[hY]={o:(Kx={},Kx[DR]=!0,Kx[Xx]=!0,Kx),n:1e3});Xe[wY]=IR.o});var NR,yY=ne(()=>{NR=100});var un,LR,hw=ne(()=>{Ne();un=KV,LR=JV});var xs,aae,CY=ne(()=>{hw();xs=un({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),aae=un({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var ai,AR=ne(()=>{hw();ai=un({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})});var Oo,me,Mp,uc,sa,ql,ze,aa,kt,fc,dc,ca,Hp,Bp,Uo,rd,gw,zl,lo,zn,o_,Kl,FR,Ui,vw,Wp,i_,la,ci,jp,ua,$o,Jl,od,li,Xl,ww,$i,_s,ui,Vp,id,OR,yw,Zl,sd,Ds,UR,Yp,s_,ad,cd,xt=ne(()=>{Oo="toLowerCase",me="length",Mp="warnToConsole",uc="throwInternal",sa="watch",ql="apply",ze="push",aa="splice",kt="logger",fc="cancel",dc="initialize",ca="identifier",Hp="removeNotificationListener",Bp="addNotificationListener",Uo="isInitialized",rd="value",gw="getNotifyMgr",zl="getPlugin",lo="name",zn="processNext",o_="getProcessTelContext",Kl="enabled",FR="stopPollingInternalLogs",Ui="unload",vw="onComplete",Wp="version",i_="loggingLevelConsole",la="createNew",ci="teardown",jp="messageId",ua="message",$o="diagLog",Jl="_doTeardown",od="update",li="getNext",Xl="setNextPlugin",ww="userAgent",$i="split",_s="replace",ui="type",Vp="evtName",id="status",OR="getAllResponseHeaders",yw="isChildEvt",Zl="data",sd="getCtx",Ds="setCtx",UR="itemsReceived",Yp="urlString",s_="headers",ad="timeout",cd="traceFlags"});function EY(e,t){$R||($R=gR("AggregationError",function(r,o){o[me]>1&&(r.errors=o[1])}));var n=e||"One or more errors occurred.";throw ee(t,function(r,o){n+=`
`.concat(o," > ").concat(Ee(r))}),new $R(n,t||[])}var $R,SY=ne(()=>{Ne();xt()});function fi(e,t){return IY(e,function(n){return t?t({status:"fulfilled",rejected:!1,value:n}):n},function(n){return t?t({status:GR,rejected:!0,reason:n}):n})}function IY(e,t,n,r){var o=e;try{if(so(e))(t||n)&&(o=e.then(t,n));else try{t&&(o=t(e))}catch(i){if(n)o=n(i);else throw i}}finally{r&&cae(o,r)}return o}function cae(e,t){var n=e;return t&&(so(e)?e.finally?n=e.finally(t):n=e.then(function(r){return t(),r},function(r){throw t(),r}):t()),n}function lae(e,t,n,r){MR=MR||{toString:function(){return"[[PromiseState]]"}},HR=HR||{toString:function(){return"[[PromiseResult]]"}},BR=BR||{toString:function(){return"[[PromiseIsHandled]]"}};var o={};o[MR]={get:t},o[HR]={get:n},o[BR]={get:r},YV(e,o)}function uae(e){var t;return e&&e.createEvent&&(t=e.createEvent("Event")),!!t&&t.initEvent}function fae(e,t,n,r){var o=An();!a_&&(a_=ii(!!Yn(uae,[o]).v));var i=a_.v?o.createEvent("Event"):r?new Event(t):{};if(n&&n(i),a_.v&&i.initEvent(t,!1,!0),i&&e[_Y])e[_Y](i);else{var s=e["on"+t];if(s)s(i);else{var a=vt("console");a&&(a.error||a.log)(t,Ee(i))}}}function DY(e){return ke(e)?e.toString():Ee(e)}function TY(e,t,n){var r=Fp(arguments,3),o=0,i=!1,s,a=[],c=mae++,l=Cw.length>0?Cw[Cw.length-1]:void 0,u=!1,f=null,m;function d(S,I){try{Cw.push(c),u=!0,f&&f.cancel(),f=null;var _=e(function(A,U){a.push(function(){try{var R=o===2?S:I,E=Ve(R)?s:ke(R)?R(s):R;so(E)?E.then(A,U):R?A(E):o===3?U(E):A(E)}catch(x){U(x)}}),i&&w()},r);return _}finally{Cw.pop()}}function p(S){return d(void 0,S)}function g(S){var I=S,_=S;return ke(S)&&(I=function(A){return S&&S(),A},_=function(A){throw S&&S(),A}),d(I,_)}function h(){return PY[o]}function w(){if(a.length>0){var S=a.slice();a=[],u=!0,f&&f.cancel(),f=null,t(S)}}function C(S,I){return function(_){if(o===I){if(S===2&&so(_)){o=1,_.then(C(2,1),C(3,1));return}o=S,i=!0,s=_,w(),!u&&S===3&&!f&&(f=si(v,pae))}}}function v(){if(!u)if(u=!0,nY())process.emit(bY,s,m);else{var S=Fn()||co();!WR&&(WR=ii(Yn(vt,[c_+"RejectionEvent"]).v)),fae(S,dae,function(I){return gt(I,"promise",{g:function(){return m}}),I.reason=s,I},!!WR.v)}}m={then:d,catch:p,finally:g},Lo(m,"state",{get:h}),xY&&lae(m,h,function(){return Hx(s)},function(){return u}),rY()&&(m[uw(11)]="IPromise");function y(){return"IPromise"+(xY?"["+c+(Ve(l)?"":":"+l)+"]":"")+" "+h()+(i?" - "+DY(s):"")}return m.toString=y,(function(){ke(n)||xr(c_+": executor is not a function - "+DY(n));var I=C(3,0);try{n.call(m,C(2,0),I)}catch(_){I(_)}})(),m}function hae(e){return function(t){var n=Fp(arguments,1);return e(function(r,o){try{var i=[],s=1;qx(t,function(a,c){a&&(s++,IY(a,function(l){i[c]=l,--s===0&&r(i)},o))}),s--,s===0&&r(i)}catch(a){o(a)}},n)}}function gae(e){return ii(function(t){var n=Fp(arguments,1);return e(function(r,o){var i=[],s=1;function a(c,l){s++,fi(c,function(u){u.rejected?i[l]={status:GR,reason:u.reason}:i[l]={status:"fulfilled",value:u.value},--s===0&&r(i)})}try{we(t)?ee(t,a):pR(t)?qx(t,a):xr("Input is not an iterable"),s--,s===0&&r(i)}catch(c){o(c)}},n)})}function kY(e){ee(e,function(t){try{t()}catch{}})}function vae(e){var t=Sr(e)?e:0;return function(n){si(function(){kY(n)},t)}}function RY(e,t){return TY(RY,vae(t),e,t)}function wae(e,t){!jR&&(jR=ii(Yn(vt,[c_]).v||null));var n=jR.v;if(!n)return RY(e);ke(e)||xr(c_+": executor is not a function - "+Ee(e));var r=0;function o(){return PY[r]}var i=new n(function(s,a){function c(u){r=2,s(u)}function l(u){r=3,a(u)}e(c,l)});return Lo(i,"state",{get:o}),i}function Ew(e){return TY(Ew,kY,e)}function NY(e,t){return!VR&&(VR=gae(Ew)),VR.v(e,t)}function Mi(e,t){return!YR&&(YR=ii(wae)),YR.v.call(this,e,t)}var c_,GR,MR,HR,BR,xY,PY,_Y,a_,bY,dae,Cw,mae,pae,WR,jR,VR,YR,LY,_Ie,ld=ne(()=>{Ne();c_="Promise",GR="rejected";xY=!1;PY=["pending","resolving","resolved",GR],_Y="dispatchEvent";bY="unhandledRejection",dae=bY.toLowerCase(),Cw=[],mae=0,pae=10;LY=hae(Mi),_Ie=uw(11)});var di,Le,ud,fn,l_,Sw,mc,fd,Mo,dd,Gp,Ql,qp,fa,u_,f_,d_,zp,m_,p_,AY,On=ne(()=>{di=void 0,Le="",ud="channels",fn="core",l_="createPerfMgr",Sw="disabled",mc="extensionConfig",fd="extensions",Mo="processTelemetry",dd="priority",Gp="eventsSent",Ql="eventsDiscarded",qp="eventsSendRequest",fa="perfEvent",u_="offlineEventsStored",f_="offlineBatchSent",d_="offlineBatchDrop",zp="getPerfMgr",m_="domain",p_="path",AY="Not dynamic - "});function eu(e){return!ae(e)}function md(e){var t=e;return t&&Re(t)&&(t=t[_s](Cae,function(n,r){return r.toUpperCase()}),t=t[_s](Eae,"_"),t=t[_s](Sae,function(n,r){return"_"+r})),t}function Sn(e,t){return e&&t?Fi(e,t)!==-1:!1}function Is(e){return e&&e.toISOString()||""}function tn(e){return Xf(e)?e[lo]:Le}function Hi(e,t,n,r,o){var i=n;return e&&(i=e[t],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,e[t]=i)),i}function xw(e,t,n){var r;return e?(r=e[t],!r&&ae(r)&&(r=Ve(n)?{}:n,e[t]=r)):r=Ve(n)?{}:n,r}function OY(e,t){var n=null,r=null;return ke(e)?n=e:r=e,function(){var o=arguments;if(n&&(r=n()),r)return r[t][ql](r,o)}}function qR(e,t,n){if(e&&t&&en(e)&&en(t)){var r=function(i){if(Re(i)){var s=t[i];ke(s)?(!n||n(i,!0,t,e))&&(e[i]=OY(t,i)):(!n||n(i,!1,t,e))&&(Cs(e,i)&&delete e[i],gt(e,i,{g:function(){return t[i]},s:function(a){t[i]=a}}))}};for(var o in t)r(o)}return e}function pc(e,t,n,r,o){e&&t&&n&&(o!==!1||Ve(e[t]))&&(e[t]=OY(n,r))}function mi(e,t,n,r){return e&&t&&en(e)&&we(n)&&ee(n,function(o){Re(o)&&pc(e,o,t,o,r)}),e}function zR(e){return(function(){function t(){var n=this;e&&Ie(e,function(r,o){n[r]=o})}return t})()}function Ho(e){return e&&kp&&(e=Pp(kp({},e))),e}function h_(e,t,n,r,o,i){var s=arguments,a=s[0]||{},c=s[me],l=!1,u=1;for(c>0&&na(a)&&(l=a,a=s[u]||{},u++),en(a)||(a={});u<c;u++){var f=s[u],m=we(f),d=en(f);for(var p in f){var g=m&&p in f||d&&Cs(f,p);if(g){var h=f[p],w=void 0;if(l&&h&&((w=we(h))||Dr(h))){var C=a[p];w?we(C)||(C=[]):Dr(C)||(C={}),h=h_(l,C,h)}h!==void 0&&(a[p]=h)}}}return a}function Ps(e){try{return e.responseText}catch{}return null}function pd(e,t){return e?"XDomainRequest,Response:"+Ps(e)||"":t}function hc(e,t){return e?"XMLHttpRequest,Status:"+e[id]+",Response:"+Ps(e)||e.response||"":t}function gc(e,t){return t&&(Sr(t)?e=[t].concat(e):we(t)&&(e=t.concat(e))),e}function KR(e,t,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,xae,r),n&&s(a,FY,n),a.open(e,t,!o),n&&s(a,FY,n),!o&&i&&s(a,_ae,i),a}function g_(e){var t={};if(Re(e)){var n=nt(e)[$i](/[\r\n]+/);ee(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=nt(r.substring(0,o))[Oo](),s=nt(r.substring(o+1));t[i]=s}else t[nt(r)]=1}})}return t}function Kp(e,t,n){if(!e[n]&&t&&t.getResponseHeader){var r=t.getResponseHeader(n);r&&(e[n]=nt(r))}return e}function vc(e,t){var n={};return e[OR]?n=g_(e[OR]()):t&&(n=Kp(n,e,Pae),n=Kp(n,e,Dae),n=Kp(n,e,Iae)),n}var yae,Cae,Eae,Sae,RIe,xae,FY,_ae,Dae,Iae,Pae,da=ne(()=>{Fo();Ne();xt();On();yae="getPrototypeOf",Cae=/-([a-z])/g,Eae=/([^\w\d_$])/g,Sae=/^(\d+[\w\d_$])/,RIe=Object[yae];xae="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",FY="withCredentials",_ae="timeout";Dae="kill-duration",Iae="kill-duration-seconds",Pae="time-delta-millis"});function HY(e,t){var n=!1;if(e){try{if(n=t in e,!n){var r=e[ws];r&&(n=t in r)}}catch{}if(!n)try{var o=new e;n=!Ve(o[t])}catch{}}return n}function tN(e){MY=e}function hd(e){if(e&&MY){var t=vt("__mockLocation");if(t)return t}return typeof location===ic&&location?location:vt(Tae)}function _w(){return typeof console!==ea?console:vt(kae)}function ma(){return!!(typeof JSON===ic&&JSON||vt(UY)!==null)}function Ir(){return ma()?JSON||vt(UY):null}function Dw(){return vt(Rae)}function Iw(){return vt(Nae)}function tu(){var e=qn();return e&&e.product?e.product===Lae:!1}function nu(){var e=qn();if(e&&(e[ww]!==XR||JR===null)){XR=e[ww];var t=(XR||Le)[Oo]();JR=Sn(t,QR)||Sn(t,eN)}return JR}function Pw(e){if(e===void 0&&(e=null),!e){var t=qn()||{};e=t?(t.userAgent||Le)[Oo]():Le}var n=(e||Le)[Oo]();if(Sn(n,QR)){var r=An()||{};return ra(parseInt(n[$i](QR)[1]),r[bae]||0)}else if(Sn(n,eN)){var o=parseInt(n[$i](eN)[1]);if(o)return o+4}return null}function Bi(e){return(ZR===null||e===!1)&&(ZR=lw()&&!!qn().sendBeacon),ZR}function wc(e){var t=!1;try{t=!!vt("fetch");var n=vt("Request");t&&e&&n&&(t=HY(n,"keepalive"))}catch{}return t}function bw(){return Jp===null&&(Jp=typeof XDomainRequest!==ea,Jp&&Xp()&&(Jp=Jp&&!HY(vt($Y),"withCredentials"))),Jp}function Xp(){var e=!1;try{var t=vt($Y);e=!!t}catch{}return e}function BY(e,t){if(e)for(var n=0;n<e[me];n++){var r=e[n];if(r[lo]&&r[lo]===t)return r}return{}}function nN(e){var t=An();return t&&e?BY(t.querySelectorAll("meta"),e).content:null}function rN(e){var t,n=ed();if(n){var r=n.getEntriesByType("navigation")||[];t=BY((r[me]>0?r[0]:{}).serverTiming,e).description}return t}var bae,Tae,kae,UY,Rae,Nae,Lae,QR,eN,$Y,JR,XR,MY,Jp,ZR,ru=ne(()=>{"use strict";Fo();Ne();xt();da();On();bae="documentMode",Tae="location",kae="console",UY="JSON",Rae="crypto",Nae="msCrypto",Lae="ReactNative",QR="msie",eN="trident/",$Y="XMLHttpRequest",JR=null,XR=null,MY=!1,Jp=null,ZR=null});function Aae(e){e<0&&(e>>>=0),Tw=jY+e&ou,kw=VY-e&ou,YY=!0}function Fae(){try{var e=En()&2147483647;Aae((Math.random()*WY^e)+e)}catch{}}function oN(e){return e>0?Ai(yc()/ou*(e+1))>>>0:0}function yc(e){var t=0,n=Dw()||Iw();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&ou),t===0&&nu()&&(YY||Fae(),t=GY()&ou),t===0&&(t=Ai(WY*Math.random()|0)),e||(t>>>=0),t}function GY(e){kw=36969*(kw&65535)+(kw>>16)&ou,Tw=18e3*(Tw&65535)+(Tw>>16)&ou;var t=(kw<<16)+(Tw&65535)>>>0&ou|0;return e||(t>>>=0),t}function Rw(e){e===void 0&&(e=22);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=yc()>>>0,r=0,o=Le;o[me]<e;)r++,o+=t.charAt(n&63),n>>>=6,r===5&&(n=(yc()<<2&4294967295|n&3)>>>0,r=0);return o}var WY,ou,jY,VY,YY,Tw,kw,v_=ne(()=>{Ne();xt();ru();On();WY=4294967296,ou=4294967295,jY=123456789,VY=987654321,YY=!1,Tw=jY,kw=VY});function zY(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType}function $ae(e,t){var n=t[e.id];if(!n){n={};try{zY(t)&&gt(t,e.id,{e:!1,v:n})}catch{}}return n}function Pr(e,t){return t===void 0&&(t=!1),md(e+Uae+++(t?"."+qY:Le)+Oae)}function w_(e){var t={id:Pr("_aiData-"+(e||Le)+"."+qY),accept:function(n){return zY(n)},get:function(n,r,o,i){var s=n[t.id];return s?s[md(r)]:(i&&(s=$ae(t,n),s[md(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return t}var qY,Oae,Uae,Zp=ne(()=>{Ne();da();On();v_();qY="3.3.6",Oae="."+Rw(6),Uae=0});function y_(e){return e&&en(e)&&(e.isVal||e.fb||Cs(e,"v")||Cs(e,"mrg")||Cs(e,"ref")||e.set)}function KY(e,t,n){var r,o=n.dfVal||Bx;if(t&&n.fb){var i=n.fb;we(i)||(i=[i]);for(var s=0;s<i[me];s++){var a=i[s],c=t[a];if(o(c)?r=c:e&&(c=e.cfg[a],o(c)&&(r=c),e.set(e.cfg,Cn(a),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function iN(e,t,n){var r=n;if(n&&y_(n)&&(r=KY(e,t,n)),r){y_(r)&&(r=iN(e,t,r));var o;we(r)?(o=[],o[me]=r[me]):Dr(r)&&(o={}),o&&(Ie(r,function(i,s){s&&y_(s)&&(s=iN(e,t,s)),o[i]=s}),r=o)}return r}function Nw(e,t,n,r){var o,i,s,a=r,c,l,u,f;y_(a)?(o=a.isVal,i=a.set,u=a.rdOnly,f=a.blkVal,c=a.mrg,l=a.ref,!l&&Ve(l)&&(l=!!c),s=KY(e,t,a)):s=r,f&&e.blkVal(t,n);var m,d=!0,p=t[n];(p||!ae(p))&&(m=p,d=!1,o&&m!==s&&!o(m)&&(m=s,d=!0),i&&(m=i(m,s,t),d=m===s)),d?s?m=iN(e,t,s):m=s:(Dr(m)||we(s))&&c&&s&&(Dr(s)||we(s))&&Ie(s,function(g,h){Nw(e,m,g,h)}),e.set(t,n,m),l&&e.ref(t,n),u&&e.rdOnly(t,n)}var sN=ne(()=>{Ne();xt()});function aN(e){if(e){var t;if(we(e)?(t=[],t[me]=e[me]):Dr(e)&&(t={}),t)return Ie(e,function(n,r){t[n]=aN(r)}),t}return e}function Lw(e){if(e){var t=e[pa]||e;if(t.cfg&&(t.cfg===e||t.cfg[pa]===t))return t}return null}function Aw(e){if(e&&(Dr(e)||we(e)))try{e[JY]=!0}catch{}return e}function cN(e){if(e)try{e[XY]=!0}catch{}return e}function C_(e,t,n){var r=!1;return n&&!e[t.blkVal]&&(r=n[XY],!r&&!n[JY]&&(r=Dr(n)||we(n))),r}function E_(e){xr("InvalidAccess:"+e)}var pa,JY,XY,S_=ne(()=>{Ne();xt();pa=Gx("[[ai_dynCfg_1]]"),JY=Gx("[[ai_blkDynCfg_1]]"),XY=Gx("[[ai_frcDynCfg_1]]")});function Hae(e,t,n){we(t)&&ee(Mae,function(r){var o=t[r];t[r]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o[ql](this,i);return Fw(e,t,n,"Patching"),a}})}function x_(e,t){var n=jx(e,t);return n&&n.get}function Bae(e,t,n,r){var o={n,h:[],trk:function(l){l&&l.fn&&(wt(o.h,l)===-1&&o.h[ze](l),e.trk(l,o))},clr:function(l){var u=wt(o.h,l);u!==-1&&o.h[aa](u,1)}},i=!0,s=!1;function a(){i&&(s=s||C_(a,e,r),r&&!r[pa]&&s&&(r=Fw(e,r,n,"Converting")),i=!1);var l=e.act;return l&&o.trk(l),r}a[e.prop]={chng:function(){e.add(o)}};function c(l){if(r!==l){a[e.ro]&&!e.upd&&E_("["+n+"] is read-only:"+Ee(t)),i&&(s=s||C_(a,e,r),i=!1);var u=s&&a[e.rf];if(s)if(u){Ie(r,function(m){r[m]=l?l[m]:di});try{Ie(l,function(m,d){Ow(e,r,m,d)}),l=r}catch(m){Qp((e.hdlr||{})[kt],n,"Assigning",m),s=!1}}else r&&r[pa]&&Ie(r,function(m){var d=x_(r,m);if(d){var p=d[e.prop];p&&p.chng()}});if(l!==r){var f=l&&C_(a,e,l);!u&&f&&(l=Fw(e,l,n,"Converting")),r=l,s=f}e.add(o)}}gt(t,o.n,{g:a,s:c})}function Ow(e,t,n,r){if(t){var o=x_(t,n),i=o&&!!o[e.prop];i?t[n]=r:Bae(e,t,n,r)}return t}function __(e,t,n,r){if(t){var o=x_(t,n),i=o&&!!o[e.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!i){if(c)try{Aw(t)}catch(l){Qp((e.hdlr||{})[kt],n,"Blocking",l)}try{Ow(e,t,n,t[n]),o=x_(t,n)}catch(l){Qp((e.hdlr||{})[kt],n,"State",l)}}s&&(o[e.rf]=s),a&&(o[e.ro]=a),c&&(o[e.blkVal]=!0)}return t}function Fw(e,t,n,r){try{Ie(t,function(o,i){Ow(e,t,o,i)}),t[pa]||(Lo(t,pa,{get:function(){return e.hdlr}}),Hae(e,t,n))}catch(o){Qp((e.hdlr||{})[kt],n,r,o)}return t}var Mae,Qp,ZY=ne(()=>{Ne();On();xt();S_();Mae=["push","pop","shift","unshift","splice"],Qp=function(e,t,n,r){e&&e[uc](3,108,"".concat(n," [").concat(t,"] failed - ")+Ee(r))}});function QY(e){var t=Ap(Uw+"get"+e.uid+$w),n=Ap(Uw+"ro"+e.uid+$w),r=Ap(Uw+"rf"+e.uid+$w),o=Ap(Uw+"blkVal"+e.uid+$w),i=Ap(Uw+"dtl"+e.uid+$w),s=null,a=null,c;function l(d,p){var g=c.act;try{c.act=d,d&&d[i]&&(ee(d[i],function(w){w.clr(d)}),d[i]=[]),p({cfg:e.cfg,set:e.set.bind(e),setDf:e.setDf.bind(e),ref:e.ref.bind(e),rdOnly:e.rdOnly.bind(e)})}catch(w){var h=e[kt];throw h&&h[uc](1,107,Ee(w)),w}finally{c.act=g||null}}function u(){if(s){var d=s;s=null,a&&a[fc](),a=null;var p=[];if(ee(d,function(g){if(g&&(g[i]&&(ee(g[i],function(h){h.clr(g)}),g[i]=null),g.fn))try{l(g,g.fn)}catch(h){p[ze](h)}}),s)try{u()}catch(g){p[ze](g)}p[me]>0&&EY("Watcher error(s): ",p)}}function f(d){if(d&&d.h[me]>0){s||(s=[]),a||(a=si(function(){a=null,u()},0));for(var p=0;p<d.h[me];p++){var g=d.h[p];g&&wt(s,g)===-1&&s[ze](g)}}}function m(d,p){if(d){var g=d[i]=d[i]||[];wt(g,p)===-1&&g[ze](p)}}return c={prop:t,ro:n,rf:r,blkVal:o,hdlr:e,add:f,notify:u,use:l,trk:m},c}var Uw,$w,e3=ne(()=>{Ne();SY();xt();Uw="[[ai_",$w="]]"});function Wae(e,t){var n={fn:t,rm:function(){n.fn=null,e=null,t=null}};return gt(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),e.use(n,t),n}function jae(e,t,n){var r=Lw(t);if(r)return r;var o=Pr("dyncfg",!0),i=t&&n!==!1?t:aN(t),s;function a(){s.notify()}function c(h,w,C){try{h=Ow(s,h,w,C)}catch(v){Qp(e,w,"Setting value",v)}return h[w]}function l(h){return Wae(s,h)}function u(h,w){s.use(null,function(C){var v=s.upd;try{Ve(w)||(s.upd=w),h(C)}finally{s.upd=v}})}function f(h,w){var C;return __(s,h,w,(C={},C[0]=!0,C))[w]}function m(h,w){var C;return __(s,h,w,(C={},C[1]=!0,C))[w]}function d(h,w){var C;return __(s,h,w,(C={},C[2]=!0,C))[w]}function p(h,w){return w&&Ie(w,function(C,v){Nw(g,h,C,v)}),h}var g={uid:null,cfg:i,logger:e,notify:a,set:c,setDf:p,watch:l,ref:f,rdOnly:m,blkVal:d,_block:u};return gt(g,"uid",{c:!1,e:!1,w:!1,v:o}),s=QY(g),Fw(s,i,"config","Creating"),g}function Vae(e,t){e?(e[Mp](t),e[uc](2,108,t)):E_(t)}function jt(e,t,n,r){var o=jae(n,e||{},r);return t&&o.setDf(o.cfg,t),o}function dr(e,t,n){var r=e[pa]||e;return r.cfg&&(r.cfg===e||r.cfg[pa]===r)?r[sa](t):(Vae(n,AY+Ee(e)),jt(e,null,n)[sa](t))}var iu=ne(()=>{Ne();Zp();On();xt();sN();ZY();e3();S_()});function Cc(e,t){if(e&&e[Ui])return e[Ui](t)}function D_(e,t,n){var r;return n||(r=Mi(function(o){n=o})),e&&Op(e)>0?fi(Cc(e[0],t),function(){D_(Fp(e,1),t,n)}):n(),r}var lN=ne(()=>{ld();Ne();xt()});var t3,uN,fN=ne(()=>{t3=500,uN="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function Yae(e,t,n){return!e&&ae(e)?t:na(e)?e:Cn(e)[Oo]()==="true"}function dN(e){return{mrg:!0,v:e}}function eh(e,t,n){return{fb:n,isVal:e,v:t}}function Wi(e,t){return{fb:t,set:Yae,v:!!e}}var mN=ne(()=>{Ne();xt()});function Gae(e,t){return function(){var n=arguments,r=hN(t);if(r){var o=r.listener;o&&o[e]&&o[e][ql](o,n)}}}function qae(){var e=vt("Microsoft");return e&&(P_=e.ApplicationInsights),P_}function hN(e){var t=P_;return!t&&e.disableDbgExt!==!0&&(t=P_||qae()),t?t.ChromeDbgExt:null}function n3(e){if(!I_){I_={};for(var t=0;t<pN[me];t++)I_[pN[t]]=Gae(pN[t],e)}return I_}var pN,P_,I_,gN=ne(()=>{Ne();xt();On();pN=[Gp,Ql,qp,fa],P_=null});function r3(e){return e?'"'+e[_s](/\"/g,Le)+'"':Le}function vN(e,t){var n=_w();if(n){var r="log";n[e]&&(r=e),ke(n[r])&&n[r](t)}}function Ec(e,t){return(e||{})[kt]||new su(t)}function wN(e){return e||new su}function se(e,t,n,r,o,i){i===void 0&&(i=!1),wN(e)[uc](t,n,r,o,i)}function uo(e,t){wN(e)[Mp](t)}function yN(e,t,n){wN(e).logInternalMessage(t,n)}var th,o3,zae,Kae,Jae,Xae,Zae,gd,su,bs=ne(()=>{"use strict";fr();Ne();iu();xt();gN();ru();On();o3="warnToConsole",zae="AI (Internal): ",Kae="AI: ",Jae="AITR_",Xae={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Zae=(th={},th[0]=null,th[1]="errorToConsole",th[2]=o3,th[3]="debugToConsole",th);gd=(function(){function e(t,n,r,o){r===void 0&&(r=!1);var i=this;i[jp]=t,i[ua]=(r?Kae:zae)+t;var s=Le;ma()&&(s=Ir().stringify(o));var a=(n?" message:"+r3(n):Le)+(o?" props:"+r3(s):Le);i[ua]+=a}return e.dataType="MessageData",e})();su=(function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,s,a,c;Xe(e,this,function(l){c=f(t||{}),l.consoleLoggingLevel=function(){return o},l[uc]=function(p,g,h,w,C){C===void 0&&(C=!1);var v=new gd(g,h,C,w);if(a)throw Ee(v);var y=Zae[p]||o3;if(Ve(v[ua]))d("throw"+(p===1?"Critical":"Warning"),v);else{if(C){var S=+v[jp];!r[S]&&o>=p&&(l[y](v[ua]),r[S]=!0)}else o>=p&&l[y](v[ua]);u(p,v)}},l.debugToConsole=function(p){vN("debug",p),d("warning",p)},l[Mp]=function(p){vN("warn",p),d("warning",p)},l.errorToConsole=function(p){vN("error",p),d("error",p)},l.resetInternalMessageCount=function(){n=0,r={}},l.logInternalMessage=u,l[Ui]=function(p){c&&c.rm(),c=null};function u(p,g){if(!m()){var h=!0,w=Jae+g[jp];if(r[w]?h=!1:r[w]=!0,h&&(p<=i&&(l.queue[ze](g),n++,d(p===1?"error":"warn",g)),n===s)){var C="Internal events throttle limit per PageView reached for this app.",v=new gd(23,C,!1);l.queue[ze](v),p===1?l.errorToConsole(C):l[Mp](C)}}}function f(p){return dr(jt(p,Xae,l).cfg,function(g){var h=g.cfg;o=h[i_],i=h.loggingLevelTelemetry,s=h.maxMessageLimit,a=h.enableDebug})}function m(){return n>=s}function d(p,g){var h=hN(t||{});h&&h[$o]&&h[$o](p,g)}})}return e.__ieDyn=1,e})()});function DN(){!ha&&(ha=eY(function(){return An()}))}function ece(e,t){var n=Sc[au]||k_[au];return n||(n=Sc[au]=Sc(e,t),k_[au]=n),n}function T_(e){return e?e.isEnabled():!0}function p3(e,t){return t&&e&&we(e.ignoreCookies)?wt(e.ignoreCookies,t)!==-1:!1}function tce(e,t){return t&&e&&we(e.blockedCookies)&&wt(e.blockedCookies,t)!==-1?!0:p3(e,t)}function u3(e,t){var n=t[Kl];if(ae(n)){var r=void 0;Ve(e[a3])||(r=!e[a3]),Ve(e[xN])||(r=!e[xN]),n=r}return n}function IN(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;r&&r[au]?n=r[au]:n=Sc(t)}return n||(n=ece(t,(e||{})[kt])),n}function Sc(e,t){var n,r,o,i,s,a,c,l;e=jt(e||k_,null,t).cfg,i=dr(e,function(f){f.setDf(f.cfg,Qae),n=f.ref(f.cfg,"cookieCfg"),r=n[p_]||"/",o=n[m_],s=u3(e,n)!==!1,a=n.getCookie||nce,c=n.setCookie||m3,l=n.delCookie||m3},t);var u={isEnabled:function(){var f=u3(e,n)!==!1&&s&&nh(t),m=k_[au];return f&&m&&u!==m&&(f=T_(m)),f},setEnabled:function(f){s=f!==!1,n[Kl]=f},set:function(f,m,d,p,g){var h=!1;if(T_(u)&&!tce(n,f)){var w={},C=nt(m||Le),v=Fi(C,";");if(v!==-1&&(C=nt(Zf(m,v)),w=h3(Gn(m,v+1))),Hi(w,m_,p||o,ys,Ve),!ae(d)){var y=nu();if(Ve(w[EN])){var S=En(),I=S+d*1e3;if(I>0){var _=new Date;_.setTime(I),Hi(w,EN,f3(_,y?i3:s3)||f3(_,y?i3:s3)||Le,ys)}}y||Hi(w,"max-age",Le+d,null,Ve)}var A=hd();A&&A.protocol==="https:"&&(Hi(w,"secure",null,null,Ve),SN===null&&(SN=!R_((qn()||{})[ww])),SN&&Hi(w,"SameSite","None",null,Ve)),Hi(w,p_,g||r,null,Ve),c(f,d3(C,w)),h=!0}return h},get:function(f){var m=Le;return T_(u)&&!p3(n,f)&&(m=a(f)),m},del:function(f,m){var d=!1;return T_(u)&&(d=u.purge(f,m)),d},purge:function(f,m){var d,p=!1;if(nh(t)){var g=(d={},d[p_]=m||"/",d[EN]="Thu, 01 Jan 1970 00:00:01 GMT",d);nu()||(g["max-age"]="0"),l(f,d3(Le,g)),p=!0}return p},unload:function(f){i&&i.rm(),i=null}};return u[au]=u,u}function nh(e){if(b_===null){b_=!1,!ha&&DN();try{var t=ha.v||{};b_=t[_N]!==void 0}catch(n){se(e,2,68,"Cannot access document.cookie - "+tn(n),{exception:Ee(n)})}}return b_}function h3(e){var t={};if(e&&e[me]){var n=nt(e)[$i](";");ee(n,function(r){if(r=nt(r||Le),r){var o=Fi(r,"=");o===-1?t[r]=null:t[nt(Zf(r,o))]=nt(Gn(r,o+1))}})}return t}function f3(e,t){return ke(e[t])?e[t]():null}function d3(e,t){var n=e||Le;return Ie(t,function(r,o){n+="; "+r+(ae(o)?Le:"="+o)}),n}function nce(e){var t=Le;if(!ha&&DN(),ha.v){var n=ha.v[_N]||Le;c3!==n&&(l3=h3(n),c3=n),t=nt(l3[e]||Le)}return t}function m3(e,t){!ha&&DN(),ha.v&&(ha.v[_N]=e+"="+t)}function R_(e){return Re(e)?!!(Sn(e,"CPU iPhone OS 12")||Sn(e,"iPad; CPU OS 12")||Sn(e,"Macintosh; Intel Mac OS X 10_14")&&Sn(e,"Version/")&&Sn(e,"Safari")||Sn(e,"Macintosh; Intel Mac OS X 10_14")&&td(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Sn(e,"Chrome/5")||Sn(e,"Chrome/6")||Sn(e,"UnrealEngine")&&!Sn(e,"Chrome")||Sn(e,"UCBrowser/12")||Sn(e,"UCBrowser/11")):!1}var CN,vd,i3,s3,_N,EN,a3,xN,au,b_,SN,c3,ha,l3,k_,Qae,PN=ne(()=>{Ne();mN();iu();xt();bs();ru();da();On();i3="toGMTString",s3="toUTCString",_N="cookie",EN="expires",a3="isCookieUseDisabled",xN="disableCookiesUsage",au="_ckMgr",b_=null,SN=null,c3=null,l3={},k_={},Qae=(CN={cookieCfg:dN((vd={},vd[m_]={fb:"cookieDomain",dfVal:eu},vd.path={fb:"cookiePath",dfVal:eu},vd.enabled=di,vd.ignoreCookies=di,vd.blockedCookies=di,vd)),cookieDomain:di,cookiePath:di},CN[xN]=di,CN)});function oce(e){e.h=null;var t=e.cb;e.cb=[],ee(t,function(n){Yn(n.fn,[n.arg])})}function cu(e,t,n,r){ee(e,function(o){o&&o[t]&&(n?(n.cb[ze]({fn:r,arg:o}),n.h=n.h||si(oce,0,n)):Yn(r,[o]))})}var rce,Mw,bN=ne(()=>{fr();ld();Ne();iu();xt();On();rce={perfEvtsSendAll:!1};Mw=(function(){function e(t){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},s=jt(t,rce);r=s[sa](function(a){n=!!a.cfg.perfEvtsSendAll}),Xe(e,this,function(a){gt(a,"listeners",{g:function(){return o}}),a[Bp]=function(c){o[ze](c)},a[Hp]=function(c){for(var l=wt(o,c);l>-1;)o[aa](l,1),l=wt(o,c)},a[Gp]=function(c){cu(o,Gp,i,function(l){l[Gp](c)})},a[Ql]=function(c,l){cu(o,Ql,i,function(u){u[Ql](c,l)})},a[qp]=function(c,l){cu(o,qp,l?i:null,function(u){u[qp](c,l)})},a[fa]=function(c){c&&(n||!c[yw]())&&cu(o,fa,null,function(l){c.isAsync?si(function(){return l[fa](c)},0):l[fa](c)})},a[u_]=function(c){c&&c[me]&&cu(o,u_,i,function(l){l[u_](c)})},a[f_]=function(c){c&&c[Zl]&&cu(o,f_,i,function(l){l[f_](c)})},a[d_]=function(c,l){if(c>0){var u=l||0;cu(o,d_,i,function(f){f[d_](c,u)})}},a[Ui]=function(c){var l=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[fc](),i.h=null,i.cb=[]},u;if(cu(o,"unload",null,function(f){var m=f[Ui](c);m&&(u||(u=[]),u[ze](m))}),u)return Mi(function(f){return fi(LY(u),function(){l(),f()})});l()}})}return e.__ieDyn=1,e})()});function dn(e,t,n,r,o){if(e){var i=e;if(i[zp]&&(i=i[zp]()),i){var s=void 0,a=i[sd](TN);try{if(s=i.create(t(),r,o),s){if(a&&s[Ds]&&(s[Ds](wd[kN],a),a[sd]&&a[Ds])){var c=a[sd](wd[Hw]);c||(c=[],a[Ds](wd[Hw],c)),c[ze](s)}return i[Ds](TN,s),n(s)}}catch(l){s&&s[Ds]&&s[Ds]("exception",l)}finally{s&&i.fire(s),i[Ds](TN,a)}}}return n()}function RN(){return ice}var rh,kN,Hw,ice,wd,Bw,TN,N_=ne(()=>{fr();Ne();xt();On();rh="ctx",kN="ParentContextKey",Hw="ChildrenContextKey",ice=null,wd=(function(){function e(t,n,r){var o=this;if(o.start=En(),o[lo]=t,o.isAsync=r,o[yw]=function(){return!1},ke(n)){var i;gt(o,"payload",{g:function(){return!i&&ke(n)&&(i=n(),n=null),i}})}o[sd]=function(s){return s?s===e[kN]||s===e[Hw]?o[s]:(o[rh]||{})[s]:null},o[Ds]=function(s,a){if(s)if(s===e[kN])o[s]||(o[yw]=function(){return!0}),o[s]=a;else if(s===e[Hw])o[s]=a;else{var c=o[rh]=o[rh]||{};c[s]=a}},o.complete=function(){var s=0,a=o[sd](e[Hw]);if(we(a))for(var c=0;c<a[me];c++){var l=a[c];l&&(s+=l.time)}o.time=En()-o.start,o.exTime=o.time-s,o.complete=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e})(),Bw=(function(){function e(t){this.ctx={},Xe(e,this,function(n){n.create=function(r,o,i){return new wd(r,o,i)},n.fire=function(r){r&&(r.complete(),t&&ke(t[fa])&&t[fa](r))},n[Ds]=function(r,o){if(r){var i=n[rh]=n[rh]||{};i[r]=o}},n[sd]=function(r){return(n[rh]||{})[r]}})}return e.__ieDyn=1,e})(),TN="CoreUtils.doPerf"});function Ww(){var e=yd();return Gn(e,0,8)+"-"+Gn(e,8,12)+"-"+Gn(e,12,16)+"-"+Gn(e,16,20)+"-"+Gn(e,20)}function yd(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t=Le,n,r=0;r<4;r++)n=yc(),t+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+(yc()&3)|0];return oa(t,0,8)+oa(t,9,4)+"4"+oa(t,13,3)+o+oa(t,16,3)+oa(t,19,12)}var NN=ne(()=>{"use strict";Ne();On();v_()});function xc(e,t,n){return e&&e[me]===t&&e!==n?!!e.match(/^[\da-f]*$/i):!1}function v3(e,t,n){return xc(e,t)?e:n}function w3(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[me]<2;)t="0"+t;return t}function FN(e,t,n,r){return{version:xc(r,2,AN)?r:LN,traceId:Cd(e)?e:yd(),spanId:Ed(t)?t:Zf(yd(),16),traceFlags:n>=0&&n<=255?n:1}}function jw(e,t){if(!e||(we(e)&&(e=e[0]||""),!e||!Re(e)||e[me]>8192))return null;if(e.indexOf(",")!==-1){var n=e[$i](",");e=n[t>0&&n[me]>t?t:0]}var r=sce.exec(nt(e));return!r||r[1]===AN||r[2]===L_||r[3]===A_?null:{version:(r[1]||Le)[Oo](),traceId:(r[2]||Le)[Oo](),spanId:(r[3]||Le)[Oo](),traceFlags:parseInt(r[4],16)}}function Cd(e){return xc(e,32,L_)}function Ed(e){return xc(e,16,A_)}function F_(e){return!(!e||!xc(e[Wp],2,AN)||!xc(e.traceId,32,L_)||!xc(e.spanId,16,A_)||!xc(w3(e[cd]),2))}function ON(e){return F_(e)?(e[cd]&g3)===g3:!1}function UN(e){if(e){var t=w3(e[cd]);xc(t,2)||(t="01");var n=e[Wp]||LN;return n!=="00"&&n!=="ff"&&(n=LN),"".concat(n.toLowerCase(),"-").concat(v3(e.traceId,32,L_).toLowerCase(),"-").concat(v3(e.spanId,16,A_).toLowerCase(),"-").concat(t.toLowerCase())}return""}function $N(e){var t="traceparent",n=jw(nN(t),e);return n||(n=jw(rN(t),e)),n}var sce,LN,AN,L_,A_,g3,MN=ne(()=>{Ne();xt();NN();ru();On();sce=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,LN="00",AN="ff",L_="00000000000000000000000000000000",A_="0000000000000000",g3=1});function _c(e){return ace.get(e,"state",{},!0)}function HN(e,t){for(var n=[],r=null,o=e[li](),i;o;){var s=o[zl]();if(s){r&&r[Xl]&&s[Mo]&&r[Xl](s),i=_c(s);var a=!!i[Uo];s[Uo]&&(a=s[Uo]()),a||n[ze](s),r=s,o=o[li]()}}ee(n,function(c){var l=e[fn]();c[dc](e.getCfg(),l,t,e[li]()),i=_c(c),!c[fn]&&!i[fn]&&(i[fn]=l),i[Uo]=!0,delete i[ci]})}function O_(e){return e.sort(function(t,n){var r=0;if(n){var o=n[Mo];t[Mo]?r=o?t[dd]-n[dd]:1:o&&(r=-1)}else r=t?1:-1;return r})}function y3(e){var t={};return{getName:function(){return t[lo]},setName:function(n){e&&e.setName(n),t[lo]=n},getTraceId:function(){return t.traceId},setTraceId:function(n){e&&e.setTraceId(n),Cd(n)&&(t.traceId=n)},getSpanId:function(){return t.spanId},setSpanId:function(n){e&&e.setSpanId(n),Ed(n)&&(t.spanId=n)},getTraceFlags:function(){return t[cd]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[cd]=n}}}var ace,BN=ne(()=>{"use strict";Ne();xt();Zp();On();MN();ace=w_("plugin")});function lce(e,t,n){for(;e;){if(e[zl]()===n)return e;e=e[li]()}return lu([n],t.config||{},t)}function WN(e,t,n,r){var o=null,i=[];t||(t=jt({},null,n[kt])),r!==null&&(o=r?lce(e,n,r):e);var s={_next:c,ctx:{core:function(){return n},diagLog:function(){return Ec(n,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:u,getConfig:f,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(d){o=d},iterate:m,onComplete:a}};function a(d,p){for(var g=[],h=2;h<arguments.length;h++)g[h-2]=arguments[h];d&&i[ze]({func:d,self:Ve(p)?s.ctx:p,args:g})}function c(){var d=o;if(o=d?d[li]():null,!d){var p=i;p&&p[me]>0&&(ee(p,function(g){try{g.func.call(g.self,g.args)}catch(h){se(n[kt],2,73,"Unexpected Exception during onComplete - "+Ee(h))}}),i=[])}return d}function l(d,p){var g=null,h=t.cfg;if(h&&d){var w=h[mc];!w&&p&&(w={}),h[mc]=w,w=t.ref(h,mc),w&&(g=w[d],!g&&p&&(g={}),w[d]=g,g=t.ref(w,d))}return g}function u(d,p){var g=l(d,!0);return p&&Ie(p,function(h,w){if(ae(g[h])){var C=t.cfg[h];(C||!ae(C))&&(g[h]=C)}Nw(t,g,h,w)}),t.setDf(g,p)}function f(d,p,g){g===void 0&&(g=!1);var h,w=l(d,!1),C=t.cfg;return w&&(w[p]||!ae(w[p]))?h=w[p]:(C[p]||!ae(C[p]))&&(h=C[p]),h||!ae(h)?h:g}function m(d){for(var p;p=s._next();){var g=p[zl]();g&&d(g)}}return s}function fo(e,t,n,r){var o=jt(t),i=WN(e,o,n,r),s=i.ctx;function a(l){var u=i._next();return u&&u[Mo](l,s),!u}function c(l,u){return l===void 0&&(l=null),we(l)&&(l=lu(l,o.cfg,n,u)),fo(l||s[li](),o.cfg,n,u)}return s[zn]=a,s[la]=c,s}function oh(e,t,n){var r=jt(t.config),o=WN(e,r,t,n),i=o.ctx;function s(c){var l=o._next();return l&&l[Ui](i,c),!l}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=lu(c,r.cfg,t,l)),oh(c||i[li](),t,l)}return i[zn]=s,i[la]=a,i}function Vw(e,t,n){var r=jt(t.config),o=WN(e,r,t,n),i=o.ctx;function s(c){return i.iterate(function(l){ke(l[od])&&l[od](i,c)})}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=lu(c,r.cfg,t,l)),Vw(c||i[li](),t,l)}return i[zn]=s,i[la]=a,i}function lu(e,t,n,r){var o=null,i=!r;if(we(e)&&e[me]>0){var s=null;ee(e,function(a){if(!i&&r===a&&(i=!0),i&&a&&ke(a[Mo])){var c=uce(a,t,n);o||(o=c),s&&s._setNext(c),s=c}})}return r&&!o?lu([r],t,n):o}function uce(e,t,n){var r=null,o=ke(e[Mo]),i=ke(e[Xl]),s;e?s=e[ca]+"-"+e[dd]+"-"+S3++:s="Unknown-0-"+S3++;var a={getPlugin:function(){return e},getNext:function(){return r},processTelemetry:u,unload:f,update:m,_id:s,_setNext:function(d){r=d}};function c(){var d;return e&&ke(e[E3])&&(d=e[E3]()),d||(d=fo(a,t,n)),d}function l(d,p,g,h,w){var C=!1,v=e?e[ca]:cce,y=d[C3];return y||(y=d[C3]={}),d.setNext(r),e&&dn(d[fn](),function(){return v+":"+g},function(){y[s]=!0;try{var S=r?r._id:Le;S&&(y[S]=!1),C=p(d)}catch(_){var I=r?y[r._id]:!0;I&&(C=!0),(!r||!I)&&se(d[$o](),1,73,"Plugin ["+v+"] failed during "+g+" - "+Ee(_)+", run flags: "+Ee(y))}},h,w),C}function u(d,p){p=p||c();function g(h){if(!e||!o)return!1;var w=_c(e);return w[ci]||w[Sw]?!1:(i&&e[Xl](r),e[Mo](d,h),!0)}l(p,g,"processTelemetry",function(){return{item:d}},!d.sync)||p[zn](d)}function f(d,p){function g(){var h=!1;if(e){var w=_c(e),C=e[fn]||w[fn];e&&(!C||C===d.core())&&!w[ci]&&(w[fn]=null,w[ci]=!0,w[Uo]=!1,e[ci]&&e[ci](d,p)===!0&&(h=!0))}return h}l(d,g,"unload",function(){},p.isAsync)||d[zn](p)}function m(d,p){function g(){var h=!1;if(e){var w=_c(e),C=e[fn]||w[fn];e&&(!C||C===d.core())&&!w[ci]&&e[od]&&e[od](d,p)===!0&&(h=!0)}return h}l(d,g,"update",function(){},!1)||d[zn](p)}return ao(a)}var cce,C3,E3,S3,jN,U_=ne(()=>{"use strict";Ne();sN();iu();xt();bs();da();On();N_();BN();cce="TelemetryPluginChain",C3="_hasRun",E3="_getTelCtx",S3=0;jN=(function(){function e(t,n,r,o){var i=this,s=fo(t,n,r,o);mi(i,s,_r(s))}return e})()});function Sd(){var e=[];function t(r){r&&e[ze](r)}function n(r,o){ee(e,function(i){try{i(r,o)}catch(s){se(r[$o](),2,73,"Unexpected error calling unload handler - "+Ee(s))}}),e=[]}return{add:t,run:n}}var $_=ne(()=>{Ne();xt();bs()});function VN(e,t){Yw=e,Gw=t}function qw(){var e=[];function t(r){var o=e;e=[],ee(o,function(i){try{(i.rm||i.remove).call(i)}catch(s){se(r,2,73,"Unloading:"+Ee(s))}}),Yw&&o[me]>Yw&&(Gw?Gw("doUnload",o):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function n(r){r&&(Ss(e,r),Yw&&e[me]>Yw&&(Gw?Gw("Add",e):se(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:t,add:n}}var Yw,Gw,M_=ne(()=>{Ne();xt();bs()});var YN,uu,fce,Dc,GN=ne(()=>{"use strict";fr();Ne();iu();xt();bs();da();On();U_();$_();M_();uu="getPlugin",fce=(YN={},YN[mc]={isVal:eu,v:{}},YN),Dc=(function(){function e(){var t=this,n,r,o,i,s;l(),Xe(e,t,function(u){u[dc]=function(f,m,d,p){c(f,m,p),n=!0},u[ci]=function(f,m){var d=u[fn];if(!d||f&&d!==f[fn]())return;var p,g=!1,h=f||oh(null,d,o&&o[uu]?o[uu]():o),w=m||{reason:0,isAsync:!1};function C(){g||(g=!0,i.run(h,m),s.run(h[$o]()),p===!0&&h[zn](w),l())}return!u[Jl]||u[Jl](h,w,C)!==!0?C():p=!0,p},u[od]=function(f,m){var d=u[fn];if(!d||f&&d!==f[fn]())return;var p,g=!1,h=f||Vw(null,d,o&&o[uu]?o[uu]():o),w=m||{reason:0};function C(){g||(g=!0,c(h.getCfg(),h.core(),h[li]()))}return!u._doUpdate||u._doUpdate(h,w,C)!==!0?C():p=!0,p},pc(u,"_addUnloadCb",function(){return i},"add"),pc(u,"_addHook",function(){return s},"add"),gt(u,"_unloadHooks",{g:function(){return s}})}),t[$o]=function(u){return a(u)[$o]()},t[Uo]=function(){return n},t.setInitialized=function(u){n=u},t[Xl]=function(u){o=u},t[zn]=function(u,f){f?f[zn](u):o&&ke(o[Mo])&&o[Mo](u,null)},t._getTelCtx=a;function a(u){u===void 0&&(u=null);var f=u;if(!f){var m=r||fo(null,{},t[fn]);o&&o[uu]?f=m[la](null,o[uu]):f=m[la](null,o)}return f}function c(u,f,m){jt(u,fce,Ec(f)),!m&&f&&(m=f[o_]()[li]());var d=o;o&&o[uu]&&(d=o[uu]()),t[fn]=f,r=fo(m,u,f,d)}function l(){n=!1,t[fn]=null,r=null,o=null,s=qw(),i=Sd()}}return e.__ieDyn=1,e})()});function dce(e,t,n){var r={id:t,fn:n};Ss(e,r);var o={remove:function(){ee(e,function(i,s){if(i.id===r.id)return e[aa](s,1),-1})}};return o}function mce(e,t,n){for(var r=!1,o=e[me],i=0;i<o;++i){var s=e[i];if(s)try{if(s.fn[ql](null,[t])===!1){r=!0;break}}catch(a){se(n,2,64,"Telemetry initializer failed: "+tn(a),{exception:Ee(a)},!0)}}return!r}var x3,_3=ne(()=>{Fo();fr();Ne();xt();GN();bs();da();On();x3=(function(e){Ao(t,e);function t(){var n=e.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),Xe(t,n,function(s,a){s.addTelemetryInitializer=function(c){return dce(o,r++,c)},s[Mo]=function(c,l){mce(o,c,l?l[$o]():s[$o]())&&s[zn](c,l)},s[Jl]=function(){i()}});function i(){r=0,o=[]}return n}return t.__ieDyn=1,t})(Dc)});function wce(e,t){return new Bw(t)}function yce(e,t,n){var r=[],o=[],i={};return ee(n,function(s){(ae(s)||ae(s[dc]))&&Ln(b3);var a=s[dd],c=s[ca];s&&a&&(ae(i[a])?i[a]=c:uo(e,"Two extensions have same priority #"+a+" - "+i[a]+", "+c)),!a||a<t?r[ze](s):o[ze](s)}),{core:r,channels:o}}function I3(e,t){var n=!1;return ee(t,function(r){if(r===e)return n=!0,-1}),n}function zN(e,t,n,r){n&&Ie(n,function(o,i){r&&Dr(i)&&Dr(t[o])&&zN(e,t[o],i,r),r&&Dr(i)&&Dr(t[o])?zN(e,t[o],i,r):e.set(t,o,i)})}function P3(e,t){var n=null,r=-1;return ee(e,function(o,i){if(o.w===t)return n=o,r=i,-1}),{i:r,l:n}}function Cce(e,t){var n=P3(e,t).l;return n||(n={w:t,rm:function(){var r=P3(e,t);r.i!==-1&&e[aa](r.i,1)}},e[ze](n)),n}function Ece(e,t,n){ee(t,function(r){var o=dr(e,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function Sce(e,t,n,r){return t.add(e[sa](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[Hp](r),r=null),n&&!r&&i!==!0&&(r=n3(o.cfg),n[Bp](r))})),r}function xce(e){return gt({rm:function(){e.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(e)+">"}})}var fu,b3,pce,D3,hce,gce,vce,qN,Ic,T3=ne(()=>{"use strict";Fo();fr();ld();Ne();iu();AR();xt();lN();fN();PN();Zp();gN();bs();da();On();bN();N_();U_();BN();_3();$_();M_();b3="Plugins must provide initialize method",pce="_notificationManager",D3="SDK is still unloading...",hce="SDK is not initialized",gce=100,vce=5e4,qN=Es((fu={cookieCfg:{}},fu[fd]={rdOnly:!0,ref:!0,v:[]},fu[ud]={rdOnly:!0,ref:!0,v:[]},fu[mc]={ref:!0,v:{}},fu[l_]=di,fu.loggingLevelConsole=0,fu.diagnosticLogInterval=di,fu));Ic=(function(){function e(){var t,n,r,o,i,s,a,c,l,u,f,m,d,p,g,h,w,C,v,y,S,I,_,A,U,R,E,x,b,D,T,k,L;Xe(e,this,function(N){G(),N._getDbgPlgTargets=function(){return[_,o]},N[Uo]=function(){return n},N.activeStatus=function(){return R},N._setPendingStatus=function(){R=3},N[dc]=function(j,oe,xe,le){d&&Ln(D3),N[Uo]()&&Ln("Core cannot be initialized more than once"),t=jt(j,qN,xe||N[kt],!1),j=t.cfg,Ct(t[sa](function(ot){var ht=ot.cfg,vn=R===3;if(!vn){x=ht.initInMemoMaxSize||gce;var Bn=ht.instrumentationKey,Nr=ht.endpointUrl;if(ae(Bn)){S=null,R=ai.INACTIVE;var Lr="Please provide instrumentation key";n?(se(r,1,100,Lr),B()):Ln(Lr);return}var yi=[];if(so(Bn)?(yi[ze](Bn),S=null):S=Bn,so(Nr)?(yi[ze](Nr),E=null):E=Nr,yi[me]){b=!1,R=3;var Qn=eu(ht.initTimeOut)?ht.initTimeOut:vce,Ma=NY(yi);D=si(function(){D=null,b||H()},Qn),fi(Ma,function(Q){try{if(b)return;if(!Q.rejected){var ie=Q[rd];if(ie&&ie[me]){var ve=ie[0];if(S=ve&&ve[rd],ie[me]>1){var be=ie[1];E=be&&be[rd]}}S&&(j.instrumentationKey=S,j.endpointUrl=E)}H()}catch{b||H()}})}else H();var $=ot.ref(ot.cfg,mc);Ie($,function(Q){ot.ref($,Q)})}})),i=le,v=Sce(t,C,i&&N[gw](),v),Jt(),N[kt]=xe;var De=j[fd];if(u=[],u[ze].apply(u,zx(zx([],oe,!1),De,!1)),f=j[ud],Be(null),(!m||m[me]===0)&&Ln("No "+ud+" available"),f&&f[me]>1){var et=N[zl]("TeeChannelController");(!et||!et.plugin)&&se(r,1,28,"TeeChannel required")}Ece(j,I,r),I=null,n=!0,R===ai.ACTIVE&&B()},N.getChannels=function(){var j=[];return m&&ee(m,function(oe){j[ze](oe)}),ao(j)},N.track=function(j){dn(N[zp](),function(){return"AppInsightsCore:track"},function(){j===null&&(Dt(j),Ln("Invalid telemetry item")),!j[lo]&&ae(j[lo])&&(Dt(j),Ln("telemetry name required")),j.iKey=j.iKey||S,j.time=j.time||Is(new Date),j.ver=j.ver||"4.0",!d&&N[Uo]()&&R===ai.ACTIVE?ce()[zn](j):R!==ai.INACTIVE&&o[me]<=x&&o[ze](j)},function(){return{item:j}},!j.sync)},N[o_]=ce,N[gw]=function(){return i||(i=new Mw(t.cfg),N[pce]=i),i},N[Bp]=function(j){N.getNotifyMgr()[Bp](j)},N[Hp]=function(j){i&&i[Hp](j)},N.getCookieMgr=function(){return c||(c=Sc(t.cfg,N[kt])),c},N.setCookieMgr=function(j){c!==j&&(Cc(c,!1),c=j)},N[zp]=function(){return s||a||RN()},N.setPerfMgr=function(j){s=j},N.eventCnt=function(){return o[me]},N.releaseQueue=function(){if(n&&o[me]>0){var j=o;o=[],R===2?ee(j,function(oe){oe.iKey=oe.iKey||S,ce()[zn](oe)}):se(r,2,20,"core init status is not active")}},N.pollInternalLogs=function(j){return g=j||null,L=!1,T&&T[fc](),z(!0)};function H(){b=!0,ae(S)?(R=ai.INACTIVE,se(r,1,112,"ikey can't be resolved from promises")):R=ai.ACTIVE,B()}function B(){n&&(N.releaseQueue(),N.pollInternalLogs())}function z(j){if((!T||!T[Kl])&&!L){var oe=j||r&&r.queue[me]>0;oe&&(k||(k=!0,Ct(t[sa](function(xe){var le=xe.cfg.diagnosticLogInterval;(!le||!(le>0))&&(le=1e4);var De=!1;T&&(De=T[Kl],T[fc]()),T=uY(Dn,le),T.unref(),T[Kl]=De}))),T[Kl]=!0)}return T}N[FR]=function(){L=!0,T&&T[fc](),Dn()},mi(N,function(){return p},["addTelemetryInitializer"]),N[Ui]=function(j,oe,xe){j===void 0&&(j=!0),n||Ln(hce),d&&Ln(D3);var le={reason:50,isAsync:j,flushComplete:!1},De;j&&!oe&&(De=Mi(function(ht){oe=ht}));var et=oh(Mt(),N);et[vw](function(){C.run(N[kt]),D_([c,i,r],j,function(){G(),oe&&oe(le)})},N);function ot(ht){le.flushComplete=ht,d=!0,w.run(et,le),N[FR](),et[zn](le)}return Dn(),gn(j,ot,6,xe)||ot(!1),De},N[zl]=mt,N.addPlugin=function(j,oe,xe,le){if(!j){le&&le(!1),rt(b3);return}var De=mt(j[ca]);if(De&&!oe){le&&le(!1),rt("Plugin ["+j[ca]+"] is already loaded!");return}var et={reason:16};function ot(Bn){u[ze](j),et.added=[j],Be(et),le&&le(!0)}if(De){var ht=[De.plugin],vn={reason:2,isAsync:!!xe};wo(ht,vn,function(Bn){Bn?(et.removed=ht,et.reason|=32,ot(!0)):le&&le(!1)})}else ot(!1)},N.updateCfg=function(j,oe){oe===void 0&&(oe=!0);var xe;if(N[Uo]()){xe={reason:1,cfg:t.cfg,oldCfg:wR({},t.cfg),newConfig:wR({},j),merge:oe},j=xe.newConfig;var le=t.cfg;j[fd]=le[fd],j[ud]=le[ud]}t._block(function(De){var et=De.cfg;zN(De,et,j,oe),oe||Ie(et,function(ot){Cs(j,ot)||De.set(et,ot,di)}),De.setDf(et,qN)},!0),t.notify(),xe&&pt(xe)},N.evtNamespace=function(){return h},N.flush=gn,N.getTraceCtx=function(j){return y||(y=y3()),y},N.setTraceCtx=function(j){y=j||null},N.addUnloadHook=Ct,pc(N,"addUnloadCb",function(){return w},"add"),N.onCfgChange=function(j){var oe;return n?oe=dr(t.cfg,j,N[kt]):oe=Cce(I,j),xce(oe)},N.getWParam=function(){return Qf()||t.cfg.enableWParam?0:-1};function Y(){var j={};A=[];var oe=function(xe){xe&&ee(xe,function(le){if(le[ca]&&le[Wp]&&!j[le.identifier]){var De=le[ca]+"="+le[Wp];A[ze](De),j[le.identifier]=le}})};oe(m),f&&ee(f,function(xe){oe(xe)}),oe(u)}function G(){n=!1,t=jt({},qN,N[kt]),t.cfg[i_]=1,gt(N,"config",{g:function(){return t.cfg},s:function(oe){N.updateCfg(oe,!1)}}),gt(N,"pluginVersionStringArr",{g:function(){return A||Y(),A}}),gt(N,"pluginVersionString",{g:function(){return U||(A||Y(),U=A.join(";")),U||Le}}),gt(N,"logger",{g:function(){return r||(r=new su(t.cfg),t[kt]=r),r},s:function(oe){t[kt]=oe,r!==oe&&(Cc(r,!1),r=oe)}}),N[kt]=new su(t.cfg),_=[];var j=N.config[fd]||[];j.splice(0,j[me]),Ss(j,_),p=new x3,o=[],Cc(i,!1),i=null,s=null,a=null,Cc(c,!1),c=null,l=null,u=[],f=null,m=null,d=!1,g=null,h=Pr("AIBaseCore",!0),w=Sd(),y=null,S=null,C=qw(),I=[],U=null,A=null,L=!1,T=null,k=!1,R=0,E=null,x=null,b=!1,D=null}function ce(){var j=fo(Mt(),t.cfg,N);return j[vw](z),j}function Be(j){var oe=yce(N[kt],t3,u);l=null,U=null,A=null,m=(f||[])[0]||[],m=O_(Ss(m,oe[ud]));var xe=Ss(O_(oe[fn]),m);_=ao(xe);var le=N.config[fd]||[];le.splice(0,le[me]),Ss(le,_);var De=ce();m&&m[me]>0&&HN(De[la](m),xe),HN(De,xe),j&&pt(j)}function mt(j){var oe=null,xe=null,le=[];return ee(_,function(De){if(De[ca]===j&&De!==p)return xe=De,-1;De.getChannel&&le[ze](De)}),!xe&&le[me]>0&&ee(le,function(De){if(xe=De.getChannel(j),!xe)return-1}),xe&&(oe={plugin:xe,setEnabled:function(De){_c(xe)[Sw]=!De},isEnabled:function(){var De=_c(xe);return!De[ci]&&!De[Sw]},remove:function(De,et){De===void 0&&(De=!0);var ot=[xe],ht={reason:1,isAsync:De};wo(ot,ht,function(vn){vn&&Be({reason:32,removed:ot}),et&&et(vn)})}}),oe}function Mt(){if(!l){var j=(_||[]).slice();wt(j,p)===-1&&j[ze](p),l=lu(O_(j),t.cfg,N)}return l}function wo(j,oe,xe){if(j&&j[me]>0){var le=lu(j,t.cfg,N),De=oh(le,N);De[vw](function(){var et=!1,ot=[];ee(u,function(vn,Bn){I3(vn,j)?et=!0:ot[ze](vn)}),u=ot,U=null,A=null;var ht=[];f&&(ee(f,function(vn,Bn){var Nr=[];ee(vn,function(Lr){I3(Lr,j)?et=!0:Nr[ze](Lr)}),ht[ze](Nr)}),f=ht),xe&&xe(et),z()}),De[zn](oe)}else xe(!1)}function Dn(){if(r&&r.queue){var j=r.queue.slice(0);r.queue[me]=0,ee(j,function(oe){var xe={name:g||"InternalMessageId: "+oe[jp],iKey:S,time:Is(new Date),baseType:gd.dataType,baseData:{message:oe[ua]}};N.track(xe)})}}function gn(j,oe,xe,le){var De=1,et=!1,ot=null;le=le||5e3;function ht(){De--,et&&De===0&&(ot&&ot[fc](),ot=null,oe&&oe(et),oe=null)}if(m&&m[me]>0){var vn=ce()[la](m);vn.iterate(function(Bn){if(Bn.flush){De++;var Nr=!1;Bn.flush(j,function(){Nr=!0,ht()},xe)||Nr||(j&&ot==null?ot=si(function(){ot=null,ht()},le):ht())}})}return et=!0,ht(),!0}function Jt(){var j;Ct(t[sa](function(oe){var xe=oe.cfg.enablePerfMgr;if(xe){var le=oe.cfg[l_];(j!==le||!j)&&(le||(le=wce),xw(oe.cfg,l_,le),j=le,a=null),!s&&!a&&ke(le)&&(a=le(N,N[gw]()))}else a=null,j=null}))}function pt(j){var oe=Vw(Mt(),N);oe[vw](z),(!N._updateHook||N._updateHook(oe,j)!==!0)&&oe[zn](j)}function rt(j){var oe=N[kt];oe?(se(oe,2,73,j),z()):Ln(j)}function Dt(j){var oe=N[gw]();oe&&oe[Ql]([j],2)}function Ct(j){C.add(j)}})}return e.__ieDyn=1,e})()});function xd(e,t){try{if(e&&e!==""){var n=Ir().parse(e);if(n&&n[UR]&&n[UR]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[me])return n}}catch(r){se(t,1,43,"Cannot parse the response. "+(r[lo]||Ee(r)),{response:e})}return null}var k3=ne(()=>{Ne();xt();bs();ru()});var ga,_ce,R3,KN,_d,N3=ne(()=>{fr();ld();Ne();xt();fN();bs();ru();da();ga="",_ce="NoResponseBody",R3="&"+_ce+"=true",KN="POST",_d=(function(){function e(){var t=0,n,r,o,i,s,a,c,l,u,f,m,d,p,g;Xe(e,this,function(h,w){var C=!0;b(),h[dc]=function(D,T){o=T,r&&se(o,1,28,"Sender is already initialized"),h.SetConfig(D),r=!0},h._getDbgPlgTargets=function(){return[r,i,a,n]},h.SetConfig=function(D){try{if(s=D.senderOnCompleteCallBack||{},a=!!D.disableCredentials,c=D.fetchCredentials,i=!!D.isOneDs,n=!!D.enableSendPromise,u=!!D.disableXhr,f=!!D.disableBeacon,m=!!D.disableBeaconSync,g=D.timeWrapper,p=!!D.addNoResponse,d=!!D.disableFetchKeepAlive,l={sendPOST:R},i||(C=!1),a){var T=hd();T&&T.protocol&&T.protocol[Oo]()==="file:"&&(C=!1)}return!0}catch{}return!1},h.getSyncFetchPayload=function(){return t},h.getSenderInst=function(D,T){return D&&D[me]?I(D,T):null},h.getFallbackInst=function(){return l},h[Jl]=function(D,T){b()};function v(D,T){_(T,200,{},D)}function y(D,T){se(o,2,26,"Failed to send telemetry.",{message:D}),_(T,400,{})}function S(D){y("No endpoint url is provided for the batch",D)}function I(D,T){for(var k=0,L=null,N=0;L==null&&N<D[me];)k=D[N],!u&&k===1?bw()?L=x:Xp()&&(L=R):k===2&&wc(T)&&(!T||!d)?L=E:k===3&&Bi()&&(T?!m:!f)&&(L=U),N++;return L?{_transport:k,_isSync:T,sendPOST:L}:null}function _(D,T,k,L){try{D&&D(T,k,L)}catch{}}function A(D,T){var k=qn(),L=D[Yp];if(!L)return S(T),!0;L=D[Yp]+(p?R3:ga);var N=D[Zl],H=i?N:new Blob([N],{type:"text/plain;charset=UTF-8"}),B=k.sendBeacon(L,H);return B}function U(D,T,k){var L=D[Zl];try{if(L)if(A(D,T))v(ga,T);else{var N=s&&s.beaconOnRetry;N&&ke(N)?N(D,T,A):(l&&l.sendPOST(D,T,!0),se(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(H){i&&uo(o,"Failed to send telemetry using sendBeacon API. Ex:"+Ee(H)),_(T,i?0:400,{},ga)}}function R(D,T,k){var L,N,H,B=D[s_]||{};!k&&n&&(L=Mi(function(ce,Be){N=ce,H=Be})),i&&k&&D.disableXhrSync&&(k=!1);var z=D[Yp];if(!z){S(T),N&&N(!1);return}var Y=KR(KN,z,C,!0,k,D[ad]);i||Y.setRequestHeader("Content-type","application/json"),ee(_r(B),function(ce){Y.setRequestHeader(ce,B[ce])}),Y.onreadystatechange=function(){i||(G(Y),Y.readyState===4&&N&&N(!0))},Y.onload=function(){i&&G(Y)};function G(ce){var Be=s&&s.xhrOnComplete,mt=Be&&ke(Be);if(mt)Be(ce,T,D);else{var Mt=Ps(ce);_(T,ce[id],vc(ce,i),Mt)}}return Y.onerror=function(ce){_(T,i?Y[id]:400,vc(Y,i),i?ga:hc(Y)),H&&H(ce)},Y.ontimeout=function(){_(T,i?Y[id]:500,vc(Y,i),i?ga:hc(Y)),N&&N(!1)},Y.send(D[Zl]),L}function E(D,T,k){var L,N=D[Yp],H=D[Zl],B=i?H:new Blob([H],{type:"application/json"}),z,Y,G,ce=new Headers,Be=H[me],mt=!1,Mt=!1,wo=D[s_]||{},Dn=(L={method:KN,body:B},L[uN]=!0,L);D.headers&&_r(D.headers)[me]>0&&(ee(_r(wo),function(rt){ce.append(rt,wo[rt])}),Dn[s_]=ce),c?Dn.credentials=c:C&&i&&(Dn.credentials="include"),k&&(Dn.keepalive=!0,t+=Be,i?D._sendReason===2&&(mt=!0,p&&(N+=R3)):mt=!0);var gn=new Request(N,Dn);try{gn[uN]=!0}catch{}if(!k&&n&&(z=Mi(function(rt,Dt){Y=rt,G=Dt})),!N){S(T),Y&&Y(!1);return}function Jt(rt){_(T,i?0:400,{},i?ga:rt)}function pt(rt,Dt,Ct){var j=rt[id],oe=s.fetchOnComplete;oe&&ke(oe)?oe(rt,T,Ct||ga,Dt):_(T,j,{},Ct||ga)}try{fi(fetch(i?N:gn,i?Dn:null),function(rt){if(k&&(t-=Be,Be=0),!Mt)if(Mt=!0,rt.rejected)Jt(rt.reason&&rt.reason[ua]),G&&G(rt.reason);else{var Dt=rt[rd];try{!i&&!Dt.ok?(Jt(Dt.statusText),Y&&Y(!1)):i&&!Dt.body?(pt(Dt,null,ga),Y&&Y(!0)):fi(Dt.text(),function(Ct){pt(Dt,D,Ct[rd]),Y&&Y(!0)})}catch(Ct){Jt(Ee(Ct)),G&&G(Ct)}}})}catch(rt){Mt||(Jt(Ee(rt)),G&&G(rt))}return mt&&!Mt&&(Mt=!0,_(T,200,{}),Y&&Y(!0)),i&&!Mt&&D[ad]>0&&g&&g.set(function(){Mt||(Mt=!0,_(T,500,{}),Y&&Y(!0))},D[ad]),z}function x(D,T,k){var L=Fn(),N=new XDomainRequest,H=D[Zl];N.onload=function(){var ce=Ps(N),Be=s&&s.xdrOnComplete;Be&&ke(Be)?Be(N,T,D):_(T,200,{},ce)},N.onerror=function(){_(T,400,{},i?ga:pd(N))},N.ontimeout=function(){_(T,500,{})},N.onprogress=function(){};var B=L&&L.location&&L.location.protocol||"",z=D[Yp];if(!z){S(T);return}if(!i&&z.lastIndexOf(B,0)!==0){var Y="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";se(o,2,40,". "+Y),y(Y,T);return}var G=i?z:z[_s](/^(https?:)/,"");N.open(KN,G),D[ad]&&(N[ad]=D[ad]),N.send(H),i&&k?g&&g.set(function(){N.send(H)},0):N.send(H)}function b(){t=0,r=!1,n=!1,o=null,i=null,s=null,a=null,c=null,l=null,u=!1,f=!1,m=!1,d=!1,p=!1,g=null}})}return e.__ieDyn=1,e})()});function U3(e){return e&&e[_s]?e[_s](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Le):e}function W_(e,t){if(t){var n=Le;we(t)?(n=Le,ee(t,function(o){o=U3(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=U3(t),n&&(n[0]!=="."&&(n="."+n),e=(e||Le)+n)}var r=bce.exec(e||Le)||[];return{type:r[1],ns:(r[2]||Le).replace(Dce,".").replace(Ice,Le)[$i](".").sort().join(".")}}function JN(e,t,n){var r=[],o=Kw.get(e,H_,{},!1),i=W_(t,n);return Ie(o,function(s,a){ee(a,function(c){(!i[ui]||i[ui]===c[Vp][ui])&&(!i.ns||i.ns===i.ns)&&r[ze]({name:c.evtName[ui]+(c[Vp].ns?"."+c[Vp].ns:Le),handler:c.handler})})}),r}function Y3(e,t,n){n===void 0&&(n=!0);var r=Kw.get(e,H_,{},n),o=r[t];return o||(o=r[t]=[]),o}function G3(e,t,n,r){e&&t&&t[ui]&&(e[O3]?e[O3](t[ui],n,r):e[F3]&&e[F3](M3+t[ui],n))}function Tce(e,t,n,r){var o=!1;return e&&t&&t[ui]&&n&&(e[A3]?(e[A3](t[ui],n,r),o=!0):e[L3]&&(e[L3](M3+t[ui],n),o=!0)),o}function $3(e,t,n,r){for(var o=t[me];o--;){var i=t[o];i&&(!n.ns||n.ns===i[Vp].ns)&&(!r||r(i))&&(G3(e,i[Vp],i.handler,i.capture),t[aa](o,1))}}function kce(e,t,n){if(t[ui])$3(e,Y3(e,t[ui]),t,n);else{var r=Kw.get(e,H_,{});Ie(r,function(o,i){$3(e,i,t,n)}),_r(r)[me]===0&&Kw.kill(e,H_)}}function pi(e,t){var n;return t?(we(t)?n=[e].concat(t):n=[e,t],n=W_("xx",n).ns[$i](".")):n=e,n}function va(e,t,n,r,o){o===void 0&&(o=!1);var i=!1;if(e)try{var s=W_(t,r);if(i=Tce(e,s,n,o),i&&Kw.accept(e)){var a={guid:Pce++,evtName:s,handler:n,capture:o};Y3(e,s.type)[ze](a)}}catch{}return i}function Pc(e,t,n,r,o){if(o===void 0&&(o=!1),e)try{var i=W_(t,r),s=!1;kce(e,i,function(a){return i.ns&&!n||a.handler===n?(s=!0,!0):!1}),s||G3(e,i,n,o)}catch{}}function XN(e,t,n,r){return r===void 0&&(r=!1),va(e,t,n,null,r)}function ZN(e,t,n,r){r===void 0&&(r=!1),Pc(e,t,n,null,r)}function j_(e,t,n){var r=!1,o=Fn();o&&(r=va(o,e,t,n),r=va(o.body,e,t,n)||r);var i=An();return i&&(r=va(i,e,t,n)||r),r}function V_(e,t,n){var r=Fn();r&&(Pc(r,e,t,n),Pc(r.body,e,t,n));var o=An();o&&Pc(o,e,t,n)}function ih(e,t,n,r){var o=!1;return t&&e&&e[me]>0&&ee(e,function(i){i&&(!n||wt(n,i)===-1)&&(o=j_(i,t,r)||o)}),o}function Y_(e,t,n,r){var o=!1;return t&&e&&we(e)&&(o=ih(e,t,n,r),!o&&n&&n[me]>0&&(o=ih(e,t,null,r))),o}function du(e,t,n){e&&we(e)&&ee(e,function(r){r&&V_(r,t,n)})}function Jw(e,t,n){return Y_([W3,B3,B_],e,t,n)}function Xw(e,t){du([W3,B3,B_],e,t)}function sh(e,t,n){function r(s){var a=An();e&&a&&a.visibilityState==="hidden"&&e(s)}var o=pi(j3,n),i=ih([B_],e,t,o);return(!t||wt(t,zw)===-1)&&(i=ih([zw],r,t,o)||i),!i&&t&&(i=sh(e,null,n)),i}function Zw(e,t){var n=pi(j3,t);du([B_],e,n),du([zw],null,n)}function ah(e,t,n){function r(s){var a=An();e&&a&&a.visibilityState==="visible"&&e(s)}var o=pi(V3,n),i=ih([H3],e,t,o);return i=ih([zw],r,t,o)||i,!i&&t&&(i=ah(e,null,n)),i}function Qw(e,t){var n=pi(V3,t);du([H3],e,n),du([zw],null,n)}var M3,L3,A3,F3,O3,H_,zw,B_,H3,B3,W3,j3,V3,Dce,Ice,Pce,Kw,bce,q3=ne(()=>{Ne();xt();Zp();On();M3="on",L3="attachEvent",A3="addEventListener",F3="detachEvent",O3="removeEventListener",H_="events",zw="visibilitychange",B_="pagehide",H3="pageshow",B3="unload",W3="beforeunload",j3=Pr("aiEvtPageHide"),V3=Pr("aiEvtPageShow"),Dce=/\.[\.]+/g,Ice=/[\.]+$/,Pce=1,Kw=w_("events"),bce=/^([^.]*)(?:\.(.+)|)/});var QN,z3=ne(()=>{hw();QN=un({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var Ft=ne(()=>{yY();CY();AR();T3();GN();v_();NN();lN();da();k3();N3();Ne();hw();q3();ru();Fo();bN();N_();bs();U_();z3();PN();Zp();$_();M_();MN();iu();S_();mN()});var wa,K3,eL,G_,q_=ne(()=>{wa="",K3="https://browser.events.data.microsoft.com/OneCollector/1.0/",eL="version",G_="properties"});var tL,ch,ya,nL,Vt,bc,z_,K_,J_,X_,ey,Z_=ne(()=>{tL="initialize",ch="indexOf",ya="timings",nL="pollInternalLogs",Vt="value",bc="length",z_="processTelemetryStart",K_="handleField",J_="rmSanitizer",X_="rmFieldSanitizer",ey="canHandle"});function mr(e){return!(e===wa||ae(e))}function Q_(e){if(e){var t=Fi(e,"-");if(t>-1)return Zf(e,t)}return wa}function eG(){return rL===null&&(rL=!Ve(Uint8Array)&&!Fce()&&!tu()),rL}function eD(e){return!!(e&&Sr(e)&&e>=1&&e<=4)}function tD(e,t,n){if(!t&&!mr(t)||typeof e!="string")return null;var r=typeof t;if(r==="string"||r==="number"||r==="boolean"||we(t))t={value:t};else if(r==="object"&&!X3.call(t,"value"))t={value:n?JSON.stringify(t):t};else if(ae(t[Vt])||t[Vt]===wa||!Re(t[Vt])&&!Sr(t[Vt])&&!na(t[Vt])&&!we(t[Vt]))return null;if(we(t[Vt])&&!iL(t[Vt]))return null;if(!ae(t.kind)){if(we(t[Vt])||!ty(t.kind))return null;t[Vt]=t[Vt].toString()}return t}function uh(e,t,n){var r=-1;if(!Ve(e))if(t>0&&(t===32?r=8192:t<=13&&(r=t<<5)),Ace(n))r===-1&&(r=0),r|=n;else{var o=Lce[Ca(e)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function tG(e,t,n){n===void 0&&(n=!0);var r;return e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||wa}function nG(e){e===void 0&&(e="D");var t=Ww();return e==="B"?t="{"+t+"}":e==="P"?t="("+t+")":e==="N"&&(t=t.replace(/-/g,wa)),t}function Dd(e,t,n,r,o){var i={},s=!1,a=0,c=arguments[bc],l=arguments;for(na(l[0])&&(s=l[0],a++);a<c;a++){var e=l[a];Ie(e,function(f,m){s&&m&&en(m)?we(m)?(i[f]=i[f]||[],ee(m,function(d,p){d&&en(d)?i[f][p]=Dd(!0,i[f][p],d):i[f][p]=d})):i[f]=Dd(!0,i[f],m):i[f]=m})}return i}function ty(e){return e===0||e>0&&e<=13||e===32}function Ace(e){return e>=0&&e<=9}function Fce(){var e=qn();if(!Ve(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t[ch]("safari")>=0||t[ch]("firefox")>=0)&&t[ch]("chrome")<0)return!0}return!1}function iL(e){return e[bc]>0}function ny(e,t){var n=e;n[ya]=n[ya]||{},n[ya][z_]=n[ya][z_]||{},n[ya][z_][t]=Bo()}function Ca(e){var t=0;if(e!=null){var n=typeof e;n==="string"?t=1:n==="number"?t=2:n==="boolean"?t=3:n===ic&&(t=4,we(e)?(t=4096,e[bc]>0&&(t|=Ca(e[0]))):X3.call(e,"value")&&(t=8192|Ca(e[Vt])))}return t}function nD(){return!!vt("chrome")}function rG(e,t,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,Rce,r),n&&s(a,J3,n),a.open(e,t,!o),n&&s(a,J3,n),!o&&i&&s(a,Nce,i),a}function mu(e){return e>0}var Tc,oL,lh,X3,Rce,J3,Nce,Lce,rL,Z3,Q3,Bo,rD=ne(()=>{Ft();Fo();Ne();q_();Z_();oL="4.3.6",lh="1DS-Web-JS-"+oL,X3=rw.hasOwnProperty,Rce="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",J3="withCredentials",Nce="timeout",Lce=(Tc={},Tc[0]=0,Tc[2]=6,Tc[1]=1,Tc[3]=7,Tc[4098]=6,Tc[4097]=1,Tc[4099]=7,Tc),rL=null,Z3=Qf(),Q3=Lp();Bo=dw});function Uce(e){return e&&(!e.getProperty||!e.setProperty)&&Ln("Invalid property storage override passed."),!0}var Oce,oG,iG=ne(()=>{Fo();fr();Ft();Ne();q_();rD();Z_();Oce=Es({endpointUrl:K3,propertyStorageOverride:{isVal:Uce}});oG=(function(e){Ao(t,e);function t(){var n=e.call(this)||this;return Xe(t,n,function(r,o){r[tL]=function(i,s,a,c){dn(r,function(){return"AppInsightsCore.initialize"},function(){try{o[tL](jt(i,Oce,a||r.logger,!1).cfg,s,a,c)}catch(f){var l=r.logger,u=Ee(f);u[ch]("channels")!==-1&&(u+=`
 - Channels must be provided through config.channels only!`),se(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},r.track=function(i){dn(r,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s[ya]=s[ya]||{},s[ya].trackStart=Bo(),eD(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=lh;var c=s.baseData=s.baseData||{};c[G_]=c[G_]||{};var l=c[G_];l[eL]=l[eL]||r.pluginVersionString||wa}o.track(s)},function(){return{item:i}},!i.sync)},r[nL]=function(i){return o[nL](i||"InternalLog")}}),n}return t.__ieDyn=1,t})(Ic)});var sG,aG,cG,lG,uG,fG=ne(()=>{Ft();sG=un({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),aG=un({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),cG=un({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),lG=un({Normal:1,Critical:2}),uG=un({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});function dG(e){return e=="__proto__"||e=="constructor"||e=="prototype"}var mG,pG=ne(()=>{Ft();Ne();q_();rD();Z_();mG=(function(){function e(t){var n=this,r={},o=[],i=[];t&&i.push(t);function s(u,f){var m,d=r[u];if(d&&(m=d[f]),!m&&m!==null){if(Re(u)&&Re(f))if(i[bc]>0){for(var p=0;p<i[bc];p++)if(i[p][K_](u,f)){m={canHandle:!0,fieldHandler:i[p]};break}}else o[bc]===0&&(m={canHandle:!0});if(!m&&m!==null){m=null;for(var p=0;p<o[bc];p++)if(o[p][K_](u,f)){m={canHandle:!0,handler:o[p],fieldHandler:null};break}}if(!d){if(dG(u))return null;d=r[u]={}}if(dG(f))return null;d[f]=m}return m}n.clearCache=function(){r={}},n.addSanitizer=function(u){u&&(hR(o,u)||o.push(u),r={})},n.addFieldSanitizer=function(u){u&&(hR(i,u)||i.push(u),r={})},n[J_]=function(u){if(u){var f=wt(o,u);f!==-1&&(o.splice(f,1),r={}),ee(o,function(m){m&&m[J_]&&m[J_](u)})}},n[X_]=function(u){if(u){var f=wt(i,u);f!==-1&&(i.splice(f,1),r={}),ee(o,function(m){m&&m[X_]&&m[X_](u)})}},n.isEmpty=function(){return Op(o)+Op(i)===0},n[K_]=function(u,f){var m=s(u,f);return m?m[ey]:!1},n[Vt]=function(u,f,m,d){var p=s(u,f);if(p&&p[ey]){if(!p[ey])return null;if(p.handler)return p.handler[Vt](u,f,m,d);if(!Re(f)||ae(m)||m===wa)return null;var g=null,h=Ca(m);if((h&8192)===8192){var w=h&-8193;if(g=m,!mr(g[Vt])||w!==1&&w!==2&&w!==3&&(w&4096)!==4096)return null}else h===1||h===2||h===3||(h&4096)===4096?g=c(u,f,m):h===4&&(g=c(u,f,d?JSON.stringify(m):m));if(g)return a(p,u,f,h,g,d)}return null},n.property=function(u,f,m,d){var p=s(u,f);if(!p||!p[ey]||!Re(f)||ae(m)||!mr(m[Vt]))return null;var g=Ca(m[Vt]);return g===0?null:a(p,u,f,g,m,d)};function a(u,f,m,d,p,g){if(u.handler)return u.handler.property(f,m,p,g);if(!ae(p.kind)){if((d&4096)===4096||!ty(p.kind))return null;p[Vt]=p[Vt].toString()}return l(u.fieldHandler,f,m,d,p)}function c(u,f,m){return mr(m)?{value:m}:null}function l(u,f,m,d,p){if(p&&u){var g=u.getSanitizer(f,m,d,p.kind,p.propertyType);if(g)if(d===4){var h={},w=p[Vt];Ie(w,function(v,y){var S=f+"."+m;if(mr(y)){var I=c(S,v,y);I=l(u,S,v,Ca(y),I),I&&(h[v]=I[Vt])}}),p[Vt]=h}else{var C={path:f,name:m,type:d,prop:p,sanitizer:n};p=g.call(n,C)}}return p}}return e.getFieldType=Ca,e})()});var hG={};hC(hG,{ActiveStatus:()=>ai,AppInsightsCore:()=>oG,BaseTelemetryPlugin:()=>Dc,DiagnosticLogger:()=>su,EventLatency:()=>aG,EventPersistence:()=>lG,EventPropertyType:()=>cG,EventsDiscardedReason:()=>xs,FullVersionString:()=>lh,InternalAppInsightsCore:()=>Ic,LoggingSeverity:()=>QN,MinChannelPriorty:()=>NR,NotificationManager:()=>Mw,PerfEvent:()=>wd,PerfManager:()=>Bw,ProcessTelemetryContext:()=>jN,SenderPostManager:()=>_d,TraceLevel:()=>uG,Undefined:()=>ea,ValueKind:()=>sG,ValueSanitizer:()=>mG,Version:()=>oL,_InternalLogMessage:()=>gd,__getRegisteredEvents:()=>JN,_appendHeader:()=>Kp,_getAllResponseHeaders:()=>vc,_logInternalMessage:()=>yN,_testHookMaxUnloadHooksCb:()=>VN,_throwInternal:()=>se,_warnToConsole:()=>uo,addEventHandler:()=>j_,addEventListeners:()=>Y_,addPageHideEventListener:()=>sh,addPageShowEventListener:()=>ah,addPageUnloadEventListener:()=>Jw,areCookiesSupported:()=>nh,arrForEach:()=>ee,arrIndexOf:()=>wt,arrMap:()=>cc,arrReduce:()=>fw,attachEvent:()=>XN,blockDynamicConversion:()=>Aw,convertAllHeadersToMap:()=>g_,cookieAvailable:()=>nh,createCookieMgr:()=>Sc,createDynamicConfig:()=>jt,createEnumStyle:()=>un,createGuid:()=>nG,createProcessTelemetryContext:()=>fo,createTraceParent:()=>FN,createUniqueNamespace:()=>Pr,createUnloadHandlerContainer:()=>Sd,dateNow:()=>En,detachEvent:()=>ZN,disallowsSameSiteNone:()=>R_,doPerf:()=>dn,dumpObj:()=>Ee,eventOff:()=>Pc,eventOn:()=>va,extend:()=>Dd,findW3cTraceParent:()=>$N,forceDynamicConversion:()=>cN,formatErrorMessageXdr:()=>pd,formatErrorMessageXhr:()=>hc,formatTraceParent:()=>UN,generateW3CId:()=>yd,getCommonSchemaMetaData:()=>uh,getConsole:()=>_w,getCookieValue:()=>tG,getCrypto:()=>Dw,getDocument:()=>An,getDynamicConfigHandler:()=>Lw,getExceptionName:()=>tn,getFieldValueType:()=>Ca,getGlobal:()=>co,getGlobalInst:()=>vt,getHistory:()=>Vx,getIEVersion:()=>Pw,getISOString:()=>Is,getJSON:()=>Ir,getLocation:()=>hd,getMsCrypto:()=>Iw,getNavigator:()=>qn,getPerformance:()=>ed,getResponseText:()=>Ps,getSetValue:()=>xw,getTenantId:()=>Q_,getTime:()=>Bo,getWindow:()=>Fn,hasDocument:()=>Qf,hasHistory:()=>mR,hasJSON:()=>ma,hasNavigator:()=>lw,hasOwnProperty:()=>ur,hasWindow:()=>Lp,isArray:()=>we,isArrayValid:()=>iL,isBeaconsSupported:()=>Bi,isBoolean:()=>na,isChromium:()=>nD,isDate:()=>Wx,isDocumentObjectAvailable:()=>Z3,isError:()=>Xf,isFetchSupported:()=>wc,isFunction:()=>ke,isGreaterThanZero:()=>mu,isIE:()=>nu,isLatency:()=>eD,isNotTruthy:()=>lR,isNullOrUndefined:()=>ae,isNumber:()=>Sr,isObject:()=>en,isReactNative:()=>tu,isSampledFlag:()=>ON,isString:()=>Re,isTruthy:()=>ys,isTypeof:()=>cR,isUint8ArrayAvailable:()=>eG,isUndefined:()=>Ve,isValidSpanId:()=>Ed,isValidTraceId:()=>Cd,isValidTraceParent:()=>F_,isValueAssigned:()=>mr,isValueKind:()=>ty,isWindowObjectAvailable:()=>Q3,isXhrSupported:()=>Xp,mergeEvtNamespace:()=>pi,newGuid:()=>Ww,newId:()=>Rw,normalizeJsName:()=>md,objDefineAccessors:()=>uR,objForEachKey:()=>Ie,objFreeze:()=>ao,objKeys:()=>_r,objSeal:()=>fR,onConfigChange:()=>dr,openXhr:()=>rG,optimizeObject:()=>Ho,parseResponse:()=>xd,parseTraceParent:()=>jw,perfNow:()=>dw,prependTransports:()=>gc,proxyAssign:()=>qR,proxyFunctionAs:()=>pc,proxyFunctions:()=>mi,random32:()=>yc,randomValue:()=>oN,removeEventHandler:()=>V_,removeEventListeners:()=>du,removePageHideEventListener:()=>Zw,removePageShowEventListener:()=>Qw,removePageUnloadEventListener:()=>Xw,safeGetCookieMgr:()=>IN,safeGetLogger:()=>Ec,sanitizeProperty:()=>tD,setEnableEnvMocks:()=>tN,setProcessTelemetryTimings:()=>ny,setValue:()=>Hi,strContains:()=>Sn,strEndsWith:()=>td,strFunction:()=>Ip,strObject:()=>ic,strPrototype:()=>ws,strStartsWith:()=>Up,strTrim:()=>nt,strUndefined:()=>ea,throwError:()=>Ln,toISOString:()=>Is,useXDomainRequest:()=>bw});var Id=ne(()=>{iG();fG();pG();Ft();rD()});var Pd,oD,iD,sL=ne(()=>{Pd="REAL_TIME",oD="NEAR_REAL_TIME",iD="BEST_EFFORT"});var Ts,sD,gG,aL,vG,wG,cL,aD,ry,fh,yG,CG,EG,cD,lL,lD,uD,fD,oy,uL,fL,SG,dh,dL,dD,iy=ne(()=>{Ts="",sD="drop",gG="send",aL="requeue",vG="rspFail",wG="oth",cL="no-cache, no-store",aD="application/x-json-stream",ry="cache-control",fh="content-type",yG="kill-tokens",CG="kill-duration",EG="time-delta-millis",cD="client-version",lL="client-id",lD="time-delta-to-apply-millis",uD="upload-time",fD="apikey",oy="AuthMsaDeviceTicket",uL="WebAuthToken",fL="AuthXToken",SG="NoResponseBody",dh="msfpc",dL="trace",dD="user"});var sy,mD,pD,ay,Ke,Ea,hi,mn,Sa,Kn,xa,hD,bd,gD,Td,vD,wD,xG,mL,pL,_G,yD,hL,gL,DG,vL,wL,yL,CD,ED,SD,cy,CL,ks,mh,Yr,Wo,ly,ph,uy,IG,xD,_D,hh,EL,fy,DD,ID,PD,bD,dy,PG,SL,bG,TG,my,pu,kd,gh=ne(()=>{sy="allowRequestSending",mD="shouldAddClockSkewHeaders",pD="getClockSkewHeaderValue",ay="setClockSkew",Ke="length",Ea="concat",hi="iKey",mn="count",Sa="events",Kn="push",xa="split",hD="toLowerCase",bd="hdrs",gD="useHdrs",Td="initialize",vD="setTimeoutOverride",wD="clearTimeoutOverride",xG="payloadPreprocessor",mL="overrideEndpointUrl",pL="avoidOptions",_G="disableEventTimings",yD="enableCompoundKey",hL="disableXhrSync",gL="disableFetchKeepAlive",DG="addNoResponse",vL="useSendBeacon",wL="fetchCredentials",yL="alwaysUseXhrOverride",CD="serializeOfflineEvt",ED="getOfflineRequestDetails",SD="createPayload",cy="createOneDSPayload",CL="payloadBlob",ks="headers",mh="_thePayload",Yr="batches",Wo="sendType",ly="canSendRequest",ph="sendQueuedRequests",uy="setUnloading",IG="isTenantKilled",xD="sendSynchronousBatch",_D="_transport",hh="getWParam",EL="isBeacon",fy="timings",DD="isTeardown",ID="_sendReason",PD="setKillSwitchTenants",bD="_backOffTransmission",dy="identifier",PG="ignoreMc1Ms0CookieProcessing",SL="autoFlushEventsLimit",bG="disableAutoBatchFlushLimit",TG="overrideInstrumentationKey",my="sendAttempt",pu="latency",kd="sync"});function RG(e){var t=(e.ext||{}).intweb;return t&&mr(t[dh])?t[dh]:null}function kG(e){for(var t=null,n=0;t===null&&n<e[Ke];n++)t=RG(e[n]);return t}var hu,TD=ne(()=>{Id();iy();gh();hu=(function(){function e(t,n){var r=n?[][Ea](n):[],o=this,i=kG(r);o[hi]=function(){return t},o.Msfpc=function(){return i||Ts},o[mn]=function(){return r[Ke]},o[Sa]=function(){return r},o.addEvent=function(s){return s?(r[Kn](s),i||(i=RG(s)),!0):!1},o[xa]=function(s,a){var c;if(s<r[Ke]){var l=r[Ke]-s;ae(a)||(l=a<l?a:l),c=r.splice(s,l),i=kG(r)}return new e(t,c)}}return e.create=function(t,n){return new e(t,n)},e})()});var NG,LG=ne(()=>{fr();gh();NG=(function(){function e(){var t=!0,n=!0,r=!0,o="use-collector-delta",i=!1;Xe(e,this,function(s){s[sy]=function(){return t},s.firstRequestSent=function(){r&&(r=!1,i||(t=!1))},s[mD]=function(){return n},s[pD]=function(){return o},s[ay]=function(a){i||(a?(o=a,n=!0,i=!0):n=!1,t=!0)}})}return e.__ieDyn=1,e})()});var $ce,AG,FG=ne(()=>{fr();Id();gh();$ce=1e3,AG=(function(){function e(){var t={};function n(r){var o=[];return r&&ee(r,function(i){o[Kn](nt(i))}),o}Xe(e,this,function(r){r[PD]=function(o,i){if(o&&i)try{var s=n(o[xa](","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*$ce,c=0;c<s[Ke];++c)t[s[c]]=En()+a}catch{return[]}return[]},r[IG]=function(o){var i=t,s=nt(o);return i[s]!==void 0&&i[s]>En()?!0:(delete i[s],!1)}})}return e.__ieDyn=1,e})()});function UG(e){return!(e>=300&&e<500&&e!=429||e==501||e==505)}function kD(e){var t=0,n=OG*Mce,r=OG*Hce,o=Ai(Math.random()*(r-n))+n;return t=Math.pow(2,e)*o,Yl(t,Bce)}var Mce,Hce,OG,Bce,xL=ne(()=>{Ne();Mce=.8,Hce=1.2,OG=3e3,Bce=6e5});function Gce(e,t,n,r,o){if(o&&t){var i=e(o.value,o.kind,o.propertyType);if(i>-1){var s=t[$G];s||(s=t[$G]={f:{}});var a=s[RD];if(a||(a=s[RD]={}),n)for(var c=0;c<n.length;c++){var l=n[c];a[l]||(a[l]={f:{}});var u=a[l][RD];u||(u=a[l][RD]={}),a=u}a=a[r]={},we(o.value)?a.a={t:i}:a.t=i}}}var Wce,jce,MG,HG,Vce,$G,RD,Yce,BG,WG=ne(()=>{fr();Id();TD();iy();Ne();Wce=20,jce=3984588,MG=65e3,HG=2e6,Vce=Yl(HG,MG),$G="metadata",RD="f",Yce=/\./,BG=(function(){function e(t,n,r,o,i,s){var a="data",c="baseData",l="ext",u=!!o,f=!0,m=n,d={},p=!!s,g=i||uh;Xe(e,this,function(h){h.createPayload=function(v,y,S,I,_,A){return{apiKeys:[],payloadBlob:Ts,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:v,isTeardown:y,isSync:S,isBeacon:I,sendType:A,sendReason:_}},h.appendPayload=function(v,y,S){var I=v&&y&&!v.overflow;return I&&dn(t,function(){return"Serializer:appendPayload"},function(){for(var _=y.events(),A=v.payloadBlob,U=v.numEvents,R=!1,E=[],x=[],b=v.isBeacon,D=b?MG:jce,T=b?Vce:HG,k=0,L=0;k<_.length;){var N=_[k];if(N){if(U>=S){v.overflow=y.split(k);break}var H=h.getEventBlob(N);if(H&&H.length<=T){var B=H.length,z=A.length;if(z+B>D){v.overflow=y.split(k);break}A&&(A+=`
`),A+=H,L++,L>Wce&&(oa(A,0,1),L=0),R=!0,U++}else H?E.push(N):x.push(N),_.splice(k,1),k--}k++}if(E.length>0&&v.sizeExceed.push(hu.create(y.iKey(),E)),x.length>0&&v.failedEvts.push(hu.create(y.iKey(),x)),R){v.batches.push(y),v.payloadBlob=A,v.numEvents=U;var Y=y.iKey();wt(v.apiKeys,Y)===-1&&v.apiKeys.push(Y)}},function(){return{payload:v,theBatch:{iKey:y.iKey(),evts:y.events()},max:S}}),I},h.getEventBlob=function(v){try{return dn(t,function(){return"Serializer.getEventBlob"},function(){var y={};y.name=v.name,y.time=v.time,y.ver=v.ver,y.iKey="o:"+Q_(v.iKey);var S={},I;p||(I=function(R,E,x){Gce(g,S,R,E,x)});var _=v[l];_&&(y[l]=S,Ie(_,function(R,E){var x=S[R]={};C(E,x,"ext."+R,!0,null,null,!0)}));var A=y[a]={};A.baseType=v.baseType;var U=A[c]={};return C(v.baseData,U,c,!1,[c],I,f),C(v.data,A,a,!1,[],I,f),JSON.stringify(y)},function(){return{item:v}})}catch{return null}};function w(v,y){var S=d[v];return S===void 0&&(v.length>=7&&(S=Up(v,"ext.metadata")||Up(v,"ext.web")),d[v]=S),S}function C(v,y,S,I,_,A,U){Ie(v,function(R,E){var x=null;if(E||mr(E)){var b=S,D=R,T=_,k=y;if(u&&!I&&Yce.test(R)){var L=R.split("."),N=L.length;if(N>1){T&&(T=T.slice());for(var H=0;H<N-1;H++){var B=L[H];k=k[B]=k[B]||{},b+="."+B,T&&T.push(B)}D=L[N-1]}}var z=I&&w(b,D);if(!z&&m&&m.handleField(b,D)?x=m.value(b,D,E,r):x=tD(D,E,r),x){var Y=x.value;if(k[D]=Y,A&&A(T,D,x),U&&typeof Y=="object"&&!we(Y)){var G=T;G&&(G=G.slice(),G.push(D)),C(E,Y,b+"."+D,I,G,A,U)}}}})}})}return e.__ieDyn=1,e})()});function vh(e,t){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return lY([e,t],n,r,o)}}}var _L=ne(()=>{Ne()});function Nd(e,t,n){IL[e]=t,n!==!1&&(PL[t]=e)}function ND(e,t){var n=!1;if(e&&t){var r=_r(e);if(r&&r[Ke]>0)for(var o=t[hD](),i=0;i<r[Ke];i++){var s=r[i];if(s&&ur(t,s)&&s[hD]()===o){n=!0;break}}}return n}function wh(e,t,n,r){t&&n&&n[Ke]>0&&(r&&IL[t]?(e[bd][IL[t]]=n,e[gD]=!0):e.url+="&"+t+"="+n)}function Jce(e,t,n){for(var r=0;r<e[Ke];r++)if(e[r].name===t){e[r].value=n;return}e[Kn]({name:t,value:n})}function Xce(e,t){for(var n=0;n<e[Ke];n++)if(e[n].name===t){e.splice(n,1);return}}var Rd,DL,qce,zce,Kce,IL,PL,jG,VG=ne(()=>{fr();Id();Ne();LG();TD();iy();FG();xL();WG();_L();gh();DL="sendAttempt",qce="&"+SG+"=true",zce="?cors=true&"+fh[hD]()+"="+aD,Kce=(Rd={},Rd[1]=aL,Rd[100]=aL,Rd[200]="sent",Rd[8004]=sD,Rd[8003]=sD,Rd),IL={},PL={};Nd(oy,oy,!1);Nd(cD,cD);Nd(lL,"Client-Id");Nd(fD,fD);Nd(lD,lD);Nd(uD,uD);Nd(fL,fL);jG=(function(){function e(t,n,r,o){var i,s,a,c,l=!1,u,f,m,d,p,g,h,w,C,v,y,S,I,_,A,U,R,E,x,b,D,T,k,L,N,H,B,z;Xe(e,this,function(Y){Mt();var G=!0;Y[Td]=function($,Q,ie){L||(p=Q,S=Q.getCookieMgr(),f=ie,m=f.diagLog(),Ss(b,dr($,function(ve){var be,Ge=ve.cfg,ye=ve.cfg.extensionConfig[ie.identifier];N=vh(ye[vD],ye[wD]),mr(Ge.anonCookieName)?Jce(h,"anoncknm",Ge.anonCookieName):Xce(h,"anoncknm"),D=ye[xG],T=ye.payloadListener;var P=ye.httpXHROverride,F=ye[mL]?ye[mL]:Ge.endpointUrl;i=F+zce,_=Ve(ye[pL])?!0:!ye[pL],y=!ye[_G];var M=ye.valueSanitizer,q=ye.stringifyObjects,J=!!Ge[yD];Ve(ye[yD])||(J=!!ye[yD]),A=ye.xhrTimeout,U=!!ye[hL],R=!!ye[gL],x=ye[DG]!==!1,H=!!ye.excludeCsMetaData,Q.getPlugin("LocalStorage")&&(R=!0),l=!tu(),v=new BG(p,M,q,J,uh,H),ae(ye[vL])||(l=!!ye[vL]),ye[wL]&&(z=ye[wL]);var te=Be();B?B.SetConfig(te):(B=new _d,B[Td](te,m));var ue=P,Oe=ye[yL]?P:null,Ze=ye[yL]?P:null,Te=[3,2];if(!P){g=!1;var yo=[];tu()?(yo=[2,1],Te=[2,1,3]):yo=[1,2,3],yo=gc(yo,ye.transports),P=ce(yo,!1),P||uo(m,"No available transport to send events"),ue=ce(yo,!0)}Oe||(Te=gc(Te,ye.unloadTransports),Oe=ce(Te,!0)),E=!g&&(l&&Bi()||!R&&wc(!0)),d=(be={},be[0]=P,be[1]=ue||ce([1,2,3],!0),be[2]=Oe||ue||ce([1],!0),be[3]=Ze||ce([2,3],!0)||ue||ce([1],!0),be)})),L=!0)},Y.addResponseHandler=function($){return k[Kn]($),{rm:function(){var Q=k.indexOf($);Q>=0&&k.splice(Q,1)}}},Y[CD]=function($){try{if(v)return v.getEventBlob($)}catch{}return Ts},Y[ED]=function(){try{var $=v&&v[SD](0,!1,!1,!1,1,0);return le($,_)}catch{}return null},Y[cy]=function($,Q){try{var ie=[];ee($,function(P){Q&&(P=Ho(P));var F=hu.create(P[hi],[P]);ie[Kn](F)});for(var ve=null;ie[Ke]>0&&v;){var be=ie.shift();be&&be[mn]()>0&&(ve=ve||v[SD](0,!1,!1,!1,1,0),v.appendPayload(ve,be,t))}var Ge=le(ve,_),ye={data:ve[CL],urlString:Ge.url,headers:Ge[bd],timeout:A,disableXhrSync:U,disableFetchKeepAlive:R};return _&&(ND(ye[ks],ry)||(ye[ks][ry]=cL),ND(ye[ks],fh)||(ye[ks][fh]=aD)),ye}catch{}return null};function ce($,Q){try{return B&&B.getSenderInst($,Q)}catch{}return null}Y._getDbgPlgTargets=function(){return[d[0],s,v,d,Be(),i]};function Be(){try{var $={xdrOnComplete:mt,fetchOnComplete:wo,xhrOnComplete:Dn,beaconOnRetry:Jt},Q={enableSendPromise:!1,isOneDs:!0,disableCredentials:!G,fetchCredentials:z,disableXhr:!1,disableBeacon:!l,disableBeaconSync:!l,disableFetchKeepAlive:R,timeWrapper:N,addNoResponse:x,senderOnCompleteCallBack:$};return Q}catch{}return null}function mt($,Q,ie){var ve=Ps($);gn(Q,200,{},ve),yi(ve)}function Mt(){var $;i=null,s=new AG,a=!1,c=new NG,l=!1,u=0,f=null,m=null,d=null,p=null,g=!0,h=[],w={},C=[],v=null,y=!1,S=null,I=!1,_=!1,A=$,U=$,R=$,E=$,x=$,b=[],D=$,T=$,k=[],L=!1,N=vh(),H=!1,B=null}function wo($,Q,ie,ve){var be=function(P,F,M){gn(Q,P,F,M),yi(M)},Ge={},ye=$[ks];ye&&ye.forEach(function(P,F){Ge[F]=P}),be($.status,Ge,ie||Ts)}function Dn($,Q,ie){var ve=Ps($);gn(Q,$.status,vc($,!0),ve),yi(ve)}function gn($,Q,ie,ve){try{$(Q,ie,ve)}catch(be){se(m,2,518,Ee(be))}}function Jt($,Q,ie){var ve=$,be=200,Ge=ve[mh],ye=$.urlString+(x?qce:Ts);try{var P=qn();if(Ge){var F=!!p.getPlugin("LocalStorage"),M=[],q=[];ee(Ge[Yr],function(J){if(M&&J&&J[mn]()>0)for(var te=J[Sa](),ue=0;ue<te[Ke];ue++)if(P.sendBeacon(ye,v.getEventBlob(te[ue])))q[Kn](J[ue]);else{M[Kn](J[xa](ue));break}else M[Kn](J[xa](0))}),q[Ke]>0&&(Ge.sentEvts=q),F||Qn(M,8003,Ge[Wo],!0)}else be=0}catch(J){uo(m,"Failed to send telemetry using sendBeacon API. Ex:"+Ee(J)),be=0}finally{gn(Q,be,{},Ts)}}function pt($){return $===2||$===3}function rt($){return I&&pt($)&&($=2),$}Y.addHeader=function($,Q){w[$]=Q},Y.removeHeader=function($){delete w[$]},Y[ly]=function(){return Dt()&&c[sy]()},Y[ph]=function($,Q){Ve($)&&($=0),I&&($=rt($),Q=2),j(C,$,0)&&xe(Ct(),0,!1,$,Q||0)},Y.isCompletelyIdle=function(){return!a&&u===0&&C[Ke]===0},Y[uy]=function($){I=$},Y.addBatch=function($){if($&&$[mn]()>0){if(s.isTenantKilled($[hi]()))return!1;C[Kn]($)}return!0},Y.teardown=function(){C[Ke]>0&&xe(Ct(),0,!0,2,2),ee(b,function($){$&&$.rm&&$.rm()}),b=[]},Y.pause=function(){a=!0},Y.resume=function(){a=!1,Y[ph](0,4)},Y[xD]=function($,Q,ie){$&&$[mn]()>0&&(ae(Q)&&(Q=1),I&&(Q=rt(Q),ie=2),xe([$],0,!1,Q,ie||0))};function Dt(){return!a&&u<n}function Ct(){var $=C;return C=[],$}function j($,Q,ie){var ve=!1;return $&&$[Ke]>0&&!a&&d[Q]&&v&&(ve=Q!==0||Dt()&&(ie>0||c[sy]())),ve}function oe($){var Q={};return $&&ee($,function(ie,ve){Q[ve]={iKey:ie[hi](),evts:ie[Sa]()}}),Q}function xe($,Q,ie,ve,be){if(!(!$||$[Ke]===0)){if(a){Qn($,1,ve);return}ve=rt(ve);try{var Ge=$,ye=ve!==0;dn(p,function(){return"HttpManager:_sendBatches"},function(P){P&&($=$.slice(0));for(var F=[],M=null,q=Bo(),J=d[ve]||(ye?d[1]:d[0]),te=J&&J[_D],ue=E&&(I||pt(ve)||te===3||J._isSync&&te===2);j($,ve,Q);){var Oe=$.shift();Oe&&Oe[mn]()>0&&(s.isTenantKilled(Oe[hi]())?F[Kn](Oe):(M=M||v[SD](Q,ie,ye,ue,be,ve),v.appendPayload(M,Oe,t)?M.overflow!==null&&($=[M.overflow][Ea]($),M.overflow=null,et(M,q,Bo(),be),q=Bo(),M=null):(et(M,q,Bo(),be),q=Bo(),$=[Oe][Ea]($),M=null)))}M&&et(M,q,Bo(),be),$[Ke]>0&&(C=$[Ea](C)),Qn(F,8004,ve)},function(){return{batches:oe(Ge),retryCount:Q,isTeardown:ie,isSynchronous:ye,sendReason:be,useSendBeacon:pt(ve),sendType:ve}},!ye)}catch(P){se(m,2,48,"Unexpected Exception sending batch: "+Ee(P))}}}function le($,Q){var ie={url:i,hdrs:{},useHdrs:!1};Q?(ie[bd]=Dd(ie[bd],w),ie.useHdrs=_r(ie.hdrs)[Ke]>0):Ie(w,function(P,F){PL[P]?wh(ie,PL[P],F,!1):(ie[bd][P]=F,ie[gD]=!0)}),wh(ie,lL,"NO_AUTH",Q),wh(ie,cD,lh,Q);var ve=Ts;ee($.apiKeys,function(P){ve[Ke]>0&&(ve+=","),ve+=P}),wh(ie,fD,ve,Q),wh(ie,uD,En().toString(),Q);var be=Lr($);if(mr(be)&&(ie.url+="&ext.intweb.msfpc="+be),c[mD]()&&wh(ie,lD,c[pD](),Q),p[hh]){var Ge=p[hh]();Ge>=0&&(ie.url+="&w="+Ge)}for(var ye=0;ye<h[Ke];ye++)ie.url+="&"+h[ye].name+"="+h[ye].value;return ie}function De($,Q,ie){$[Q]=$[Q]||{},$[Q][f.identifier]=ie}function et($,Q,ie,ve){if($&&$.payloadBlob&&$.payloadBlob[Ke]>0){var be=!!D,Ge=d[$.sendType];!pt($[Wo])&&$[EL]&&$.sendReason===2&&(Ge=d[2]||d[3]||Ge);var ye=_;($.isBeacon||Ge[_D]===3)&&(ye=!1);var P=le($,ye);ye=ye||P[gD];var F=Bo();dn(p,function(){return"HttpManager:_doPayloadSend"},function(){for(var M=0;M<$.batches[Ke];M++)for(var q=$[Yr][M],J=q[Sa](),te=0;te<J[Ke];te++){var ue=J[te];if(y){var Oe=ue[fy]=ue[fy]||{};De(Oe,"sendEventStart",F),De(Oe,"serializationStart",Q),De(Oe,"serializationCompleted",ie)}ue[DL]>0?ue[DL]++:ue[DL]=1}Qn($[Yr],1e3+(ve||0),$[Wo],!0);var Ze={data:$[CL],urlString:P.url,headers:P[bd],_thePayload:$,_sendReason:ve,timeout:A,disableXhrSync:U,disableFetchKeepAlive:R};ye&&(ND(Ze[ks],ry)||(Ze[ks][ry]=cL),ND(Ze[ks],fh)||(Ze[ks][fh]=aD));var Te=null;Ge&&(Te=function(yo){c.firstRequestSent();var Ha=function(Us,fC){ht(Us,fC,$,ve)},Co=$[DD]||$.isSync;try{Ge.sendPOST(yo,Ha,Co),T&&T(Ze,yo,Co,$[EL])}catch(Us){uo(m,"Unexpected exception sending payload. Ex:"+Ee(Us)),gn(Ha,0,{})}}),dn(p,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Te)if($[Wo]===0&&u++,be&&!$.isBeacon&&Ge[_D]!==3){var yo={data:Ze.data,urlString:Ze.urlString,headers:Dd({},Ze[ks]),timeout:Ze.timeout,disableXhrSync:Ze[hL],disableFetchKeepAlive:Ze[gL]},Ha=!1;dn(p,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{D(yo,function(Co){Ha=!0,!g&&!Co[mh]&&(Co[mh]=Co[mh]||Ze[mh],Co[ID]=Co[ID]||Ze[ID]),Te(Co)},$.isSync||$[DD])}catch{Ha||Te(Ze)}})}else Te(Ze)})},function(){return{thePayload:$,serializationStart:Q,serializationCompleted:ie,sendReason:ve}},$.isSync)}$.sizeExceed&&$.sizeExceed[Ke]>0&&Qn($.sizeExceed,8003,$[Wo]),$.failedEvts&&$.failedEvts[Ke]>0&&Qn($.failedEvts,8002,$[Wo])}function ot($,Q){y&&ee($,function(ie){var ve=ie[fy]=ie[fy]||{};De(ve,"sendEventCompleted",Q)})}function ht($,Q,ie,ve){var be=9e3,Ge=null,ye=!1,P=!1;try{var F=!0;if(typeof $!==ea){if(Q){c[ay](Q[EG]);var M=Q[CG]||Q["kill-duration-seconds"];ee(s[PD](Q[yG],M),function(J){ee(ie[Yr],function(te){if(te[hi]()===J){Ge=Ge||[];var ue=te[xa](0);ie.numEvents-=ue[mn](),Ge[Kn](ue)}})})}if($==200||$==204){be=200;return}(!UG($)||ie.numEvents<=0)&&(F=!1),be=9e3+$%1e3}if(F){be=100;var q=ie.retryCnt;ie[Wo]===0&&(q<r?(ye=!0,Nr(function(){ie[Wo]===0&&u--,xe(ie[Yr],q+1,ie[DD],I?2:ie[Wo],5)},I,kD(q))):(P=!0,I&&(be=8001)))}}finally{ye||(c[ay](),vn(ie,be,ve,P)),Qn(Ge,8004,ie[Wo])}}function vn($,Q,ie,ve){try{ve&&f[bD]();var be=$[Yr];Q===200&&(be=$.sentEvts||$[Yr],!ve&&!$.isSync&&f._clearBackOff(),Bn(be)),Qn(be,Q,$[Wo],!0)}finally{$[Wo]===0&&(u--,ie!==5&&Y.sendQueuedRequests($[Wo],ie))}}function Bn($){if(y){var Q=Bo();ee($,function(ie){ie&&ie[mn]()>0&&ot(ie[Sa](),Q)})}}function Nr($,Q,ie){Q?$():N.set($,ie)}function Lr($){for(var Q=0;Q<$.batches[Ke];Q++){var ie=$[Yr][Q].Msfpc();if(ie)return encodeURIComponent(ie)}return Ts}function yi($){var Q=k;try{for(var ie=0;ie<Q[Ke];ie++)try{Q[ie]($)}catch(be){se(m,1,519,"Response handler failed: "+be)}if($){var ve=JSON.parse($);mr(ve.webResult)&&mr(ve.webResult[dh])&&S.set("MSFPC",ve.webResult[dh],365*86400)}}catch{}}function Qn($,Q,ie,ve){if($&&$[Ke]>0&&o){var be=o[Ma(Q)];if(be){var Ge=ie!==0;dn(p,function(){return"HttpManager:_sendBatchesNotification"},function(){Nr(function(){try{be.call(o,$,Q,Ge,ie)}catch(ye){se(m,1,74,"send request notification failed: "+ye)}},ve||Ge,0)},function(){return{batches:oe($),reason:Q,isSync:Ge,sendSync:ve,sendType:ie}},!Ge)}}}function Ma($){var Q=Kce[$];return mr(Q)||(Q=wG,$>=9e3&&$<=9999?Q=vG:$>=8e3&&$<=8999?Q=sD:$>=1e3&&$<=1999&&(Q=gG)),Q}})}return e.__ieDyn=1,e})()});function rle(e){return e&&e.sendPOST}var Zce,YG,Qce,zG,KG,ele,GG,tle,bL,Ld,qG,Un,nle,JG,XG=ne(()=>{Fo();fr();Id();ld();Ne();sL();TD();VG();iy();xL();_L();gh();Zce=.25,YG=500,Qce=20,zG=6,KG=2,ele=4,GG=2,tle=1,bL=1e4,Ld="eventsDiscarded",qG="",Un=void 0,nle=Es({eventsLimitInMem:{isVal:mu,v:bL},immediateEventLimit:{isVal:mu,v:500},autoFlushEventsLimit:{isVal:mu,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:rle,v:Un},overrideInstrumentationKey:Un,overrideEndpointUrl:Un,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Un,clearTimeoutOverride:Un,payloadPreprocessor:Un,payloadListener:Un,disableEventTimings:Un,valueSanitizer:Un,stringifyObjects:Un,enableCompoundKey:Un,disableOptimizeObj:!1,fetchCredentials:Un,transports:Un,unloadTransports:Un,useSendBeacon:Un,disableFetchKeepAlive:Un,avoidOptions:!1,xhrTimeout:Un,disableXhrSync:Un,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Sr,v:zG},maxUnloadEventRetryAttempts:{isVal:Sr,v:KG},addNoResponse:Un,excludeCsMetaData:Un});JG=(function(e){Ao(t,e);function t(){var n=e.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.6";var r,o=!1,i=[],s,a=!1,c=0,l,u=0,f,m={},d=Pd,p,g,h,w,C,v,y,S,I,_,A,U,R,E,x,b,D,T,k,L,N,H;return Xe(t,n,function(B,z){rt(),B._getDbgPlgTargets=function(){return[C,r]},B[Td]=function(P,F,M){dn(F,function(){return"PostChannel:initialize"},function(){z[Td](P,F,M),k=F.getNotifyMgr();try{x=pi(Pr(B[dy]),F.evtNamespace&&F.evtNamespace()),B._addHook(dr(P,function(q){var J=q.cfg,te=fo(null,J,F);r=te.getExtCfg(B[dy],nle),b=vh(r[vD],r[wD]),A=!r.disableOptimizeObj&&nD(),D=r[PG],G(F),f=r.eventsLimitInMem,l=r.immediateEventLimit,y=r[SL],R=r.maxEventRetryAttempts,E=r.maxUnloadEventRetryAttempts,T=r[bG],so(J.endpointUrl)?B.pause():a&&B.resume(),ye(),N=r[TG],H=!!r.disableTelemetry,L&&Y();var ue=J.disablePageUnloadEvents||[];L=Jw(mt,ue,x),L=sh(mt,ue,x)||L,L=ah(Mt,J.disablePageShowEvents,x)||L})),C[Td](P,B.core,B)}catch(q){throw B.setInitialized(!1),q}},function(){return{theConfig:P,core:F,extensions:M}})},B.processTelemetry=function(P,F){ny(P,B[dy]),F=F||B._getTelCtx(F);var M=P;!H&&!o&&(N&&(M[hi]=N),Dn(M,!0),U?j(2,2):pt()),B.processNext(M,F)},B.getOfflineSupport=function(){try{var P=C&&C[ED]();if(C)return{getUrl:function(){return P?P.url:null},serialize:Be,batch:ce,shouldProcess:function(F){return!H},createPayload:function(F){return null},createOneDSPayload:function(F){if(C[cy])return C[cy](F,A)}}}catch{}return null},B._doTeardown=function(P,F){j(2,2),o=!0,C.teardown(),Y(),rt()};function Y(){Xw(null,x),Zw(null,x),Qw(null,x)}function G(P){var F=P[hh];P[hh]=function(){var M=0;return D&&(M=M|2),M|F.call(P)}}function ce(P){var F=qG;return P&&P[Ke]&&ee(P,function(M){F&&(F+=`
`),F+=M}),F}function Be(P){var F=qG;try{wo(P),F=C[CD](P)}catch{}return F}function mt(P){var F=P||Fn().event;F.type!=="beforeunload"&&(U=!0,C[uy](U)),j(2,2)}function Mt(P){U=!1,C[uy](U)}function wo(P){P.ext&&P.ext[dL]&&delete P.ext[dL],P.ext&&P.ext[dD]&&P.ext[dD].id&&delete P.ext[dD].id,A&&(P.ext=Ho(P.ext),P.baseData&&(P.baseData=Ho(P.baseData)),P.data&&(P.data=Ho(P.data)))}function Dn(P,F){if(P[my]||(P[my]=0),P[pu]||(P[pu]=1),wo(P),P[kd]){if(h||a)P[pu]=3,P[kd]=!1;else if(C){A&&(P=Ho(P)),C[xD](hu.create(P[hi],[P]),P[kd]===!0?1:P[kd],3);return}}var M=P[pu],q=u,J=f;M===4&&(q=c,J=l);var te=!1;if(q<J)te=!De(P,F);else{var ue=1,Oe=Qce;M===4&&(ue=4,Oe=1),te=!0,et(P[hi],P[pu],ue,Oe)&&(te=!De(P,F))}te&&Ma(Ld,[P],xs.QueueFull)}B.setEventQueueLimits=function(P,F){r.eventsLimitInMem=f=mu(P)?P:bL,r[SL]=y=mu(F)?F:0,ye();var M=u>P;if(!M&&S>0)for(var q=1;!M&&q<=3;q++){var J=v[q];J&&J[Yr]&&ee(J[Yr],function(te){te&&te[mn]()>=S&&(M=!0)})}le(!0,M)},B.pause=function(){Ct(),a=!0,C&&C.pause()},B.resume=function(){a=!1,C&&C.resume(),pt()},B._loadTransmitProfiles=function(P){Nr(),Ie(P,function(F,M){var q=M[Ke];if(q>=2){var J=q>2?M[2]:0;if(M.splice(0,q-2),M[1]<0&&(M[0]=-1),M[1]>0&&M[0]>0){var te=M[0]/M[1];M[0]=iY(te)*M[1]}J>=0&&M[1]>=0&&J>M[1]&&(J=M[1]),M[Kn](J),m[F]=M}})},B.flush=function(P,F,M){P===void 0&&(P=!0);var q;if(!a)if(M=M||1,P)F||(q=Mi(function(te){F=te})),s==null?(Ct(),ht(1,0,M),s=Dt(function(){s=null,vn(F,M)},0)):i[Kn](F);else{var J=Ct();gn(1,1,M),F&&F(),J&&pt()}return q},B.setMsaAuthTicket=function(P){C.addHeader(oy,P)},B.setAuthPluginHeader=function(P){C.addHeader(uL,P)},B.removeAuthPluginHeader=function(){C.removeHeader(uL)},B.hasEvents=Jt,B._setTransmitProfile=function(P){d!==P&&m[P]!==void 0&&(Ct(),d=P,pt())},mi(B,function(){return C},["addResponseHandler"]);function gn(P,F,M){var q=ht(P,F,M);return C[ph](F,M),q}function Jt(){return u>0}function pt(){if(I>=0&&ht(I,0,_)&&C[ph](0,_),c>0&&!g&&!a){var P=m[d][2];P>=0&&(g=Dt(function(){g=null,gn(4,0,1),pt()},P))}var F=m[d][1];!p&&!s&&F>=0&&!a&&(Jt()?p=Dt(function(){p=null,gn(w===0?3:1,0,1),w++,w%=2,pt()},F):w=0)}B[bD]=function(){h<ele&&(h++,Ct(),pt())},B._clearBackOff=function(){h&&(h=0,Ct(),pt())};function rt(){r=null,o=!1,i=[],s=null,a=!1,c=0,l=500,u=0,f=bL,m={},d=Pd,p=null,g=null,h=0,w=0,v={},y=0,L=!1,S=0,I=-1,_=null,A=!0,U=!1,R=zG,E=KG,x=null,N=null,H=!1,b=vh(),C=new jG(YG,GG,tle,{requeue:yi,send:Q,sent:ie,drop:ve,rspFail:be,oth:Ge}),Lr(),oe(),ye()}function Dt(P,F){F===0&&h&&(F=1);var M=1e3;return h&&(M=kD(h-1)),b.set(P,F*M)}function Ct(){return p!==null?(p.cancel(),p=null,w=0,!0):!1}function j(P,F){Ct(),s&&(s.cancel(),s=null),a||gn(1,P,F)}function oe(){v[4]={batches:[],iKeyMap:{}},v[3]={batches:[],iKeyMap:{}},v[2]={batches:[],iKeyMap:{}},v[1]={batches:[],iKeyMap:{}}}function xe(P,F,M){var q=v[F];q||(F=1,q=v[F]);var J=q.iKeyMap[P];return!J&&M&&(J=hu.create(P),q.batches[Kn](J),q.iKeyMap[P]=J),J}function le(P,F){C[ly]()&&!h&&(y>0&&u>y&&(F=!0),F&&s==null&&B.flush(P,function(){},20))}function De(P,F){A&&(P=Ho(P));var M=P[pu],q=xe(P[hi],M,!0);return q.addEvent(P)?(M!==4?(u++,F&&P[my]===0&&le(!P.sync,S>0&&q[mn]()>=S)):c++,!0):!1}function et(P,F,M,q){for(;M<=F;){var J=xe(P,F,!0);if(J&&J[mn]()>0){var te=J[xa](0,q),ue=te[mn]();if(ue>0)return M===4?c-=ue:u-=ue,$(Ld,[te],xs.QueueFull),!0}M++}return ot(),!1}function ot(){for(var P=0,F=0,M=function(J){var te=v[J];te&&te[Yr]&&ee(te[Yr],function(ue){J===4?P+=ue[mn]():F+=ue[mn]()})},q=1;q<=4;q++)M(q);u=F,c=P}function ht(P,F,M){var q=!1,J=F===0;return!J||C[ly]()?dn(B.core,function(){return"PostChannel._queueBatches"},function(){for(var te=[],ue=4;ue>=P;){var Oe=v[ue];Oe&&Oe.batches&&Oe.batches[Ke]>0&&(ee(Oe[Yr],function(Ze){C.addBatch(Ze)?q=q||Ze&&Ze[mn]()>0:te=te[Ea](Ze[Sa]()),ue===4?c-=Ze[mn]():u-=Ze[mn]()}),Oe[Yr]=[],Oe.iKeyMap={}),ue--}te[Ke]>0&&Ma(Ld,te,xs.KillSwitch),q&&I>=P&&(I=-1,_=0)},function(){return{latency:P,sendType:F,sendReason:M}},!J):(I=I>=0?Yl(I,P):P,_=ra(_,M)),q}function vn(P,F){gn(1,0,F),ot(),Bn(function(){P&&P(),i[Ke]>0?s=Dt(function(){s=null,vn(i.shift(),F)},0):(s=null,pt())})}function Bn(P){C.isCompletelyIdle()?P():s=Dt(function(){s=null,Bn(P)},Zce)}function Nr(){Ct(),Lr(),d=Pd,pt()}function Lr(){m={},m[Pd]=[2,1,0],m[oD]=[6,3,0],m[iD]=[18,9,0]}function yi(P,F){var M=[],q=R;U&&(q=E),ee(P,function(J){J&&J[mn]()>0&&ee(J[Sa](),function(te){te&&(te[kd]&&(te[pu]=4,te[kd]=!1),te[my]<q?(ny(te,B[dy]),Dn(te,!1)):M[Kn](te))})}),M[Ke]>0&&Ma(Ld,M,xs.NonRetryableStatus),U&&j(2,2)}function Qn(P,F){var M=k||{},q=M[P];if(q)try{q.apply(M,F)}catch(J){se(B.diagLog(),1,74,P+" notification failed: "+J)}}function Ma(P,F){for(var M=[],q=2;q<arguments.length;q++)M[q-2]=arguments[q];F&&F[Ke]>0&&Qn(P,[F][Ea](M))}function $(P,F){for(var M=[],q=2;q<arguments.length;q++)M[q-2]=arguments[q];F&&F[Ke]>0&&ee(F,function(J){J&&J[mn]()>0&&Qn(P,[J.events()][Ea](M))})}function Q(P,F,M){P&&P[Ke]>0&&Qn("eventsSendRequest",[F>=1e3&&F<=1999?F-1e3:0,M!==!0])}function ie(P,F){$("eventsSent",P,F),pt()}function ve(P,F){$(Ld,P,F>=8e3&&F<=8999?F-8e3:xs.Unknown)}function be(P){$(Ld,P,xs.NonRetryableStatus),pt()}function Ge(P,F){$(Ld,P,xs.Unknown),pt()}function ye(){T?S=0:S=ra(YG*(GG+1),f/6)}}),n}return t.__ieDyn=1,t})(Dc)});var ZG={};hC(ZG,{BE_PROFILE:()=>iD,NRT_PROFILE:()=>oD,PostChannel:()=>JG,RT_PROFILE:()=>Pd});var QG=ne(()=>{sL();XG()});var py,hy,LD,Ad,_a,Gr,Rs=ne(()=>{py="sampleRate",hy="ProcessLegacy",LD="http.method",Ad="https://dc.services.visualstudio.com",_a="/v2/track",Gr="not_specified"});var AD,tq=ne(()=>{Ft();AD=LR({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var Fd,Me,Od,gu,vu,TL,yh,nq,gy,vy,Ud,qr,br,zr,wy,yy,Ch,$d,FD,Md,Cy,Ey,Da,Hd,Eh,Bd,mo=ne(()=>{Fd="split",Me="length",Od="toLowerCase",gu="ingestionendpoint",vu="toString",TL="removeItem",yh="message",nq="count",gy="stringify",vy="pathname",Ud="match",qr="name",br="properties",zr="measurements",wy="sizeInBytes",yy="typeName",Ch="exceptions",$d="severityLevel",FD="problemGroup",Md="parsedStack",Cy="hasFullStack",Ey="assembly",Da="fileName",Hd="line",Eh="aiDataContract",Bd="duration"});function kL(e,t,n){var r=t[Me],o=rq(e,t);if(o[Me]!==r){for(var i=0,s=o;n[s]!==void 0;)i++,s=Gn(o,0,147)+oq(i);o=s}return o}function rq(e,t){var n;return t&&(t=nt(Cn(t)),t[Me]>150&&(n=Gn(t,0,150),se(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0))),n||t}function Rt(e,t,n){n===void 0&&(n=1024);var r;return t&&(n=n||1024,t=nt(Cn(t)),t[Me]>n&&(r=Gn(t,0,n),se(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function Wd(e,t){return LL(e,t,2048,66)}function Sy(e,t){var n;return t&&t[Me]>32768&&(n=Gn(t,0,32768),se(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function RL(e,t){var n;if(t){var r=""+t;r[Me]>32768&&(n=Gn(r,0,32768),se(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function po(e,t){if(t){var n={};Ie(t,function(r,o){if(en(o)&&ma())try{o=Ir()[gy](o)}catch(i){se(e,2,49,"custom property is not valid",{exception:i},!0)}o=Rt(e,o,8192),r=kL(e,r,n),n[r]=o}),t=n}return t}function ho(e,t){if(t){var n={};Ie(t,function(r,o){r=kL(e,r,n),n[r]=o}),t=n}return t}function NL(e,t){return t&&LL(e,t,128,69)[vu]()}function LL(e,t,n,r){var o;return t&&(t=nt(Cn(t)),t[Me]>n&&(o=Gn(t,0,n),se(e,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0))),o||t}function oq(e){var t="00"+e;return oa(t,t[Me]-3)}var Ns=ne(()=>{Ft();Ne();mo()});function aq(e){var t=sq,n=ile,r=n[t];return iq.createElement?n[t]||(r=n[t]=iq.createElement("a")):r={host:sle(e,!0)},r.href=e,t++,t>=n[Me]&&(t=0),sq=t,r}function sle(e,t){var n=cq(e,t)||"";if(n){var r=n[Ud](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[Me]>3&&Re(r[2])&&r[2][Me]>0)return r[2]+(r[3]||"")}return n}function cq(e,t){var n=null;if(e){var r=e[Ud](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[Me]>2&&Re(r[2])&&r[2][Me]>0&&(n=r[2]||"",t&&r[Me]>2)){var o=(r[1]||"")[Od](),i=r[3]||"";(o==="http"&&i===":80"||o==="https"&&i===":443")&&(i=""),n+=i}}return n}var iq,sq,ile,lq=ne(()=>{Ft();mo();iq=An()||{},sq=0,ile=[null,null,null,null,null]});function OD(e){return wt(ale,e[Od]())!==-1}function uq(e,t,n,r){var o,i=r,s=r;if(t&&t[Me]>0){var a=aq(t);if(o=a.host,!i)if(a[vy]!=null){var c=a.pathname[Me]===0?"/":a[vy];c.charAt(0)!=="/"&&(c="/"+c),s=a[vy],i=Rt(e,n?n+" "+c:c)}else i=Rt(e,t)}else o=r,i=r;return{target:o,name:i,data:s}}var ale,AL=ne(()=>{Ft();Rs();Ns();lq();mo();ale=[Ad+_a,"https://breeze.aimon.applicationinsights.io"+_a,"https://dc-int.services.visualstudio.com"+_a]});var UD,ARe,FRe,fq=ne(()=>{Ft();UD=un({LocalStorage:0,SessionStorage:1}),ARe=un({AI:0,AI_AND_W3C:1,W3C:2}),FRe=un({Normal:1,Critical:2})});function mq(e){try{if(ae(co()))return null;var t=new Date()[vu](),n=vt(e===UD.LocalStorage?"localStorage":"sessionStorage"),r=dq+t;n.setItem(r,t);var o=n.getItem(r)!==t;if(n[TL](r),!o)return n}catch{}return null}function FL(){return $D()?mq(UD.SessionStorage):null}function OL(e){dq=e||""}function $D(e){return(e||Sh===void 0)&&(Sh=!!mq(UD.SessionStorage)),Sh}function UL(e,t){var n=FL();if(n!==null)try{return n.getItem(t)}catch(r){Sh=!1,se(e,2,2,"Browser failed read of session storage. "+tn(r),{exception:Ee(r)})}return null}function $L(e,t,n){var r=FL();if(r!==null)try{return r.setItem(t,n),!0}catch(o){Sh=!1,se(e,2,4,"Browser failed write to session storage. "+tn(o),{exception:Ee(o)})}return!1}function ML(e,t){var n=FL();if(n!==null)try{return n[TL](t),!0}catch(r){Sh=!1,se(e,2,6,"Browser failed removal of session storage item. "+tn(r),{exception:Ee(r)})}return!1}var Sh,dq,pq=ne(()=>{Ft();fq();mo();Sh=void 0,dq=""});function xy(e){if(!e)return{};var t=e[Fd](cle),n=fw(t,function(o,i){var s=i[Fd](lle);if(s[Me]===2){var a=s[0][Od](),c=s[1];o[a]=c}return o},{});if(_r(n)[Me]>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n[gu]=n[gu]||"https://"+r+"dc."+n.endpointsuffix}n[gu]=n[gu]||Ad,td(n[gu],"/")&&(n[gu]=n[gu].slice(0,-1))}return n}var cle,lle,hq=ne(()=>{Ft();Rs();mo();cle=";",lle="="});var HL,gq=ne(()=>{Ft();Rs();mo();Ns();HL=(function(){function e(t,n,r){var o=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[qr]=Rt(t,r)||Gr,i.data=n,i.time=Is(new Date),i[Eh]={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1}}return e})()});var kc,vq=ne(()=>{Rs();mo();Ns();kc=(function(){function e(t,n,r,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[qr]=Rt(t,n)||Gr,i[br]=po(t,r),i[zr]=ho(t,o)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e})()});function wle(e){return e.replace(/(\(anonymous\))/,"<anonymous>")}function yle(e){return Fi(e,"[native")<0}function VL(e,t){var n=e;return n&&!Re(n)&&(JSON&&JSON[gy]?(n=JSON[gy](e),t&&(!n||n==="{}")&&(ke(e[vu])?n=e[vu]():n=""+e)):n=""+e+" - (Missing JSON.stringify)"),n||""}function _q(e,t){var n=e;return e&&(n&&!Re(n)&&(n=e[jL]||e[xq]||n),n&&!Re(n)&&(n=VL(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&t!=="String"&&t!=="Object"&&t!=="Error"&&Fi(n||"",t)===-1&&(n=t+": "+n),n||""}function Cle(e){try{if(en(e))return"hasFullStack"in e&&"typeName"in e}catch{}return!1}function Ele(e){try{if(en(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch{}return!1}function Eq(e){return e&&e.src&&Re(e.src)&&e.obj&&we(e.obj)}function jd(e){var t=e||"";Re(t)||(Re(t[ji])?t=t[ji]:t=""+t);var n=t[Fd](`
`);return{src:t,obj:n}}function Sle(e){for(var t=[],n=e[Fd](`
`),r=0;r<n[Me];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),t.push(o)}return{src:e,obj:t}}function Dq(e){var t=null;if(e)try{if(e[ji])t=jd(e[ji]);else if(e[xh]&&e[xh][ji])t=jd(e[xh][ji]);else if(e.exception&&e.exception[ji])t=jd(e.exception[ji]);else if(Eq(e))t=e;else if(Eq(e[WL]))t=e[WL];else if(Fn()&&Fn().opera&&e[jL])t=Sle(e[yh]);else if(e.reason&&e.reason[ji])t=jd(e.reason[ji]);else if(Re(e))t=jd(e);else{var n=e[jL]||e[xq]||"";Re(e[yq])&&(n&&(n+=`
`),n+=" from "+e[yq]),n&&(t=jd(n))}}catch(r){t=jd(r)}return t||{src:"",obj:null}}function xle(e){var t="";return e&&(e.obj?t=e.obj.join(`
`):t=e.src||""),t}function _le(e){var t,n=e.obj;if(n&&n[Me]>0){t=[];var r=0,o=!1,i=0;ee(n,function(g){if(o||ble(g)){var h=Cn(g);o=!0;var w=Tle(h,r);w&&(i+=w[wy],t.push(w),r++)}});var s=32*1024;if(i>s)for(var a=0,c=t[Me]-1,l=0,u=a,f=c;a<c;){var m=t[a][wy],d=t[c][wy];if(l+=m+d,l>s){var p=f-u+1;t.splice(u,p);break}u=a,f=c,a++,c--}}return t}function MD(e){var t="";if(e&&(t=e.typeName||e[qr]||"",!t))try{var n=/function (.{1,200})\(/,r=n.exec(e.constructor[vu]());t=r&&r[Me]>1?r[1]:""}catch{}return t}function BL(e){if(e)try{if(!Re(e)){var t=MD(e),n=VL(e,!1);return(!n||n==="{}")&&(e[xh]&&(e=e[xh],t=MD(e)),n=VL(e,!0)),Fi(n,t)!==0&&t!=="String"?t+":"+n:n}}catch{}return""+(e||"")}function Ile(){var e=this,t=we(e[Md])&&cc(e[Md],function(r){return Rle(r)}),n={id:e.id,outerId:e.outerId,typeName:e[yy],message:e[yh],hasFullStack:e[Cy],stack:e[ji],parsedStack:t||void 0};return n}function Iq(e,t,n){var r,o,i,s,a,c,l,u;if(Cle(t))s=t[yy],a=t[yh],l=t[ji],u=t[Md]||[],c=t[Cy];else{var f=t,m=f&&f.evt;Xf(f)||(f=f[xh]||m||f),s=Rt(e,MD(f))||Gr,a=Sy(e,_q(t||f,s))||Gr;var d=t[WL]||Dq(t);u=_le(d),we(u)&&cc(u,function(p){p[Ey]=Rt(e,p[Ey]),p[Da]=Rt(e,p[Da])}),l=RL(e,xle(d)),c=we(u)&&u[Me]>0,n&&(n[yy]=n[yy]||s)}return r={},r[Eh]=Dle,r.id=o,r.outerId=i,r.typeName=s,r.message=a,r[Cy]=c,r.stack=l,r.parsedStack=u,r.toInterface=Ile,r}function Ple(e,t){var n=we(t[Md])&&cc(t[Md],function(o){return kle(o)})||t[Md],r=Iq(e,Oi(Oi({},t),{parsedStack:n}));return r}function Pq(e,t){var n=t[Ud](gle);if(n&&n[Me]>=4)e[Da]=n[1],e[Hd]=parseInt(n[2]);else{var r=t[Ud](vle);r&&r[Me]>=3?(e[Da]=r[1],e[Hd]=parseInt(r[2])):e[Da]=t}}function Sq(e,t,n){var r=e[Da];t.fn&&n&&n[Me]>t.fn&&(t.ln&&n[Me]>t.ln?(r=nt(n[t.fn]||""),e[Hd]=parseInt(nt(n[t.ln]||""))||0):r=nt(n[t.fn]||"")),r&&Pq(e,r)}function ble(e){var t=!1;if(e&&Re(e)){var n=nt(e);n&&(t=fle.test(n))}return t}function Tle(e,t){var n,r;if(e&&Re(e)&&nt(e)){r=(n={},n[Eh]=bq,n.level=t,n.assembly=nt(e),n.method=wq,n.fileName="",n.line=0,n.sizeInBytes=0,n);for(var o=0;o<Cq[Me];){var i=Cq[o];if(i.chk&&!i.chk(e))break;i.pre&&(e=i.pre(e));var s=e[Ud](i.re);if(s&&s[Me]>=i.len){i.m&&(r.method=nt(s[i.m]||wq)),i.hdl?i.hdl(r,i,s):i.fn&&(i.ln?(r[Da]=nt(s[i.fn]||""),r[Hd]=parseInt(nt(s[i.ln]||""))||0):Pq(r,s[i.fn]||""));break}o++}}return Tq(r)}function kle(e){var t,n=(t={},t[Eh]=bq,t.level=e.level,t.method=e.method,t.assembly=e[Ey],t.fileName=e[Da],t.line=e[Hd],t.sizeInBytes=0,t);return Tq(n)}function Tq(e){var t=ule;return e&&(t+=e.method[Me],t+=e.assembly[Me],t+=e.fileName[Me],t+=e.level.toString()[Me],t+=e.line.toString()[Me],e[wy]=t),e}function Rle(e){return{level:e.level,method:e.method,assembly:e[Ey],fileName:e[Da],line:e[Hd]}}var ule,fle,dle,mle,ple,hle,gle,vle,wq,xh,ji,WL,yq,jL,xq,Cq,Vd,Dle,bq,kq=ne(()=>{Fo();Ft();Ne();Rs();mo();Ns();ule=58,fle=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,dle=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,mle=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,ple=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,hle=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,gle=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,vle=/([^\(\s\n]+):([0-9]+)$/,wq="<no_method>",xh="error",ji="stack",WL="stackDetails",yq="errorSrc",jL="message",xq="description",Cq=[{re:dle,len:5,m:1,fn:2,ln:3,col:4},{chk:yle,pre:wle,re:mle,len:4,m:1,fn:2,ln:3},{re:ple,len:3,m:1,fn:2,hdl:Sq},{re:hle,len:2,fn:1,hdl:Sq}];Vd=(function(){function e(t,n,r,o,i,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,Ele(n)?(a[Ch]=n[Ch]||[],a[br]=n[br],a[zr]=n[zr],n[$d]&&(a[$d]=n[$d]),n.id&&(a.id=n.id,n[br].id=n.id),n[FD]&&(a[FD]=n[FD]),ae(n.isManual)||(a.isManual=n.isManual)):(r||(r={}),s&&(r.id=s),a[Ch]=[Iq(t,n,r)],a[br]=po(t,r),a[zr]=ho(t,o),i&&(a[$d]=i),s&&(a.id=s))}return e.CreateAutoException=function(t,n,r,o,i,s,a,c){var l=MD(i||s||t);return{message:_q(t,l),url:n,lineNumber:r,columnNumber:o,error:BL(i||s||t),evt:BL(s||t),typeName:l,stackDetails:Dq(a||i||s),errorSrc:c}},e.CreateFromInterface=function(t,n,r,o){var i=n[Ch]&&cc(n[Ch],function(a){return Ple(t,a)}),s=new e(t,Oi(Oi({},n),{exceptions:i}),r,o);return s},e.prototype.toInterface=function(){var t=this,n=t.exceptions,r=t.properties,o=t.measurements,i=t.severityLevel,s=t.problemGroup,a=t.id,c=t.isManual,l=n instanceof Array&&cc(n,function(u){return u.toInterface()})||void 0;return{ver:"4.0",exceptions:l,severityLevel:i,properties:r,measurements:o,problemGroup:s,id:a,isManual:c}},e.CreateSimpleException=function(t,n,r,o,i,s){var a;return{exceptions:[(a={},a[Cy]=!0,a.message=t,a.stack=i,a.typeName=n,a)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=BL,e})(),Dle=ao({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});bq=ao({level:1,method:1,assembly:0,fileName:0,line:0})});var Rq,Nq=ne(()=>{Rq=(function(){function e(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return e})()});var Rc,Lq=ne(()=>{Rs();mo();Nq();Ns();Rc=(function(){function e(t,n,r,o,i,s,a,c,l){this.aiDataContract={ver:1,metrics:1,properties:0};var u=this;u.ver=2;var f=new Rq;f[nq]=o>0?o:void 0,f.max=isNaN(s)||s===null?void 0:s,f.min=isNaN(i)||i===null?void 0:i,f[qr]=Rt(t,n)||Gr,f.value=r,f.stdDev=isNaN(a)||a===null?void 0:a,u.metrics=[f],u[br]=po(t,c),u[zr]=ho(t,l)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e})()});function HD(e){(isNaN(e)||e<0)&&(e=0),e=cY(e);var t=_y+e%1e3,n=_y+Ai(e/1e3)%60,r=_y+Ai(e/(1e3*60))%60,o=_y+Ai(e/(1e3*60*60))%24,i=Ai(e/(1e3*60*60*24));return t=t[Me]===1?"00"+t:t[Me]===2?"0"+t:t,n=n[Me]<2?"0"+n:n,r=r[Me]<2?"0"+r:r,o=o[Me]<2?"0"+o:o,(i>0?i+".":_y)+o+":"+r+":"+n+"."+t}var _y,YL=ne(()=>{Ne();mo();_y=""});var Yd,Aq=ne(()=>{Rs();YL();mo();Ns();Yd=(function(){function e(t,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=NL(t,a),c.url=Wd(t,r),c[qr]=Rt(t,n)||Gr,isNaN(o)||(c[Bd]=HD(o)),c[br]=po(t,i),c[zr]=ho(t,s)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e})()});var Gd,Fq=ne(()=>{YL();AL();mo();Ns();Gd=(function(){function e(t,n,r,o,i,s,a,c,l,u,f,m){l===void 0&&(l="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d=this;d.ver=2,d.id=n,d[Bd]=HD(i),d.success=s,d.resultCode=a+"",d.type=Rt(t,l);var p=uq(t,r,c,o);d.data=Wd(t,o)||p.data,d.target=Rt(t,p.target),u&&(d.target="".concat(d.target," | ").concat(u)),d[qr]=Rt(t,p[qr]),d[br]=po(t,f),d[zr]=ho(t,m)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e})()});var qd,Oq=ne(()=>{Rs();mo();Ns();qd=(function(){function e(t,n,r,o,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,n=n||Gr,s[yh]=Sy(t,n),s[br]=po(t,o),s[zr]=ho(t,i),r&&(s[$d]=r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e})()});var zd,Uq=ne(()=>{Rs();mo();Ns();zd=(function(){function e(t,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=Wd(t,r),c[qr]=Rt(t,n)||Gr,c[br]=po(t,i),c[zr]=ho(t,s),a&&(c.domProcessing=a.domProcessing,c[Bd]=a[Bd],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c.receivedResponse=a.receivedResponse,c.sentRequest=a.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e})()});var Nc,$q=ne(()=>{Nc=(function(){function e(t,n){this.aiDataContract={baseType:1,baseData:1},this.baseType=t,this.baseData=n}return e})()});var GL,Mq=ne(()=>{Ft();GL=un({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});function yu(e){var t="ai."+e+".";return function(n){return t+n}}var Dy,Jn,BD,_h,qL,wu,Kd,Iy,Py,zL=ne(()=>{Fo();Ft();Dy=yu("application"),Jn=yu("device"),BD=yu("location"),_h=yu("operation"),qL=yu("session"),wu=yu("user"),Kd=yu("cloud"),Iy=yu("internal"),Py=(function(e){Ao(t,e);function t(){return e.call(this)||this}return t})(zR({applicationVersion:Dy("ver"),applicationBuild:Dy("build"),applicationTypeId:Dy("typeId"),applicationId:Dy("applicationId"),applicationLayer:Dy("layer"),deviceId:Jn("id"),deviceIp:Jn("ip"),deviceLanguage:Jn("language"),deviceLocale:Jn("locale"),deviceModel:Jn("model"),deviceFriendlyName:Jn("friendlyName"),deviceNetwork:Jn("network"),deviceNetworkName:Jn("networkName"),deviceOEMName:Jn("oemName"),deviceOS:Jn("os"),deviceOSVersion:Jn("osVersion"),deviceRoleInstance:Jn("roleInstance"),deviceRoleName:Jn("roleName"),deviceScreenResolution:Jn("screenResolution"),deviceType:Jn("type"),deviceMachineName:Jn("machineName"),deviceVMName:Jn("vmName"),deviceBrowser:Jn("browser"),deviceBrowserVersion:Jn("browserVersion"),locationIp:BD("ip"),locationCountry:BD("country"),locationProvince:BD("province"),locationCity:BD("city"),operationId:_h("id"),operationName:_h("name"),operationParentId:_h("parentId"),operationRootId:_h("rootId"),operationSyntheticSource:_h("syntheticSource"),operationCorrelationVector:_h("correlationVector"),sessionId:qL("id"),sessionIsFirst:qL("isFirst"),sessionIsNew:qL("isNew"),userAccountAcquisitionDate:wu("accountAcquisitionDate"),userAccountId:wu("accountId"),userAgent:wu("userAgent"),userId:wu("id"),userStoreRegion:wu("storeRegion"),userAuthUserId:wu("authUserId"),userAnonymousUserAcquisitionDate:wu("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:wu("authUserAcquisitionDate"),cloudName:Kd("name"),cloudRole:Kd("role"),cloudRoleVer:Kd("roleVer"),cloudRoleInstance:Kd("roleInstance"),cloudEnvironment:Kd("environment"),cloudLocation:Kd("location"),cloudDeploymentUnit:Kd("deploymentUnit"),internalNodeName:Iy("nodeName"),internalSdkVersion:Iy("sdkVersion"),internalAgentVersion:Iy("agentVersion"),internalSnippet:Iy("snippet"),internalSdkSrc:Iy("sdkSrc")}))});var $n,Hq=ne(()=>{zL();$n=new Py});function Bq(e,t){Pc(e,null,null,t)}function KL(e){var t=An(),n=qn(),r=!1,o=[],i=1;n&&!ae(n.onLine)&&!n.onLine&&(i=2);var s=0,a=m(),c=pi(Pr("OfflineListener"),e);try{if(u(Fn())&&(r=!0),t){var l=t.body||t;l.ononline&&u(l)&&(r=!0)}}catch{r=!1}function u(v){var y=!1;return v&&(y=va(v,"online",g,c),y&&va(v,"offline",h,c)),y}function f(){return a}function m(){return!(s===2||i===2)}function d(){var v=m();a!==v&&(a=v,ee(o,function(y){var S={isOnline:a,rState:i,uState:s};try{y(S)}catch{}}))}function p(v){s=v,d()}function g(){i=1,d()}function h(){i=2,d()}function w(){var v=Fn();if(v&&r){if(Bq(v,c),t){var y=t.body||t;Ve(y.ononline)||Bq(y,c)}r=!1}}function C(v){return o.push(v),{rm:function(){var y=o.indexOf(v);if(y>-1)return o.splice(y,1)}}}return{isOnline:f,isListening:function(){return r},unload:w,addListener:C,setOnlineState:p}}var Wq=ne(()=>{Ft()});var WD,Lc=ne(()=>{AL();hq();tq();Rs();gq();vq();kq();Lq();Aq();Fq();Oq();Uq();$q();Mq();zL();Ns();Hq();pq();Wq();WD="AppInsightsChannelPlugin"});var Cu,jq=ne(()=>{Cu="duration"});var Mn,jD,jo,Ia,Xd,Ye,Eu,Su,Vi,xu,Ac,Fc,Oc,Yi,by,_u,Dh,Zd,Ty,Ih,Uc,Du,Ph,bh,Tr,VD,Th,kh,Rh,YD,JL,GD,qD,XL,ZL,Ls,QL,eA,ky,Iu,zD,Ry,KD,JD,XD,Nh,Vq,Pu=ne(()=>{Mn="tags",jD="deviceType",jo="data",Ia="name",Xd="traceID",Ye="length",Eu="stringify",Su="measurements",Vi="dataType",xu="envelopeType",Ac="toString",Fc="enqueue",Oc="count",Yi="push",by="emitLineDelimitedJson",_u="clear",Dh="markAsSent",Zd="clearSent",Ty="bufferOverride",Ih="BUFFER_KEY",Uc="SENT_BUFFER_KEY",Du="concat",Ph="MAX_BUFFER_SIZE",bh="triggerSend",Tr="diagLog",VD="initialize",Th="_sender",kh="endpointUrl",Rh="instrumentationKey",YD="customHeaders",JL="maxBatchSizeInBytes",GD="onunloadDisableBeacon",qD="isBeaconApiDisabled",XL="alwaysUseXhrOverride",ZL="enableSessionStorageBuffer",Ls="_buffer",QL="onunloadDisableFetch",eA="disableSendBeaconSplit",ky="getSenderInst",Iu="_onError",zD="_onPartialSuccess",Ry="_onSuccess",KD="itemsReceived",JD="itemsAccepted",XD="baseType",Nh="sampleRate",Vq="getHashCodeScore"});function xn(e,t,n){return Hi(e,t,n,ys)}function Nle(e,t,n){var r=n[Mn]=n[Mn]||{},o=t.ext=t.ext||{},i=t[Mn]=t[Mn]||[],s=o.user;s&&(xn(r,$n.userAuthUserId,s.authId),xn(r,$n.userId,s.id||s.localId));var a=o.app;a&&xn(r,$n.sessionId,a.sesId);var c=o.device;c&&(xn(r,$n.deviceId,c.id||c.localId),xn(r,$n[jD],c.deviceClass),xn(r,$n.deviceIp,c.ip),xn(r,$n.deviceModel,c.model),xn(r,$n[jD],c[jD]));var l=t.ext.web;if(l){xn(r,$n.deviceLanguage,l.browserLang),xn(r,$n.deviceBrowserVersion,l.browserVer),xn(r,$n.deviceBrowser,l.browser);var u=n[jo]=n[jo]||{},f=u[Yt]=u[Yt]||{},m=f[pr]=f[pr]||{};xn(m,"domain",l.domain),xn(m,"isManual",l.isManual?Yq:null),xn(m,"screenRes",l.screenRes),xn(m,"userConsent",l.userConsent?Yq:null)}var d=o.os;d&&(xn(r,$n.deviceOS,d[Ia]),xn(r,$n.deviceOSVersion,d.osVer));var p=o.trace;p&&(xn(r,$n.operationParentId,p.parentID),xn(r,$n.operationName,Rt(e,p[Ia])),xn(r,$n.operationId,p[Xd]));for(var g={},h=i[Ye]-1;h>=0;h--){var w=i[h];Ie(w,function(v,y){g[v]=y}),i.splice(h,1)}Ie(i,function(v,y){g[v]=y});var C=Oi(Oi({},r),g);C[$n.internalSdkVersion]||(C[$n.internalSdkVersion]=Rt(e,"javascript:".concat(Lle.Version),64)),n[Mn]=Ho(C)}function bu(e,t,n){ae(e)||Ie(e,function(r,o){Sr(o)?n[r]=o:Re(o)?t[r]=o:ma()&&(t[r]=Ir()[Eu](o))})}function Qd(e,t){ae(e)||Ie(e,function(n,r){e[n]=r||t})}function em(e,t,n,r){var o=new HL(e,r,t);xn(o,"sampleRate",n[py]),(n[Yt]||{}).startTime&&(o.time=Is(n[Yt].startTime)),o.iKey=n.iKey;var i=n.iKey.replace(/-/g,"");return o[Ia]=o[Ia].replace("{0}",i),Nle(e,n,o),n[Mn]=n[Mn]||[],Ho(o)}function tm(e,t){ae(t[Yt])&&se(e,1,46,"telemetryItem.baseData cannot be null.")}function Gq(e,t,n){tm(e,t);var r=t[Yt][Su]||{},o=t[Yt][pr]||{};bu(t[jo],o,r),ae(n)||Qd(o,n);var i=t[Yt];if(ae(i))return uo(e,"Invalid input for dependency data"),null;var s=i[pr]&&i[pr][LD]?i[pr][LD]:"GET",a=new Gd(e,i.id,i.target,i[Ia],i[Cu],i.success,i.responseCode,s,i.type,i.correlationContext,o,r),c=new Nc(Gd[Vi],a);return em(e,Gd[xu],t,c)}function nA(e,t,n){tm(e,t);var r={},o={};t[tA]!==kc[Vi]&&(r.baseTypeSource=t[tA]),t[tA]===kc[Vi]?(r=t[Yt][pr]||{},o=t[Yt][Su]||{}):t[Yt]&&bu(t[Yt],r,o),bu(t[jo],r,o),ae(n)||Qd(r,n);var i=t[Yt][Ia],s=new kc(e,i,r,o),a=new Nc(kc[Vi],s);return em(e,kc[xu],t,a)}function qq(e,t,n){tm(e,t);var r=t[Yt][Su]||{},o=t[Yt][pr]||{};bu(t[jo],o,r),ae(n)||Qd(o,n);var i=t[Yt],s=Vd.CreateFromInterface(e,i,o,r),a=new Nc(Vd[Vi],s);return em(e,Vd[xu],t,a)}function zq(e,t,n){tm(e,t);var r=t[Yt],o=r[pr]||{},i=r[Su]||{};bu(t[jo],o,i),ae(n)||Qd(o,n);var s=new Rc(e,r[Ia],r.average,r.sampleCount,r.min,r.max,r.stdDev,o,i),a=new Nc(Rc[Vi],s);return em(e,Rc[xu],t,a)}function Kq(e,t,n){tm(e,t);var r,o=t[Yt];!ae(o)&&!ae(o[pr])&&!ae(o[pr][Cu])?(r=o[pr][Cu],delete o[pr][Cu]):!ae(t[jo])&&!ae(t[jo][Cu])&&(r=t[jo][Cu],delete t[jo][Cu]);var i=t[Yt],s;((t.ext||{}).trace||{})[Xd]&&(s=t.ext.trace[Xd]);var a=i.id||s,c=i[Ia],l=i.uri,u=i[pr]||{},f=i[Su]||{};if(ae(i.refUri)||(u.refUri=i.refUri),ae(i.pageType)||(u.pageType=i.pageType),ae(i.isLoggedIn)||(u.isLoggedIn=i.isLoggedIn[Ac]()),!ae(i[pr])){var m=i[pr];Ie(m,function(g,h){u[g]=h})}bu(t[jo],u,f),ae(n)||Qd(u,n);var d=new Yd(e,c,l,r,u,f,a),p=new Nc(Yd[Vi],d);return em(e,Yd[xu],t,p)}function Jq(e,t,n){tm(e,t);var r=t[Yt],o=r[Ia],i=r.uri||r.url,s=r[pr]||{},a=r[Su]||{};bu(t[jo],s,a),ae(n)||Qd(s,n);var c=new zd(e,o,i,void 0,s,a,r),l=new Nc(zd[Vi],c);return em(e,zd[xu],t,l)}function Xq(e,t,n){tm(e,t);var r=t[Yt].message,o=t[Yt].severityLevel,i=t[Yt][pr]||{},s=t[Yt][Su]||{};bu(t[jo],i,s),ae(n)||Qd(i,n);var a=new qd(e,r,o,i,s),c=new Nc(qd[Vi],a);return em(e,qd[xu],t,c)}var tA,Yt,pr,Yq,Lle,Zq=ne(()=>{Fo();Lc();Ft();jq();Pu();tA="baseType",Yt="baseData",pr="properties",Yq="true";Lle={Version:"3.3.6"}});var Qq,ZD,Ale,rA,ez=ne(()=>{Fo();fr();Lc();Ft();Pu();Qq=(function(){function e(t,n){var r=[],o=!1,i=n.maxRetryCnt;this._get=function(){return r},this._set=function(s){return r=s,r},Xe(e,this,function(s){s[Fc]=function(a){if(s[Oc]()>=n.eventsLimitInMem){o||(se(t,2,105,"Maximum in-memory buffer size reached: "+s[Oc](),!0),o=!0);return}a.cnt=a.cnt||0,!(!ae(i)&&a.cnt>i)&&r[Yi](a)},s[Oc]=function(){return r[Ye]},s.size=function(){for(var a=r[Ye],c=0;c<r[Ye];c++)a+=r[c].item[Ye];return n[by]||(a+=2),a},s[_u]=function(){r=[],o=!1},s.getItems=function(){return r.slice(0)},s.batchPayloads=function(a){if(a&&a[Ye]>0){var c=[];ee(a,function(u){c[Yi](u.item)});var l=n[by]?c.join(`
`):"["+c.join(",")+"]";return l}return null},s.createNew=function(a,c,l){var u=r.slice(0);a=a||t,c=c||{};var f=l?new rA(a,c):new ZD(a,c);return ee(u,function(m){f[Fc](m)}),f}})}return e.__ieDyn=1,e})(),ZD=(function(e){Ao(t,e);function t(n,r){var o=e.call(this,n,r)||this;return Xe(t,o,function(i,s){i[Dh]=function(a){s[_u]()},i[Zd]=function(a){}}),o}return t.__ieDyn=1,t})(Qq),Ale=["AI_buffer","AI_sentBuffer"],rA=(function(e){Ao(t,e);function t(r,o){var i=e.call(this,r,o)||this,s=!1,a=o==null?void 0:o.namePrefix,c=o[Ty]||{getItem:UL,setItem:$L},l=c.getItem,u=c.setItem,f=o.maxRetryCnt;return Xe(t,i,function(m,d){var p=y(t[Ih]),g=y(t[Uc]),h=_(),w=g[Du](h),C=m._set(p[Du](w));C[Ye]>t[Ph]&&(C[Ye]=t[Ph]),I(t[Uc],[]),I(t[Ih],C),m[Fc]=function(U){if(m[Oc]()>=t[Ph]){s||(se(r,2,67,"Maximum buffer size reached: "+m[Oc](),!0),s=!0);return}U.cnt=U.cnt||0,!(!ae(f)&&U.cnt>f)&&(d[Fc](U),I(t[Ih],m._get()))},m[_u]=function(){d[_u](),I(t[Ih],m._get()),I(t[Uc],[]),s=!1},m[Dh]=function(U){I(t[Ih],m._set(v(U,m._get())));var R=y(t[Uc]);R instanceof Array&&U instanceof Array&&(R=R[Du](U),R[Ye]>t[Ph]&&(se(r,1,67,"Sent buffer reached its maximum size: "+R[Ye],!0),R[Ye]=t[Ph]),I(t[Uc],R))},m[Zd]=function(U){var R=y(t[Uc]);R=v(U,R),I(t[Uc],R)},m.createNew=function(U,R,E){E=!!E;var x=m._get().slice(0),b=y(t[Uc]).slice(0);U=U||r,R=R||{},m[_u]();var D=E?new t(U,R):new ZD(U,R);return ee(x,function(T){D[Fc](T)}),E&&D[Dh](b),D};function v(U,R){var E=[],x=[];return ee(U,function(b){x[Yi](b.item)}),ee(R,function(b){!ke(b)&&wt(x,b.item)===-1&&E[Yi](b)}),E}function y(U){var R=U;return R=a?a+"_"+R:R,S(R)}function S(U){try{var R=l(r,U);if(R){var E=Ir().parse(R);if(Re(E)&&(E=Ir().parse(E)),E&&we(E))return E}}catch(x){se(r,1,42," storage key: "+U+", "+tn(x),{exception:Ee(x)})}return[]}function I(U,R){var E=U;try{E=a?a+"_"+E:E;var x=JSON[Eu](R);u(r,E,x)}catch(b){u(r,E,JSON[Eu]([])),se(r,2,41," storage key: "+E+", "+tn(b)+". Buffer cleared",{exception:Ee(b)})}}function _(){var U=[];try{return ee(Ale,function(R){var E=A(R);if(U=U[Du](E),a){var x=a+"_"+R,b=A(x);U=U[Du](b)}}),U}catch(R){se(r,2,41,"Transfer events from previous buffers: "+tn(R)+". previous Buffer items can not be removed",{exception:Ee(R)})}return[]}function A(U){try{var R=S(U),E=[];return ee(R,function(x){var b={item:x,cnt:0};E[Yi](b)}),ML(r,U),E}catch{}return[]}}),i}var n;return n=t,t.VERSION="_1",t.BUFFER_KEY="AI_buffer"+n.VERSION,t.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,t.MAX_BUFFER_SIZE=2e3,t})(Qq)});var tz,nz=ne(()=>{fr();Ft();Pu();tz=(function(){function e(t){Xe(e,this,function(n){n.serialize=function(s){var a=r(s,"root");try{return Ir()[Eu](a)}catch(c){se(t,1,48,c&&ke(c[Ac])?c[Ac]():"Error serializing object",null,!0)}};function r(s,a){var c="__aiCircularRefCheck",l={};if(!s)return se(t,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),l;if(s[c])return se(t,2,50,"Circular reference detected while serializing object",{name:a},!0),l;if(!s.aiDataContract){if(a==="measurements")l=i(s,"number",a);else if(a==="properties")l=i(s,"string",a);else if(a==="tags")l=i(s,"string",a);else if(we(s))l=o(s,a);else{se(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{Ir()[Eu](s),l=s}catch(u){se(t,1,48,u&&ke(u[Ac])?u[Ac]():"Error serializing object",null,!0)}}return l}return s[c]=!0,Ie(s.aiDataContract,function(u,f){var m=ke(f)?f()&1:f&1,d=ke(f)?f()&4:f&4,p=f&2,g=s[u]!==void 0,h=en(s[u])&&s[u]!==null;if(m&&!g&&!p)se(t,1,24,"Missing required field specification. The field is required but not present on source",{field:u,name:a});else if(!d){var w=void 0;h?p?w=o(s[u],u):w=r(s[u],u):w=s[u],w!==void 0&&(l[u]=w)}}),delete s[c],l}function o(s,a){var c;if(s)if(!we(s))se(t,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var l=0;l<s[Ye];l++){var u=s[l],f=r(u,a+"["+l+"]");c[Yi](f)}}return c}function i(s,a,c){var l;return s&&(l={},Ie(s,function(u,f){if(a==="string")f===void 0?l[u]="undefined":f===null?l[u]="null":f[Ac]?l[u]=f[Ac]():l[u]="invalid field: toString() is not defined.";else if(a==="number")if(f===void 0)l[u]="undefined";else if(f===null)l[u]="null";else{var m=parseFloat(f);l[u]=m}else l[u]="invalid field: "+c+" is of unknown type.",se(t,1,l[u],null,!0)})),l}})}return e.__ieDyn=1,e})()});var Fle,rz,oz=ne(()=>{Pu();Fle=8,rz=(function(){function e(){}return e.prototype.getHashCodeScore=function(t){var n=this.getHashCode(t)/e.INT_MAX_VALUE;return n*100},e.prototype.getHashCode=function(t){if(t==="")return 0;for(;t[Ye]<Fle;)t=t[Du](t);for(var n=5381,r=0;r<t[Ye];++r)n=(n<<5)+n+t.charCodeAt(r),n=n&n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e})()});var iz,sz=ne(()=>{Lc();Pu();oz();iz=(function(){function e(){var t=this,n=new rz,r=new Py;t.getSamplingScore=function(o){var i=0;return o[Mn]&&o[Mn][r.userId]?i=n.getHashCodeScore(o[Mn][r.userId]):o.ext&&o.ext.user&&o.ext.user.id?i=n[Vq](o.ext.user.id):o[Mn]&&o[Mn][r.operationId]?i=n.getHashCodeScore(o[Mn][r.operationId]):o.ext&&o.ext.telemetryTrace&&o.ext.telemetryTrace[Xd]?i=n.getHashCodeScore(o.ext.telemetryTrace[Xd]):i=Math.random()*100,i}}return e})()});var az,cz=ne(()=>{Lc();Ft();Pu();sz();az=(function(){function e(t,n){this.INT_MAX_VALUE=2147483647;var r=n||Ec(null);(t>100||t<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:t},!0),t=100),this[Nh]=t,this.samplingScoreGenerator=new iz}return e.prototype.isSampledIn=function(t){var n=this[Nh],r=!1;return n==null||n>=100||t.baseType===Rc[Vi]?!0:(r=this.samplingScoreGenerator.getSamplingScore(t)<n,r)},e})()});function uz(e){try{return e.responseText}catch{}return null}function Ule(e){return e&&e.sendPOST}function $le(e){return!isNaN(e)&&e>0&&e<=100}var Ot,$c,Pa,lz,Ole,fz,Mle,Ny,dz=ne(()=>{Fo();fr();Lc();Ft();Ne();Zq();ez();nz();cz();Pu();Pa=void 0,lz="",Ole=65e3;fz=Es((Ot={endpointUrl:eh(ys,Ad+_a)},Ot[by]=Wi(),Ot.maxBatchInterval=15e3,Ot[JL]=102400,Ot.disableTelemetry=Wi(),Ot[ZL]=Wi(!0),Ot.isRetryDisabled=Wi(),Ot[qD]=Wi(!0),Ot[eA]=Wi(!0),Ot.disableXhr=Wi(),Ot[QL]=Wi(),Ot[GD]=Wi(),Ot[Rh]=Pa,Ot.namePrefix=Pa,Ot.samplingPercentage=eh($le,100),Ot[YD]=Pa,Ot.convertUndefined=Pa,Ot.eventsLimitInMem=1e4,Ot[Ty]=!1,Ot.httpXHROverride={isVal:Ule,v:Pa},Ot[XL]=Wi(),Ot.transports=Pa,Ot.retryCodes=Pa,Ot.maxRetryCnt={isVal:Sr,v:10},Ot));Mle=($c={},$c[kc.dataType]=nA,$c[qd.dataType]=Xq,$c[Yd.dataType]=Kq,$c[zd.dataType]=Jq,$c[Vd.dataType]=qq,$c[Rc.dataType]=zq,$c[Gd.dataType]=Gq,$c),Ny=(function(e){Ao(t,e);function t(){var n=e.call(this)||this;n.priority=1001,n.identifier=WD;var r,o,i,s,a,c,l,u,f=0,m,d,p,g,h,w,C,v,y,S,I,_,A,U,R,E,x,b,D,T,k,L,N,H,B,z,Y;return Xe(t,n,function(G,ce){ye(),G.pause=function(){Q(),s=!0},G.resume=function(){s&&(s=!1,o=null,ot(),$())},G.flush=function(P,F,M){if(P===void 0&&(P=!0),!s){Q();try{return G[bh](P,null,M||1)}catch(q){se(G[Tr](),1,22,"flush failed, telemetry will not be collected: "+tn(q),{exception:Ee(q)})}}},G.onunloadFlush=function(){if(!s)if(C||T)try{return G[bh](!0,Bn,2)}catch(P){se(G[Tr](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+tn(P),{exception:Ee(P)})}else G.flush(!1)},G.addHeader=function(P,F){u[P]=F},G[VD]=function(P,F,M,q){G.isInitialized()&&se(G[Tr](),1,28,"Sender is already initialized"),ce[VD](P,F,M,q);var J=G.identifier;c=new tz(F.logger),r=0,o=null,i=0,G[Th]=null,l=0;var te=G[Tr]();p=pi(Pr("Sender"),F.evtNamespace&&F.evtNamespace()),d=KL(p),G._addHook(dr(P,function(ue){var Oe=ue.cfg;Oe.storagePrefix&&OL(Oe.storagePrefix);var Ze=fo(null,Oe,F),Te=Ze.getExtCfg(J,fz),yo=Te[kh];if(g&&yo===g){var Ha=Oe[kh];Ha&&Ha!==yo&&(Te[kh]=Ha)}so(Te[Rh])&&(Te[Rh]=Oe[Rh]),gt(G,"_senderConfig",{g:function(){return Te}}),h!==Te[kh]&&(g=h=Te[kh]),F.activeStatus()===ai.PENDING?G.pause():F.activeStatus()===ai.ACTIVE&&G.resume(),S&&S!==Te[YD]&&ee(S,function(gr){delete u[gr.header]}),w=Te[JL],C=(Te[GD]===!1||Te[qD]===!1)&&Bi(),v=Te[GD]===!1&&Bi(),y=Te[qD]===!1&&Bi(),T=Te[XL],k=!!Te.disableXhr,Y=Te.retryCodes;var Co=Te[Ty],Us=!!Te[ZL]&&(!!Co||$D()),fC=Te.namePrefix,vK=Us!==E||Us&&b!==fC||Us&&x!==Co;if(G[Ls]){if(vK)try{G[Ls]=G[Ls].createNew(te,Te,Us)}catch(gr){se(G[Tr](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+tn(gr),{exception:Ee(gr)})}ot()}else G[Ls]=Us?new rA(te,Te):new ZD(te,Te);b=fC,E=Us,x=Co,L=!Te[QL]&&wc(!0),B=!!Te[eA],G._sample=new az(Te.samplingPercentage,te),_=Te[Rh],!so(_)&&!Ge(_,Oe)&&se(te,1,100,"Invalid Instrumentation key "+_),S=Te[YD],Re(g)&&!OD(g)&&S&&S[Ye]>0?ee(S,function(gr){n.addHeader(gr.header,gr.value)}):S=null,D=Te.enableSendPromise;var RF=mt();z?z.SetConfig(RF):(z=new _d,z[VD](RF,te));var dC=Te.httpXHROverride,mC=null,cg=null,wK=gc([3,1,2],Te.transports);mC=z&&z[ky](wK,!1);var s0=z&&z.getFallbackInst();N=function(gr,ju){return le(s0,gr,ju)},H=function(gr,ju){return le(s0,gr,ju,!1)},mC=T?dC:mC||dC||s0,G[Th]=function(gr,ju){return le(mC,gr,ju)},L&&(m=yi);var a0=gc([3,1],Te.unloadTransports);L||(a0=a0.filter(function(gr){return gr!==2})),cg=z&&z[ky](a0,!0),cg=T?dC:cg||dC,(T||Te.unloadTransports||!m)&&cg&&(m=function(gr,ju){return le(cg,gr,ju)}),m||(m=N),I=Te.disableTelemetry,A=Te.convertUndefined||Pa,U=Te.isRetryDisabled,R=Te.maxBatchInterval}))},G.processTelemetry=function(P,F){F=G._getTelCtx(F);var M=F[Tr]();try{var q=pt(P,M);if(!q)return;var J=rt(P,M);if(!J)return;var te=c.serialize(J),ue=G[Ls];ot(te);var Oe={item:te,cnt:0};ue[Fc](Oe),$()}catch(Ze){se(M,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+tn(Ze),{exception:Ee(Ze)})}G.processNext(P,F)},G.isCompletelyIdle=function(){return!s&&f===0&&G._buffer[Oc]()===0},G.getOfflineListener=function(){return d},G._xhrReadyStateChange=function(P,F,M){if(!Lr(F))return Mt(P,F,M)},G[bh]=function(P,F,M){P===void 0&&(P=!0);var q;if(!s)try{var J=G[Ls];if(I)J[_u]();else{if(J[Oc]()>0){var te=J.getItems();be(M||0,P),F?q=F.call(G,te,P):q=G[Th](te,P)}i=+new Date}Q()}catch(Oe){var ue=Pw();(!ue||ue>9)&&se(G[Tr](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+tn(Oe),{exception:Ee(Oe)})}return q},G.getOfflineSupport=function(){return{getUrl:function(){return g},createPayload:j,serialize:Dt,batch:Ct,shouldProcess:function(P){return!!pt(P)}}},G._doTeardown=function(P,F){G.onunloadFlush(),Cc(d,!1),ye()},G[Iu]=function(P,F,M){if(!Lr(P))return wo(P,F,M)},G[zD]=function(P,F){if(!Lr(P))return Dn(P,F)},G[Ry]=function(P,F){if(!Lr(P))return gn(P,F)},G._xdrOnLoad=function(P,F){if(!Lr(F))return Be(P,F)};function Be(P,F){var M=uz(P);if(P&&(M+""=="200"||M===""))r=0,G[Ry](F,0);else{var q=xd(M);q&&q[KD]&&q[KD]>q[JD]&&!U?G[zD](F,q):G[Iu](F,pd(P))}}function mt(){try{var P={xdrOnComplete:function(M,q,J){var te=Jt(J);if(te)return Be(M,te)},fetchOnComplete:function(M,q,J,te){var ue=Jt(te);if(ue)return ht(M.status,ue,M.url,ue[Ye],M.statusText,J||"")},xhrOnComplete:function(M,q,J){var te=Jt(J);if(te)return Mt(M,te,te[Ye])},beaconOnRetry:function(M,q,J){return Nr(M,q,J)}},F={enableSendPromise:D,isOneDs:!1,disableCredentials:!1,disableXhr:k,disableBeacon:!y,disableBeaconSync:!v,senderOnCompleteCallBack:P};return F}catch{}return null}function Mt(P,F,M){P.readyState===4&&ht(P.status,F,P.responseURL,M,hc(P),uz(P)||P.response)}function wo(P,F,M){se(G[Tr](),2,26,"Failed to send telemetry.",{message:F}),G._buffer&&G._buffer[Zd](P)}function Dn(P,F){for(var M=[],q=[],J=F.errors.reverse(),te=0,ue=J;te<ue.length;te++){var Oe=ue[te],Ze=P.splice(Oe.index,1)[0];ie(Oe.statusCode)?q[Yi](Ze):M[Yi](Ze)}P[Ye]>0&&G[Ry](P,F[JD]),M[Ye]>0&&G[Iu](M,hc(null,["partial success",F[JD],"of",F.itemsReceived].join(" "))),q[Ye]>0&&(Qn(q),se(G[Tr](),2,40,"Partial success. Delivered: "+P[Ye]+", Failed: "+M[Ye]+". Will retry to send "+q[Ye]+" our of "+F[KD]+" items"))}function gn(P,F){G._buffer&&G._buffer[Zd](P)}function Jt(P){try{if(P){var F=P,M=F.oriPayload;return M&&M[Ye]?M:null}}catch{}return null}function pt(P,F){if(I)return!1;if(!P)return F&&se(F,1,7,"Cannot send empty telemetry"),!1;if(P.baseData&&!P[XD])return F&&se(F,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(P[XD]||(P[XD]="EventData"),!G[Th])return F&&se(F,1,28,"Sender was not initialized"),!1;if(oe(P))P[py]=G._sample[Nh];else return F&&se(F,2,33,"Telemetry item was sampled out and not sent",{SampleRate:G._sample[Nh]}),!1;return!0}function rt(P,F){var M=P.iKey||_,q=t.constructEnvelope(P,M,F,A);if(!q){se(F,1,47,"Unable to create an AppInsights envelope");return}var J=!1;if(P[Mn]&&P[Mn][hy]&&(ee(P[Mn][hy],function(te){try{te&&te(q)===!1&&(J=!0,uo(F,"Telemetry processor check returns false"))}catch(ue){se(F,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+tn(ue),{exception:Ee(ue)},!0)}}),delete P[Mn][hy]),!J)return q}function Dt(P){var F=lz,M=G[Tr]();try{var q=pt(P,M),J=null;q&&(J=rt(P,M)),J&&(F=c.serialize(J))}catch{}return F}function Ct(P){var F=lz;return P&&P[Ye]&&(F="["+P.join(",")+"]"),F}function j(P){var F=et();return{urlString:g,data:P,headers:F}}function oe(P){return G._sample.isSampledIn(P)}function xe(P,F,M,q){F===200&&P?G._onSuccess(P,P[Ye]):q&&G[Iu](P,q)}function le(P,F,M,q){q===void 0&&(q=!0);var J=function(Oe,Ze,Te){return xe(F,Oe,Ze,Te)},te=De(F),ue=P&&P.sendPOST;return ue&&te?(q&&G._buffer[Dh](F),ue(te,J,!M)):null}function De(P){if(we(P)&&P[Ye]>0){var F=G[Ls].batchPayloads(P),M=et(),q={data:F,urlString:g,headers:M,disableXhrSync:k,disableFetchKeepAlive:!L,oriPayload:P};return q}return null}function et(){try{var P=u||{};return OD(g)&&(P[AD[6]]=AD[7]),P}catch{}return null}function ot(P){var F=P?P[Ye]:0;return G[Ls].size()+F>w?((!d||d.isOnline())&&G[bh](!0,null,10),!0):!1}function ht(P,F,M,q,J,te){var ue=null;if(G._appId||(ue=xd(te),ue&&ue.appId&&(G._appId=ue.appId)),(P<200||P>=300)&&P!==0){if((P===301||P===307||P===308)&&!vn(M)){G[Iu](F,J);return}if(d&&!d.isOnline()){if(!U){var Oe=10;Qn(F,Oe),se(G[Tr](),2,40,". Offline - Response Code: ".concat(P,". Offline status: ").concat(!d.isOnline(),". Will retry to send ").concat(F.length," items."))}return}!U&&ie(P)?(Qn(F),se(G[Tr](),2,40,". Response code "+P+". Will retry to send "+F[Ye]+" items.")):G[Iu](F,J)}else vn(M),P===206?(ue||(ue=xd(te)),ue&&!U?G[zD](F,ue):G[Iu](F,J)):(r=0,G[Ry](F,q))}function vn(P){return l>=10?!1:!ae(P)&&P!==""&&P!==g?(g=P,++l,!0):!1}function Bn(P,F){if(m)m(P,!1);else{var M=z&&z[ky]([3],!0);return le(M,P,F)}}function Nr(P,F,M){var q=P,J=q&&q.oriPayload;if(B)H&&H(J,!0),se(G[Tr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var te=[],ue=0;ue<J[Ye];ue++){var Oe=J[ue],Ze=[Oe],Te=De(Ze);M(Te,F)?G._onSuccess(Ze,Ze[Ye]):te[Yi](Oe)}te[Ye]>0&&(H&&H(te,!0),se(G[Tr](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Lr(P){try{if(P&&P[Ye])return Re(P[0])}catch{}return null}function yi(P,F){var M=null;if(we(P)){for(var q=P[Ye],J=0;J<P[Ye];J++)q+=P[J].item[Ye];var te=z.getSyncFetchPayload();te+q<=Ole?M=2:Bi()?M=3:(M=1,se(G[Tr](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var ue=z&&z[ky]([M],!0);return le(ue,P,F)}return null}function Qn(P,F){if(F===void 0&&(F=1),!(!P||P[Ye]===0)){var M=G[Ls];M[Zd](P),r++;for(var q=0,J=P;q<J.length;q++){var te=J[q];te.cnt=te.cnt||0,te.cnt++,M[Fc](te)}Ma(F),$()}}function Ma(P){var F=10,M;if(r<=1)M=F;else{var q=(Math.pow(2,r)-1)/2,J=Ai(Math.random()*q*F)+1;J=P*J,M=ra(Yl(J,3600),F)}var te=En()+M*1e3;o=te}function $(){if(!a&&!s){var P=o?ra(0,o-En()):0,F=ra(R,P);a=si(function(){a=null,G[bh](!0,null,1)},F)}}function Q(){a&&a.cancel(),a=null,o=null}function ie(P){return ae(Y)?P===401||P===408||P===429||P===500||P===502||P===503||P===504:Y[Ye]&&Y.indexOf(P)>-1}function ve(){var P="getNotifyMgr";return G.core[P]?G.core[P]():G.core._notificationManager}function be(P,F){var M=ve();if(M&&M.eventsSendRequest)try{M.eventsSendRequest(P,F)}catch(q){se(G[Tr](),1,74,"send request notification failed: "+tn(q),{exception:Ee(q)})}}function Ge(P,F){var M=F.disableInstrumentationKeyValidation,q=ae(M)?!1:M;if(q)return!0;var J="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",te=new RegExp(J);return te.test(P)}function ye(){G[Th]=null,G[Ls]=null,G._appId=null,G._sample=null,u={},d=null,r=0,o=null,i=null,s=!1,a=null,c=null,l=0,f=0,m=null,p=null,g=null,h=null,w=0,C=!1,S=null,I=!1,_=null,A=Pa,U=!1,E=null,b=Pa,k=!1,L=!1,B=!1,N=null,H=null,z=null,gt(G,"_senderConfig",{g:function(){return h_({},fz)}})}}),n}return t.constructEnvelope=function(n,r,o,i){var s;r!==n.iKey&&!ae(r)?s=Oi(Oi({},n),{iKey:r}):s=n;var a=Mle[s.baseType]||nA;return a(o,s,i)},t})(Dc)});var oA=ne(()=>{dz()});var nm,Ly,Lh,Ah,mz=ne(()=>{nm="instrumentationKey",Ly="connectionString",Lh="endpointUrl",Ah="userOverrideEndpointUrl"});var pz={};hC(pz,{AppInsightsCore:()=>Ic,ApplicationInsights:()=>Wle,Sender:()=>Ny,SeverityLevel:()=>GL,arrForEach:()=>ee,isNullOrUndefined:()=>ae,proxyFunctions:()=>mi,throwError:()=>Ln});function Ble(e){return e&&e>0}var Fh,iA,Hle,Wle,hz=ne(()=>{fr();oA();Lc();Ft();ld();Ne();mz();Ft();Lc();oA();iA=void 0,Hle=(Fh={diagnosticLogInterval:eh(Ble,1e4)},Fh[Ly]=iA,Fh.endpointUrl=iA,Fh[nm]=iA,Fh.extensionConfig={},Fh);Wle=(function(){function e(t){var n=new Ic,r;(ae(t)||ae(t[nm])&&ae(t[Ly]))&&Ln("Invalid input configuration"),Xe(e,this,function(i){gt(i,"config",{g:function(){return r}}),s(),i.initialize=s,i.track=o,mi(i,n,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function s(){var a=jt(t||{},Hle);r=a.cfg,n.addUnloadHook(dr(a,function(){var c=r[Ly];if(so(c)){var l=Ew(function(d,p){fi(c,function(g){var h=g.value,w=r[nm];if(!g.rejected&&h){r[Ly]=h;var C=xy(h);w=C.instrumentationkey||w}d(w)})}),u=Ew(function(d,p){fi(c,function(g){var h=g.value,w=r[Lh];if(!g.rejected&&h){var C=xy(h),v=C.ingestionendpoint;w=v?v+_a:w}d(w)})});r[nm]=l,r[Lh]=r[Ah]||u}if(Re(c)){var f=xy(c),m=f.ingestionendpoint;r[Lh]=r[Ah]?r[Ah]:m+_a,r[nm]=f.instrumentationkey||r[nm]}r[Lh]=r[Ah]?r[Ah]:r[Lh]})),n.initialize(r,[new Ny])}});function o(i){i&&(i.baseData=i.baseData||{},i.baseType=i.baseType||"EventData"),n.track(i)}}return e.__ieDyn=1,e})()});var aA=V(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.TargetPopulation=Tu.Filters=Tu.VSCodeFilterProvider=void 0;var tI=require("vscode"),sA=class e{constructor(t,n,r){this.extensionName=t,this.extensionVersion=n,this.targetPopulation=r}static trimVersionSuffix(t){let n=/\-[a-zA-Z0-9]+$/;return t.split(n)[0]}getFilterValue(t){switch(t){case ba.ApplicationVersion:return e.trimVersionSuffix(tI.version);case ba.Build:return tI.env.appName;case ba.ClientId:return tI.env.machineId;case ba.ExtensionName:return this.extensionName;case ba.ExtensionVersion:return e.trimVersionSuffix(this.extensionVersion);case ba.Language:return tI.env.language;case ba.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let t=new Map,n=Object.values(ba);for(let r of n)t.set(r,this.getFilterValue(r));return t}};Tu.VSCodeFilterProvider=sA;var ba;(function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"})(ba||(Tu.Filters=ba={}));var yz;(function(e){e.Team="team",e.Internal="internal",e.Insiders="insider",e.Public="public"})(yz||(Tu.TargetPopulation=yz={}))});var Cz=V(nI=>{"use strict";Object.defineProperty(nI,"__esModule",{value:!0});nI.BaseFeatureProvider=void 0;var cA=class{constructor(t){this.telemetry=t,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let t=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,t}};nI.BaseFeatureProvider=cA});var Ez=V(rI=>{"use strict";Object.defineProperty(rI,"__esModule",{value:!0});rI.FilteredFeatureProvider=void 0;var jle=Cz(),lA=class extends jle.BaseFeatureProvider{constructor(t,n){super(t),this.telemetry=t,this.filterProviders=n,this.cachedTelemetryEvents=[]}getFilters(){let t=new Map;for(let n of this.filterProviders){let r=n.getFilters();for(let o of r.keys()){let i=r.get(o);t.set(o,i)}}return t}PostEventToTelemetry(t){if(this.cachedTelemetryEvents.includes(t))return;let n=JSON.stringify(t);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",n]])),this.cachedTelemetryEvents.push(t)}};rI.FilteredFeatureProvider=lA});var Sz=V(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.TasApiFeatureProvider=ku.TASAPI_FETCHERROR_EVENTNAME=void 0;var Vle=Ez();ku.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var uA="ErrorType",fA=class extends Vle.FilteredFeatureProvider{constructor(t,n,r){super(n,r),this.httpClient=t,this.telemetry=n,this.filterProviders=r}async fetch(){let t=this.getFilters(),n={};for(let a of t.keys()){let c=t.get(a);n[a]=c}let r;try{r=await this.httpClient.get({headers:n})}catch(a){let c=a,l=new Map;c.responseReceived&&!c.responseOk?l.set(uA,"ServerError"):c.responseReceived===!1?l.set(uA,"NoResponse"):l.set(uA,"GenericError"),this.telemetry.postEvent(ku.TASAPI_FETCHERROR_EVENTNAME,l)}if(!r)throw Error(ku.TASAPI_FETCHERROR_EVENTNAME);t.keys.length>0&&this.PostEventToTelemetry(n);let o=r.data,i=o.Configs,s=[];for(let a of i)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};ku.TasApiFeatureProvider=fA});var xz=V($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.HttpClient=$h.FetchError=void 0;var Uh=class extends Error{constructor(t,n,r){super(t),this.responseReceived=n,this.responseOk=r}};$h.FetchError=Uh;var dA=class{constructor(t){this.endpoint=t}async get(t){let n=await fetch(this.endpoint,{method:"GET",headers:t==null?void 0:t.headers});if(!n)throw new Uh("No response received",!1);if(!n.ok)throw new Uh("Response not ok",!0,!1);let r=await n.json();if(!r)throw new Uh("No data received",!1);return{data:r}}};$h.HttpClient=dA});var _z=V(oI=>{"use strict";Object.defineProperty(oI,"__esModule",{value:!0});oI.MemoryKeyValueStorage=void 0;var mA=class{constructor(){this.storage=new Map}async getValue(t,n){return this.storage.has(t)?await Promise.resolve(this.storage.get(t)):await Promise.resolve(n||void 0)}setValue(t,n){this.storage.set(t,n)}};oI.MemoryKeyValueStorage=mA});var Dz=V(iI=>{"use strict";Object.defineProperty(iI,"__esModule",{value:!0});iI.ExperimentationServiceBase=void 0;var Yle=_z(),pA=class{get features(){return this._features}set features(t){this._features=t,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(t,n,r,o,i){this.telemetry=t,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=r,this.storageKey=o,this.storage=i,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(i=new Yle.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(t=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));let n=await this.fetchPromise;this.updateFeatures(n,t)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(t,n=!1){let r={features:[],assignmentContext:"",configs:[]};for(let o of t){for(let i of o.features)r.features.includes(i)||r.features.push(i);for(let i of o.configs){let s=r.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):r.configs.push(i)}r.assignmentContext+=o.assignmentContext}(n||!this.featuresConsumed)&&(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let t;this.storage&&(t=await this.storage.getValue(this.storageKey),t!==void 0&&t.configs===void 0&&(t.configs=[])),this.features.features.length===0&&(this.features=t||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(t){return this.featuresConsumed=!0,this.PostEventToTelemetry(t),this.features.features.includes(t)}async isCachedFlightEnabled(t){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(t),this.features.features.includes(t)}async isFlightEnabledAsync(t){let n=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(t),n.features.includes(t)}getTreatmentVariable(t,n){this.featuresConsumed=!0,this.PostEventToTelemetry(`${t}.${n}`);let r=this.features.configs.find(o=>o.Id===t);return r==null?void 0:r.Parameters[n]}async getTreatmentVariableAsync(t,n,r){if(r){let o=this.featuresConsumed,i=this.getTreatmentVariable(t,n);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(t,n)}PostEventToTelemetry(t){this.cachedTelemetryEvents.includes(t)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",t]])),this.cachedTelemetryEvents.push(t))}invokeInit(){this.init()}addFeatureProvider(...t){if(!(t==null||this.featureProviders==null))for(let n of t)this.featureProviders.push(n)}};iI.ExperimentationServiceBase=pA});var Iz=V(sI=>{"use strict";Object.defineProperty(sI,"__esModule",{value:!0});sI.PollingService=void 0;var hA=class{constructor(t){this.fetchInterval=t}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(t){this.onTick=t}StartPolling(t=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(t&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};sI.PollingService=hA});var Pz=V(aI=>{"use strict";Object.defineProperty(aI,"__esModule",{value:!0});aI.ExperimentationServiceAutoPolling=void 0;var Gle=Dz(),qle=Iz(),gA=class extends Gle.ExperimentationServiceBase{constructor(t,n,r,o,i,s,a){if(super(t,o,i,s,a),this.telemetry=t,this.filterProviders=n,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=i,this.storageKey=s,this.storage=a,r<1e3&&r!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new qle.PollingService(r),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(t=!1){if(this.pollingService){this.pollingService.StopPolling();let n=await super.getFeaturesAsync(t);return this.pollingService.StartPolling(),n}else return await super.getFeaturesAsync(t)}};aI.ExperimentationServiceAutoPolling=gA});var bz=V(lI=>{"use strict";Object.defineProperty(lI,"__esModule",{value:!0});lI.ExperimentationService=void 0;var zle=Sz(),Kle=xz(),Jle=Pz(),cI=class extends Jle.ExperimentationServiceAutoPolling{constructor(t){super(t.telemetry,t.filterProviders||[],t.refetchInterval!=null?t.refetchInterval:0,t.assignmentContextTelemetryPropertyName,t.telemetryEventName,t.storageKey,t.keyValueStorage),this.options=t,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new zle.TasApiFeatureProvider(new Kle.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};lI.ExperimentationService=cI;cI.REFRESH_RATE_IN_MINUTES=30});var Tz=V(uI=>{"use strict";Object.defineProperty(uI,"__esModule",{value:!0});uI.ExperimentationService=void 0;var Xle=bz();Object.defineProperty(uI,"ExperimentationService",{enumerable:!0,get:function(){return Xle.ExperimentationService}})});var kz=V(fI=>{"use strict";Object.defineProperty(fI,"__esModule",{value:!0});fI.MementoKeyValueStorage=void 0;var vA=class{constructor(t){this.mementoGlobalStorage=t}async getValue(t,n){return await this.mementoGlobalStorage.get(t)||n}setValue(t,n){this.mementoGlobalStorage.update(t,n)}};fI.MementoKeyValueStorage=vA});var Rz=V(yA=>{"use strict";Object.defineProperty(yA,"__esModule",{value:!0});var wA=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(t){return!1}isCachedFlightEnabled(t){return Promise.resolve(!1)}isFlightEnabledAsync(t){return Promise.resolve(!1)}getTreatmentVariable(t,n){}getTreatmentVariableAsync(t,n){return Promise.resolve(void 0)}};yA.default=wA});var Lz=V(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.getExperimentationServiceAsync=Mh.getExperimentationService=void 0;var Zle=aA(),Qle=Tz(),CA=require("vscode"),eue=kz(),tue=Rz(),nue="https://default.exp-tas.com/vscode/ab",rue="query-expfeature",oue="abexp.assignmentcontext",iue="VSCode.ABExp.FeatureData",sue=1e3*60*30;function Nz(e,t,n,r,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=CA.workspace.getConfiguration("telemetry");if(!(CA.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):CA.env.isTelemetryEnabled))return new tue.default;let l=[new Zle.VSCodeFilterProvider(e,t,n),...i],u=new eue.MementoKeyValueStorage(o);return new Qle.ExperimentationService({filterProviders:l,telemetry:r,storageKey:iue,keyValueStorage:u,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:oue,telemetryEventName:rue,endpoint:nue,refetchInterval:sue})}Mh.getExperimentationService=Nz;async function aue(e,t,n,r,o,...i){let s=Nz(e,t,n,r,o,...i);return await s.initializePromise,s}Mh.getExperimentationServiceAsync=aue});var Fz=V(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.TargetPopulation=Ru.getExperimentationServiceAsync=Ru.getExperimentationService=void 0;var Az=Lz();Object.defineProperty(Ru,"getExperimentationService",{enumerable:!0,get:function(){return Az.getExperimentationService}});Object.defineProperty(Ru,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return Az.getExperimentationServiceAsync}});var cue=aA();Object.defineProperty(Ru,"TargetPopulation",{enumerable:!0,get:function(){return cue.TargetPopulation}})});var rK=V((Y2e,gde)=>{gde.exports={name:"remote-containers",displayName:"%displayName%",description:"%description%",version:"0.442.0",publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.99.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"%capabilities.untrustedWorkspaces.description%"},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","devcontainer","development container","continueOn"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onResolveRemoteAuthority:apple-container","onDebugResolve:extensionHost"],main:"./dist/extension/extension",l10n:"./l10n",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote","contribRemoteHelp"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"},{command:"remote-containers.openRepositoryFromGitWithEditSession",group:"0_local@2",when:"git.state == initialized && gitOpenRepositoryCount != 0 && remoteName =~ /(codespaces*.*|tunnel)/ && false",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"}],languages:[{id:"jsonc",filenames:["devcontainer-feature.json",".devcontainer-internal.json"]}],jsonValidation:[{fileMatch:"devcontainer-feature.json",url:"https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"}],configuration:{title:"%configuration.title%",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"%configuration.defaultExtensions.deprecationMessage%",markdownDeprecationMessage:"%configuration.defaultExtensions.markdownDeprecationMessage%"},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"%configuration.defaultExtensions.description%",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"%configuration.defaultExtensions.errorMessage%"}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"%configuration.defaultFeatures%",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"%configuration.workspaceMountConsistency.deprecationMessage%",markdownDeprecationMessage:"%configuration.workspaceMountConsistency.markdownDeprecationMessage%"},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["%configuration.workspaceMountConsistency.consistent%","%configuration.workspaceMountConsistency.cached%","%configuration.workspaceMountConsistency.delegated%"],description:"%configuration.workspaceMountConsistency.description%",default:"cached"},"dev.containers.gpuAvailability":{scope:"machine",type:"string",enum:["all","detect","none"],enumDescriptions:["%configuration.gpuAvailability.all%","%configuration.gpuAvailability.detect%","%configuration.gpuAvailability.none%"],description:"%configuration.gpuAvailability.description%",default:"detect"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"%configuration.cacheVolume.deprecationMessage%",markdownDeprecationMessage:"%configuration.cacheVolume.markdownDeprecationMessage%"},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"%configuration.cacheVolume.description%",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"%configuration.copyGitConfig.deprecationMessage%",markdownDeprecationMessage:"%configuration.copyGitConfig.markdownDeprecationMessage%"},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"%configuration.copyGitConfig.markdownDescription%",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"%configuration.gitCredentialHelperConfigLocation.deprecationMessage%",markdownDeprecationMessage:"%configuration.gitCredentialHelperConfigLocation.markdownDeprecationMessage%"},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["%configuration.gitCredentialHelperConfigLocation.system%","%configuration.gitCredentialHelperConfigLocation.global%","%configuration.gitCredentialHelperConfigLocation.none%"],description:"%configuration.gitCredentialHelperConfigLocation.description%",default:"global"},"dev.containers.dockerCredentialHelper":{scope:"machine",type:"boolean",markdownDescription:"%configuration.dockerCredentialHelper.markdownDescription%",default:!0},"dev.containers.githubCLILoginWithToken":{scope:"machine",type:"boolean",markdownDescription:"%configuration.githubCLILoginWithToken.markdownDescription%",default:!1},"dev.containers.mountWaylandSocket":{scope:"application",ignoreSync:!0,type:"boolean",markdownDescription:"%configuration.mountWaylandSocket.markdownDescription%",default:!0},"remote.containers.logLevel":{scope:"application",deprecationMessage:"%configuration.logLevel.deprecationMessage%",markdownDeprecationMessage:"%configuration.logLevel.markdownDeprecationMessage%"},"dev.containers.logLevel":{scope:"application",type:"string",description:"%configuration.logLevel.description%",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"%configuration.dockerPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerPath.markdownDeprecationMessage%"},"dev.containers.dockerPath":{scope:"application",type:"string",description:"%configuration.dockerPath.description%",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"%configuration.dockerComposePath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerComposePath.markdownDeprecationMessage%"},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"%configuration.dockerComposePath.description%",default:"docker-compose"},"dev.containers.dockerSocketPath":{scope:"application",type:"string",description:"%configuration.dockerSocketPath.description%",default:"/var/run/docker.sock"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"%configuration.executeInWSL.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSL.markdownDeprecationMessage%"},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"%configuration.executeInWSL.description%",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"%configuration.executeInWSLDistro.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSLDistro.markdownDeprecationMessage%"},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"%configuration.executeInWSLDistro.markdownDescription%"},"dev.containers.forwardWSLServices":{scope:"application",type:"boolean",description:"%configuration.forwardWSLServices.description%",default:!0},"dotfiles.repository":{scope:"machine",type:"string",description:"%configuration.dotfiles.repository.description%"},"dotfiles.installCommand":{scope:"machine",type:"string",description:"%configuration.dotfiles.installCommand.description%"},"dotfiles.targetPath":{scope:"machine",type:"string",description:"%configuration.dotfiles.targetPath.description%",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"%configuration.dotfiles.repository.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.repository.markdownDeprecationMessage%"},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"%configuration.dotfiles.installCommand.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.installCommand.markdownDeprecationMessage%"},"remote.containers.dotfiles.targetPath":{scope:"machine",deprecationMessage:"%configuration.dotfiles.targetPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.targetPath.markdownDeprecationMessage%"},"remote.containers.repositoryConfigurationPaths":{scope:"application",deprecationMessage:"%configuration.repositoryConfigurationPaths.deprecationMessage%",markdownDeprecationMessage:"%configuration.repositoryConfigurationPaths.markdownDeprecationMessage%"},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"%configuration.repositoryConfigurationPaths.markdownDescription%",default:[],items:{type:"string"}},"dev.containers.experimentalLockfile":{scope:"application",type:"boolean",description:"%configuration.experimentalLockfile.description%",default:!1},"dev.containers.experimentalMountGitWorktreeCommonDir":{scope:"application",type:"boolean",markdownDescription:"%configuration.experimentalMountGitWorktreeCommonDir.markdownDescription%",default:!1,tags:["experimental"]},"dev.containers.optimisticallyLaunchDocker":{scope:"application",type:"boolean",description:"%configuration.optimisticallyLaunchDocker.description%",default:!0},"dev.containers.experimentalAppleContainerSupport":{scope:"application",type:"boolean",markdownDescription:"%configuration.experimentalAppleContainerSupport.markdownDescription%",default:!1,tags:["experimental"]}}},commands:[{command:"remote-containers.reopenInContainer",title:"%command.reopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildAndReopenInContainer",title:"%command.rebuildAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"%command.rebuildNoCacheAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.reopenLocally",title:"%command.reopenLocally%",category:"%command.category%"},{command:"remote-containers.reopenInWSL",title:"%command.reopenInWSL%",category:"%command.category%"},{command:"remote-containers.reopenInSSH",title:"%command.reopenInSSH%",category:"%command.category%"},{command:"remote-containers.reopenInTunnel",title:"%command.reopenInTunnel%",category:"%command.category%"},{command:"remote-containers.openFolder",title:"%command.openFolder%",category:"%command.category%",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openFolderInContainerInCurrentWindow",title:"%command.openFolderInContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.openFolderInContainerInNewWindow",title:"%command.openFolderInContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.openInformationAboutMountPerformance",title:"%command.openInformationAboutMountPerformance%",category:"%command.category%",icon:"$(info)"},{command:"remote-containers.openRepositoryInVolume",title:"%command.openRepositoryInVolume%",category:"%command.category%"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"%command.openRepositoryInUniqueVolume%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"%command.openRepositoryFromRemoteHubWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromGitWithEditSession",title:"%command.openRepositoryFromGitWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openPullRequestInVolume",title:"%command.openPullRequestInVolume%",category:"%command.category%"},{command:"remote-containers.inspectVolume",title:"%command.inspectVolume%",category:"%command.category%"},{command:"remote-containers.openWorkspace",title:"%command.openWorkspace%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainer",title:"%command.attachToRunningContainer%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"%command.attachToRunningContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.inspectVolumeFromViewlet",title:"%command.inspectVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"%command.cloneInVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cleanUpDevContainers",title:"%command.cleanUpDevContainers%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.pruneVolumes",title:"%command.pruneVolumes%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"%command.explorerVolumesRefresh%",category:"%command.category%",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainer",title:"%command.attachToK8sContainer%",category:"%command.category%"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"%command.attachToK8sContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.attachToAppleContainer",title:"%command.attachToAppleContainer%",category:"%command.category%"},{command:"remote-containers.switchContainer",title:"%command.switchContainer%",category:"%command.category%"},{command:"remote-containers.rebuildContainer",title:"%command.rebuildContainer%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"%command.rebuildContainerNoCache%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"%command.createDevContainerFile%",category:"%command.category%"},{command:"remote-containers.createDevContainerFileWithCopilot",title:"%command.createDevContainerFileWithCopilot%",category:"%command.category%"},{command:"remote-containers.createDevContainer",title:"%command.createDevContainer%",category:"%command.category%"},{command:"remote-containers.settings",title:"%command.settings%",category:"%command.category%"},{command:"remote-containers.getHelp",title:"%command.getHelp%",category:"%command.category%"},{command:"remote-containers.getStarted",title:"%command.getStarted%",category:"%command.category%"},{command:"remote-containers.trySample",title:"%command.trySample%",category:"%command.category%"},{command:"remote-containers.reportIssue",title:"%command.reportIssue%",category:"%command.category%"},{command:"remote-containers.provideFeedback",title:"%command.provideFeedback%",category:"%command.category%"},{command:"remote-containers.openDevContainerFile",title:"%command.openDevContainerFile%",category:"%command.category%",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"%command.openAttachConfigByNameFile%",category:"%command.category%"},{command:"remote-containers.openAttachDevContainerFile",title:"%command.openAttachDevContainerFile%",category:"%command.category%"},{command:"remote-containers.revealLogTerminal",title:"%command.revealLogTerminal%",category:"%command.category%"},{command:"remote-containers.openLogFile",title:"%command.openLogFile%",category:"%command.developerCategory%"},{command:"remote-containers.openLastLogFile",title:"%command.openLastLogFile%",category:"%command.category%"},{command:"remote-containers.testConnection",title:"%command.testConnection%",category:"%command.developerCategory%"},{command:"remote-containers.attachToContainerInCurrentWindow",title:"%command.attachToContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.attachToContainerInNewWindow",title:"%command.attachToContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.stopContainer",title:"%command.stopContainer%",category:"%command.category%"},{command:"remote-containers.startContainer",title:"%command.startContainer%",category:"%command.category%",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"%command.removeContainer%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"%command.removeRecentFolder%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"%command.showDetails%",category:"%command.category%"},{command:"remote-containers.explorerTargetsRefresh",title:"%command.explorerTargetsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"%command.explorerDetailsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"%command.inspectDockerResource%",category:"%command.category%"},{command:"remote-containers.inspectInBasicDevContainer",title:"%command.inspectInBasicDevContainer%",category:"%command.category%"},{command:"remote-containers.cloneInVolume",title:"%command.cloneInVolume%",category:"%command.category%"},{command:"remote-containers.removeVolume",title:"%command.removeVolume%",category:"%command.category%"},{command:"remote-containers.newContainer",title:"%command.newContainer%",category:"%command.category%",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"%command.showContainerLog%",category:"%command.category%"},{command:"remote-containers.addExtensionToConfig",title:"%command.addExtensionToConfig%",category:"%command.category%"},{command:"remote-containers.checkoutPRInVolume",title:"%command.checkoutPRInVolume%",category:"%command.category%"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"%command.showReopenInContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"%command.showRecoveryContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.labelPortAndUpdateConfig",title:"%command.labelPortAndUpdateConfig%",category:"%command.category%",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"%command.installDocker%",category:"%command.category%"},{command:"remote-containers.installDockerInWSL",title:"%command.installDockerInWSL%",category:"%command.category%"},{command:"remote-containers.installUserCLI",title:"%command.installUserCLI%",category:"%command.category%"},{command:"remote-containers.configureContainerFeatures",title:"%command.configureContainerFeatures%",category:"%command.category%"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.openFolder",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.createDevContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openWorkspace",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.openRepositoryFromGitWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToAppleContainer",when:"!hideConnectCommands && config.dev.containers.experimentalAppleContainerSupport && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.switchContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.testConnection",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.getStarted",when:"!remoteName && !virtualWorkspace || remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.trySample",when:"!hideConnectCommands && !remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"!hideConnectCommands && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|apple-container)$/"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"false"},{command:"remote-containers.attachToContainerInNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"false"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"false"},{command:"remote-containers.openInformationAboutMountPerformance",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.installDockerInWSL",when:"!hideConnectCommands && isWindows && !remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_2_actions@0",when:"true"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@1",when:"!hideConnectCommands"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@2",when:"!hideConnectCommands"},{command:"remote-containers.configureContainerFeatures",group:"remote_30_dev-container_2_actions@3",when:"remoteName =~ /^(dev-container)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && remoteName =~ /tunnel*.*/ && gitOpenRepositoryCount == 0"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_2_actions@6",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@3"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@1"},{command:"remote-containers.cleanUpDevContainers",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@2"},{command:"remote-containers.newContainer",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers)",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers) && viewItem =~ /^runningContainer$/i",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"!hideConnectCommands && (view == dockerVolumes || view == vscode-containers.views.volumes) && viewItem == volume",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"!hideConnectCommands && view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/",group:"1_pullrequest@3"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"!hideConnectCommands && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@2"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@2"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@3"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@1"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@2"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^running(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@3"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.openInformationAboutMountPerformance",when:"view == detailsContainers && viewItem == mountPerformanceInfo",group:"inline@1"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && !isWorkspaceScopedExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote|tunnel)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.dev-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.attached-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.exec.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.k8s-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"apple-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.apple-container.workspaceSuffix%"}}],views:{remote:[{id:"targetsContainers",name:"%views.remote.targetsContainers%",when:"!hideConnectCommands",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container","apple-container"]},{id:"detailsContainers",name:"%views.remote.detailsContainers%",when:"!hideConnectCommands && remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"%views.remote.devVolumes%",when:"!hideConnectCommands",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"%viewsWelcome.targetsContainers.needsDockerStartOrInstall%"},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"%viewsWelcome.targetsContainers.needsSSHCredentials%"},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithFolder%"},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithoutFolder%"},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:"%viewsWelcome.devVolumes.noDevVolumes%"}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container","apple-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":'copyfiles --up 4 --all "node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js" dist',"watch-cli":"npm-watch","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":"copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dev-containers-cli","dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},watch:{"copy-cli":"node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js"},devDependencies:{"@stylistic/eslint-plugin":"^3.0.1","@types/adm-zip":"^0.5.7","@types/chai":"^4.3.20","@types/follow-redirects":"^1.14.4","@types/js-yaml":"^4.0.9","@types/markdown-it":"^14.1.2","@types/minimist":"^1.2.5","@types/mocha":"^10.0.10","@types/ncp":"^2.0.8","@types/node":"^22.15.0","@types/pull-stream":"^3.6.7","@types/recursive-readdir":"^2.2.4","@types/semver":"^7.7.1","@types/stats-lite":"^2.2.2","@types/tar":"^6.1.13","@types/tar-stream":"^3.1.4","@types/vscode":"~1.86.0","@types/yargs":"^17.0.33","@typescript-eslint/eslint-plugin":"^8.46.2","@typescript-eslint/experimental-utils":"^5.62.0","@typescript-eslint/parser":"^8.46.2","@vscode/l10n-dev":"^0.0.35","@vscode/vsce":"^3.6.2",ajv:"^8.17.1",chai:"^4.5.0",copyfiles:"^2.4.1",esbuild:"^0.25.11",eslint:"^8.57.0","eslint-plugin-local":"^6.0.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^9.0.1",husky:"^9.1.7",jsonc:"^2.0.0",minimist:"^1.2.8",mocha:"^11.7.4","npm-run-all":"^4.1.5","npm-watch":"^0.13.0","p-all":"^5.0.1",rimraf:"^6.0.1","stats-lite":"^2.2.0","ts-node":"^10.9.2",typescript:"^5.9.3","typescript-formatter":"^7.2.2",vinyl:"^3.0.1","vinyl-fs":"^4.0.2"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#7d2643ac87b8c3048dd452483720fb932fbc9e9e","@vscode/extension-telemetry":"^0.9.9","@vscode/l10n":"^0.0.18","adm-zip":"^0.5.16",applicationinsights:"^2.9.8","find-process":"^2.0.0","follow-redirects":"^1.15.11","js-yaml":"^4.1.1","jsonc-parser":"^3.3.1",muxrpc:"^6.7.3","node-pty":"^1.0.0","pull-pushable":"^2.2.0","pull-stream":"^3.7.0","pull-stream-to-stream":"^2.0.0",semver:"^7.7.3","stream-to-pull-stream":"^1.7.3",tar:"^7.5.4","tar-stream":"^3.1.7","vscode-tas-client":"^0.1.84","vscode-uri":"^3.1.0",yargs:"~17.7.2"}}});var zde={};hC(zde,{activate:()=>vde,attachToContainer:()=>iC,deactivate:()=>Ede});module.exports=_K(zde);var O=W(require("vscode")),aK=W(Ar()),re=require("vscode"),cK=W(require("os")),i0=W(require("fs")),dt=W(require("path")),lK=W(require("querystring"));function ug(e,t=!1){let n=e.length,r=0,o="",i=0,s=16,a=0,c=0,l=0,u=0,f=0;function m(v,y){let S=0,I=0;for(;S<v||!y;){let _=e.charCodeAt(r);if(_>=48&&_<=57)I=I*16+_-48;else if(_>=65&&_<=70)I=I*16+_-65+10;else if(_>=97&&_<=102)I=I*16+_-97+10;else break;r++,S++}return S<v&&(I=-1),I}function d(v){r=v,o="",i=0,s=16,f=0}function p(){let v=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&pm(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&pm(e.charCodeAt(r)))for(r++;r<e.length&&pm(e.charCodeAt(r));)r++;else return f=3,e.substring(v,r);let y=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&pm(e.charCodeAt(r))){for(r++;r<e.length&&pm(e.charCodeAt(r));)r++;y=r}else f=3;return e.substring(v,y)}function g(){let v="",y=r;for(;;){if(r>=n){v+=e.substring(y,r),f=2;break}let S=e.charCodeAt(r);if(S===34){v+=e.substring(y,r),r++;break}if(S===92){if(v+=e.substring(y,r),r++,r>=n){f=2;break}switch(e.charCodeAt(r++)){case 34:v+='"';break;case 92:v+="\\";break;case 47:v+="/";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+=`
`;break;case 114:v+="\r";break;case 116:v+="	";break;case 117:let _=m(4,!0);_>=0?v+=String.fromCharCode(_):f=4;break;default:f=5}y=r;continue}if(S>=0&&S<=31)if(lg(S)){v+=e.substring(y,r),f=2;break}else f=6;r++}return v}function h(){if(o="",f=0,i=r,c=a,u=l,r>=n)return i=n,s=17;let v=e.charCodeAt(r);if(l0(v)){do r++,o+=String.fromCharCode(v),v=e.charCodeAt(r);while(l0(v));return s=15}if(lg(v))return r++,o+=String.fromCharCode(v),v===13&&e.charCodeAt(r)===10&&(r++,o+=`
`),a++,l=r,s=14;switch(v){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,o=g(),s=10;case 47:let y=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<n&&!lg(e.charCodeAt(r));)r++;return o=e.substring(y,r),s=12}if(e.charCodeAt(r+1)===42){r+=2;let S=n-1,I=!1;for(;r<S;){let _=e.charCodeAt(r);if(_===42&&e.charCodeAt(r+1)===47){r+=2,I=!0;break}r++,lg(_)&&(_===13&&e.charCodeAt(r)===10&&r++,a++,l=r)}return I||(r++,f=1),o=e.substring(y,r),s=13}return o+=String.fromCharCode(v),r++,s=16;case 45:if(o+=String.fromCharCode(v),r++,r===n||!pm(e.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=p(),s=11;default:for(;r<n&&w(v);)r++,v=e.charCodeAt(r);if(i!==r){switch(o=e.substring(i,r),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(v),r++,s=16}}function w(v){if(l0(v)||lg(v))return!1;switch(v){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function C(){let v;do v=h();while(v>=12&&v<=15);return v}return{setPosition:d,getPosition:()=>r,scan:t?C:h,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>i,getTokenLength:()=>r-i,getTokenStartLine:()=>c,getTokenStartCharacter:()=>i-u,getTokenError:()=>f}}function l0(e){return e===32||e===9}function lg(e){return e===10||e===13}function pm(e){return e>=48&&e<=57}var UF;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(UF||(UF={}));var Yo=new Array(20).fill(0).map((e,t)=>" ".repeat(t)),hm=200,u0={" ":{"\n":new Array(hm).fill(0).map((e,t)=>`
`+" ".repeat(t)),"\r":new Array(hm).fill(0).map((e,t)=>"\r"+" ".repeat(t)),"\r\n":new Array(hm).fill(0).map((e,t)=>`\r
`+" ".repeat(t))},"	":{"\n":new Array(hm).fill(0).map((e,t)=>`
`+"	".repeat(t)),"\r":new Array(hm).fill(0).map((e,t)=>"\r"+"	".repeat(t)),"\r\n":new Array(hm).fill(0).map((e,t)=>`\r
`+"	".repeat(t))}},$F=[`
`,"\r",`\r
`];function f0(e,t,n){let r,o,i,s,a;if(t){for(s=t.offset,a=s+t.length,i=s;i>0&&!fg(e,i-1);)i--;let S=a;for(;S<e.length&&!fg(e,S);)S++;o=e.substring(i,S),r=$K(o,n)}else o=e,r=0,i=0,s=0,a=e.length;let c=MK(n,e),l=$F.includes(c),u=0,f=0,m;n.insertSpaces?m=Yo[n.tabSize||4]??gm(Yo[1],n.tabSize||4):m="	";let d=m==="	"?"	":" ",p=ug(o,!1),g=!1;function h(){if(u>1)return gm(c,u)+gm(m,r+f);let S=m.length*(r+f);return!l||S>u0[d][c].length?c+gm(m,r+f):S<=0?c:u0[d][c][S]}function w(){let S=p.scan();for(u=0;S===15||S===14;)S===14&&n.keepLines?u+=1:S===14&&(u=1),S=p.scan();return g=S===16||p.getTokenError()!==0,S}let C=[];function v(S,I,_){!g&&(!t||I<a&&_>s)&&e.substring(I,_)!==S&&C.push({offset:I,length:_-I,content:S})}let y=w();if(n.keepLines&&u>0&&v(gm(c,u),0,0),y!==17){let S=p.getTokenOffset()+i,I=m.length*r<20&&n.insertSpaces?Yo[m.length*r]:gm(m,r);v(I,i,S)}for(;y!==17;){let S=p.getTokenOffset()+p.getTokenLength()+i,I=w(),_="",A=!1;for(;u===0&&(I===12||I===13);){let R=p.getTokenOffset()+i;v(Yo[1],S,R),S=p.getTokenOffset()+p.getTokenLength()+i,A=I===12,_=A?h():"",I=w()}if(I===2)y!==1&&f--,n.keepLines&&u>0||!n.keepLines&&y!==1?_=h():n.keepLines&&(_=Yo[1]);else if(I===4)y!==3&&f--,n.keepLines&&u>0||!n.keepLines&&y!==3?_=h():n.keepLines&&(_=Yo[1]);else{switch(y){case 3:case 1:f++,n.keepLines&&u>0||!n.keepLines?_=h():_=Yo[1];break;case 5:n.keepLines&&u>0||!n.keepLines?_=h():_=Yo[1];break;case 12:_=h();break;case 13:u>0?_=h():A||(_=Yo[1]);break;case 6:n.keepLines&&u>0?_=h():A||(_=Yo[1]);break;case 10:n.keepLines&&u>0?_=h():I===6&&!A&&(_="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&u>0?_=h():(I===12||I===13)&&!A?_=Yo[1]:I!==5&&I!==17&&(g=!0);break;case 16:g=!0;break}u>0&&(I===12||I===13)&&(_=h())}I===17&&(n.keepLines&&u>0?_=h():_=n.insertFinalNewline?c:"");let U=p.getTokenOffset()+i;v(_,S,U),y=I}return C}function gm(e,t){let n="";for(let r=0;r<t;r++)n+=e;return n}function $K(e,t){let n=0,r=0,o=t.tabSize||4;for(;n<e.length;){let i=e.charAt(n);if(i===Yo[1])r++;else if(i==="	")r+=o;else break;n++}return Math.floor(r/o)}function MK(e,t){for(let n=0;n<t.length;n++){let r=t.charAt(n);if(r==="\r")return n+1<t.length&&t.charAt(n+1)===`
`?`\r
`:"\r";if(r===`
`)return`
`}return e&&e.eol||`
`}function fg(e,t){return`\r
`.indexOf(e.charAt(t))!==-1}var dg;(function(e){e.DEFAULT={allowTrailingComma:!1}})(dg||(dg={}));function MF(e,t){let n=[],r=new Object,o,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,f){i.value=c,i.offset=l,i.length=u,i.type=f,i.colonOffset=void 0,o=i}try{yC(e,{onObjectBegin:(c,l)=>{if(t<=c)throw r;o=void 0,s=t>c,n.push("")},onObjectProperty:(c,l,u)=>{if(t<l||(a(c,l,u,"property"),n[n.length-1]=c,t<=l+u))throw r},onObjectEnd:(c,l)=>{if(t<=c)throw r;o=void 0,n.pop()},onArrayBegin:(c,l)=>{if(t<=c)throw r;o=void 0,n.push(0)},onArrayEnd:(c,l)=>{if(t<=c)throw r;o=void 0,n.pop()},onLiteralValue:(c,l,u)=>{if(t<l||(a(c,l,u,BF(c)),t<=l+u))throw r},onSeparator:(c,l,u)=>{if(t<=l)throw r;if(c===":"&&o&&o.type==="property")o.colonOffset=l,s=!1,o=void 0;else if(c===","){let f=n[n.length-1];typeof f=="number"?n[n.length-1]=f+1:(s=!0,n[n.length-1]=""),o=void 0}}})}catch(c){if(c!==r)throw c}return{path:n,previousNode:o,isAtPropertyKey:s,matches:c=>{let l=0;for(let u=0;l<c.length&&u<n.length;u++)if(c[l]===n[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function HF(e,t=[],n=dg.DEFAULT){let r=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):r!==null&&(o[r]=c)}return yC(e,{onObjectBegin:()=>{let c={};s(c),i.push(o),o=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{o=i.pop()},onArrayBegin:()=>{let c=[];s(c),i.push(o),o=c,r=null},onArrayEnd:()=>{o=i.pop()},onLiteralValue:s,onError:(c,l,u)=>{t.push({error:c,offset:l,length:u})}},n),o[0]}function wC(e,t=[],n=dg.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){r.type==="property"&&(r.length=c-r.offset,r=r.parent)}function i(c){return r.children.push(c),c}yC(e,{onObjectBegin:c=>{r=i({type:"object",offset:c,length:-1,parent:r,children:[]})},onObjectProperty:(c,l,u)=>{r=i({type:"property",offset:l,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:c,offset:l,length:u,parent:r})},onObjectEnd:(c,l)=>{o(c+l),r.length=c+l-r.offset,r=r.parent,o(c+l)},onArrayBegin:(c,l)=>{r=i({type:"array",offset:c,length:-1,parent:r,children:[]})},onArrayEnd:(c,l)=>{r.length=c+l-r.offset,r=r.parent,o(c+l)},onLiteralValue:(c,l,u)=>{i({type:BF(c),offset:l,length:u,parent:r,value:c}),o(l+u)},onSeparator:(c,l,u)=>{r.type==="property"&&(c===":"?r.colonOffset=l:c===","&&o(l))},onError:(c,l,u)=>{t.push({error:c,offset:l,length:u})}},n);let a=r.children[0];return a&&delete a.parent,a}function mg(e,t){if(!e)return;let n=e;for(let r of t)if(typeof r=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let o=!1;for(let i of n.children)if(Array.isArray(i.children)&&i.children[0].value===r&&i.children.length===2){n=i.children[1],o=!0;break}if(!o)return}else{let o=r;if(n.type!=="array"||o<0||!Array.isArray(n.children)||o>=n.children.length)return;n=n.children[o]}return n}function vC(e){switch(e.type){case"array":return e.children.map(vC);case"object":let t=Object.create(null);for(let n of e.children){let r=n.children[1];r&&(t[n.children[0].value]=vC(r))}return t;case"null":case"string":case"number":case"boolean":return e.value;default:return}}function yC(e,t,n=dg.DEFAULT){let r=ug(e,!1),o=[],i=0;function s(D){return D?()=>i===0&&D(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(D){return D?T=>i===0&&D(T,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function c(D){return D?T=>i===0&&D(T,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice()):()=>!0}function l(D){return D?()=>{i>0?i++:D(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice())===!1&&(i=1)}:()=>!0}function u(D){return D?()=>{i>0&&i--,i===0&&D(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:()=>!0}let f=l(t.onObjectBegin),m=c(t.onObjectProperty),d=u(t.onObjectEnd),p=l(t.onArrayBegin),g=u(t.onArrayEnd),h=c(t.onLiteralValue),w=a(t.onSeparator),C=s(t.onComment),v=a(t.onError),y=n&&n.disallowComments,S=n&&n.allowTrailingComma;function I(){for(;;){let D=r.scan();switch(r.getTokenError()){case 4:_(14);break;case 5:_(15);break;case 3:_(13);break;case 1:y||_(11);break;case 2:_(12);break;case 6:_(16);break}switch(D){case 12:case 13:y?_(10):C();break;case 16:_(1);break;case 15:case 14:break;default:return D}}}function _(D,T=[],k=[]){if(v(D),T.length+k.length>0){let L=r.getToken();for(;L!==17;){if(T.indexOf(L)!==-1){I();break}else if(k.indexOf(L)!==-1)break;L=I()}}}function A(D){let T=r.getTokenValue();return D?h(T):(m(T),o.push(T)),I(),!0}function U(){switch(r.getToken()){case 11:let D=r.getTokenValue(),T=Number(D);isNaN(T)&&(_(2),T=0),h(T);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return I(),!0}function R(){return r.getToken()!==10?(_(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(w(":"),I(),b()||_(4,[],[2,5])):_(5,[],[2,5]),o.pop(),!0)}function E(){f(),I();let D=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(D||_(4,[],[]),w(","),I(),r.getToken()===2&&S)break}else D&&_(6,[],[]);R()||_(4,[],[2,5]),D=!0}return d(),r.getToken()!==2?_(7,[2],[]):I(),!0}function x(){p(),I();let D=!0,T=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(T||_(4,[],[]),w(","),I(),r.getToken()===4&&S)break}else T&&_(6,[],[]);D?(o.push(0),D=!1):o[o.length-1]++,b()||_(4,[],[4,5]),T=!0}return g(),D||o.pop(),r.getToken()!==4?_(8,[4],[]):I(),!0}function b(){switch(r.getToken()){case 3:return x();case 1:return E();case 10:return A(!0);default:return U()}}return I(),r.getToken()===17?n.allowEmptyContent?!0:(_(4,[],[]),!1):b()?(r.getToken()!==17&&_(9,[],[]),!0):(_(4,[],[]),!1)}function BF(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(e){if(Array.isArray(e))return"array"}else return"null";return"object"}default:return"null"}}function WF(e,t,n,r){let o=t.slice(),s=wC(e,[]),a,c;for(;o.length>0&&(c=o.pop(),a=mg(s,o),a===void 0&&n!==void 0);)typeof c=="string"?n={[c]:n}:n=[n];if(a)if(a.type==="object"&&typeof c=="string"&&Array.isArray(a.children)){let l=mg(a,[c]);if(l!==void 0)if(n===void 0){if(!l.parent)throw new Error("Malformed AST");let u=a.children.indexOf(l.parent),f,m=l.parent.offset+l.parent.length;if(u>0){let d=a.children[u-1];f=d.offset+d.length}else f=a.offset+1,a.children.length>1&&(m=a.children[1].offset);return Yu(e,{offset:f,length:m-f,content:""},r)}else return Yu(e,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r);else{if(n===void 0)return[];let u=`${JSON.stringify(c)}: ${JSON.stringify(n)}`,f=r.getInsertionIndex?r.getInsertionIndex(a.children.map(d=>d.children[0].value)):a.children.length,m;if(f>0){let d=a.children[f-1];m={offset:d.offset+d.length,length:0,content:","+u}}else a.children.length===0?m={offset:a.offset+1,length:0,content:u}:m={offset:a.offset+1,length:0,content:u+","};return Yu(e,m,r)}}else if(a.type==="array"&&typeof c=="number"&&Array.isArray(a.children)){let l=c;if(l===-1){let u=`${JSON.stringify(n)}`,f;if(a.children.length===0)f={offset:a.offset+1,length:0,content:u};else{let m=a.children[a.children.length-1];f={offset:m.offset+m.length,length:0,content:","+u}}return Yu(e,f,r)}else if(n===void 0&&a.children.length>=0){let u=c,f=a.children[u],m;if(a.children.length===1)m={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===u){let d=a.children[u-1],p=d.offset+d.length,g=a.offset+a.length;m={offset:p,length:g-2-p,content:""}}else m={offset:f.offset,length:a.children[u+1].offset-f.offset,content:""};return Yu(e,m,r)}else if(n!==void 0){let u,f=`${JSON.stringify(n)}`;if(!r.isArrayInsertion&&a.children.length>c){let m=a.children[c];u={offset:m.offset,length:m.length,content:f}}else if(a.children.length===0||c===0)u={offset:a.offset+1,length:0,content:a.children.length===0?f:f+","};else{let m=c>a.children.length?a.children.length:c,d=a.children[m-1];u={offset:d.offset+d.length,length:0,content:","+f}}return Yu(e,u,r)}else throw new Error(`Can not ${n===void 0?"remove":r.isArrayInsertion?"insert":"modify"} Array index ${l} as length is not sufficient`)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${a.type}`);else{if(n===void 0)throw new Error("Can not delete in empty document");return Yu(e,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(n)},r)}}function Yu(e,t,n){if(!n.formattingOptions)return[t];let r=CC(e,t),o=t.offset,i=t.offset+t.content.length;if(t.length===0||t.content.length===0){for(;o>0&&!fg(r,o-1);)o--;for(;i<r.length&&!fg(r,i);)i++}let s=f0(r,{offset:o,length:i-o},{...n.formattingOptions,keepLines:!1});for(let c=s.length-1;c>=0;c--){let l=s[c];r=CC(r,l),o=Math.min(o,l.offset),i=Math.max(i,l.offset+l.length),i+=l.content.length-l.length}let a=e.length-(r.length-i)-o;return[{offset:o,length:a,content:r.substring(o,i)}]}function CC(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}var jF;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(jF||(jF={}));var VF;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(VF||(VF={}));var GF=MF,$e=HF,Gu=wC,zi=mg;var EC=vC;var YF;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(YF||(YF={}));function In(e,t,n,r){return WF(e,t,n,r)}function Eo(e,t){let n=t.slice(0).sort((o,i)=>{let s=o.offset-i.offset;return s===0?o.length-i.length:s}),r=e.length;for(let o=n.length-1;o>=0;o--){let i=n[o];if(i.offset+i.length<=r)e=CC(e,i);else throw new Error("Overlapping edit");r=i.offset}return e}var Ht=W(require("fs")),$s=require("util"),jK="\\\\.\\pipe\\";function vr(e){return new Promise(t=>Ht.stat(e,(n,r)=>t(n?process.platform==="win32"&&n.code==="EBUSY"&&e.startsWith(jK):r.isFile())))}function qF(e){return new Promise(t=>Ht.stat(e,(n,r)=>t(!n&&r.isDirectory())))}function zF(e){return new Promise(t=>Ht.stat(e,(n,r)=>t(!n&&r.isSocket())))}var ct=(0,$s.promisify)(Ht.readFile),pg=(0,$s.promisify)(Ht.writeFile),sme=(0,$s.promisify)(Ht.appendFile),Yc=(0,$s.promisify)(Ht.rename),Gc=(0,$s.promisify)(Ht.readdir),KF=(0,$s.promisify)(Ht.unlink),Ki=e=>new Promise((t,n)=>Ht.mkdir(e,{recursive:!0},r=>r?n(r):t())),JF=(0,$s.promisify)(Ht.rmdir),qc=(0,$s.promisify)(Ht.rm),ame=(0,$s.promisify)(Ht.copyFile);function qu(e,t,n,r=!1){let o=e.relative(t,n);return(r||!!o)&&!o.startsWith("..")&&!e.isAbsolute(o)}var Ue=W(require("vscode")),kr=require("vscode"),Zy=W(require("path"));var Bl=W(require("path")),_p=W(Ar());var eO=W(require("os")),gg=W(require("fs")),tO=W(require("path"));var d0=require("events"),Ms=class{nodeEmitter=new d0.EventEmitter;disposables;constructor(...t){this.disposables=t}event=t=>(this.nodeEmitter.on("event",t),{dispose:()=>{this.nodeEmitter.off("event",t)}});fire(t){this.nodeEmitter.emit("event",t)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(t=>t.dispose())}},SC=class{nodeEmitter=new d0.EventEmitter;event=t=>{let n=r=>r.results.push(t(r.data));return this.nodeEmitter.on("event",n),{dispose:()=>{this.nodeEmitter.off("event",n)}}};fire(t){let n=[];return this.nodeEmitter.emit("event",{data:t,results:n}),n}dispose(){this.nodeEmitter.removeAllListeners()}};function XF(e,t){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:t,package:e,getTelemetryLevel:()=>"off"}}function zu(e){return e.replaceAll(/ghcr.io\/devcontainers\/([^/,]+)\/([^/,]+)/g,"devcontainers-$1:$2")}var er=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(er||{}),p0={info:3,debug:2,trace:1},VK=Object.keys(p0).reduce((e,t)=>(e[p0[t]]=t,e),[]);function _C(e){return p0[e]||3}function Jr(e){return VK[e]||3}var Fe={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Hs=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function h0(e,t){let n=!!t;return{event:r=>{n&&(n=!1,e.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:t}))),e.forEach(o=>o.event(r))}}}function g0(e,t){let n=qK(e);return{event(r){let o=GK(r,t());o&&n.write(o)},join:n.join}}function v0(e,t,n){return{event(r){let o=YK(r,t(),n.getTime());o&&e(o)}}}function on(e,t=2){return{event:e.event,write(n,r=t){e.event({type:"text",level:r,timestamp:Date.now(),text:n})},raw(n,r=t){e.event({type:"raw",level:r,timestamp:Date.now(),text:n})},start(n,r=t){let o=Date.now();return e.event({type:"start",level:r,timestamp:o,text:n}),o},stop(n,r,o=t){e.event({type:"stop",level:o,timestamp:Date.now(),text:n,startTimestamp:r})},get dimensions(){return e.dimensions},onDidChangeDimensions:e.onDidChangeDimensions}}function YK(e,t,n){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":return`[${hg(ZF,`${e.timestamp-n} ms`)}] ${xC(e.text)}`;case"raw":return e.text;case"start":return 1>=t?`${hg(XK,`[${e.timestamp-n} ms] Start`)}: ${xC(e.text)}`:`[${hg(ZF,`${e.timestamp-n} ms`)}] Start: ${xC(e.text)}`;case"stop":return 1>=t?`${hg(JK,`[${e.timestamp-n} ms] Stop`)} (${e.timestamp-e.startTimestamp} ms): ${xC(e.text)}`:void 0;default:throw nO(e)}}function xC(e){return QK(e).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function GK(e,t){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":case"raw":return`[${new Date(e.timestamp).toISOString()}] ${m0(e.text)}`;case"start":return`[${new Date(e.timestamp).toISOString()}] Start: ${m0(e.text)}`;case"stop":return 2>=t?`[${new Date(e.timestamp).toISOString()}] Stop (${e.timestamp-e.startTimestamp} ms): ${m0(e.text)}`:void 0;default:throw nO(e)}}function m0(e){return e.replace(Hs,"").replace(/(\r?\n)?$/,eO.EOL)}function nO(e){return new Error(`Unknown log event type: ${e.type}`)}function qK(e){let t=[],n=!1,r,o;function i(){n=!1,o&&!t.length&&(r=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&t.push(a),!c&&!n&&t.length){n=!0;let l=t.join("");t.length=0,gg.appendFile(e,l,u=>{u&&(u.code==="ENOENT"?gg.mkdir(tO.dirname(e),{recursive:!0},f=>{f?(i(),console.error(f)):gg.appendFile(e,l,m=>{i(),m&&console.error(m),s()})}):(i(),console.error(u))),i(),s()})}}return{write:s,join:()=>r||(n?r=new Promise(a=>o=a):Promise.resolve())}}var zK="38;2;143;99;79",rO="38;2;99;143;79",KK="38;2;86;156;214",JK=zK,XK=rO,ZF=rO,ZK=KK;function hg(e,t){return t.split(`
`).map(n=>`\x1B[1m\x1B[${e}m${n}\x1B[39m\x1B[22m`).join(`
`)}function QK(e){let t,n=0,r=[];for(Hs.lastIndex=0;t=Hs.exec(e);)r.push(QF(e.substring(n,t.index))),r.push(t[0]),n=Hs.lastIndex;return r.push(QF(e.substr(n))),r.join("")}function QF(e){let t=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,n,r=0,o=[];for(;n=t.exec(e);)o.push(e.substring(r,n.index)),o.push(hg(ZK,n[0])),r=t.lastIndex;return o.push(e.substr(r)),o.join("")}function it(e){return e.split(/\r?\n/).map(t=>`\x1B[1m\x1B[31m${t}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}function w0(e){return e.split(/\r?\n/).map(t=>`\x1B[1m\x1B[33m${t}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var pe=class extends Error{description;detail;step;originalError;manageContainer=!1;params;containerId;dockerParams;volumeName;repositoryPath;folderPath;containerProperties;config;actions=[];data={};constructor(t){var n;super(t.originalError&&t.originalError.message||t.description),Object.assign(this,t),this.actions||(this.actions=[]),this.data||(this.data={}),(n=this.originalError)!=null&&n.stack&&(this.stack=this.originalError.stack)}};var Se=W(require("path")),GS=W(require("fs")),_W=W(kC()),GT=require("string_decoder");var DO=W(require("events"),1),Zr=W(require("fs"),1);var UC=require("events"),H0=W(require("stream"),1),_O=require("string_decoder"),CO=typeof process=="object"&&process?process:{stdout:null,stderr:null},A5=e=>!!e&&typeof e=="object"&&(e instanceof _o||e instanceof H0.default||F5(e)||O5(e)),F5=e=>!!e&&typeof e=="object"&&e instanceof UC.EventEmitter&&typeof e.pipe=="function"&&e.pipe!==H0.default.Writable.prototype.pipe,O5=e=>!!e&&typeof e=="object"&&e instanceof UC.EventEmitter&&typeof e.write=="function"&&typeof e.end=="function",Ba=Symbol("EOF"),Wa=Symbol("maybeEmitEnd"),zc=Symbol("emittedEnd"),RC=Symbol("emittingEnd"),Eg=Symbol("emittedError"),NC=Symbol("closed"),EO=Symbol("read"),LC=Symbol("flush"),SO=Symbol("flushChunk"),Xi=Symbol("encoding"),Em=Symbol("decoder"),nr=Symbol("flowing"),Sg=Symbol("paused"),Sm=Symbol("resume"),rr=Symbol("buffer"),Xr=Symbol("pipes"),or=Symbol("bufferLength"),A0=Symbol("bufferPush"),AC=Symbol("bufferShift"),Or=Symbol("objectMode"),yn=Symbol("destroyed"),F0=Symbol("error"),O0=Symbol("emitData"),xO=Symbol("emitEnd"),U0=Symbol("emitEnd2"),Bs=Symbol("async"),$0=Symbol("abort"),FC=Symbol("aborted"),xg=Symbol("signal"),Zu=Symbol("dataListeners"),Go=Symbol("discarded"),_g=e=>Promise.resolve().then(e),U5=e=>e(),$5=e=>e==="end"||e==="finish"||e==="prefinish",M5=e=>e instanceof ArrayBuffer||!!e&&typeof e=="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0,H5=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e),OC=class{src;dest;opts;ondrain;constructor(t,n,r){this.src=t,this.dest=n,this.opts=r,this.ondrain=()=>t[Sm](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},M0=class extends OC{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,n,r){super(t,n,r),this.proxyErrors=o=>n.emit("error",o),t.on("error",this.proxyErrors)}},B5=e=>!!e.objectMode,W5=e=>!e.objectMode&&!!e.encoding&&e.encoding!=="buffer",_o=class extends UC.EventEmitter{[nr]=!1;[Sg]=!1;[Xr]=[];[rr]=[];[Or];[Xi];[Bs];[Em];[Ba]=!1;[zc]=!1;[RC]=!1;[NC]=!1;[Eg]=null;[or]=0;[yn]=!1;[xg];[FC]=!1;[Zu]=0;[Go]=!1;writable=!0;readable=!0;constructor(...t){let n=t[0]||{};if(super(),n.objectMode&&typeof n.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");B5(n)?(this[Or]=!0,this[Xi]=null):W5(n)?(this[Xi]=n.encoding,this[Or]=!1):(this[Or]=!1,this[Xi]=null),this[Bs]=!!n.async,this[Em]=this[Xi]?new _O.StringDecoder(this[Xi]):null,n&&n.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[rr]}),n&&n.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Xr]});let{signal:r}=n;r&&(this[xg]=r,r.aborted?this[$0]():r.addEventListener("abort",()=>this[$0]()))}get bufferLength(){return this[or]}get encoding(){return this[Xi]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Or]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Bs]}set async(t){this[Bs]=this[Bs]||!!t}[$0](){var t,n;this[FC]=!0,this.emit("abort",(t=this[xg])==null?void 0:t.reason),this.destroy((n=this[xg])==null?void 0:n.reason)}get aborted(){return this[FC]}set aborted(t){}write(t,n,r){var i;if(this[FC])return!1;if(this[Ba])throw new Error("write after end");if(this[yn])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Bs]?_g:U5;if(!this[Or]&&!Buffer.isBuffer(t)){if(H5(t))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if(M5(t))t=Buffer.from(t);else if(typeof t!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Or]?(this[nr]&&this[or]!==0&&this[LC](!0),this[nr]?this.emit("data",t):this[A0](t),this[or]!==0&&this.emit("readable"),r&&o(r),this[nr]):t.length?(typeof t=="string"&&!(n===this[Xi]&&!((i=this[Em])!=null&&i.lastNeed))&&(t=Buffer.from(t,n)),Buffer.isBuffer(t)&&this[Xi]&&(t=this[Em].write(t)),this[nr]&&this[or]!==0&&this[LC](!0),this[nr]?this.emit("data",t):this[A0](t),this[or]!==0&&this.emit("readable"),r&&o(r),this[nr]):(this[or]!==0&&this.emit("readable"),r&&o(r),this[nr])}read(t){if(this[yn])return null;if(this[Go]=!1,this[or]===0||t===0||t&&t>this[or])return this[Wa](),null;this[Or]&&(t=null),this[rr].length>1&&!this[Or]&&(this[rr]=[this[Xi]?this[rr].join(""):Buffer.concat(this[rr],this[or])]);let n=this[EO](t||null,this[rr][0]);return this[Wa](),n}[EO](t,n){if(this[Or])this[AC]();else{let r=n;t===r.length||t===null?this[AC]():typeof r=="string"?(this[rr][0]=r.slice(t),n=r.slice(0,t),this[or]-=t):(this[rr][0]=r.subarray(t),n=r.subarray(0,t),this[or]-=t)}return this.emit("data",n),!this[rr].length&&!this[Ba]&&this.emit("drain"),n}end(t,n,r){return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n="utf8"),t!==void 0&&this.write(t,n),r&&this.once("end",r),this[Ba]=!0,this.writable=!1,(this[nr]||!this[Sg])&&this[Wa](),this}[Sm](){this[yn]||(!this[Zu]&&!this[Xr].length&&(this[Go]=!0),this[Sg]=!1,this[nr]=!0,this.emit("resume"),this[rr].length?this[LC]():this[Ba]?this[Wa]():this.emit("drain"))}resume(){return this[Sm]()}pause(){this[nr]=!1,this[Sg]=!0,this[Go]=!1}get destroyed(){return this[yn]}get flowing(){return this[nr]}get paused(){return this[Sg]}[A0](t){this[Or]?this[or]+=1:this[or]+=t.length,this[rr].push(t)}[AC](){return this[Or]?this[or]-=1:this[or]-=this[rr][0].length,this[rr].shift()}[LC](t=!1){do;while(this[SO](this[AC]())&&this[rr].length);!t&&!this[rr].length&&!this[Ba]&&this.emit("drain")}[SO](t){return this.emit("data",t),this[nr]}pipe(t,n){if(this[yn])return t;this[Go]=!1;let r=this[zc];return n=n||{},t===CO.stdout||t===CO.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&t.end():(this[Xr].push(n.proxyErrors?new M0(this,t,n):new OC(this,t,n)),this[Bs]?_g(()=>this[Sm]()):this[Sm]()),t}unpipe(t){let n=this[Xr].find(r=>r.dest===t);n&&(this[Xr].length===1?(this[nr]&&this[Zu]===0&&(this[nr]=!1),this[Xr]=[]):this[Xr].splice(this[Xr].indexOf(n),1),n.unpipe())}addListener(t,n){return this.on(t,n)}on(t,n){let r=super.on(t,n);if(t==="data")this[Go]=!1,this[Zu]++,!this[Xr].length&&!this[nr]&&this[Sm]();else if(t==="readable"&&this[or]!==0)super.emit("readable");else if($5(t)&&this[zc])super.emit(t),this.removeAllListeners(t);else if(t==="error"&&this[Eg]){let o=n;this[Bs]?_g(()=>o.call(this,this[Eg])):o.call(this,this[Eg])}return r}removeListener(t,n){return this.off(t,n)}off(t,n){let r=super.off(t,n);return t==="data"&&(this[Zu]=this.listeners("data").length,this[Zu]===0&&!this[Go]&&!this[Xr].length&&(this[nr]=!1)),r}removeAllListeners(t){let n=super.removeAllListeners(t);return(t==="data"||t===void 0)&&(this[Zu]=0,!this[Go]&&!this[Xr].length&&(this[nr]=!1)),n}get emittedEnd(){return this[zc]}[Wa](){!this[RC]&&!this[zc]&&!this[yn]&&this[rr].length===0&&this[Ba]&&(this[RC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[NC]&&this.emit("close"),this[RC]=!1)}emit(t,...n){let r=n[0];if(t!=="error"&&t!=="close"&&t!==yn&&this[yn])return!1;if(t==="data")return!this[Or]&&!r?!1:this[Bs]?(_g(()=>this[O0](r)),!0):this[O0](r);if(t==="end")return this[xO]();if(t==="close"){if(this[NC]=!0,!this[zc]&&!this[yn])return!1;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(t==="error"){this[Eg]=r,super.emit(F0,r);let i=!this[xg]||this.listeners("error").length?super.emit("error",r):!1;return this[Wa](),i}else if(t==="resume"){let i=super.emit("resume");return this[Wa](),i}else if(t==="finish"||t==="prefinish"){let i=super.emit(t);return this.removeAllListeners(t),i}let o=super.emit(t,...n);return this[Wa](),o}[O0](t){for(let r of this[Xr])r.dest.write(t)===!1&&this.pause();let n=this[Go]?!1:super.emit("data",t);return this[Wa](),n}[xO](){return this[zc]?!1:(this[zc]=!0,this.readable=!1,this[Bs]?(_g(()=>this[U0]()),!0):this[U0]())}[U0](){if(this[Em]){let n=this[Em].end();if(n){for(let r of this[Xr])r.dest.write(n);this[Go]||super.emit("data",n)}}for(let n of this[Xr])n.end();let t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){let t=Object.assign([],{dataLength:0});this[Or]||(t.dataLength=0);let n=this.promise();return this.on("data",r=>{t.push(r),this[Or]||(t.dataLength+=r.length)}),await n,t}async concat(){if(this[Or])throw new Error("cannot concat in objectMode");let t=await this.collect();return this[Xi]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise((t,n)=>{this.on(yn,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>t())})}[Symbol.asyncIterator](){this[Go]=!1;let t=!1,n=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return n();let o=this.read();if(o!==null)return Promise.resolve({done:!1,value:o});if(this[Ba])return n();let i,s,a=f=>{this.off("data",c),this.off("end",l),this.off(yn,u),n(),s(f)},c=f=>{this.off("error",a),this.off("end",l),this.off(yn,u),this.pause(),i({value:f,done:!!this[Ba]})},l=()=>{this.off("error",a),this.off("data",c),this.off(yn,u),n(),i({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,m)=>{s=m,i=f,this.once(yn,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:n,return:n,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Go]=!1;let t=!1,n=()=>(this.pause(),this.off(F0,n),this.off(yn,n),this.off("end",n),t=!0,{done:!0,value:void 0}),r=()=>{if(t)return n();let o=this.read();return o===null?n():{done:!1,value:o}};return this.once("end",n),this.once(F0,n),this.once(yn,n),{next:r,throw:n,return:n,[Symbol.iterator](){return this}}}destroy(t){if(this[yn])return t?this.emit("error",t):this.emit(yn),this;this[yn]=!0,this[Go]=!0,this[rr].length=0,this[or]=0;let n=this;return typeof n.close=="function"&&!this[NC]&&n.close(),t?this.emit("error",t):this.emit(yn),this}static get isStream(){return A5}};var j5=Zr.default.writev,Jc=Symbol("_autoClose"),Qi=Symbol("_close"),Dg=Symbol("_ended"),yt=Symbol("_fd"),B0=Symbol("_finished"),Va=Symbol("_flags"),W0=Symbol("_flush"),G0=Symbol("_handleChunk"),q0=Symbol("_makeBuf"),Pg=Symbol("_mode"),$C=Symbol("_needDrain"),Dm=Symbol("_onerror"),Im=Symbol("_onopen"),j0=Symbol("_onread"),xm=Symbol("_onwrite"),Xc=Symbol("_open"),Zi=Symbol("_path"),Kc=Symbol("_pos"),Ws=Symbol("_queue"),_m=Symbol("_read"),V0=Symbol("_readSize"),ja=Symbol("_reading"),Ig=Symbol("_remain"),Y0=Symbol("_size"),MC=Symbol("_write"),Qu=Symbol("_writing"),HC=Symbol("_defaultFlag"),ef=Symbol("_errored"),tf=class extends _o{[ef]=!1;[yt];[Zi];[V0];[ja]=!1;[Y0];[Ig];[Jc];constructor(t,n){if(n=n||{},super(n),this.readable=!0,this.writable=!1,typeof t!="string")throw new TypeError("path must be a string");this[ef]=!1,this[yt]=typeof n.fd=="number"?n.fd:void 0,this[Zi]=t,this[V0]=n.readSize||16*1024*1024,this[ja]=!1,this[Y0]=typeof n.size=="number"?n.size:1/0,this[Ig]=this[Y0],this[Jc]=typeof n.autoClose=="boolean"?n.autoClose:!0,typeof this[yt]=="number"?this[_m]():this[Xc]()}get fd(){return this[yt]}get path(){return this[Zi]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Xc](){Zr.default.open(this[Zi],"r",(t,n)=>this[Im](t,n))}[Im](t,n){t?this[Dm](t):(this[yt]=n,this.emit("open",n),this[_m]())}[q0](){return Buffer.allocUnsafe(Math.min(this[V0],this[Ig]))}[_m](){if(!this[ja]){this[ja]=!0;let t=this[q0]();if(t.length===0)return process.nextTick(()=>this[j0](null,0,t));Zr.default.read(this[yt],t,0,t.length,null,(n,r,o)=>this[j0](n,r,o))}}[j0](t,n,r){this[ja]=!1,t?this[Dm](t):this[G0](n,r)&&this[_m]()}[Qi](){if(this[Jc]&&typeof this[yt]=="number"){let t=this[yt];this[yt]=void 0,Zr.default.close(t,n=>n?this.emit("error",n):this.emit("close"))}}[Dm](t){this[ja]=!0,this[Qi](),this.emit("error",t)}[G0](t,n){let r=!1;return this[Ig]-=t,t>0&&(r=super.write(t<n.length?n.subarray(0,t):n)),(t===0||this[Ig]<=0)&&(r=!1,this[Qi](),super.end()),r}emit(t,...n){switch(t){case"prefinish":case"finish":return!1;case"drain":return typeof this[yt]=="number"&&this[_m](),!1;case"error":return this[ef]?!1:(this[ef]=!0,super.emit(t,...n));default:return super.emit(t,...n)}}},BC=class extends tf{[Xc](){let t=!0;try{this[Im](null,Zr.default.openSync(this[Zi],"r")),t=!1}finally{t&&this[Qi]()}}[_m](){let t=!0;try{if(!this[ja]){this[ja]=!0;do{let n=this[q0](),r=n.length===0?0:Zr.default.readSync(this[yt],n,0,n.length,null);if(!this[G0](r,n))break}while(!0);this[ja]=!1}t=!1}finally{t&&this[Qi]()}}[Qi](){if(this[Jc]&&typeof this[yt]=="number"){let t=this[yt];this[yt]=void 0,Zr.default.closeSync(t),this.emit("close")}}},Ya=class extends DO.default{readable=!1;writable=!0;[ef]=!1;[Qu]=!1;[Dg]=!1;[Ws]=[];[$C]=!1;[Zi];[Pg];[Jc];[yt];[HC];[Va];[B0]=!1;[Kc];constructor(t,n){n=n||{},super(n),this[Zi]=t,this[yt]=typeof n.fd=="number"?n.fd:void 0,this[Pg]=n.mode===void 0?438:n.mode,this[Kc]=typeof n.start=="number"?n.start:void 0,this[Jc]=typeof n.autoClose=="boolean"?n.autoClose:!0;let r=this[Kc]!==void 0?"r+":"w";this[HC]=n.flags===void 0,this[Va]=n.flags===void 0?r:n.flags,this[yt]===void 0&&this[Xc]()}emit(t,...n){if(t==="error"){if(this[ef])return!1;this[ef]=!0}return super.emit(t,...n)}get fd(){return this[yt]}get path(){return this[Zi]}[Dm](t){this[Qi](),this[Qu]=!0,this.emit("error",t)}[Xc](){Zr.default.open(this[Zi],this[Va],this[Pg],(t,n)=>this[Im](t,n))}[Im](t,n){this[HC]&&this[Va]==="r+"&&t&&t.code==="ENOENT"?(this[Va]="w",this[Xc]()):t?this[Dm](t):(this[yt]=n,this.emit("open",n),this[Qu]||this[W0]())}end(t,n){return t&&this.write(t,n),this[Dg]=!0,!this[Qu]&&!this[Ws].length&&typeof this[yt]=="number"&&this[xm](null,0),this}write(t,n){return typeof t=="string"&&(t=Buffer.from(t,n)),this[Dg]?(this.emit("error",new Error("write() after end()")),!1):this[yt]===void 0||this[Qu]||this[Ws].length?(this[Ws].push(t),this[$C]=!0,!1):(this[Qu]=!0,this[MC](t),!0)}[MC](t){Zr.default.write(this[yt],t,0,t.length,this[Kc],(n,r)=>this[xm](n,r))}[xm](t,n){t?this[Dm](t):(this[Kc]!==void 0&&typeof n=="number"&&(this[Kc]+=n),this[Ws].length?this[W0]():(this[Qu]=!1,this[Dg]&&!this[B0]?(this[B0]=!0,this[Qi](),this.emit("finish")):this[$C]&&(this[$C]=!1,this.emit("drain"))))}[W0](){if(this[Ws].length===0)this[Dg]&&this[xm](null,0);else if(this[Ws].length===1)this[MC](this[Ws].pop());else{let t=this[Ws];this[Ws]=[],j5(this[yt],t,this[Kc],(n,r)=>this[xm](n,r))}}[Qi](){if(this[Jc]&&typeof this[yt]=="number"){let t=this[yt];this[yt]=void 0,Zr.default.close(t,n=>n?this.emit("error",n):this.emit("close"))}}},Pm=class extends Ya{[Xc](){let t;if(this[HC]&&this[Va]==="r+")try{t=Zr.default.openSync(this[Zi],this[Va],this[Pg])}catch(n){if((n==null?void 0:n.code)==="ENOENT")return this[Va]="w",this[Xc]();throw n}else t=Zr.default.openSync(this[Zi],this[Va],this[Pg]);this[Im](null,t)}[Qi](){if(this[Jc]&&typeof this[yt]=="number"){let t=this[yt];this[yt]=void 0,Zr.default.closeSync(t),this.emit("close")}}[MC](t){let n=!0;try{this[xm](null,Zr.default.writeSync(this[yt],t,0,t.length,this[Kc])),n=!1}finally{if(n)try{this[Qi]()}catch{}}}};var DP=W(require("path"),1);var ff=W(require("fs"),1),sE=require("path");var V5=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"],["onentry","onReadEntry"]]),IO=e=>!!e.sync&&!!e.file,PO=e=>!e.sync&&!!e.file,bO=e=>!!e.sync&&!e.file,TO=e=>!e.sync&&!e.file;var kO=e=>!!e.file;var Y5=e=>{let t=V5.get(e);return t||e},bg=(e={})=>{if(!e)return{};let t={};for(let[n,r]of Object.entries(e)){let o=Y5(n);t[o]=r}return t.chmod===void 0&&t.noChmod===!1&&(t.chmod=!0),delete t.noChmod,t};var js=(e,t,n,r,o)=>Object.assign((i=[],s,a)=>{Array.isArray(i)&&(s=i,i={}),typeof s=="function"&&(a=s,s=void 0),s?s=Array.from(s):s=[];let c=bg(i);if(o==null||o(c,s),IO(c)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return e(c,s)}else if(PO(c)){let l=t(c,s),u=a||void 0;return u?l.then(()=>u(),u):l}else if(bO(c)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return n(c,s)}else if(TO(c)){if(typeof a=="function")throw new TypeError("callback only supported with file option");return r(c,s)}else throw new Error("impossible options??")},{syncFile:e,asyncFile:t,syncNoFile:n,asyncNoFile:r,validate:o});var YO=require("events");var WC=W(require("assert"),1),Zc=require("buffer");var NO=W(require("zlib"),1);var RO=W(require("zlib"),1),G5=RO.default.constants||{ZLIB_VERNUM:4736},Ci=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},G5));var q5=Zc.Buffer.concat,bm=Object.getOwnPropertyDescriptor(Zc.Buffer,"concat"),z5=e=>e,K0=(bm==null?void 0:bm.writable)===!0||(bm==null?void 0:bm.set)!==void 0?e=>{Zc.Buffer.concat=e?z5:q5}:e=>{},nf=Symbol("_superWrite"),Tm=class extends Error{code;errno;constructor(t,n){super("zlib: "+t.message,{cause:t}),this.code=t.code,this.errno=t.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+t.message,Error.captureStackTrace(this,n??this.constructor)}get name(){return"ZlibError"}},J0=Symbol("flushFlag"),Tg=class extends _o{#e=!1;#n=!1;#r;#i;#o;#t;#s;get sawError(){return this.#e}get handle(){return this.#t}get flushFlag(){return this.#r}constructor(t,n){var r;if(!t||typeof t!="object")throw new TypeError("invalid options for ZlibBase constructor");if(super(t),this.#r=t.flush??0,this.#i=t.finishFlush??0,this.#o=t.fullFlushFlag??0,typeof NO[n]!="function")throw new TypeError("Compression method not supported: "+n);try{this.#t=new NO[n](t)}catch(o){throw new Tm(o,this.constructor)}this.#s=o=>{this.#e||(this.#e=!0,this.close(),this.emit("error",o))},(r=this.#t)==null||r.on("error",o=>this.#s(new Tm(o))),this.once("end",()=>this.close)}close(){this.#t&&(this.#t.close(),this.#t=void 0,this.emit("close"))}reset(){var t,n;if(!this.#e)return(0,WC.default)(this.#t,"zlib binding closed"),(n=(t=this.#t).reset)==null?void 0:n.call(t)}flush(t){this.ended||(typeof t!="number"&&(t=this.#o),this.write(Object.assign(Zc.Buffer.alloc(0),{[J0]:t})))}end(t,n,r){return typeof t=="function"&&(r=t,n=void 0,t=void 0),typeof n=="function"&&(r=n,n=void 0),t&&(n?this.write(t,n):this.write(t)),this.flush(this.#i),this.#n=!0,super.end(r)}get ended(){return this.#n}[nf](t){return super.write(t)}write(t,n,r){if(typeof n=="function"&&(r=n,n="utf8"),typeof t=="string"&&(t=Zc.Buffer.from(t,n)),this.#e)return;(0,WC.default)(this.#t,"zlib binding closed");let o=this.#t._handle,i=o.close;o.close=()=>{};let s=this.#t.close;this.#t.close=()=>{},K0(!0);let a;try{let l=typeof t[J0]=="number"?t[J0]:this.#r;a=this.#t._processChunk(t,l),K0(!1)}catch(l){K0(!1),this.#s(new Tm(l,this.write))}finally{this.#t&&(this.#t._handle=o,o.close=i,this.#t.close=s,this.#t.removeAllListeners("error"))}this.#t&&this.#t.on("error",l=>this.#s(new Tm(l,this.write)));let c;if(a)if(Array.isArray(a)&&a.length>0){let l=a[0];c=this[nf](Zc.Buffer.from(l));for(let u=1;u<a.length;u++)c=this[nf](a[u])}else c=this[nf](Zc.Buffer.from(a));return r&&r(),c}},jC=class extends Tg{#e;#n;constructor(t,n){t=t||{},t.flush=t.flush||Ci.Z_NO_FLUSH,t.finishFlush=t.finishFlush||Ci.Z_FINISH,t.fullFlushFlag=Ci.Z_FULL_FLUSH,super(t,n),this.#e=t.level,this.#n=t.strategy}params(t,n){if(!this.sawError){if(!this.handle)throw new Error("cannot switch params when binding is closed");if(!this.handle.params)throw new Error("not supported in this implementation");if(this.#e!==t||this.#n!==n){this.flush(Ci.Z_SYNC_FLUSH),(0,WC.default)(this.handle,"zlib binding closed");let r=this.handle.flush;this.handle.flush=(o,i)=>{typeof o=="function"&&(i=o,o=this.flushFlag),this.flush(o),i==null||i()};try{this.handle.params(t,n)}finally{this.handle.flush=r}this.handle&&(this.#e=t,this.#n=n)}}}};var VC=class extends jC{#e;constructor(t){super(t,"Gzip"),this.#e=t&&!!t.portable}[nf](t){return this.#e?(this.#e=!1,t[9]=255,super[nf](t)):super[nf](t)}};var YC=class extends jC{constructor(t){super(t,"Unzip")}},GC=class extends Tg{constructor(t,n){t=t||{},t.flush=t.flush||Ci.BROTLI_OPERATION_PROCESS,t.finishFlush=t.finishFlush||Ci.BROTLI_OPERATION_FINISH,t.fullFlushFlag=Ci.BROTLI_OPERATION_FLUSH,super(t,n)}},qC=class extends GC{constructor(t){super(t,"BrotliCompress")}},zC=class extends GC{constructor(t){super(t,"BrotliDecompress")}},KC=class extends Tg{constructor(t,n){t=t||{},t.flush=t.flush||Ci.ZSTD_e_continue,t.finishFlush=t.finishFlush||Ci.ZSTD_e_end,t.fullFlushFlag=Ci.ZSTD_e_flush,super(t,n)}},JC=class extends KC{constructor(t){super(t,"ZstdCompress")}},XC=class extends KC{constructor(t){super(t,"ZstdDecompress")}};var sf=require("path");var LO=(e,t)=>{if(Number.isSafeInteger(e))e<0?X5(e,t):J5(e,t);else throw Error("cannot encode number outside of javascript safe integer range");return t},J5=(e,t)=>{t[0]=128;for(var n=t.length;n>1;n--)t[n-1]=e&255,e=Math.floor(e/256)},X5=(e,t)=>{t[0]=255;var n=!1;e=e*-1;for(var r=t.length;r>1;r--){var o=e&255;e=Math.floor(e/256),n?t[r-1]=FO(o):o===0?t[r-1]=0:(n=!0,t[r-1]=OO(o))}},AO=e=>{let t=e[0],n=t===128?Q5(e.subarray(1,e.length)):t===255?Z5(e):null;if(n===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n},Z5=e=>{for(var t=e.length,n=0,r=!1,o=t-1;o>-1;o--){var i=Number(e[o]),s;r?s=FO(i):i===0?s=i:(r=!0,s=OO(i)),s!==0&&(n-=s*Math.pow(256,t-o-1))}return n},Q5=e=>{for(var t=e.length,n=0,r=t-1;r>-1;r--){var o=Number(e[r]);o!==0&&(n+=o*Math.pow(256,t-r-1))}return n},FO=e=>(255^e)&255,OO=e=>(255^e)+1&255;var ZC=e=>QC.has(e);var QC=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]),UO=new Map(Array.from(QC).map(e=>[e[1],e[0]]));var qo=class{cksumValid=!1;needPax=!1;nullBlock=!1;block;path;mode;uid;gid;size;cksum;#e="Unsupported";linkpath;uname;gname;devmaj=0;devmin=0;atime;ctime;mtime;charset;comment;constructor(t,n=0,r,o){Buffer.isBuffer(t)?this.decode(t,n||0,r,o):t&&this.#n(t)}decode(t,n,r,o){if(n||(n=0),!t||!(t.length>=n+512))throw new Error("need 512 bytes for header");this.path=(r==null?void 0:r.path)??rf(t,n,100),this.mode=(r==null?void 0:r.mode)??(o==null?void 0:o.mode)??Qc(t,n+100,8),this.uid=(r==null?void 0:r.uid)??(o==null?void 0:o.uid)??Qc(t,n+108,8),this.gid=(r==null?void 0:r.gid)??(o==null?void 0:o.gid)??Qc(t,n+116,8),this.size=(r==null?void 0:r.size)??(o==null?void 0:o.size)??Qc(t,n+124,12),this.mtime=(r==null?void 0:r.mtime)??(o==null?void 0:o.mtime)??X0(t,n+136,12),this.cksum=Qc(t,n+148,12),o&&this.#n(o,!0),r&&this.#n(r);let i=rf(t,n+156,1);if(ZC(i)&&(this.#e=i||"0"),this.#e==="0"&&this.path.slice(-1)==="/"&&(this.#e="5"),this.#e==="5"&&(this.size=0),this.linkpath=rf(t,n+157,100),t.subarray(n+257,n+265).toString()==="ustar\x0000")if(this.uname=(r==null?void 0:r.uname)??(o==null?void 0:o.uname)??rf(t,n+265,32),this.gname=(r==null?void 0:r.gname)??(o==null?void 0:o.gname)??rf(t,n+297,32),this.devmaj=(r==null?void 0:r.devmaj)??(o==null?void 0:o.devmaj)??Qc(t,n+329,8)??0,this.devmin=(r==null?void 0:r.devmin)??(o==null?void 0:o.devmin)??Qc(t,n+337,8)??0,t[n+475]!==0){let a=rf(t,n+345,155);this.path=a+"/"+this.path}else{let a=rf(t,n+345,130);a&&(this.path=a+"/"+this.path),this.atime=(r==null?void 0:r.atime)??(o==null?void 0:o.atime)??X0(t,n+476,12),this.ctime=(r==null?void 0:r.ctime)??(o==null?void 0:o.ctime)??X0(t,n+488,12)}let s=256;for(let a=n;a<n+148;a++)s+=t[a];for(let a=n+156;a<n+512;a++)s+=t[a];this.cksumValid=s===this.cksum,this.cksum===void 0&&s===256&&(this.nullBlock=!0)}#n(t,n=!1){Object.assign(this,Object.fromEntries(Object.entries(t).filter(([r,o])=>!(o==null||r==="path"&&n||r==="linkpath"&&n||r==="global"))))}encode(t,n=0){if(t||(t=this.block=Buffer.alloc(512)),this.#e==="Unsupported"&&(this.#e="0"),!(t.length>=n+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,o=t8(this.path||"",r),i=o[0],s=o[1];this.needPax=!!o[2],this.needPax=of(t,n,100,i)||this.needPax,this.needPax=el(t,n+100,8,this.mode)||this.needPax,this.needPax=el(t,n+108,8,this.uid)||this.needPax,this.needPax=el(t,n+116,8,this.gid)||this.needPax,this.needPax=el(t,n+124,12,this.size)||this.needPax,this.needPax=Z0(t,n+136,12,this.mtime)||this.needPax,t[n+156]=this.#e.charCodeAt(0),this.needPax=of(t,n+157,100,this.linkpath)||this.needPax,t.write("ustar\x0000",n+257,8),this.needPax=of(t,n+265,32,this.uname)||this.needPax,this.needPax=of(t,n+297,32,this.gname)||this.needPax,this.needPax=el(t,n+329,8,this.devmaj)||this.needPax,this.needPax=el(t,n+337,8,this.devmin)||this.needPax,this.needPax=of(t,n+345,r,s)||this.needPax,t[n+475]!==0?this.needPax=of(t,n+345,155,s)||this.needPax:(this.needPax=of(t,n+345,130,s)||this.needPax,this.needPax=Z0(t,n+476,12,this.atime)||this.needPax,this.needPax=Z0(t,n+488,12,this.ctime)||this.needPax);let a=256;for(let c=n;c<n+148;c++)a+=t[c];for(let c=n+156;c<n+512;c++)a+=t[c];return this.cksum=a,el(t,n+148,8,this.cksum),this.cksumValid=!0,this.needPax}get type(){return this.#e==="Unsupported"?this.#e:QC.get(this.#e)}get typeKey(){return this.#e}set type(t){let n=String(UO.get(t));if(ZC(n)||n==="Unsupported")this.#e=n;else if(ZC(t))this.#e=t;else throw new TypeError("invalid entry type: "+t)}},t8=(e,t)=>{let r=e,o="",i,s=sf.posix.parse(e).root||".";if(Buffer.byteLength(r)<100)i=[r,o,!1];else{o=sf.posix.dirname(r),r=sf.posix.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(o)<=t?i=[r,o,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(o)<=t?i=[r.slice(0,99),o,!0]:(r=sf.posix.join(sf.posix.basename(o),r),o=sf.posix.dirname(o));while(o!==s&&i===void 0);i||(i=[e.slice(0,99),"",!0])}return i},rf=(e,t,n)=>e.subarray(t,t+n).toString("utf8").replace(/\0.*/,""),X0=(e,t,n)=>n8(Qc(e,t,n)),n8=e=>e===void 0?void 0:new Date(e*1e3),Qc=(e,t,n)=>Number(e[t])&128?AO(e.subarray(t,t+n)):o8(e,t,n),r8=e=>isNaN(e)?void 0:e,o8=(e,t,n)=>r8(parseInt(e.subarray(t,t+n).toString("utf8").replace(/\0.*$/,"").trim(),8)),i8={12:8589934591,8:2097151},el=(e,t,n,r)=>r===void 0?!1:r>i8[n]||r<0?(LO(r,e.subarray(t,t+n)),!0):(s8(e,t,n,r),!1),s8=(e,t,n,r)=>e.write(a8(r,n),t,n,"ascii"),a8=(e,t)=>c8(Math.floor(e).toString(8),t),c8=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0",Z0=(e,t,n,r)=>r===void 0?!1:el(e,t,n,r.getTime()/1e3),l8=new Array(156).join("\0"),of=(e,t,n,r)=>r===void 0?!1:(e.write(r+l8,t,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);var MO=require("path");var tl=class e{atime;mtime;ctime;charset;comment;gid;uid;gname;uname;linkpath;dev;ino;nlink;path;size;mode;global;constructor(t,n=!1){this.atime=t.atime,this.charset=t.charset,this.comment=t.comment,this.ctime=t.ctime,this.dev=t.dev,this.gid=t.gid,this.global=n,this.gname=t.gname,this.ino=t.ino,this.linkpath=t.linkpath,this.mtime=t.mtime,this.nlink=t.nlink,this.path=t.path,this.size=t.size,this.uid=t.uid,this.uname=t.uname}encode(){let t=this.encodeBody();if(t==="")return Buffer.allocUnsafe(0);let n=Buffer.byteLength(t),r=512*Math.ceil(1+n/512),o=Buffer.allocUnsafe(r);for(let i=0;i<512;i++)o[i]=0;new qo({path:("PaxHeader/"+(0,MO.basename)(this.path??"")).slice(0,99),mode:this.mode||420,uid:this.uid,gid:this.gid,size:n,mtime:this.mtime,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime,ctime:this.ctime}).encode(o),o.write(t,512,n,"utf8");for(let i=n+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(t){if(this[t]===void 0)return"";let n=this[t],r=n instanceof Date?n.getTime()/1e3:n,o=" "+(t==="dev"||t==="ino"||t==="nlink"?"SCHILY.":"")+t+"="+r+`
`,i=Buffer.byteLength(o),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+o}static parse(t,n,r=!1){return new e(u8(f8(t),n),r)}},u8=(e,t)=>t?Object.assign({},t,e):e,f8=e=>e.replace(/\n$/,"").split(`
`).reduce(d8,Object.create(null)),d8=(e,t)=>{let n=parseInt(t,10);if(n!==Buffer.byteLength(t)+1)return e;t=t.slice((n+" ").length);let r=t.split("="),o=r.shift();if(!o)return e;let i=o.replace(/^SCHILY\.(dev|ino|nlink)/,"$1"),s=r.join("=");return e[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(Number(s)*1e3):/^[0-9]+$/.test(s)?+s:s,e};var m8=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,qe=m8!=="win32"?e=>e:e=>e&&e.replace(/\\/g,"/");var km=class extends _o{extended;globalExtended;header;startBlockSize;blockRemain;remain;type;meta=!1;ignore=!1;path;mode;uid;gid;uname;gname;size=0;mtime;atime;ctime;linkpath;dev;ino;nlink;invalid=!1;absolute;unsupported=!1;constructor(t,n,r){switch(super({}),this.pause(),this.extended=n,this.globalExtended=r,this.header=t,this.remain=t.size??0,this.startBlockSize=512*Math.ceil(this.remain/512),this.blockRemain=this.startBlockSize,this.type=t.type,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}if(!t.path)throw new Error("no path provided for tar.ReadEntry");this.path=qe(t.path),this.mode=t.mode,this.mode&&(this.mode=this.mode&4095),this.uid=t.uid,this.gid=t.gid,this.uname=t.uname,this.gname=t.gname,this.size=this.remain,this.mtime=t.mtime,this.atime=t.atime,this.ctime=t.ctime,this.linkpath=t.linkpath?qe(t.linkpath):void 0,this.uname=t.uname,this.gname=t.gname,n&&this.#e(n),r&&this.#e(r,!0)}write(t){let n=t.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,o=this.blockRemain;return this.remain=Math.max(0,r-n),this.blockRemain=Math.max(0,o-n),this.ignore?!0:r>=n?super.write(t):super.write(t.subarray(0,r))}#e(t,n=!1){t.path&&(t.path=qe(t.path)),t.linkpath&&(t.linkpath=qe(t.linkpath)),Object.assign(this,Object.fromEntries(Object.entries(t).filter(([r,o])=>!(o==null||r==="path"&&n))))}};var af=(e,t,n,r={})=>{e.file&&(r.file=e.file),e.cwd&&(r.cwd=e.cwd),r.code=n instanceof Error&&n.code||t,r.tarCode=t,!e.strict&&r.recoverable!==!1?(n instanceof Error&&(r=Object.assign(n,r),n=n.message),e.emit("warn",t,n,r)):n instanceof Error?e.emit("error",Object.assign(n,r)):e.emit("error",Object.assign(new Error(`${t}: ${n}`),r))};var p8=1024*1024,rP=Buffer.from([31,139]),oP=Buffer.from([40,181,47,253]),h8=Math.max(rP.length,oP.length),Ei=Symbol("state"),cf=Symbol("writeEntry"),Ga=Symbol("readEntry"),Q0=Symbol("nextEntry"),HO=Symbol("processEntry"),Vs=Symbol("extendedHeader"),kg=Symbol("globalExtendedHeader"),nl=Symbol("meta"),BO=Symbol("emitMeta"),Tt=Symbol("buffer"),qa=Symbol("queue"),rl=Symbol("ended"),eP=Symbol("emittedEnd"),lf=Symbol("emit"),Pn=Symbol("unzip"),eE=Symbol("consumeChunk"),tE=Symbol("consumeChunkSub"),tP=Symbol("consumeBody"),WO=Symbol("consumeMeta"),jO=Symbol("consumeHeader"),Rg=Symbol("consuming"),nP=Symbol("bufferConcat"),nE=Symbol("maybeEnd"),Rm=Symbol("writing"),ol=Symbol("aborted"),rE=Symbol("onDone"),uf=Symbol("sawValidEntry"),oE=Symbol("sawNullBlock"),iE=Symbol("sawEOF"),VO=Symbol("closeStream"),g8=()=>!0,za=class extends YO.EventEmitter{file;strict;maxMetaEntrySize;filter;brotli;zstd;writable=!0;readable=!1;[qa]=[];[Tt];[Ga];[cf];[Ei]="begin";[nl]="";[Vs];[kg];[rl]=!1;[Pn];[ol]=!1;[uf];[oE]=!1;[iE]=!1;[Rm]=!1;[Rg]=!1;[eP]=!1;constructor(t={}){super(),this.file=t.file||"",this.on(rE,()=>{(this[Ei]==="begin"||this[uf]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),t.ondone?this.on(rE,t.ondone):this.on(rE,()=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!t.strict,this.maxMetaEntrySize=t.maxMetaEntrySize||p8,this.filter=typeof t.filter=="function"?t.filter:g8;let n=t.file&&(t.file.endsWith(".tar.br")||t.file.endsWith(".tbr"));this.brotli=!(t.gzip||t.zstd)&&t.brotli!==void 0?t.brotli:n?void 0:!1;let r=t.file&&(t.file.endsWith(".tar.zst")||t.file.endsWith(".tzst"));this.zstd=!(t.gzip||t.brotli)&&t.zstd!==void 0?t.zstd:r?!0:void 0,this.on("end",()=>this[VO]()),typeof t.onwarn=="function"&&this.on("warn",t.onwarn),typeof t.onReadEntry=="function"&&this.on("entry",t.onReadEntry)}warn(t,n,r={}){af(this,t,n,r)}[jO](t,n){this[uf]===void 0&&(this[uf]=!1);let r;try{r=new qo(t,n,this[Vs],this[kg])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(r.nullBlock)this[oE]?(this[iE]=!0,this[Ei]==="begin"&&(this[Ei]="header"),this[lf]("eof")):(this[oE]=!0,this[lf]("nullBlock"));else if(this[oE]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let o=r.type;if(/^(Symbolic)?Link$/.test(o)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(o)&&!/^(Global)?ExtendedHeader$/.test(o)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let i=this[cf]=new km(r,this[Vs],this[kg]);if(!this[uf])if(i.remain){let s=()=>{i.invalid||(this[uf]=!0)};i.on("end",s)}else this[uf]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[lf]("ignoredEntry",i),this[Ei]="ignore",i.resume()):i.size>0&&(this[nl]="",i.on("data",s=>this[nl]+=s),this[Ei]="meta"):(this[Vs]=void 0,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[lf]("ignoredEntry",i),this[Ei]=i.remain?"ignore":"header",i.resume()):(i.remain?this[Ei]="body":(this[Ei]="header",i.end()),this[Ga]?this[qa].push(i):(this[qa].push(i),this[Q0]())))}}}[VO](){queueMicrotask(()=>this.emit("close"))}[HO](t){let n=!0;if(!t)this[Ga]=void 0,n=!1;else if(Array.isArray(t)){let[r,...o]=t;this.emit(r,...o)}else this[Ga]=t,this.emit("entry",t),t.emittedEnd||(t.on("end",()=>this[Q0]()),n=!1);return n}[Q0](){do;while(this[HO](this[qa].shift()));if(!this[qa].length){let t=this[Ga];!t||t.flowing||t.size===t.remain?this[Rm]||this.emit("drain"):t.once("drain",()=>this.emit("drain"))}}[tP](t,n){let r=this[cf];if(!r)throw new Error("attempt to consume body without entry??");let o=r.blockRemain??0,i=o>=t.length&&n===0?t:t.subarray(n,n+o);return r.write(i),r.blockRemain||(this[Ei]="header",this[cf]=void 0,r.end()),i.length}[WO](t,n){let r=this[cf],o=this[tP](t,n);return!this[cf]&&r&&this[BO](r),o}[lf](t,n,r){!this[qa].length&&!this[Ga]?this.emit(t,n,r):this[qa].push([t,n,r])}[BO](t){switch(this[lf]("meta",this[nl]),t.type){case"ExtendedHeader":case"OldExtendedHeader":this[Vs]=tl.parse(this[nl],this[Vs],!1);break;case"GlobalExtendedHeader":this[kg]=tl.parse(this[nl],this[kg],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":{let n=this[Vs]??Object.create(null);this[Vs]=n,n.path=this[nl].replace(/\0.*/,"");break}case"NextFileHasLongLinkpath":{let n=this[Vs]||Object.create(null);this[Vs]=n,n.linkpath=this[nl].replace(/\0.*/,"");break}default:throw new Error("unknown meta: "+t.type)}}abort(t){this[ol]=!0,this.emit("abort",t),this.warn("TAR_ABORT",t,{recoverable:!1})}write(t,n,r){var s;if(typeof n=="function"&&(r=n,n=void 0),typeof t=="string"&&(t=Buffer.from(t,typeof n=="string"?n:"utf8")),this[ol])return r==null||r(),!1;if((this[Pn]===void 0||this.brotli===void 0&&this[Pn]===!1)&&t){if(this[Tt]&&(t=Buffer.concat([this[Tt],t]),this[Tt]=void 0),t.length<h8)return this[Tt]=t,r==null||r(),!0;for(let l=0;this[Pn]===void 0&&l<rP.length;l++)t[l]!==rP[l]&&(this[Pn]=!1);let a=!1;if(this[Pn]===!1&&this.zstd!==!1){a=!0;for(let l=0;l<oP.length;l++)if(t[l]!==oP[l]){a=!1;break}}let c=this.brotli===void 0&&!a;if(this[Pn]===!1&&c)if(t.length<512)if(this[rl])this.brotli=!0;else return this[Tt]=t,r==null||r(),!0;else try{new qo(t.subarray(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[Pn]===void 0||this[Pn]===!1&&(this.brotli||a)){let l=this[rl];this[rl]=!1,this[Pn]=this[Pn]===void 0?new YC({}):a?new XC({}):new zC({}),this[Pn].on("data",f=>this[eE](f)),this[Pn].on("error",f=>this.abort(f)),this[Pn].on("end",()=>{this[rl]=!0,this[eE]()}),this[Rm]=!0;let u=!!this[Pn][l?"end":"write"](t);return this[Rm]=!1,r==null||r(),u}}this[Rm]=!0,this[Pn]?this[Pn].write(t):this[eE](t),this[Rm]=!1;let i=this[qa].length?!1:this[Ga]?this[Ga].flowing:!0;return!i&&!this[qa].length&&((s=this[Ga])==null||s.once("drain",()=>this.emit("drain"))),r==null||r(),i}[nP](t){t&&!this[ol]&&(this[Tt]=this[Tt]?Buffer.concat([this[Tt],t]):t)}[nE](){if(this[rl]&&!this[eP]&&!this[ol]&&!this[Rg]){this[eP]=!0;let t=this[cf];if(t&&t.blockRemain){let n=this[Tt]?this[Tt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${t.blockRemain} more bytes, only ${n} available)`,{entry:t}),this[Tt]&&t.write(this[Tt]),t.end()}this[lf](rE)}}[eE](t){var n;if(this[Rg]&&t)this[nP](t);else if(!t&&!this[Tt])this[nE]();else if(t){if(this[Rg]=!0,this[Tt]){this[nP](t);let r=this[Tt];this[Tt]=void 0,this[tE](r)}else this[tE](t);for(;this[Tt]&&((n=this[Tt])==null?void 0:n.length)>=512&&!this[ol]&&!this[iE];){let r=this[Tt];this[Tt]=void 0,this[tE](r)}this[Rg]=!1}(!this[Tt]||this[rl])&&this[nE]()}[tE](t){let n=0,r=t.length;for(;n+512<=r&&!this[ol]&&!this[iE];)switch(this[Ei]){case"begin":case"header":this[jO](t,n),n+=512;break;case"ignore":case"body":n+=this[tP](t,n);break;case"meta":n+=this[WO](t,n);break;default:throw new Error("invalid state: "+this[Ei])}n<r&&(this[Tt]?this[Tt]=Buffer.concat([t.subarray(n),this[Tt]]):this[Tt]=t.subarray(n))}end(t,n,r){return typeof t=="function"&&(r=t,n=void 0,t=void 0),typeof n=="function"&&(r=n,n=void 0),typeof t=="string"&&(t=Buffer.from(t,n)),r&&this.once("finish",r),this[ol]||(this[Pn]?(t&&this[Pn].write(t),this[Pn].end()):(this[rl]=!0,(this.brotli===void 0||this.zstd===void 0)&&(t=t||Buffer.alloc(0)),t&&this.write(t),this[nE]())),this}};var il=e=>{let t=e.length-1,n=-1;for(;t>-1&&e.charAt(t)==="/";)n=t,t--;return n===-1?e:e.slice(0,n)};var v8=e=>{let t=e.onReadEntry;e.onReadEntry=t?n=>{t(n),n.resume()}:n=>n.resume()},iP=(e,t)=>{let n=new Map(t.map(i=>[il(i),!0])),r=e.filter,o=(i,s="")=>{let a=s||(0,sE.parse)(i).root||".",c;if(i===a)c=!1;else{let l=n.get(i);l!==void 0?c=l:c=o((0,sE.dirname)(i),a)}return n.set(i,c),c};e.filter=r?(i,s)=>r(i,s)&&o(il(i)):i=>o(il(i))},w8=e=>{let t=new za(e),n=e.file,r;try{r=ff.default.openSync(n,"r");let o=ff.default.fstatSync(r),i=e.maxReadSize||16*1024*1024;if(o.size<i){let s=Buffer.allocUnsafe(o.size),a=ff.default.readSync(r,s,0,o.size,0);t.end(a===s.byteLength?s:s.subarray(0,a))}else{let s=0,a=Buffer.allocUnsafe(i);for(;s<o.size;){let c=ff.default.readSync(r,a,0,i,s);if(c===0)break;s+=c,t.write(a.subarray(0,c))}t.end()}}finally{if(typeof r=="number")try{ff.default.closeSync(r)}catch{}}},y8=(e,t)=>{let n=new za(e),r=e.maxReadSize||16*1024*1024,o=e.file;return new Promise((s,a)=>{n.on("error",a),n.on("end",s),ff.default.stat(o,(c,l)=>{if(c)a(c);else{let u=new tf(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})})},es=js(w8,y8,e=>new za(e),e=>new za(e),(e,t)=>{t!=null&&t.length&&iP(e,t),e.noResume||v8(e)});var $g=W(require("fs"),1);var ts=W(require("fs"),1);var uP=W(require("path"),1);var sP=(e,t,n)=>(e&=4095,n&&(e=(e|384)&-19),t&&(e&256&&(e|=64),e&32&&(e|=8),e&4&&(e|=1)),e);var qO=require("path"),{isAbsolute:C8,parse:GO}=qO.win32,Ng=e=>{let t="",n=GO(e);for(;C8(e)||n.root;){let r=e.charAt(0)==="/"&&e.slice(0,4)!=="//?/"?"/":n.root;e=e.slice(r.length),t+=r,n=GO(e)}return[t,e]};var aE=["|","<",">","?",":"],aP=aE.map(e=>String.fromCharCode(61440+e.charCodeAt(0))),E8=new Map(aE.map((e,t)=>[e,aP[t]])),S8=new Map(aP.map((e,t)=>[e,aE[t]])),cP=e=>aE.reduce((t,n)=>t.split(n).join(E8.get(n)),e),zO=e=>aP.reduce((t,n)=>t.split(n).join(S8.get(n)),e);var e1=(e,t)=>t?(e=qe(e).replace(/^\.(\/|$)/,""),il(t)+"/"+e):qe(e),x8=16*1024*1024,JO=Symbol("process"),XO=Symbol("file"),ZO=Symbol("directory"),fP=Symbol("symlink"),QO=Symbol("hardlink"),Lg=Symbol("header"),cE=Symbol("read"),dP=Symbol("lstat"),lE=Symbol("onlstat"),mP=Symbol("onread"),pP=Symbol("onreadlink"),hP=Symbol("openfile"),gP=Symbol("onopenfile"),sl=Symbol("close"),uE=Symbol("mode"),vP=Symbol("awaitDrain"),lP=Symbol("ondrain"),Ys=Symbol("prefix"),Ag=class extends _o{path;portable;myuid=process.getuid&&process.getuid()||0;myuser=process.env.USER||"";maxReadSize;linkCache;statCache;preservePaths;cwd;strict;mtime;noPax;noMtime;prefix;fd;blockLen=0;blockRemain=0;buf;pos=0;remain=0;length=0;offset=0;win32;absolute;header;type;linkpath;stat;onWriteEntry;#e=!1;constructor(t,n={}){let r=bg(n);super(),this.path=qe(t),this.portable=!!r.portable,this.maxReadSize=r.maxReadSize||x8,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=qe(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime,this.prefix=r.prefix?qe(r.prefix):void 0,this.onWriteEntry=r.onWriteEntry,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let o=!1;if(!this.preservePaths){let[s,a]=Ng(this.path);s&&typeof a=="string"&&(this.path=a,o=s)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=zO(this.path.replace(/\\/g,"/")),t=t.replace(/\\/g,"/")),this.absolute=qe(r.absolute||uP.default.resolve(this.cwd,t)),this.path===""&&(this.path="./"),o&&this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:this,path:o+this.path});let i=this.statCache.get(this.absolute);i?this[lE](i):this[dP]()}warn(t,n,r={}){return af(this,t,n,r)}emit(t,...n){return t==="error"&&(this.#e=!0),super.emit(t,...n)}[dP](){ts.default.lstat(this.absolute,(t,n)=>{if(t)return this.emit("error",t);this[lE](n)})}[lE](t){this.statCache.set(this.absolute,t),this.stat=t,t.isFile()||(t.size=0),this.type=_8(t),this.emit("stat",t),this[JO]()}[JO](){switch(this.type){case"File":return this[XO]();case"Directory":return this[ZO]();case"SymbolicLink":return this[fP]();default:return this.end()}}[uE](t){return sP(t,this.type==="Directory",this.portable)}[Ys](t){return e1(t,this.prefix)}[Lg](){var n,r;if(!this.stat)throw new Error("cannot write header before stat");this.type==="Directory"&&this.portable&&(this.noMtime=!0),(n=this.onWriteEntry)==null||n.call(this,this),this.header=new qo({path:this[Ys](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Ys](this.linkpath):this.linkpath,mode:this[uE](this.stat.mode),uid:this.portable?void 0:this.stat.uid,gid:this.portable?void 0:this.stat.gid,size:this.stat.size,mtime:this.noMtime?void 0:this.mtime||this.stat.mtime,type:this.type==="Unsupported"?void 0:this.type,uname:this.portable?void 0:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?void 0:this.stat.atime,ctime:this.portable?void 0:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new tl({atime:this.portable?void 0:this.header.atime,ctime:this.portable?void 0:this.header.ctime,gid:this.portable?void 0:this.header.gid,mtime:this.noMtime?void 0:this.mtime||this.header.mtime,path:this[Ys](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Ys](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?void 0:this.header.uid,uname:this.portable?void 0:this.header.uname,dev:this.portable?void 0:this.stat.dev,ino:this.portable?void 0:this.stat.ino,nlink:this.portable?void 0:this.stat.nlink}).encode());let t=(r=this.header)==null?void 0:r.block;if(!t)throw new Error("failed to encode header");super.write(t)}[ZO](){if(!this.stat)throw new Error("cannot create directory entry without stat");this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Lg](),this.end()}[fP](){ts.default.readlink(this.absolute,(t,n)=>{if(t)return this.emit("error",t);this[pP](n)})}[pP](t){this.linkpath=qe(t),this[Lg](),this.end()}[QO](t){if(!this.stat)throw new Error("cannot create link entry without stat");this.type="Link",this.linkpath=qe(uP.default.relative(this.cwd,t)),this.stat.size=0,this[Lg](),this.end()}[XO](){if(!this.stat)throw new Error("cannot create file entry without stat");if(this.stat.nlink>1){let t=`${this.stat.dev}:${this.stat.ino}`,n=this.linkCache.get(t);if((n==null?void 0:n.indexOf(this.cwd))===0)return this[QO](n);this.linkCache.set(t,this.absolute)}if(this[Lg](),this.stat.size===0)return this.end();this[hP]()}[hP](){ts.default.open(this.absolute,"r",(t,n)=>{if(t)return this.emit("error",t);this[gP](n)})}[gP](t){if(this.fd=t,this.#e)return this[sl]();if(!this.stat)throw new Error("should stat before calling onopenfile");this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let n=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(n),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[cE]()}[cE](){let{fd:t,buf:n,offset:r,length:o,pos:i}=this;if(t===void 0||n===void 0)throw new Error("cannot read file without first opening");ts.default.read(t,n,r,o,i,(s,a)=>{if(s)return this[sl](()=>this.emit("error",s));this[mP](a)})}[sl](t=()=>{}){this.fd!==void 0&&ts.default.close(this.fd,t)}[mP](t){if(t<=0&&this.remain>0){let o=Object.assign(new Error("encountered unexpected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[sl](()=>this.emit("error",o))}if(t>this.remain){let o=Object.assign(new Error("did not encounter expected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[sl](()=>this.emit("error",o))}if(!this.buf)throw new Error("should have created buffer prior to reading");if(t===this.remain)for(let o=t;o<this.length&&t<this.blockRemain;o++)this.buf[o+this.offset]=0,t++,this.remain++;let n=this.offset===0&&t===this.buf.length?this.buf:this.buf.subarray(this.offset,this.offset+t);this.write(n)?this[lP]():this[vP](()=>this[lP]())}[vP](t){this.once("drain",t)}write(t,n,r){if(typeof n=="function"&&(r=n,n=void 0),typeof t=="string"&&(t=Buffer.from(t,typeof n=="string"?n:"utf8")),this.blockRemain<t.length){let o=Object.assign(new Error("writing more data than expected"),{path:this.absolute});return this.emit("error",o)}return this.remain-=t.length,this.blockRemain-=t.length,this.pos+=t.length,this.offset+=t.length,super.write(t,null,r)}[lP](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[sl](t=>t?this.emit("error",t):this.end());if(!this.buf)throw new Error("buffer lost somehow in ONDRAIN");this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[cE]()}},fE=class extends Ag{sync=!0;[dP](){this[lE](ts.default.lstatSync(this.absolute))}[fP](){this[pP](ts.default.readlinkSync(this.absolute))}[hP](){this[gP](ts.default.openSync(this.absolute,"r"))}[cE](){let t=!0;try{let{fd:n,buf:r,offset:o,length:i,pos:s}=this;if(n===void 0||r===void 0)throw new Error("fd and buf must be set in READ method");let a=ts.default.readSync(n,r,o,i,s);this[mP](a),t=!1}finally{if(t)try{this[sl](()=>{})}catch{}}}[vP](t){t()}[sl](t=()=>{}){this.fd!==void 0&&ts.default.closeSync(this.fd),t()}},al=class extends _o{blockLen=0;blockRemain=0;buf=0;pos=0;remain=0;length=0;preservePaths;portable;strict;noPax;noMtime;readEntry;type;prefix;path;mode;uid;gid;uname;gname;header;mtime;atime;ctime;linkpath;size;onWriteEntry;warn(t,n,r={}){return af(this,t,n,r)}constructor(t,n={}){var a,c;let r=bg(n);super(),this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.onWriteEntry=r.onWriteEntry,this.readEntry=t;let{type:o}=t;if(o==="Unsupported")throw new Error("writing entry that should be ignored");this.type=o,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix,this.path=qe(t.path),this.mode=t.mode!==void 0?this[uE](t.mode):void 0,this.uid=this.portable?void 0:t.uid,this.gid=this.portable?void 0:t.gid,this.uname=this.portable?void 0:t.uname,this.gname=this.portable?void 0:t.gname,this.size=t.size,this.mtime=this.noMtime?void 0:r.mtime||t.mtime,this.atime=this.portable?void 0:t.atime,this.ctime=this.portable?void 0:t.ctime,this.linkpath=t.linkpath!==void 0?qe(t.linkpath):void 0,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let i=!1;if(!this.preservePaths){let[l,u]=Ng(this.path);l&&typeof u=="string"&&(this.path=u,i=l)}this.remain=t.size,this.blockRemain=t.startBlockSize,(a=this.onWriteEntry)==null||a.call(this,this),this.header=new qo({path:this[Ys](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Ys](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?void 0:this.uid,gid:this.portable?void 0:this.gid,size:this.size,mtime:this.noMtime?void 0:this.mtime,type:this.type,uname:this.portable?void 0:this.uname,atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime}),i&&this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:this,path:i+this.path}),this.header.encode()&&!this.noPax&&super.write(new tl({atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime,gid:this.portable?void 0:this.gid,mtime:this.noMtime?void 0:this.mtime,path:this[Ys](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Ys](this.linkpath):this.linkpath,size:this.size,uid:this.portable?void 0:this.uid,uname:this.portable?void 0:this.uname,dev:this.portable?void 0:this.readEntry.dev,ino:this.portable?void 0:this.readEntry.ino,nlink:this.portable?void 0:this.readEntry.nlink}).encode());let s=(c=this.header)==null?void 0:c.block;if(!s)throw new Error("failed to encode header");super.write(s),t.pipe(this)}[Ys](t){return e1(t,this.prefix)}[uE](t){return sP(t,this.type==="Directory",this.portable)}write(t,n,r){typeof n=="function"&&(r=n,n=void 0),typeof t=="string"&&(t=Buffer.from(t,typeof n=="string"?n:"utf8"));let o=t.length;if(o>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=o,super.write(t,r)}end(t,n,r){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),typeof t=="function"&&(r=t,n=void 0,t=void 0),typeof n=="function"&&(r=n,n=void 0),typeof t=="string"&&(t=Buffer.from(t,n??"utf8")),r&&this.once("finish",r),t?super.end(t,r):super.end(r),this}},_8=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported";var dE=class e{tail;head;length=0;static create(t=[]){return new e(t)}constructor(t=[]){for(let n of t)this.push(n)}*[Symbol.iterator](){for(let t=this.head;t;t=t.next)yield t.value}removeNode(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");let n=t.next,r=t.prev;return n&&(n.prev=r),r&&(r.next=n),t===this.head&&(this.head=n),t===this.tail&&(this.tail=r),this.length--,t.next=void 0,t.prev=void 0,t.list=void 0,n}unshiftNode(t){if(t===this.head)return;t.list&&t.list.removeNode(t);let n=this.head;t.list=this,t.next=n,n&&(n.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}pushNode(t){if(t===this.tail)return;t.list&&t.list.removeNode(t);let n=this.tail;t.list=this,t.prev=n,n&&(n.next=t),this.tail=t,this.head||(this.head=t),this.length++}push(...t){for(let n=0,r=t.length;n<r;n++)I8(this,t[n]);return this.length}unshift(...t){for(var n=0,r=t.length;n<r;n++)P8(this,t[n]);return this.length}pop(){if(!this.tail)return;let t=this.tail.value,n=this.tail;return this.tail=this.tail.prev,this.tail?this.tail.next=void 0:this.head=void 0,n.list=void 0,this.length--,t}shift(){if(!this.head)return;let t=this.head.value,n=this.head;return this.head=this.head.next,this.head?this.head.prev=void 0:this.tail=void 0,n.list=void 0,this.length--,t}forEach(t,n){n=n||this;for(let r=this.head,o=0;r;o++)t.call(n,r.value,o,this),r=r.next}forEachReverse(t,n){n=n||this;for(let r=this.tail,o=this.length-1;r;o--)t.call(n,r.value,o,this),r=r.prev}get(t){let n=0,r=this.head;for(;r&&n<t;n++)r=r.next;if(n===t&&r)return r.value}getReverse(t){let n=0,r=this.tail;for(;r&&n<t;n++)r=r.prev;if(n===t&&r)return r.value}map(t,n){n=n||this;let r=new e;for(let o=this.head;o;)r.push(t.call(n,o.value,this)),o=o.next;return r}mapReverse(t,n){n=n||this;var r=new e;for(let o=this.tail;o;)r.push(t.call(n,o.value,this)),o=o.prev;return r}reduce(t,n){let r,o=this.head;if(arguments.length>1)r=n;else if(this.head)o=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;o;i++)r=t(r,o.value,i),o=o.next;return r}reduceReverse(t,n){let r,o=this.tail;if(arguments.length>1)r=n;else if(this.tail)o=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(let i=this.length-1;o;i--)r=t(r,o.value,i),o=o.prev;return r}toArray(){let t=new Array(this.length);for(let n=0,r=this.head;r;n++)t[n]=r.value,r=r.next;return t}toArrayReverse(){let t=new Array(this.length);for(let n=0,r=this.tail;r;n++)t[n]=r.value,r=r.prev;return t}slice(t=0,n=this.length){n<0&&(n+=this.length),t<0&&(t+=this.length);let r=new e;if(n<t||n<0)return r;t<0&&(t=0),n>this.length&&(n=this.length);let o=this.head,i=0;for(i=0;o&&i<t;i++)o=o.next;for(;o&&i<n;i++,o=o.next)r.push(o.value);return r}sliceReverse(t=0,n=this.length){n<0&&(n+=this.length),t<0&&(t+=this.length);let r=new e;if(n<t||n<0)return r;t<0&&(t=0),n>this.length&&(n=this.length);let o=this.length,i=this.tail;for(;i&&o>n;o--)i=i.prev;for(;i&&o>t;o--,i=i.prev)r.push(i.value);return r}splice(t,n=0,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);let o=this.head;for(let s=0;o&&s<t;s++)o=o.next;let i=[];for(let s=0;o&&s<n;s++)i.push(o.value),o=this.removeNode(o);o?o!==this.tail&&(o=o.prev):o=this.tail;for(let s of r)o=D8(this,o,s);return i}reverse(){let t=this.head,n=this.tail;for(let r=t;r;r=r.prev){let o=r.prev;r.prev=r.next,r.next=o}return this.head=n,this.tail=t,this}};function D8(e,t,n){let r=t,o=t?t.next:e.head,i=new Fg(n,r,o,e);return i.next===void 0&&(e.tail=i),i.prev===void 0&&(e.head=i),e.length++,i}function I8(e,t){e.tail=new Fg(t,e.tail,void 0,e),e.head||(e.head=e.tail),e.length++}function P8(e,t){e.head=new Fg(t,void 0,e.head,e),e.tail||(e.tail=e.head),e.length++}var Fg=class{list;next;prev;value;constructor(t,n,r,o){this.list=o,this.value=t,n?(n.next=this,this.prev=n):this.prev=void 0,r?(r.prev=this,this.next=r):this.next=void 0}};var _P=W(require("path"),1);var wE=class{path;absolute;entry;stat;readdir;pending=!1;ignore=!1;piped=!1;constructor(t,n){this.path=t||"./",this.absolute=n}},t1=Buffer.alloc(1024),mE=Symbol("onStat"),Og=Symbol("ended"),ns=Symbol("queue"),df=Symbol("current"),mf=Symbol("process"),Ug=Symbol("processing"),wP=Symbol("processJob"),rs=Symbol("jobs"),yP=Symbol("jobDone"),pE=Symbol("addFSEntry"),n1=Symbol("addTarEntry"),SP=Symbol("stat"),xP=Symbol("readdir"),hE=Symbol("onreaddir"),gE=Symbol("pipe"),r1=Symbol("entry"),CP=Symbol("entryOpt"),vE=Symbol("writeEntryClass"),o1=Symbol("write"),EP=Symbol("ondrain"),cl=class extends _o{sync=!1;opt;cwd;maxReadSize;preservePaths;strict;noPax;prefix;linkCache;statCache;file;portable;zip;readdirCache;noDirRecurse;follow;noMtime;mtime;filter;jobs;[vE];onWriteEntry;[ns];[rs]=0;[Ug]=!1;[Og]=!1;constructor(t={}){if(super(),this.opt=t,this.file=t.file||"",this.cwd=t.cwd||process.cwd(),this.maxReadSize=t.maxReadSize,this.preservePaths=!!t.preservePaths,this.strict=!!t.strict,this.noPax=!!t.noPax,this.prefix=qe(t.prefix||""),this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.readdirCache=t.readdirCache||new Map,this.onWriteEntry=t.onWriteEntry,this[vE]=Ag,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),this.portable=!!t.portable,t.gzip||t.brotli||t.zstd){if((t.gzip?1:0)+(t.brotli?1:0)+(t.zstd?1:0)>1)throw new TypeError("gzip, brotli, zstd are mutually exclusive");if(t.gzip&&(typeof t.gzip!="object"&&(t.gzip={}),this.portable&&(t.gzip.portable=!0),this.zip=new VC(t.gzip)),t.brotli&&(typeof t.brotli!="object"&&(t.brotli={}),this.zip=new qC(t.brotli)),t.zstd&&(typeof t.zstd!="object"&&(t.zstd={}),this.zip=new JC(t.zstd)),!this.zip)throw new Error("impossible");let n=this.zip;n.on("data",r=>super.write(r)),n.on("end",()=>super.end()),n.on("drain",()=>this[EP]()),this.on("resume",()=>n.resume())}else this.on("drain",this[EP]);this.noDirRecurse=!!t.noDirRecurse,this.follow=!!t.follow,this.noMtime=!!t.noMtime,t.mtime&&(this.mtime=t.mtime),this.filter=typeof t.filter=="function"?t.filter:()=>!0,this[ns]=new dE,this[rs]=0,this.jobs=Number(t.jobs)||4,this[Ug]=!1,this[Og]=!1}[o1](t){return super.write(t)}add(t){return this.write(t),this}end(t,n,r){return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t&&this.add(t),this[Og]=!0,this[mf](),r&&r(),this}write(t){if(this[Og])throw new Error("write after end");return t instanceof km?this[n1](t):this[pE](t),this.flowing}[n1](t){let n=qe(_P.default.resolve(this.cwd,t.path));if(!this.filter(t.path,t))t.resume();else{let r=new wE(t.path,n);r.entry=new al(t,this[CP](r)),r.entry.on("end",()=>this[yP](r)),this[rs]+=1,this[ns].push(r)}this[mf]()}[pE](t){let n=qe(_P.default.resolve(this.cwd,t));this[ns].push(new wE(t,n)),this[mf]()}[SP](t){t.pending=!0,this[rs]+=1;let n=this.follow?"stat":"lstat";$g.default[n](t.absolute,(r,o)=>{t.pending=!1,this[rs]-=1,r?this.emit("error",r):this[mE](t,o)})}[mE](t,n){this.statCache.set(t.absolute,n),t.stat=n,this.filter(t.path,n)?n.isFile()&&n.nlink>1&&t===this[df]&&!this.linkCache.get(`${n.dev}:${n.ino}`)&&!this.sync&&this[wP](t):t.ignore=!0,this[mf]()}[xP](t){t.pending=!0,this[rs]+=1,$g.default.readdir(t.absolute,(n,r)=>{if(t.pending=!1,this[rs]-=1,n)return this.emit("error",n);this[hE](t,r)})}[hE](t,n){this.readdirCache.set(t.absolute,n),t.readdir=n,this[mf]()}[mf](){if(!this[Ug]){this[Ug]=!0;for(let t=this[ns].head;t&&this[rs]<this.jobs;t=t.next)if(this[wP](t.value),t.value.ignore){let n=t.next;this[ns].removeNode(t),t.next=n}this[Ug]=!1,this[Og]&&!this[ns].length&&this[rs]===0&&(this.zip?this.zip.end(t1):(super.write(t1),super.end()))}}get[df](){return this[ns]&&this[ns].head&&this[ns].head.value}[yP](t){this[ns].shift(),this[rs]-=1,this[mf]()}[wP](t){if(!t.pending){if(t.entry){t===this[df]&&!t.piped&&this[gE](t);return}if(!t.stat){let n=this.statCache.get(t.absolute);n?this[mE](t,n):this[SP](t)}if(t.stat&&!t.ignore){if(!this.noDirRecurse&&t.stat.isDirectory()&&!t.readdir){let n=this.readdirCache.get(t.absolute);if(n?this[hE](t,n):this[xP](t),!t.readdir)return}if(t.entry=this[r1](t),!t.entry){t.ignore=!0;return}t===this[df]&&!t.piped&&this[gE](t)}}}[CP](t){return{onwarn:(n,r,o)=>this.warn(n,r,o),noPax:this.noPax,cwd:this.cwd,absolute:t.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix,onWriteEntry:this.onWriteEntry}}[r1](t){this[rs]+=1;try{return new this[vE](t.path,this[CP](t)).on("end",()=>this[yP](t)).on("error",r=>this.emit("error",r))}catch(n){this.emit("error",n)}}[EP](){this[df]&&this[df].entry&&this[df].entry.resume()}[gE](t){t.piped=!0,t.readdir&&t.readdir.forEach(o=>{let i=t.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[pE](s+o)});let n=t.entry,r=this.zip;if(!n)throw new Error("cannot pipe without source");r?n.on("data",o=>{r.write(o)||n.pause()}):n.on("data",o=>{super.write(o)||n.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}warn(t,n,r={}){af(this,t,n,r)}},pf=class extends cl{sync=!0;constructor(t){super(t),this[vE]=fE}pause(){}resume(){}[SP](t){let n=this.follow?"statSync":"lstatSync";this[mE](t,$g.default[n](t.absolute))}[xP](t){this[hE](t,$g.default.readdirSync(t.absolute))}[gE](t){let n=t.entry,r=this.zip;if(t.readdir&&t.readdir.forEach(o=>{let i=t.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[pE](s+o)}),!n)throw new Error("Cannot pipe without source");r?n.on("data",o=>{r.write(o)}):n.on("data",o=>{super[o1](o)})}};var b8=(e,t)=>{let n=new pf(e),r=new Pm(e.file,{mode:e.mode||438});n.pipe(r),i1(n,t)},T8=(e,t)=>{let n=new cl(e),r=new Ya(e.file,{mode:e.mode||438});n.pipe(r);let o=new Promise((i,s)=>{r.on("error",s),r.on("close",i),n.on("error",s)});return s1(n,t),o},i1=(e,t)=>{t.forEach(n=>{n.charAt(0)==="@"?es({file:DP.default.resolve(e.cwd,n.slice(1)),sync:!0,noResume:!0,onReadEntry:r=>e.add(r)}):e.add(n)}),e.end()},s1=async(e,t)=>{for(let n=0;n<t.length;n++){let r=String(t[n]);r.charAt(0)==="@"?await es({file:DP.default.resolve(String(e.cwd),r.slice(1)),noResume:!0,onReadEntry:o=>{e.add(o)}}):e.add(r)}e.end()},k8=(e,t)=>{let n=new pf(e);return i1(n,t),n},R8=(e,t)=>{let n=new cl(e);return s1(n,t),n},Mg=js(b8,T8,k8,R8,(e,t)=>{if(!(t!=null&&t.length))throw new TypeError("no paths specified to add to archive")});var jP=W(require("fs"),1);var S1=W(require("assert"),1),WP=require("crypto"),ft=W(require("fs"),1),zo=W(require("path"),1);var IP=W(require("fs"),1),N8=process.env.__FAKE_PLATFORM__||process.platform,L8=N8==="win32",{O_CREAT:A8,O_TRUNC:F8,O_WRONLY:O8}=IP.default.constants,a1=Number(process.env.__FAKE_FS_O_FILENAME__)||IP.default.constants.UV_FS_O_FILEMAP||0,U8=L8&&!!a1,$8=512*1024,M8=a1|F8|A8|O8,PP=U8?e=>e<$8?M8:"w":()=>"w";var Hg=W(require("fs"),1),Nm=W(require("path"),1),bP=(e,t,n)=>{try{return Hg.default.lchownSync(e,t,n)}catch(r){if((r==null?void 0:r.code)!=="ENOENT")throw r}},yE=(e,t,n,r)=>{Hg.default.lchown(e,t,n,o=>{r(o&&(o==null?void 0:o.code)!=="ENOENT"?o:null)})},H8=(e,t,n,r,o)=>{if(t.isDirectory())TP(Nm.default.resolve(e,t.name),n,r,i=>{if(i)return o(i);let s=Nm.default.resolve(e,t.name);yE(s,n,r,o)});else{let i=Nm.default.resolve(e,t.name);yE(i,n,r,o)}},TP=(e,t,n,r)=>{Hg.default.readdir(e,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return r();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return r(o)}if(o||!i.length)return yE(e,t,n,r);let s=i.length,a=null,c=l=>{if(!a){if(l)return r(a=l);if(--s===0)return yE(e,t,n,r)}};for(let l of i)H8(e,l,t,n,c)})},B8=(e,t,n,r)=>{t.isDirectory()&&kP(Nm.default.resolve(e,t.name),n,r),bP(Nm.default.resolve(e,t.name),n,r)},kP=(e,t,n)=>{let r;try{r=Hg.default.readdirSync(e,{withFileTypes:!0})}catch(o){let i=o;if((i==null?void 0:i.code)==="ENOENT")return;if((i==null?void 0:i.code)==="ENOTDIR"||(i==null?void 0:i.code)==="ENOTSUP")return bP(e,t,n);throw i}for(let o of r)B8(e,o,t,n);return bP(e,t,n)};var Do=W(require("fs"),1),c1=W(require("fs/promises"),1),jg=W(require("path"),1);var Bg=class extends Error{path;code;syscall="chdir";constructor(t,n){super(`${n}: Cannot cd into '${t}'`),this.path=t,this.code=n}get name(){return"CwdError"}};var Wg=class extends Error{path;symlink;syscall="symlink";code="TAR_SYMLINK_ERROR";constructor(t,n){super("TAR_SYMLINK_ERROR: Cannot extract through symbolic link"),this.symlink=t,this.path=n}get name(){return"SymlinkError"}};var W8=(e,t)=>{Do.default.stat(e,(n,r)=>{(n||!r.isDirectory())&&(n=new Bg(e,(n==null?void 0:n.code)||"ENOTDIR")),t(n)})},l1=(e,t,n)=>{e=qe(e);let r=t.umask??18,o=t.mode|448,i=(o&r)!==0,s=t.uid,a=t.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==t.processUid||a!==t.processGid),l=t.preserve,u=t.unlink,f=qe(t.cwd),m=(g,h)=>{g?n(g):h&&c?TP(h,s,a,w=>m(w)):i?Do.default.chmod(e,o,n):n()};if(e===f)return W8(e,m);if(l)return c1.default.mkdir(e,{mode:o,recursive:!0}).then(g=>m(null,g??void 0),m);let p=qe(jg.default.relative(f,e)).split("/");RP(f,p,o,u,f,void 0,m)},RP=(e,t,n,r,o,i,s)=>{if(!t.length)return s(null,i);let a=t.shift(),c=qe(jg.default.resolve(e+"/"+a));Do.default.mkdir(c,n,u1(c,t,n,r,o,i,s))},u1=(e,t,n,r,o,i,s)=>a=>{a?Do.default.lstat(e,(c,l)=>{if(c)c.path=c.path&&qe(c.path),s(c);else if(l.isDirectory())RP(e,t,n,r,o,i,s);else if(r)Do.default.unlink(e,u=>{if(u)return s(u);Do.default.mkdir(e,n,u1(e,t,n,r,o,i,s))});else{if(l.isSymbolicLink())return s(new Wg(e,e+"/"+t.join("/")));s(a)}}):(i=i||e,RP(e,t,n,r,o,i,s))},j8=e=>{let t=!1,n;try{t=Do.default.statSync(e).isDirectory()}catch(r){n=r==null?void 0:r.code}finally{if(!t)throw new Bg(e,n??"ENOTDIR")}},f1=(e,t)=>{e=qe(e);let n=t.umask??18,r=t.mode|448,o=(r&n)!==0,i=t.uid,s=t.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==t.processUid||s!==t.processGid),c=t.preserve,l=t.unlink,u=qe(t.cwd),f=g=>{g&&a&&kP(g,i,s),o&&Do.default.chmodSync(e,r)};if(e===u)return j8(u),f();if(c)return f(Do.default.mkdirSync(e,{mode:r,recursive:!0})??void 0);let d=qe(jg.default.relative(u,e)).split("/"),p;for(let g=d.shift(),h=u;g&&(h+="/"+g);g=d.shift()){h=qe(jg.default.resolve(h));try{Do.default.mkdirSync(h,r),p=p||h}catch{let C=Do.default.lstatSync(h);if(C.isDirectory())continue;if(l){Do.default.unlinkSync(h),Do.default.mkdirSync(h,r),p=p||h;continue}else if(C.isSymbolicLink())return new Wg(h,h+"/"+d.join("/"))}}return f(p)};var LP=require("path");var NP=Object.create(null),d1=1e4,Lm=new Set,m1=e=>{Lm.has(e)?Lm.delete(e):NP[e]=e.normalize("NFD").toLocaleLowerCase("en").toLocaleUpperCase("en"),Lm.add(e);let t=NP[e],n=Lm.size-d1;if(n>d1/10){for(let r of Lm)if(Lm.delete(r),delete NP[r],--n<=0)break}return t};var V8=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Y8=V8==="win32",G8=e=>e.split("/").slice(0,-1).reduce((n,r)=>{let o=n[n.length-1];return o!==void 0&&(r=(0,LP.join)(o,r)),n.push(r||"/"),n},[]),CE=class{#e=new Map;#n=new Map;#r=new Set;reserve(t,n){t=Y8?["win32 parallelization disabled"]:t.map(o=>il((0,LP.join)(m1(o))));let r=new Set(t.map(o=>G8(o)).reduce((o,i)=>o.concat(i)));this.#n.set(n,{dirs:r,paths:t});for(let o of t){let i=this.#e.get(o);i?i.push(n):this.#e.set(o,[n])}for(let o of r){let i=this.#e.get(o);if(!i)this.#e.set(o,[new Set([n])]);else{let s=i[i.length-1];s instanceof Set?s.add(n):i.push(new Set([n]))}}return this.#o(n)}#i(t){let n=this.#n.get(t);if(!n)throw new Error("function does not have any path reservations");return{paths:n.paths.map(r=>this.#e.get(r)),dirs:[...n.dirs].map(r=>this.#e.get(r))}}check(t){let{paths:n,dirs:r}=this.#i(t);return n.every(o=>o&&o[0]===t)&&r.every(o=>o&&o[0]instanceof Set&&o[0].has(t))}#o(t){return this.#r.has(t)||!this.check(t)?!1:(this.#r.add(t),t(()=>this.#t(t)),!0)}#t(t){if(!this.#r.has(t))return!1;let n=this.#n.get(t);if(!n)throw new Error("invalid reservation");let{paths:r,dirs:o}=n,i=new Set;for(let s of r){let a=this.#e.get(s);if(!a||(a==null?void 0:a[0])!==t)continue;let c=a[1];if(!c){this.#e.delete(s);continue}if(a.shift(),typeof c=="function")i.add(c);else for(let l of c)i.add(l)}for(let s of o){let a=this.#e.get(s),c=a==null?void 0:a[0];if(!(!a||!(c instanceof Set)))if(c.size===1&&a.length===1){this.#e.delete(s);continue}else if(c.size===1){a.shift();let l=a[0];typeof l=="function"&&i.add(l)}else c.delete(t)}return this.#r.delete(t),i.forEach(s=>this.#o(s)),!0}};var p1=Symbol("onEntry"),UP=Symbol("checkFs"),h1=Symbol("checkFs2"),$P=Symbol("isReusable"),Si=Symbol("makeFs"),MP=Symbol("file"),HP=Symbol("directory"),xE=Symbol("link"),g1=Symbol("symlink"),v1=Symbol("hardlink"),w1=Symbol("unsupported"),y1=Symbol("checkPath"),AP=Symbol("stripAbsolutePath"),ll=Symbol("mkdir"),Ur=Symbol("onError"),EE=Symbol("pending"),C1=Symbol("pend"),Am=Symbol("unpend"),FP=Symbol("ended"),OP=Symbol("maybeClose"),BP=Symbol("skip"),Vg=Symbol("doChown"),Yg=Symbol("uid"),Gg=Symbol("gid"),qg=Symbol("checkedCwd"),q8=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,zg=q8==="win32",z8=1024,K8=(e,t)=>{if(!zg)return ft.default.unlink(e,t);let n=e+".DELETE."+(0,WP.randomBytes)(16).toString("hex");ft.default.rename(e,n,r=>{if(r)return t(r);ft.default.unlink(n,t)})},J8=e=>{if(!zg)return ft.default.unlinkSync(e);let t=e+".DELETE."+(0,WP.randomBytes)(16).toString("hex");ft.default.renameSync(e,t),ft.default.unlinkSync(t)},E1=(e,t,n)=>e!==void 0&&e===e>>>0?e:t!==void 0&&t===t>>>0?t:n,Fm=class extends za{[FP]=!1;[qg]=!1;[EE]=0;reservations=new CE;transform;writable=!0;readable=!1;uid;gid;setOwner;preserveOwner;processGid;processUid;maxDepth;forceChown;win32;newer;keep;noMtime;preservePaths;unlink;cwd;strip;processUmask;umask;dmode;fmode;chmod;constructor(t={}){if(t.ondone=()=>{this[FP]=!0,this[OP]()},super(t),this.transform=t.transform,this.chmod=!!t.chmod,typeof t.uid=="number"||typeof t.gid=="number"){if(typeof t.uid!="number"||typeof t.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(t.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=t.uid,this.gid=t.gid,this.setOwner=!0}else this.uid=void 0,this.gid=void 0,this.setOwner=!1;t.preserveOwner===void 0&&typeof t.uid!="number"?this.preserveOwner=!!(process.getuid&&process.getuid()===0):this.preserveOwner=!!t.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():void 0,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():void 0,this.maxDepth=typeof t.maxDepth=="number"?t.maxDepth:z8,this.forceChown=t.forceChown===!0,this.win32=!!t.win32||zg,this.newer=!!t.newer,this.keep=!!t.keep,this.noMtime=!!t.noMtime,this.preservePaths=!!t.preservePaths,this.unlink=!!t.unlink,this.cwd=qe(zo.default.resolve(t.cwd||process.cwd())),this.strip=Number(t.strip)||0,this.processUmask=this.chmod?typeof t.processUmask=="number"?t.processUmask:process.umask():0,this.umask=typeof t.umask=="number"?t.umask:this.processUmask,this.dmode=t.dmode||511&~this.umask,this.fmode=t.fmode||438&~this.umask,this.on("entry",n=>this[p1](n))}warn(t,n,r={}){return(t==="TAR_BAD_ARCHIVE"||t==="TAR_ABORT")&&(r.recoverable=!1),super.warn(t,n,r)}[OP](){this[FP]&&this[EE]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[AP](t,n){let r=t[n];if(!r||this.preservePaths)return!0;let o=r.split("/");if(o.includes("..")||zg&&/^[a-z]:\.\.$/i.test(o[0]??"")){if(n==="path")return this.warn("TAR_ENTRY_ERROR",`${n} contains '..'`,{entry:t,[n]:r}),!1;{let a=zo.default.posix.dirname(t.path),c=zo.default.posix.normalize(zo.default.posix.join(a,r));if(c.startsWith("../")||c==="..")return this.warn("TAR_ENTRY_ERROR",`${n} escapes extraction directory`,{entry:t,[n]:r}),!1}}let[i,s]=Ng(r);return i&&(t[n]=String(s),this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute ${n}`,{entry:t,[n]:r})),!0}[y1](t){let n=qe(t.path),r=n.split("/");if(this.strip){if(r.length<this.strip)return!1;if(t.type==="Link"){let o=qe(String(t.linkpath)).split("/");if(o.length>=this.strip)t.linkpath=o.slice(this.strip).join("/");else return!1}r.splice(0,this.strip),t.path=r.join("/")}if(isFinite(this.maxDepth)&&r.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:t,path:n,depth:r.length,maxDepth:this.maxDepth}),!1;if(!this[AP](t,"path")||!this[AP](t,"linkpath"))return!1;if(zo.default.isAbsolute(t.path)?t.absolute=qe(zo.default.resolve(t.path)):t.absolute=qe(zo.default.resolve(this.cwd,t.path)),!this.preservePaths&&typeof t.absolute=="string"&&t.absolute.indexOf(this.cwd+"/")!==0&&t.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:t,path:qe(t.path),resolvedPath:t.absolute,cwd:this.cwd}),!1;if(t.absolute===this.cwd&&t.type!=="Directory"&&t.type!=="GNUDumpDir")return!1;if(this.win32){let{root:o}=zo.default.win32.parse(String(t.absolute));t.absolute=o+cP(String(t.absolute).slice(o.length));let{root:i}=zo.default.win32.parse(t.path);t.path=i+cP(t.path.slice(i.length))}return!0}[p1](t){if(!this[y1](t))return t.resume();switch(S1.default.equal(typeof t.absolute,"string"),t.type){case"Directory":case"GNUDumpDir":t.mode&&(t.mode=t.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[UP](t);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[w1](t)}}[Ur](t,n){t.name==="CwdError"?this.emit("error",t):(this.warn("TAR_ENTRY_ERROR",t,{entry:n}),this[Am](),n.resume())}[ll](t,n,r){l1(qe(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cwd:this.cwd,mode:n},r)}[Vg](t){return this.forceChown||this.preserveOwner&&(typeof t.uid=="number"&&t.uid!==this.processUid||typeof t.gid=="number"&&t.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Yg](t){return E1(this.uid,t.uid,this.processUid)}[Gg](t){return E1(this.gid,t.gid,this.processGid)}[MP](t,n){let r=typeof t.mode=="number"?t.mode&4095:this.fmode,o=new Ya(String(t.absolute),{flags:PP(t.size),mode:r,autoClose:!1});o.on("error",c=>{o.fd&&ft.default.close(o.fd,()=>{}),o.write=()=>!0,this[Ur](c,t),n()});let i=1,s=c=>{if(c){o.fd&&ft.default.close(o.fd,()=>{}),this[Ur](c,t),n();return}--i===0&&o.fd!==void 0&&ft.default.close(o.fd,l=>{l?this[Ur](l,t):this[Am](),n()})};o.on("finish",()=>{let c=String(t.absolute),l=o.fd;if(typeof l=="number"&&t.mtime&&!this.noMtime){i++;let u=t.atime||new Date,f=t.mtime;ft.default.futimes(l,u,f,m=>m?ft.default.utimes(c,u,f,d=>s(d&&m)):s())}if(typeof l=="number"&&this[Vg](t)){i++;let u=this[Yg](t),f=this[Gg](t);typeof u=="number"&&typeof f=="number"&&ft.default.fchown(l,u,f,m=>m?ft.default.chown(c,u,f,d=>s(d&&m)):s())}s()});let a=this.transform&&this.transform(t)||t;a!==t&&(a.on("error",c=>{this[Ur](c,t),n()}),t.pipe(a)),a.pipe(o)}[HP](t,n){let r=typeof t.mode=="number"?t.mode&4095:this.dmode;this[ll](String(t.absolute),r,o=>{if(o){this[Ur](o,t),n();return}let i=1,s=()=>{--i===0&&(n(),this[Am](),t.resume())};t.mtime&&!this.noMtime&&(i++,ft.default.utimes(String(t.absolute),t.atime||new Date,t.mtime,s)),this[Vg](t)&&(i++,ft.default.chown(String(t.absolute),Number(this[Yg](t)),Number(this[Gg](t)),s)),s()})}[w1](t){t.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${t.type}`,{entry:t}),t.resume()}[g1](t,n){this[xE](t,String(t.linkpath),"symlink",n)}[v1](t,n){let r=qe(zo.default.resolve(this.cwd,String(t.linkpath)));this[xE](t,r,"link",n)}[C1](){this[EE]++}[Am](){this[EE]--,this[OP]()}[BP](t){this[Am](),t.resume()}[$P](t,n){return t.type==="File"&&!this.unlink&&n.isFile()&&n.nlink<=1&&!zg}[UP](t){this[C1]();let n=[t.path];t.linkpath&&n.push(t.linkpath),this.reservations.reserve(n,r=>this[h1](t,r))}[h1](t,n){let r=a=>{n(a)},o=()=>{this[ll](this.cwd,this.dmode,a=>{if(a){this[Ur](a,t),r();return}this[qg]=!0,i()})},i=()=>{if(t.absolute!==this.cwd){let a=qe(zo.default.dirname(String(t.absolute)));if(a!==this.cwd)return this[ll](a,this.dmode,c=>{if(c){this[Ur](c,t),r();return}s()})}s()},s=()=>{ft.default.lstat(String(t.absolute),(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>(t.mtime??c.mtime))){this[BP](t),r();return}if(a||this[$P](t,c))return this[Si](null,t,r);if(c.isDirectory()){if(t.type==="Directory"){let l=this.chmod&&t.mode&&(c.mode&4095)!==t.mode,u=f=>this[Si](f??null,t,r);return l?ft.default.chmod(String(t.absolute),Number(t.mode),u):u()}if(t.absolute!==this.cwd)return ft.default.rmdir(String(t.absolute),l=>this[Si](l??null,t,r))}if(t.absolute===this.cwd)return this[Si](null,t,r);K8(String(t.absolute),l=>this[Si](l??null,t,r))})};this[qg]?i():o()}[Si](t,n,r){if(t){this[Ur](t,n),r();return}switch(n.type){case"File":case"OldFile":case"ContiguousFile":return this[MP](n,r);case"Link":return this[v1](n,r);case"SymbolicLink":return this[g1](n,r);case"Directory":case"GNUDumpDir":return this[HP](n,r)}}[xE](t,n,r,o){ft.default[r](n,String(t.absolute),i=>{i?this[Ur](i,t):(this[Am](),t.resume()),o()})}},SE=e=>{try{return[null,e()]}catch(t){return[t,null]}},Kg=class extends Fm{sync=!0;[Si](t,n){return super[Si](t,n,()=>{})}[UP](t){if(!this[qg]){let i=this[ll](this.cwd,this.dmode);if(i)return this[Ur](i,t);this[qg]=!0}if(t.absolute!==this.cwd){let i=qe(zo.default.dirname(String(t.absolute)));if(i!==this.cwd){let s=this[ll](i,this.dmode);if(s)return this[Ur](s,t)}}let[n,r]=SE(()=>ft.default.lstatSync(String(t.absolute)));if(r&&(this.keep||this.newer&&r.mtime>(t.mtime??r.mtime)))return this[BP](t);if(n||this[$P](t,r))return this[Si](null,t);if(r.isDirectory()){if(t.type==="Directory"){let s=this.chmod&&t.mode&&(r.mode&4095)!==t.mode,[a]=s?SE(()=>{ft.default.chmodSync(String(t.absolute),Number(t.mode))}):[];return this[Si](a,t)}let[i]=SE(()=>ft.default.rmdirSync(String(t.absolute)));this[Si](i,t)}let[o]=t.absolute===this.cwd?[]:SE(()=>J8(String(t.absolute)));this[Si](o,t)}[MP](t,n){let r=typeof t.mode=="number"?t.mode&4095:this.fmode,o=a=>{let c;try{ft.default.closeSync(i)}catch(l){c=l}(a||c)&&this[Ur](a||c,t),n()},i;try{i=ft.default.openSync(String(t.absolute),PP(t.size),r)}catch(a){return o(a)}let s=this.transform&&this.transform(t)||t;s!==t&&(s.on("error",a=>this[Ur](a,t)),t.pipe(s)),s.on("data",a=>{try{ft.default.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",()=>{let a=null;if(t.mtime&&!this.noMtime){let c=t.atime||new Date,l=t.mtime;try{ft.default.futimesSync(i,c,l)}catch(u){try{ft.default.utimesSync(String(t.absolute),c,l)}catch{a=u}}}if(this[Vg](t)){let c=this[Yg](t),l=this[Gg](t);try{ft.default.fchownSync(i,Number(c),Number(l))}catch(u){try{ft.default.chownSync(String(t.absolute),Number(c),Number(l))}catch{a=a||u}}}o(a)})}[HP](t,n){let r=typeof t.mode=="number"?t.mode&4095:this.dmode,o=this[ll](String(t.absolute),r);if(o){this[Ur](o,t),n();return}if(t.mtime&&!this.noMtime)try{ft.default.utimesSync(String(t.absolute),t.atime||new Date,t.mtime)}catch{}if(this[Vg](t))try{ft.default.chownSync(String(t.absolute),Number(this[Yg](t)),Number(this[Gg](t)))}catch{}n(),t.resume()}[ll](t,n){try{return f1(qe(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cwd:this.cwd,mode:n})}catch(r){return r}}[xE](t,n,r,o){let i=`${r}Sync`;try{ft.default[i](n,String(t.absolute)),o(),t.resume()}catch(s){return this[Ur](s,t)}}};var X8=e=>{let t=new Kg(e),n=e.file,r=jP.default.statSync(n),o=e.maxReadSize||16*1024*1024;new BC(n,{readSize:o,size:r.size}).pipe(t)},Z8=(e,t)=>{let n=new Fm(e),r=e.maxReadSize||16*1024*1024,o=e.file;return new Promise((s,a)=>{n.on("error",a),n.on("close",s),jP.default.stat(o,(c,l)=>{if(c)a(c);else{let u=new tf(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})})},VP=js(X8,Z8,e=>new Kg(e),e=>new Fm(e),(e,t)=>{t!=null&&t.length&&iP(e,t)});var Io=W(require("fs"),1),YP=W(require("path"),1);var Q8=(e,t)=>{let n=new pf(e),r=!0,o,i;try{try{o=Io.default.openSync(e.file,"r+")}catch(c){if((c==null?void 0:c.code)==="ENOENT")o=Io.default.openSync(e.file,"w+");else throw c}let s=Io.default.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let u=0,f=0;u<512;u+=f){if(f=Io.default.readSync(o,a,u,a.length-u,i+u),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new qo(a);if(!c.cksumValid)break;let l=512*Math.ceil((c.size||0)/512);if(i+l+512>s.size)break;i+=l,e.mtimeCache&&c.mtime&&e.mtimeCache.set(String(c.path),c.mtime)}r=!1,e9(e,n,i,o,t)}finally{if(r)try{Io.default.closeSync(o)}catch{}}},e9=(e,t,n,r,o)=>{let i=new Pm(e.file,{fd:r,start:n});t.pipe(i),n9(t,o)},t9=(e,t)=>{t=Array.from(t);let n=new cl(e),r=(i,s,a)=>{let c=(d,p)=>{d?Io.default.close(i,g=>a(d)):a(null,p)},l=0;if(s===0)return c(null,0);let u=0,f=Buffer.alloc(512),m=(d,p)=>{if(d||typeof p>"u")return c(d);if(u+=p,u<512&&p)return Io.default.read(i,f,u,f.length-u,l+u,m);if(l===0&&f[0]===31&&f[1]===139)return c(new Error("cannot append to compressed archives"));if(u<512)return c(null,l);let g=new qo(f);if(!g.cksumValid)return c(null,l);let h=512*Math.ceil((g.size??0)/512);if(l+h+512>s||(l+=h+512,l>=s))return c(null,l);e.mtimeCache&&g.mtime&&e.mtimeCache.set(String(g.path),g.mtime),u=0,Io.default.read(i,f,0,512,l,m)};Io.default.read(i,f,0,512,l,m)};return new Promise((i,s)=>{n.on("error",s);let a="r+",c=(l,u)=>{if(l&&l.code==="ENOENT"&&a==="r+")return a="w+",Io.default.open(e.file,a,c);if(l||!u)return s(l);Io.default.fstat(u,(f,m)=>{if(f)return Io.default.close(u,()=>s(f));r(u,m.size,(d,p)=>{if(d)return s(d);let g=new Ya(e.file,{fd:u,start:p});n.pipe(g),g.on("error",s),g.on("close",i),r9(n,t)})})};Io.default.open(e.file,a,c)})},n9=(e,t)=>{t.forEach(n=>{n.charAt(0)==="@"?es({file:YP.default.resolve(e.cwd,n.slice(1)),sync:!0,noResume:!0,onReadEntry:r=>e.add(r)}):e.add(n)}),e.end()},r9=async(e,t)=>{for(let n=0;n<t.length;n++){let r=String(t[n]);r.charAt(0)==="@"?await es({file:YP.default.resolve(String(e.cwd),r.slice(1)),noResume:!0,onReadEntry:o=>e.add(o)}):e.add(r)}e.end()},hf=js(Q8,t9,()=>{throw new TypeError("file is required")},()=>{throw new TypeError("file is required")},(e,t)=>{if(!kO(e))throw new TypeError("file is required");if(e.gzip||e.brotli||e.zstd||e.file.endsWith(".br")||e.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!(t!=null&&t.length))throw new TypeError("no paths specified to add/replace")});var o9=js(hf.syncFile,hf.asyncFile,hf.syncNoFile,hf.asyncNoFile,(e,t=[])=>{var n,r;(r=(n=hf).validate)==null||r.call(n,e,t),i9(e)}),i9=e=>{let t=e.filter;e.mtimeCache||(e.mtimeCache=new Map),e.filter=t?(n,r)=>{var o;return t(n,r)&&!((((o=e.mtimeCache)==null?void 0:o.get(n))??r.mtime??0)>(r.mtime??0))}:(n,r)=>{var o;return!((((o=e.mtimeCache)==null?void 0:o.get(n))??r.mtime??0)>(r.mtime??0))}};var fp=W(require("crypto")),DW=W(mb()),Pl=W(Ar()),IW=W(j$()),PW=W(MM());var Hte=W(require("path")),OT=require("string_decoder");var RS=W(require("path")),OB=W(require("stream")),UB=W(require("os")),cp=W(require("child_process")),kv=require("string_decoder");var _B=W(require("path")),DB=W(require("assert"));var HM;(()=>{"use strict";var e={975:E=>{function x(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function b(T,k){for(var L,N="",H=0,B=-1,z=0,Y=0;Y<=T.length;++Y){if(Y<T.length)L=T.charCodeAt(Y);else{if(L===47)break;L=47}if(L===47){if(!(B===Y-1||z===1))if(B!==Y-1&&z===2){if(N.length<2||H!==2||N.charCodeAt(N.length-1)!==46||N.charCodeAt(N.length-2)!==46){if(N.length>2){var G=N.lastIndexOf("/");if(G!==N.length-1){G===-1?(N="",H=0):H=(N=N.slice(0,G)).length-1-N.lastIndexOf("/"),B=Y,z=0;continue}}else if(N.length===2||N.length===1){N="",H=0,B=Y,z=0;continue}}k&&(N.length>0?N+="/..":N="..",H=2)}else N.length>0?N+="/"+T.slice(B+1,Y):N=T.slice(B+1,Y),H=Y-B-1;B=Y,z=0}else L===46&&z!==-1?++z:z=-1}return N}var D={resolve:function(){for(var T,k="",L=!1,N=arguments.length-1;N>=-1&&!L;N--){var H;N>=0?H=arguments[N]:(T===void 0&&(T=process.cwd()),H=T),x(H),H.length!==0&&(k=H+"/"+k,L=H.charCodeAt(0)===47)}return k=b(k,!L),L?k.length>0?"/"+k:"/":k.length>0?k:"."},normalize:function(T){if(x(T),T.length===0)return".";var k=T.charCodeAt(0)===47,L=T.charCodeAt(T.length-1)===47;return(T=b(T,!k)).length!==0||k||(T="."),T.length>0&&L&&(T+="/"),k?"/"+T:T},isAbsolute:function(T){return x(T),T.length>0&&T.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var T,k=0;k<arguments.length;++k){var L=arguments[k];x(L),L.length>0&&(T===void 0?T=L:T+="/"+L)}return T===void 0?".":D.normalize(T)},relative:function(T,k){if(x(T),x(k),T===k||(T=D.resolve(T))===(k=D.resolve(k)))return"";for(var L=1;L<T.length&&T.charCodeAt(L)===47;++L);for(var N=T.length,H=N-L,B=1;B<k.length&&k.charCodeAt(B)===47;++B);for(var z=k.length-B,Y=H<z?H:z,G=-1,ce=0;ce<=Y;++ce){if(ce===Y){if(z>Y){if(k.charCodeAt(B+ce)===47)return k.slice(B+ce+1);if(ce===0)return k.slice(B+ce)}else H>Y&&(T.charCodeAt(L+ce)===47?G=ce:ce===0&&(G=0));break}var Be=T.charCodeAt(L+ce);if(Be!==k.charCodeAt(B+ce))break;Be===47&&(G=ce)}var mt="";for(ce=L+G+1;ce<=N;++ce)ce!==N&&T.charCodeAt(ce)!==47||(mt.length===0?mt+="..":mt+="/..");return mt.length>0?mt+k.slice(B+G):(B+=G,k.charCodeAt(B)===47&&++B,k.slice(B))},_makeLong:function(T){return T},dirname:function(T){if(x(T),T.length===0)return".";for(var k=T.charCodeAt(0),L=k===47,N=-1,H=!0,B=T.length-1;B>=1;--B)if((k=T.charCodeAt(B))===47){if(!H){N=B;break}}else H=!1;return N===-1?L?"/":".":L&&N===1?"//":T.slice(0,N)},basename:function(T,k){if(k!==void 0&&typeof k!="string")throw new TypeError('"ext" argument must be a string');x(T);var L,N=0,H=-1,B=!0;if(k!==void 0&&k.length>0&&k.length<=T.length){if(k.length===T.length&&k===T)return"";var z=k.length-1,Y=-1;for(L=T.length-1;L>=0;--L){var G=T.charCodeAt(L);if(G===47){if(!B){N=L+1;break}}else Y===-1&&(B=!1,Y=L+1),z>=0&&(G===k.charCodeAt(z)?--z==-1&&(H=L):(z=-1,H=Y))}return N===H?H=Y:H===-1&&(H=T.length),T.slice(N,H)}for(L=T.length-1;L>=0;--L)if(T.charCodeAt(L)===47){if(!B){N=L+1;break}}else H===-1&&(B=!1,H=L+1);return H===-1?"":T.slice(N,H)},extname:function(T){x(T);for(var k=-1,L=0,N=-1,H=!0,B=0,z=T.length-1;z>=0;--z){var Y=T.charCodeAt(z);if(Y!==47)N===-1&&(H=!1,N=z+1),Y===46?k===-1?k=z:B!==1&&(B=1):k!==-1&&(B=-1);else if(!H){L=z+1;break}}return k===-1||N===-1||B===0||B===1&&k===N-1&&k===L+1?"":T.slice(k,N)},format:function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return(function(k,L){var N=L.dir||L.root,H=L.base||(L.name||"")+(L.ext||"");return N?N===L.root?N+H:N+"/"+H:H})(0,T)},parse:function(T){x(T);var k={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return k;var L,N=T.charCodeAt(0),H=N===47;H?(k.root="/",L=1):L=0;for(var B=-1,z=0,Y=-1,G=!0,ce=T.length-1,Be=0;ce>=L;--ce)if((N=T.charCodeAt(ce))!==47)Y===-1&&(G=!1,Y=ce+1),N===46?B===-1?B=ce:Be!==1&&(Be=1):B!==-1&&(Be=-1);else if(!G){z=ce+1;break}return B===-1||Y===-1||Be===0||Be===1&&B===Y-1&&B===z+1?Y!==-1&&(k.base=k.name=z===0&&H?T.slice(1,Y):T.slice(z,Y)):(z===0&&H?(k.name=T.slice(1,B),k.base=T.slice(1,Y)):(k.name=T.slice(z,B),k.base=T.slice(z,Y)),k.ext=T.slice(B,Y)),z>0?k.dir=T.slice(0,z-1):H&&(k.dir="/"),k},sep:"/",delimiter:":",win32:null,posix:null};D.posix=D,E.exports=D}},t={};function n(E){var x=t[E];if(x!==void 0)return x.exports;var b=t[E]={exports:{}};return e[E](b,b.exports,n),b.exports}n.d=(E,x)=>{for(var b in x)n.o(x,b)&&!n.o(E,b)&&Object.defineProperty(E,b,{enumerable:!0,get:x[b]})},n.o=(E,x)=>Object.prototype.hasOwnProperty.call(E,x),n.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var r={};let o;n.r(r),n.d(r,{URI:()=>m,Utils:()=>R}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let i=/^\w[\w\d+.-]*$/,s=/^\//,a=/^\/\//;function c(E,x){if(!E.scheme&&x)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${E.authority}", path: "${E.path}", query: "${E.query}", fragment: "${E.fragment}"}`);if(E.scheme&&!i.test(E.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(E.path){if(E.authority){if(!s.test(E.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(E.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let l="",u="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static isUri(x){return x instanceof m||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="string"&&typeof x.with=="function"&&typeof x.toString=="function"}scheme;authority;path;query;fragment;constructor(x,b,D,T,k,L=!1){typeof x=="object"?(this.scheme=x.scheme||l,this.authority=x.authority||l,this.path=x.path||l,this.query=x.query||l,this.fragment=x.fragment||l):(this.scheme=(function(N,H){return N||H?N:"file"})(x,L),this.authority=b||l,this.path=(function(N,H){switch(N){case"https":case"http":case"file":H?H[0]!==u&&(H=u+H):H=u}return H})(this.scheme,D||l),this.query=T||l,this.fragment=k||l,c(this,L))}get fsPath(){return C(this,!1)}with(x){if(!x)return this;let{scheme:b,authority:D,path:T,query:k,fragment:L}=x;return b===void 0?b=this.scheme:b===null&&(b=l),D===void 0?D=this.authority:D===null&&(D=l),T===void 0?T=this.path:T===null&&(T=l),k===void 0?k=this.query:k===null&&(k=l),L===void 0?L=this.fragment:L===null&&(L=l),b===this.scheme&&D===this.authority&&T===this.path&&k===this.query&&L===this.fragment?this:new p(b,D,T,k,L)}static parse(x,b=!1){let D=f.exec(x);return D?new p(D[2]||l,I(D[4]||l),I(D[5]||l),I(D[7]||l),I(D[9]||l),b):new p(l,l,l,l,l)}static file(x){let b=l;if(o&&(x=x.replace(/\\/g,u)),x[0]===u&&x[1]===u){let D=x.indexOf(u,2);D===-1?(b=x.substring(2),x=u):(b=x.substring(2,D),x=x.substring(D)||u)}return new p("file",b,x,l,l)}static from(x){let b=new p(x.scheme,x.authority,x.path,x.query,x.fragment);return c(b,!0),b}toString(x=!1){return v(this,x)}toJSON(){return this}static revive(x){if(x){if(x instanceof m)return x;{let b=new p(x);return b._formatted=x.external,b._fsPath=x._sep===d?x.fsPath:null,b}}return x}}let d=o?1:void 0;class p extends m{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath}toString(x=!1){return x?v(this,!0):(this._formatted||(this._formatted=v(this,!1)),this._formatted)}toJSON(){let x={$mid:1};return this._fsPath&&(x.fsPath=this._fsPath,x._sep=d),this._formatted&&(x.external=this._formatted),this.path&&(x.path=this.path),this.scheme&&(x.scheme=this.scheme),this.authority&&(x.authority=this.authority),this.query&&(x.query=this.query),this.fragment&&(x.fragment=this.fragment),x}}let g={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function h(E,x,b){let D,T=-1;for(let k=0;k<E.length;k++){let L=E.charCodeAt(k);if(L>=97&&L<=122||L>=65&&L<=90||L>=48&&L<=57||L===45||L===46||L===95||L===126||x&&L===47||b&&L===91||b&&L===93||b&&L===58)T!==-1&&(D+=encodeURIComponent(E.substring(T,k)),T=-1),D!==void 0&&(D+=E.charAt(k));else{D===void 0&&(D=E.substr(0,k));let N=g[L];N!==void 0?(T!==-1&&(D+=encodeURIComponent(E.substring(T,k)),T=-1),D+=N):T===-1&&(T=k)}}return T!==-1&&(D+=encodeURIComponent(E.substring(T))),D!==void 0?D:E}function w(E){let x;for(let b=0;b<E.length;b++){let D=E.charCodeAt(b);D===35||D===63?(x===void 0&&(x=E.substr(0,b)),x+=g[D]):x!==void 0&&(x+=E[b])}return x!==void 0?x:E}function C(E,x){let b;return b=E.authority&&E.path.length>1&&E.scheme==="file"?`//${E.authority}${E.path}`:E.path.charCodeAt(0)===47&&(E.path.charCodeAt(1)>=65&&E.path.charCodeAt(1)<=90||E.path.charCodeAt(1)>=97&&E.path.charCodeAt(1)<=122)&&E.path.charCodeAt(2)===58?x?E.path.substr(1):E.path[1].toLowerCase()+E.path.substr(2):E.path,o&&(b=b.replace(/\//g,"\\")),b}function v(E,x){let b=x?w:h,D="",{scheme:T,authority:k,path:L,query:N,fragment:H}=E;if(T&&(D+=T,D+=":"),(k||T==="file")&&(D+=u,D+=u),k){let B=k.indexOf("@");if(B!==-1){let z=k.substr(0,B);k=k.substr(B+1),B=z.lastIndexOf(":"),B===-1?D+=b(z,!1,!1):(D+=b(z.substr(0,B),!1,!1),D+=":",D+=b(z.substr(B+1),!1,!0)),D+="@"}k=k.toLowerCase(),B=k.lastIndexOf(":"),B===-1?D+=b(k,!1,!0):(D+=b(k.substr(0,B),!1,!0),D+=k.substr(B))}if(L){if(L.length>=3&&L.charCodeAt(0)===47&&L.charCodeAt(2)===58){let B=L.charCodeAt(1);B>=65&&B<=90&&(L=`/${String.fromCharCode(B+32)}:${L.substr(3)}`)}else if(L.length>=2&&L.charCodeAt(1)===58){let B=L.charCodeAt(0);B>=65&&B<=90&&(L=`${String.fromCharCode(B+32)}:${L.substr(2)}`)}D+=b(L,!0,!1)}return N&&(D+="?",D+=b(N,!1,!1)),H&&(D+="#",D+=x?H:h(H,!1,!1)),D}function y(E){try{return decodeURIComponent(E)}catch{return E.length>3?E.substr(0,3)+y(E.substr(3)):E}}let S=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function I(E){return E.match(S)?E.replace(S,(x=>y(x))):E}var _=n(975);let A=_.posix||_,U="/";var R;(function(E){E.joinPath=function(x,...b){return x.with({path:A.join(x.path,...b)})},E.resolvePath=function(x,...b){let D=x.path,T=!1;D[0]!==U&&(D=U+D,T=!0);let k=A.resolve(D,...b);return T&&k[0]===U&&!x.authority&&(k=k.substring(1)),x.with({path:k})},E.dirname=function(x){if(x.path.length===0||x.path===U)return x;let b=A.dirname(x.path);return b.length===1&&b.charCodeAt(0)===46&&(b=""),x.with({path:b})},E.basename=function(x){return A.basename(x.path)},E.extname=function(x){return A.extname(x.path)}})(R||(R={})),HM=r})();var{URI:Ce,Utils:Po}=HM;var BM=W(require("path"));var gl=W(Ar());function It(e,t){if(pv(t)){let n=e.dirname(t);return{isWorkspaceFile:!0,workspaceOrFolderPath:t,rootFolderPath:n,configFolderPath:n}}return{isWorkspaceFile:!1,workspaceOrFolderPath:t,rootFolderPath:t,configFolderPath:t}}function pv(e){return BM.extname(e)===".code-workspace"}async function XE(e,t){if(t.isWorkspaceFile)try{let n=t.rootFolderPath,r=(await e.readFile(t.workspaceOrFolderPath)).toString(),i=$e(r).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(e.path.isAbsolute(a))return gl.t("Workspace contains an absolute folder path '{0}'.",a);c=e.path.resolve(n,a)}else{let l=s.uri;return l?Ce.parse(l).scheme!=="file"?gl.t("Workspace contains folder '{0}' not on the local file system.",l):gl.t("Workspace contains an absolute folder path '{0}'.",l):gl.t("Workspace contains a folder that defines neither a path nor a URI.")}if(!AQ(e,c,n))return gl.t("Folder '{0}' is not a subfolder of shared root folder '{1}'.",c,n)}return}return gl.t("Workspace does not define any folders")}catch(n){return gl.t("Problems loading workspace file {0}: {1}",t.workspaceOrFolderPath,n&&(n.message||n.toString()))}}function AQ(e,t,n){return t===n?!0:!t||!n||n.length>t.length||t.length>n.length&&t.charAt(n.length)!==e.path.sep?!1:FQ(e.platform,n,t.substr(0,n.length))}function FQ(e,t,n){return e==="linux"?t===n:t.toLowerCase()===n.toLowerCase()}var sr=W(require("path"));var xT=W(require("crypto")),hS=W(hv()),vB=require("string_decoder");var _T=W(Ar());var Xm=W(require("path"));async function YH(e,t){let n=await cee(e),r=n["agent-socket"];if(!r){t.write("gpg-agent: No agent-socket found in container.");return}let o=n.homedir;try{let{stdout:a}=await e.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim()){t.write("gpg-agent: Private keys found in container, not forwarding.");return}}catch{}let i=!1,s=n["keyboxd-socket"];if(s)try{await e.exec(`grep -e '^s*use-keyboxds*$' '${o}/common.conf' 2>/dev/null`),i=!0}catch{}return{homedir:o,gpgSocket:r,keyboxdSocket:s,useKeyboxd:i}}async function GH(e,t,n,r){let o=await aee(e,r),i=o["agent-extra-socket"];if(!i){r.write(`gpg-agent: No agent-extra-socket found on ${e.type} host.`);return}let s=o.homedir,a=!1,c=o["keyboxd-socket"];if(c)try{let v=(await e.readFile(e.path.join(s,"common.conf"))).toString();a=/^\s*use-keyboxd\s*$/m.test(v)}catch{}let l=Xm.posix.join(n.homedir,"pubring.kbx"),u=await Di(t,l);u&&r.write(`GPG forwarding: ${l} exists in container.`);let f=Xm.posix.join(n.homedir,"pubring.gpg"),m=await Di(t,f);m&&r.write(`GPG forwarding: ${f} exists in container.`);let d=Xm.posix.join(n.homedir,"trustdb.gpg"),p=await Di(t,d);p&&r.write(`GPG forwarding: ${d} exists in container.`);let g=a&&n.keyboxdSocket&&!n.useKeyboxd&&!u&&!m,h=a&&(n.useKeyboxd||g),w=[],C=(async()=>{if(await t.exec(`mkdir -p -m 700 '${Xm.posix.dirname(n.gpgSocket)}'`),h)g&&await t.exec(`mkdir -p -m 700 '${n.homedir}' && echo '
use-keyboxd' >> '${Xm.posix.join(n.homedir,"common.conf")}'`);else if(a||n.useKeyboxd){if(!n.useKeyboxd&&!u&&!m||n.useKeyboxd&&(await t.exec("gpg --export --export-options backup")).stdout.trim().length===0){try{let v=await X({exec:e.exec,cmd:"gpg",args:["--export","--export-options","backup"],output:r});v.stdout.byteLength&&w.push(async()=>{try{await t.exec(`${Df(v.stdout.byteLength)} | gpg --import --import-options restore`,{stdin:v.stdout})}catch(y){r.write(`GPG forwarding: Failed to import public keys: ${y==null?void 0:y.message}`)}})}catch(v){r.write(`GPG forwarding: Failed to export public keys: ${v==null?void 0:v.message}`)}try{let v=await X({exec:e.exec,cmd:"gpgsm",args:["--export","--armor"],output:r});v.stdout.byteLength&&w.push(async()=>{try{await t.exec(`${Df(v.stdout.byteLength)} | gpgsm --import`,{stdin:v.stdout})}catch(y){r.write(`GPG forwarding: Failed to import certificates: ${y==null?void 0:y.message}`)}})}catch(v){r.write(`GPG forwarding: Failed to export certificates: ${v==null?void 0:v.message}`)}}}else u||await vl(e,t,e.path.join(s,"pubring.kbx"),l,"gpg"),m||await vl(e,t,e.path.join(s,"pubring.gpg"),f,"gpg"),p||await vl(e,t,e.path.join(s,"trustdb.gpg"),d,"gpg");if((a||n.useKeyboxd)&&!p)try{let v=await X({exec:e.exec,cmd:"gpg",args:["--export-ownertrust"],output:r});v.stdout.byteLength&&w.push(async()=>{try{await t.exec(`${Df(v.stdout.byteLength)} | gpg --import-ownertrust`,{stdin:v.stdout})}catch(y){r.write(`GPG forwarding: Failed to import ownertrust: ${y==null?void 0:y.message}`)}})}catch(v){r.write(`GPG forwarding: Failed to export ownertrust: ${v==null?void 0:v.message}`)}await lee(e,r)})();return{cliHost:e,remoteGpgSocket:n.gpgSocket,localGpgSocket:i,remoteKeyboxdSocket:h?n.keyboxdSocket:void 0,localKeyboxdSocket:h?c:void 0,importTasks:async()=>{await C;for(let v of w)await v()}}}async function aee(e,t){try{let{stdout:n}=await X({exec:e.exec,cmd:"gpgconf",args:["--list-dirs"],output:t,print:!0});return n.toString().trim().split(/\r?\n/).reduce((r,o)=>{let i=o.indexOf(":");if(i!==-1){let s=decodeURIComponent(o.substring(i+1));e.platform==="win32"&&/^\/.\//.test(s)&&(s=`${s.charAt(1)}:${s.substring(2).replace(/\//g,"\\")}`),r[o.substring(0,i)]=s}return r},{})}catch{return{}}}async function cee(e){try{let{stdout:t}=await e.exec("gpgconf --list-dirs");return t.trim().split(`
`).reduce((n,r)=>{let o=r.indexOf(":");return o!==-1&&(n[r.substring(0,o)]=decodeURIComponent(r.substring(o+1))),n},{})}catch{return{}}}async function lee(e,t){try{await X({exec:e.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:t})}catch{}}var Qb=W(require("path"));async function gv(e,t,n){if(!("exec"in e)){for(let r=t,o="";r!==o;o=r,r=e.path.dirname(r))if(await e.isFile(e.path.join(r,".git","config")))return r;return}try{let{stdout:r}=await X({exec:e.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:t,output:n}),o=r.toString().trim();return e.path.resolve(t,o)}catch{return}}async function eT(e,t,n,r){try{return await X({exec:e.exec,cmd:"git",args:["ls-remote",t],cwd:".",env:n,output:r,print:"onerror"}),!0}catch(o){return(o==null?void 0:o.code)==="ENOENT"?void 0:!1}}async function KH(e,t,n,r,o){let i=r[1],s={get:"fill",store:"approve",erase:"reject"}[i];if(s===void 0)throw new Error(`Expected get, store or erase, got: ${i}`);let a=await qH(n?e:t,s,o).catch(c=>{if(n)throw c});if(!n&&(a==="ENOENT"||(a==null?void 0:a.code)!==0)){let c=await qH(e,s,o);c!=="ENOENT"&&(a=c,c.code===0&&(n=!0))}return a==="ENOENT"?{result:{stdout:"",stderr:"",code:127},preferLocalCLIHost:n}:{result:a,preferLocalCLIHost:n}}async function qH({exec:e},t,n){try{let{stdout:r,stderr:o}=await X({exec:e,cmd:"git",args:["credential",t],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(n),output:Fe});return{stdout:r.toString(),stderr:o.toString(),code:0}}catch(r){if((r==null?void 0:r.code)==="ENOENT"||(r==null?void 0:r.code)==="EPIPE")return"ENOENT";if(!(r&&r.stdout&&r.stderr))throw r;let{stdout:o,stderr:i,code:s}=r;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function JH(e,t,n){let r=await tT(e,t,n);if(!r)return;r.startsWith("refs/")&&(r=r.substr(5)),r.startsWith("remotes/")&&(r=r.substr(8));let o=r.indexOf("/");if(o===-1)return;let i=r.substr(0,o),s=r.substr(o+1);try{let{stdout:a}=await X({exec:e.exec,cmd:"git",args:["remote","get-url",i],cwd:t.rootFolderPath,output:n}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let l=await mee(e,t,i,n);if(l&&s!==l)return`${c}/tree/${s}`}return c}catch{return}}async function tS(e,t,n){if(!("exec"in e)){let o=await gv(e,t.rootFolderPath,n);if(!o)return;try{return(await e.readFile(e.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let r;try{let{stdout:o}=await X({exec:e.exec,cmd:"git",args:["remote","-v"],cwd:t.rootFolderPath,output:n});r=o.toString()}catch{return}return Array.from(new Set(uee(/^[^\s]+\s+([^\s]+)/gm,r,1)))}function uee(e,t,n){return{[Symbol.iterator]:function*(){let r;for(;r=e.exec(t);)yield r[n],e.lastIndex===r.index&&e.lastIndex++}}}async function XH(e,t,n){return await fee(e,t,n)||dee(e,t,n)}async function fee(e,t,n){try{let{stdout:r}=await X({exec:e.exec,cmd:"git",args:["status","--porcelain"],cwd:t.rootFolderPath,output:n});return!!r.toString().trim()}catch{return}}async function dee(e,t,n){let r=await tT(e,t,n);if(r)try{let{stdout:o}=await X({exec:e.exec,cmd:"git",args:["log",`${r}..HEAD`],cwd:t.rootFolderPath,output:n});return!!o.toString().trim()}catch{return}}async function ZH(e,t,n,r){let o=await tT(e,t,r);if(!o)return!1;try{let i=e.platform==="win32"?n.replace(/\\/g,"/"):n;return await X({exec:e.exec,cmd:"git",args:["cat-file","-e",`${o}:${i}`],cwd:t.rootFolderPath,output:r}),!0}catch{return!1}}async function tT(e,t,n){try{let{stdout:r}=await X({exec:e.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:t.rootFolderPath,output:n});return r.toString().trim()}catch{return}}async function mee(e,t,n,r){try{let{stdout:o}=await X({exec:e.exec,cmd:"git",args:["remote","show",n],cwd:t.rootFolderPath,output:r});return(o.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function QH(e,t,n,r,o,i,s){let{extensionPath:a,onDidInput:c}=e;if(await t.isFolder(t.path.join(n,".git"))){if(s&&(t.type==="container"&&await Ii({ptyExec:t.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",n],cwd:n,output:on(o,3)}),await pee(t,n,o))){let d=r.tokenEnvVar?{...r.env,GIT_ASKPASS:t.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:t.env[r.tokenEnvVar]}:r.env;return{gitClone:Ii({ptyExec:t.ptyExec,cmd:"git",args:["pull","--ff-only"],cwd:n,env:d,onDidInput:c,output:on(o,3)}).catch(g=>g),gitUnshallow:void 0}}return{gitClone:void 0,gitUnshallow:void 0}}await t.mkdirp(n);let l=r.tokenEnvVar?{...r.env,GIT_ASKPASS:t.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:t.env[r.tokenEnvVar]}:r.env,u=[];if(r.fullClone||u.push("--depth","1"),r.branch&&u.push("--branch",r.branch),r.recurseSubmodules&&u.push("--recurse-submodules"),t.type==="container"&&r.url.startsWith("file:")){let d=t.path.join(Ce.parse(r.url).path,".git");await Ii({ptyExec:t.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",d],cwd:n,env:l,output:on(o,3)})}let f=Ii({ptyExec:t.ptyExec,cmd:"git",args:["clone",...u,r.url,"."],cwd:n,env:l,onDidInput:c,output:on(o,3)}),m=r.fullClone?f:(async()=>(await f,await Ii({ptyExec:t.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:n,env:l,output:i}),Ii({ptyExec:t.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:n,env:l,onDidInput:c,output:i})))();return{gitClone:f,gitUnshallow:m}}async function pee(e,t,n){return(await X({exec:e.exec,cmd:"git",args:["status","--porcelain"],cwd:t,output:n}).catch(o=>o)).stdout.toString().trim()===""}async function nS(e,t,n){let r=await vv(e,t,[".gitconfig"],"git"," && grep -e '^\\[' ~/.gitconfig | grep -v -E '^\\[(filter|safe)([[:blank:]]+|\\])'"),o=await hee(e,t,n);(r||o)&&(await gee(e,t.shellServer),vee(e,t).catch(i=>{e.output.write(`Error copying allowed signers: ${(i==null?void 0:i.stack)||(i==null?void 0:i.message)||i}`,5)}))}var e2=["git","config"];async function hee(e,t,n){let{cliHost:r}=e,o=await zH(r);if(!await r.isFile(o)&&(r.type==="local"||(r=await Hr(process.cwd(),e.loadNativeModule,e.output),o=await zH(r),!await r.isFile(o))))return!1;let i=(async()=>{let s=await n,a=s.XDG_CONFIG_HOME?[s.XDG_CONFIG_HOME]:[t.homeFolder,".config"];return Qb.posix.join(...a,...e2)})();return vl(r,t.shellServer,o,i,"git")}async function zH(e){let{env:t}=e,n=t.XDG_CONFIG_HOME?[t.XDG_CONFIG_HOME]:[await e.homedir(),".config"];return e.path.join(...n,...e2)}async function gee(e,t){await t.exec(`# Cleaning up git config
for key in core.editor core.sshCommand gpg.program gpg.openpgp.program gpg.x509.program gpg.ssh.program
do
	value="$(git config --global --get $key)"
	executable="\${value%% *}"
	([ -z "$executable" ] || [ "$executable" = "${e.product.applicationName}" ]) && continue
	command -v "$executable" >/dev/null 2>&1 || (echo "Removing Git config key: $key = $value" && git config --global --unset $key)
done
git config --global --unset http.sslBackend || true`)}async function vee(e,t){let{cliHost:n,output:r}=e,{homeFolder:o,shellServer:i}=t,s=await wee(n,"gpg.ssh.allowedSignersFile",r);if(!s)return;let a=await n.homedir(),c=/^~[/\\]/.test(s)?n.path.join(a,s.substring(2)):s,l=n.path.resolve(a,c);r.write(`Copying allowed signers file: ${l}`);let u=n.path.relative(a,l),f=n.platform==="win32"?u.replace(/\\/g,"/"):u,m=Qb.posix.resolve(o,f);await vl(n,i,l,m,"ssh")&&await i.exec(`git config --global gpg.ssh.allowedSignersFile '${m}'`)}async function wee(e,t,n){try{let{stdout:r}=await X({exec:e.exec,cmd:"git",args:["config","--global","--get",t],output:n}),o=r.toString();return e.platform==="win32"&&o.endsWith(`\r
`)?o.substring(0,o.length-2):o.endsWith(`
`)?o.substring(0,o.length-1):o}catch{return}}var yl=require("stream");async function t2(e,t){let{stdout:n}=await e.exec(`cat /proc/${t}/environ`,{logOutput:!1});return n.split("\0").map(r=>{let o=r.indexOf("=");return o!==-1?[r.slice(0,o),r.slice(o+1)]:[]}).reduce((r,[o,i])=>(o&&(r[o]=i),r),{})}async function nT(e){let t=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:n}=await e.exec(t,{logOutput:!1}),r=6,o=n.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=r).map(([a,c,l,u,f,m])=>{let d=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:d[1],pgrp:d[2],cwd:c,mntNS:l,cmd:m.replace(/\0/g," "),env:f.split("\0").reduce((p,g)=>{let h=g.indexOf("=");return h!==-1&&(p[g.substr(0,h)]=g.substr(h+1)),p},{})}}),mntNS:i}}function n2(e){let t={};return e.forEach(n=>t[n.pid]={process:n,childProcesses:[]}),e.filter(n=>n.ppid).forEach(n=>{var r;return(r=t[n.ppid])==null?void 0:r.childProcesses.push(t[n.pid])}),t}function rT(e,t="  ",n="  "){return`${n}${e.process.pid}: ${e.process.cmd}
${e.childProcesses.map(r=>rT(r,t,n+t))}`}var Pi=W(require("path")),s2=W(require("fs"));async function Jo(e,t=process.cwd(),n=process.env){if(process.platform!=="win32")return e;if(Pi.isAbsolute(e))return await oT(e)||e;if(/[/\\]/.test(e)){let s=Pi.join(t,e);return await oT(s)||s}let r,o;if(n){for(let s of Object.keys(n))if(s.toLowerCase()==="path"){let a=n[s];typeof a=="string"&&(r=a,o=a.split(Pi.delimiter).filter(Boolean),o.push(Pi.join(n.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){let s=new Error(`No PATH to look up executable '${e}'.`);throw s.code="ENOENT",s}for(let s of o){let a;Pi.isAbsolute(s)?a=Pi.join(s,e):a=Pi.join(t,s,e);let c=await oT(a);if(c)return c}let i=new Error(`Exectuable '${e}' not found on PATH '${r}'.`);throw i.code="ENOENT",i}var r2=process.env.PATHEXT,o2=r2?r2.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function oT(e){if(o2.indexOf(Pi.extname(e))!==-1)return await i2(e)?e:void 0;for(let t of o2){let n=e+t;if(await i2(n))return n}}function i2(e){return new Promise(t=>s2.stat(e,(n,r)=>t(!n&&r.isFile())))}var iT="dev-containers-",a2="credentials not found in native keychain";async function u2(e,t,n,r,o,i){let s=await c2(n?e:t,r,o,i).catch(a=>{if(n)throw a});return!n&&(s==null?void 0:s.code)!==0&&(s=await c2(e,r,o,i),s.code===0&&(n=!0)),{result:s,preferLocalCLIHost:n}}async function c2(e,t,n,r){let o,i=t[1];try{let s=i==="store"?JSON.parse(n).ServerURL:n.trim(),a=await yee(e,s,r);if(!a)return{stdout:i==="get"?a2:"Docker credential helper not found.",stderr:"",code:1};if("identitytoken"in a)return i!=="get"?{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1}:{stdout:JSON.stringify({ServerURL:s,Username:"<token>",Secret:a.identitytoken}),stderr:"",code:0};if("auth"in a){if(i!=="get")return{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1};let[u,f]=Buffer.from(a.auth,"base64").toString().split(":");return{stdout:JSON.stringify({ServerURL:s,Username:u,Secret:f}),stderr:"",code:0}}o=`docker-credential-${a.helper}`;let{stdout:c,stderr:l}=await X({exec:e.exec,cmd:o,args:t.slice(1),stdin:Buffer.from(n),output:Fe});return{stdout:c.toString(),stderr:l.toString(),code:0}}catch(s){if(o&&((s==null?void 0:s.code)==="ENOENT"||(s==null?void 0:s.code)==="EPIPE"))return{stdout:i==="get"?a2:`Docker credential helper '${o}' not found: ${(s==null?void 0:s.message)||String(s)}.`,stderr:"",code:1};if(!(s&&s.stdout&&s.stderr))throw s;let{stdout:a,stderr:c,code:l}=s;return{stdout:a.toString(),stderr:c.toString(),code:l||0}}}async function yee(e,t,n){var o,i,s,a,c;n.write(`Looking up Docker credential helper for '${t}'.`);try{let l=$e((await e.readFile(e.path.join(await e.homedir(),".docker","config.json"))).toString()),u=Ce.parse(t).authority||t,f=(o=l==null?void 0:l.credHelpers)==null?void 0:o[u];if(f)return{helper:f};let m=(s=(i=l==null?void 0:l.auths)==null?void 0:i[t])==null?void 0:s.identitytoken;if(m)return{identitytoken:m};let d=(c=(a=l==null?void 0:l.auths)==null?void 0:a[t])==null?void 0:c.auth;if(d)return{auth:d};if(l!=null&&l.credsStore)return{helper:l.credsStore}}catch(l){(l==null?void 0:l.code)!=="ENOENT"&&n.write(`Error reading Docker config: ${(l==null?void 0:l.message)||String(l)}.`)}let r=await f2(e);return r?{helper:r}:void 0}async function sT(e,t){let n=e.path.join(await e.homedir(),".docker","config.json");try{let r=await e.readFile(n),o=$e(r.toString());return!!(o!=null&&o.credsStore)||Object.keys((o==null?void 0:o.credHelpers)||{}).some(i=>{var s;return(s=o==null?void 0:o.credHelpers)==null?void 0:s[i]})||Object.keys((o==null?void 0:o.auths)||{}).some(i=>{var s,a;return(a=(s=o==null?void 0:o.auths)==null?void 0:s[i])==null?void 0:a.auth})||l2(e)}catch(r){return(r==null?void 0:r.code)!=="ENOENT"?(t.write(`Error reading Docker config (${n}): ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)}.`),!1):l2(e)}}async function l2(e){let t=await f2(e);return!!t&&await Cee(e,`docker-credential-${t}`)}async function f2(e){if(e.platform==="darwin")return"osxkeychain";if(e.platform==="win32")return"wincred";if(e.platform==="linux")try{return await X({exec:e.exec,cmd:"/bin/sh",args:["-c","command -v docker-credential-pass >/dev/null 2>&1"],output:Fe}),"pass"}catch{return"secretservice"}}async function Cee(e,t){try{return e.platform==="win32"?!!await Jo(t,e.cwd,e.env):(await X({exec:e.exec,cmd:"/bin/sh",args:["-c",`command -v '${t}' >/dev/null 2>&1`],output:Fe}),!0)}catch{return!1}}function wl(e){return`remote.containers.${e}`}function ss(e){return`dev.containers.${e}`}var cT=W(require("path"));var Eee=W(require("http")),See=W(require("https"));function aT(e,t={}){return new Promise((n,r)=>{let o=e.startsWith("https:")?See:Eee,i;if(Object.keys(t).length>0){let a=new URL(e);i={headers:t,host:a.host,path:a.pathname}}o.get(i??e,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&n(aT(l,t))}r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",r);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>n(Buffer.concat(l)))}}).on("error",r)})}async function ir(e){let t=await ct(cT.join(e,"package.json"),"utf8");return JSON.parse(t)}async function wv(e){let t=await ct(cT.join(e,"product.json"),"utf8"),n=JSON.parse(t);return n.commit||(n.commit=await Zm(n.quality)),n.serverDataFolderName||(n.serverDataFolderName=".vscode-server-oss"),n}async function Zm(e="insider"){let t=`https://update.code.visualstudio.com/api/update/server-linux-x64/${e}/latest`,n=await aT(t);return JSON.parse(n.toString()).version}function rS(e){return["bin",e.serverApplicationName]}async function Bt(e){return new Promise(t=>setTimeout(t,e))}var lte=cB(),gB=dS(),ET=mB(),ute=hB(),fte=["docker","oras","skopeo"];async function vS(e,t,n){var k,L,N,H,B,z;let{cliHost:r,wslCLIHost:o,output:i}=e,{shellServer:s,launchRootShellServer:a}=t,c="Launching Dev Containers helper.",l=i.start(c);if(Cl)return i.stop(c,l),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let u=[r];r.type!=="local"&&u.push(await Hr(process.cwd(),e.loadNativeModule,i)),r.type!=="wsl"&&o&&u.push(o);let f=xT.randomUUID(),m={},d=await ST(u,Y=>yte(Y,i)),p=d?sr.posix.join(((k=t.env)==null?void 0:k.TMPDIR)||"/tmp",`vscode-ssh-auth-${f}.sock`):void 0;d&&(m[p]=d,i.write(`ssh-agent: SSH_AUTH_SOCK in container (${p}) forwarded to ${d.cliHost.type} host (${d.unparsed}).`));let g=(L=t.env)!=null&&L.DISPLAY?void 0:dte(u,Y=>Cte(Y,i)),h=-1,w;if(g)do w=sr.posix.join(((N=t.env)==null?void 0:N.TMPDIR)||"/tmp",".X11-unix",`X${++h}`);while(await mte(s,w));let C=g?`:${h}`:void 0;g&&(await s.exec(`mkdir -p '${sr.posix.dirname(w)}'`),m[w]=g,i.write(`X11 forwarding: DISPLAY in container (${C}) forwarded to ${g.cliHost.type} host (${g.unparsed}).`));let v=await YH(t.shellServer,i),y=v?await ST(u,Y=>GH(Y,t.shellServer,v,i)):void 0;y&&(m[y.remoteGpgSocket]={name:"gpg-agent",unparsed:y.localGpgSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localGpgSocket}},i.write(`gpg-agent: Socket in container (${y.remoteGpgSocket}) forwarded to ${y.cliHost.type} host (${y.localGpgSocket}).`),y.localKeyboxdSocket&&y.remoteKeyboxdSocket&&(m[y.remoteKeyboxdSocket]={name:"keyboxd",unparsed:y.localKeyboxdSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localKeyboxdSocket}},i.write(`GPG keyboxd: Socket in container (${y.remoteKeyboxdSocket}) forwarded to ${y.cliHost.type} host (${y.localKeyboxdSocket}).`))),((n==null?void 0:n.getNewConfiguration("githubCLILoginWithToken"))??e.isGitHubCLILoginWithTokenEnabled)&&await Ete(t,u,i);let I=sr.posix.join(((H=t.env)==null?void 0:H.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${f}.sock`),_=sr.posix.join(((B=t.env)==null?void 0:B.TMPDIR)||"/tmp",`vscode-remote-containers-server-${f}.js`),A=sr.posix.join(((z=t.env)==null?void 0:z.TMPDIR)||"/tmp",`vscode-remote-containers-${f}.js`),R=((n==null?void 0:n.getNewConfiguration("dockerCredentialHelper"))??e.isDockerCredentialHelperEnabled)&&a&&await wB(s,fte)?sr.posix.join("/usr/local/bin",`docker-credential-${iT}${f}`):void 0,E=u.find(Y=>Y.type==="local"),x=yB(e,t,"Container",void 0,!1,!1,_,A,R,m,I,E),b=x.then(async Y=>{await Y.ready,await(y==null?void 0:y.importTasks())}),D=x.then(Y=>Y.mrpcExec),T=x.then(Y=>Y.mrpcPtyExec);return b.catch(console.error),e.onAdoptProcess(Y=>Dte(t.shellServer,I,p,w,Y).catch(console.error)),i.stop(c,l),{remoteContainersCLI:A,remoteEnv:{REMOTE_CONTAINERS_IPC:I,...p?{SSH_AUTH_SOCK:p}:void 0,...C?{DISPLAY:C}:void 0,...w?{REMOTE_CONTAINERS_DISPLAY_SOCK:w}:void 0},mrpcExec:D,mrpcPtyExec:T,ready:b,reconnect:()=>x.then(Y=>Y.reconnect())}}function dte(e,t){for(let n of e){let r=t(n);if(r)return r}}async function ST(e,t){for(let n of e){let r=await t(n);if(r)return r}}async function wB(e,t){try{return await e.exec(`(${t.map(n=>`command -v '${n}'`).join(" || ")}) >/dev/null 2>&1`),!0}catch{return!1}}async function mte(e,t){try{return await e.exec(`test -e ${t}`),!0}catch{return!1}}async function op(e,t,n,r,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}=await yB(e,{remoteExec:t,platform:o},"Host",n,!0,r,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}}async function yB(e,t,n,r,o,i,s,a,c,l,u,f){let{cliHost:m,product:d,output:p}=e,{remoteExec:g,platform:h,nodeExecutable:w,launchRootShellServer:C}=t,v=a&&ct(sr.join(e.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),y=ct(sr.join(e.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),S=await Wt(g,p,void 0,h,n),I=o?await Pf(S,await El(S)):void 0,_=(await S.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],A=!0;if(!w||!s){let D=S.path.join(_,".vscode-remote-containers");w||(w=await Ite(e,S,D,_,d,i)),s||(s=S.path.join(D,"dist",`vscode-remote-containers-server-${e.package.version}.js`),await Di(S,s)?A=!1:await S.exec(`mkdir -p '${S.path.dirname(s)}'`))}if(a){let D=`EOF-${a}`;await S.exec(`cat <<'${D}' >${a}
${await v}
${D}
`)}if(c&&C&&((m==null?void 0:m.type)!=="local"&&f&&await sT(f,p)||m&&await sT(m,p))){let D=(await S.exec(`cat ~/.docker/config.json || echo "{
}"`)).stdout,T=$e(D);if(!(T!=null&&T.credsStore)||T.credsStore.startsWith(iT)){let k=await C(),L=`EOF-${c}`;await k.exec(`mkdir -p ${sr.posix.dirname(c)} && cat <<'${L}' >${c}
#!/bin/sh
${w} ${a} docker-credential-helper $@
${L}
`),await k.exec(`chmod +x ${c}`);let N=In(D,["credsStore"],sr.posix.basename(c).substring(18),{formattingOptions:{}}),H=Eo(D,N);await S.exec(`mkdir -p ~/.docker && cat <<'${L}' >~/.docker/config.json
${H}
${L}
`)}}if(A){let D=`EOF-${s}`,T=`${s}_${Date.now()}`;await S.exec(`cat <<'${D}' >${T}
${await y}
${D}
mv ${T} ${s}`)}let U=()=>pte(e,n,S,w,s,l,u,f),R=await U(),E;async function x(){let D=`${n}: Reconnecting Dev Container server`,T=p.start(D);await R.terminate().catch(()=>{}),S=await Wt(g,p,void 0,void 0,n),R=await U(),E&&await new Promise((k,L)=>{R.mrpc.setBaseEnv(E,N=>N?L(N):k())}),b(R),p.stop(D,T)}async function b(D){if(await D.reconnect,D===R)try{await x()}catch(T){p.write(`Reconnecting Dev Container server failed: ${(T==null?void 0:T.message)||String(T)}`)}}return b(R),{ready:R.ready,passwdUser:I,nodeExecutable:w,homeFolder:_,mrpcExec:gte(()=>R.mrpc,n,r||_),mrpcPtyExec:vte(()=>R.mrpc,n,r||_),mrpcExecToEnd:wte(()=>R.mrpc,n,r||_),setBaseEnv:D=>new Promise((T,k)=>{E=D,R.mrpc.setBaseEnv(D,L=>L?k(L):T())}),connect:R.mrpc.connect,reconnect:x,terminate:()=>R.terminate()}}async function pte(e,t,n,r,o,i,s,a){let{cliHost:c,output:l}=e,u=Object.keys(i||{}),f={...u.reduce((E,x)=>(E[x]="duplex",E),{}),rpc:"async",connected:"async",ready:"async"},m={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},d=n.process,p=`set -e ; echo -n ${Xo} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${r}' '${o}' ; exit
`;d.stdin.write(p);let g,h=new Promise(E=>g=E),w=new vB.StringDecoder;d.stderr.on("data",E=>{let x=w.write(E).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(g){let b=x.indexOf(Xo);b!==-1&&(g(),g=void 0,x=x.substr(0,b)+x.substr(b+1))}x&&l.write(it(`${t} server: ${x}`))});let C=!1,v,y=new Promise(E=>v=E);d.exit.then(async({code:E,signal:x})=>{l.write(`${t} server terminated (code: ${E}, signal: ${x}).`),C?(l.write(`${t} server terminated. Reconnecting in 5 seconds...`),await Bt(5*1e3),v()):l.write(`${t} server terminated early. Not reconnecting.`)},E=>{l.write(`${t} server did not launch or terminated: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)});let S=(c==null?void 0:c.type)==="local",I={git:S,docker:S},_,A=new Promise(E=>_=E),U=lte(m,f)({...u.reduce((E,x)=>{let b=i[x];return E[x]=hte(e,b),E},{}),rpc:async(E,x)=>{try{let{args:b,stdin:D}=JSON.parse(E);if(b[0]==="git-credential-helper"){let T=await KH(a,c,I.git,b,D);I.git=T.preferLocalCLIHost,x(void 0,JSON.stringify(T.result))}else if(b[0]==="docker-credential-helper"){let T=await u2(a,c,I.docker,b,D,l);I.docker=T.preferLocalCLIHost,x(void 0,JSON.stringify(T.result))}}catch(b){console.error(b),x(b)}},connected:E=>{E()},ready:E=>{C=!0,_(),E()}});(0,hS.default)(gB.source(d.stdout),U.createStream(),gB.sink(d.stdin)),await Promise.race([h,d.exit.then(({code:E,signal:x})=>{throw new Error(`${t} server terminated (code: ${E}, signal: ${x}).`)})]);function R(){return C=!1,d.terminate()}return{ready:A,mrpc:U,terminate:R,reconnect:y}}function hte(e,t){let{sendTelemetryEvent:n,output:r}=e,o=!1;function i(s){if(!o&&s instanceof Error&&s.code==="ENOENT"&&(o=!0,r.event({type:"notification",message:_T.t("Could not connect to {0} on {1} host ({2}). Make sure the service is running.",t.name,t.cliHost.type,t.unparsed)}),n)){let a={serviceName:t.name,hostType:t.cliHost.type,hostPlatform:t.cliHost.platform},c=t.cliHost.authority;if(c){let l=c.indexOf("+");l!==-1&&(a.hostAuthority=c.substring(0,l))}n("serviceConnectionFailure",a)}}return()=>{let s=t.cliHost.connect(t.connectTo);return{sink:a=>{s.sink((c,l)=>{i(c),a(c,l)})},source:(a,c)=>{s.source(a,(l,u)=>{i(l),c(l,u)})}}}}function gte(e,t,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=e(),m=await new Promise((d,p)=>{f.exec({cmd:o,args:i,cwd:s||n,env:a},(g,h)=>{g?p(g):d(h)})});return{stdin:ET.sink(f.stdin(m,d=>{d&&d.message!=="unexpected end of parent stream"&&console.error(d)})),stdout:ET.source(f.stdout(m)),stderr:ET.source(f.stderr(m)),exit:new Promise((d,p)=>{f.exit(m,(g,h)=>{var w;c.stop(l,u),g?((w=g.message)!=null&&w.endsWith("ENOENT")&&!g.code&&(g.code="ENOENT"),p(g)):d(h)})}),terminate:async()=>new Promise((d,p)=>{f.terminate(m,g=>{g?p(g):d()})})}}}function vte(e,t,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=e(),m=await new Promise((h,w)=>{var C,v;f.ptyExec({cmd:o,args:i,cwd:s||n,env:a,rows:(C=c.dimensions)==null?void 0:C.rows,cols:(v=c.dimensions)==null?void 0:v.columns},(y,S)=>{y?w(y):h(S)})}),d=[c.onDidChangeDimensions&&c.onDidChangeDimensions(h=>f.ptyResize(m,h.columns,h.rows))],p=ute();(0,hS.default)(p,f.ptyIn(m,h=>{h&&h.message!=="unexpected end of parent stream"&&console.error(h)}));let g=new Ms;return(0,hS.default)(f.ptyOut(m),h=>{h(null,function w(C,v){if(C!==!0){if(C)throw C;g.fire(v),h(null,w)}})}),{write:h=>p.push(h),onData:g.event,resize:(h,w)=>f.ptyResize(m,h,w),exit:new Promise((h,w)=>{f.ptyExit(m,(C,v)=>{d.forEach(y=>y==null?void 0:y.dispose()),c.stop(l,u),C?w(C):h(v)})}),terminate:async()=>new Promise((h,w)=>{f.ptyTerminate(m,C=>{C?w(C):h()})})}}}function wte(e,t,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=e();return new Promise((m,d)=>{f.execToEnd({cmd:o,args:i,cwd:s||n,env:a},(p,g)=>{if(c.stop(l,u),p||!g)d({stdin:new yl.Writable,stdout:yl.Readable.from([]),stderr:yl.Readable.from([]),exit:Promise.reject(p),terminate:async()=>{}});else{let h=yl.Readable.from([Buffer.from(g.stdout.data)]),w=new Promise(y=>h.on("end",y)),C=yl.Readable.from([Buffer.from(g.stderr.data)]),v=new Promise(y=>C.on("end",y));m({stdin:new yl.Writable,stdout:h,stderr:C,exit:Promise.all([w,v]).then(()=>({code:g.code,signal:g.signal})),terminate:async()=>{}})}})})}}var Ev="\\\\.\\pipe\\openssh-ssh-agent";async function DT(e){return e.platform==="win32"&&e.isFile(Ev)}async function yte(e,t){let n=e.env.SSH_AUTH_SOCK;if(n)return{name:"ssh-agent",unparsed:n,cliHost:e,connectTo:{socketPath:n}};if(t.write(`ssh-agent: SSH_AUTH_SOCK not set on ${e.type} host.`),await DT(e))return{name:"ssh-agent",unparsed:Ev,cliHost:e,connectTo:{socketPath:Ev}}}function Cte(e,t){let n=e.env.DISPLAY,r=n==null?void 0:n.match(/^(?<hostOrPath>[^:]+)?:(?<display>\d+)(?:\.(?<screen>\d+))?$/);if(r!=null&&r.groups){let{hostOrPath:o,display:i}=r.groups,s=_T.t("X11 display");return!o||o==="localhost/unix"?{name:s,unparsed:n,cliHost:e,connectTo:{socketPath:`/tmp/.X11-unix/X${i}`}}:o.startsWith("/")?{name:s,unparsed:n,cliHost:e,connectTo:{socketPath:`${o}:${i}`}}:{name:s,unparsed:n,cliHost:e,connectTo:{host:o,port:6e3+parseInt(i,10)}}}n?t.write(`X11 forwarding: DISPLAY value on ${e.type} host not supported (${n}).`):t.write(`X11 forwarding: DISPLAY not set on ${e.type} host.`)}async function IT(e){let t=e.env.WAYLAND_DISPLAY,n=e.env.XDG_RUNTIME_DIR,r=t&&e.path.isAbsolute(t)?t:t&&n&&e.path.join(n,t),o=n&&e.path.join(n,"wayland-0"),i=r||o;if(i&&await e.isSocket(i))return i}async function CB(e){let t=xT.randomUUID();return sr.posix.join((e==null?void 0:e.TMPDIR)||"/tmp",`vscode-wayland-${t}.sock`)}async function EB(e,t){let{shellServer:n,remoteWaylandSocket:r}=e;if(!r||t.WAYLAND_DISPLAY)return{};let o=t.XDG_RUNTIME_DIR;o||(o=(await n.exec('umask 077 && XRD="/tmp/user/$(id -u)" && mkdir -p $XRD && echo $XRD')).stdout.trim());let i=sr.posix.basename(r);return await n.exec(`test -e ${o}/${i} || ln -sf ${r} ${o}/${i}`),o===t.XDG_RUNTIME_DIR?{WAYLAND_DISPLAY:i}:{XDG_RUNTIME_DIR:o,WAYLAND_DISPLAY:i}}async function Ete(e,t,n){let r="Checking for GitHub CLI",o=n.start(r);await wB(e.shellServer,["gh"])&&(async()=>{let s="Setting up GitHub CLI",a=n.start(s);try{if(!await xte(e.remoteExec,n)){let l=await ST(t,u=>Ste(u.exec,n))||void 0;l&&await _te(e.remoteExec,l,n)}}catch(c){n.write(`Error setting up GitHub CLI: ${(c==null?void 0:c.stack)||(c==null?void 0:c.message)||String(c)}`)}finally{n.stop(s,a)}})(),n.stop(r,o)}async function Ste(e,t){try{let{stdout:n}=await X({exec:e,cmd:"gh",args:["auth","token"],output:t});return n.toString().trim()}catch{return}}async function xte(e,t){try{return await X({exec:e,cmd:"gh",args:["auth","status"],output:t}),!0}catch{return!1}}async function _te(e,t,n){try{await X({exec:e,cmd:"gh",args:["auth","login","--with-token"],stdin:Buffer.from(t),output:n})}catch{}}var ep=new Set;async function Dte(e,t,n,r,o){let i=await o.processId;if(i&&i>0){let s=await t2(e,i),a=s.REMOTE_CONTAINERS_IPC;a&&a!==t&&!ep.has(a)&&a.indexOf("vscode-remote-containers-ipc")!==-1&&(ep.add(a),await e.exec(`rm '${a}' && ln -s '${t}' '${a}'`));let c=s.SSH_AUTH_SOCK;c&&n&&c!==n&&!ep.has(c)&&c.indexOf("vscode-ssh-auth")!==-1&&(ep.add(c),await e.exec(`rm '${c}' && ln -s '${n}' '${c}'`));let l=s.REMOTE_CONTAINERS_DISPLAY_SOCK;l&&r&&l!==r&&!ep.has(l)&&(ep.add(l),await e.exec(`rm '${l}' && ln -s '${r}' '${l}'`))}}async function Ite(e,t,n,r,o,i){let s=o.commit||await Zm(o.quality),a=o.commit?o.quality||"insider":"stable",c=sr.posix,l=`${a.substring(0,1).toUpperCase()}${a.substring(1)}${a==="insider"?"s":""}-${s}`,u=I=>Di(t,I),f=c.join(np(c,r,o),"cli","servers",l,"server");if(await pS(f,u))return tp(f);let m=c.join(PT(c,r,o),"cli","servers",l,"server");if(await pS(m,u))return tp(m);let d=c.join(np(c,r,o),"bin",s);if(await pS(d,u))return tp(d);let p=c.join(n,"bin",s);if(await pS(p,u))return tp(p);let{localCacheFolder:g,output:h,alternateDownload:w}=e,C;if((await t.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")C=(await t.exec("uname -m")).stdout.trim()==="arm64"?gS.arm64:gS.x64;else{let I=await bT(t);C=wS(I,!1)}let y={localCacheFolder:g,build:C,commit:s,quality:a,web:!1,output:h,alternateDownload:w,legacy:!1},S=ip(y);if(await vr(S)||await xv(y),C.id==="darwin")await Sv({output:h},t,S,p,i);else{let I=[];await es({file:S,filter:A=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(A),onentry:A=>{new al(A).on("data",R=>I.push(R))}});let _=Buffer.concat(I);await Sv({output:h},t,_,p,i,!1)}return tp(p)}async function pS(e,t){let n=tp(e),r=sr.posix.join(e,"node_modules","node-pty","package.json");return await t(n)&&await t(r)}function tp(e){return sr.posix.join(e,"node")}var _v=W(require("net"));var Dv=dS(),TT=e=>{if("port"in e)return Dv.duplex(_v.connect(e.port,e.host));let t=e.socketPath;if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return Dv.duplex(_v.connect(t));let n=new _v.Socket;return Tte(n,t)};function Pte(e){let t=[];return e.split("-").map(n=>{let r=n.match(/.{2}/g);r!==null&&r.reverse().map(o=>{t.push(parseInt(o,16))})}),Buffer.from(t)}function bte(e,t,n){return t||n===void 0?{headerSize:e,err:t}:e===0?{headerSize:e,data:n}:n.length>e?(n=n.slice(e,n.length),e=0,{headerSize:e,data:n}):(e=e-n.length,{headerSize:e})}function Tte(e,t){let n=0,r=[],o=[],i,s=u=>{u instanceof Error&&console.error(u),e.destroy();for(let f of r)f.cb(u,void 0);r=[];for(let f of o)f(u,(m,d)=>{});o=[]};function a(u,f){i.source(u,function(m,d){let p=bte(n,m,d);n=p.headerSize,p.err||p.data?f(p.err||null,p.data):a(u,f)})}return(async()=>{let u=await ct(t),m=u.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),d,p;if(m!==null){let g=m[1],h=m[3];d=parseInt(g,10);let w=Pte(h),C=Buffer.alloc(12);C.writeUInt32LE(process.pid,0),p=Buffer.concat([w,C]),n=28}else{let g=u.indexOf(10);d=parseInt(u.slice(0,g).toString(),10),p=u.slice(g+1),n=0}e.on("error",g=>{s(g)}),e.connect(d,"127.0.0.1",()=>{e.write(p,g=>{if(!g){i=Dv.duplex(e);for(let h of r)a(h.abort,h.cb);r=[];for(let h of o)i.sink(h);o=[]}})})})().catch(u=>{s(u)}),{source:function(u,f){i!==void 0?a(u,f):r.push({abort:u,cb:f})},sink:function(u){i!==void 0?i.sink(u):o.push(u)}}}function SB(e,t,n){return r=>{let o=(async()=>{let i="port"in r?`{ host: '${r.host}', port: ${r.port} }`:`{ path: '${r.socketPath}' }`,s=await t({cmd:e,args:["-e",`// Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host.
const net = require('net');
const fs = require('fs');
process.stdin.pause();
const client = net.createConnection(${i}, () => {
	console.error('Connection established');
	client.pipe(process.stdout);
	process.stdin.pipe(client);
});
client.on('close', function (hadError) {
	console.error(hadError ? 'Remote close with error' : 'Remote close');
	process.exit(hadError ? 1 : 0);
});
client.on('error', function (err) {
	process.stderr.write(err && (err.stack || err.message) || String(err));
});
process.stdin.on('close', function (hadError) {
	console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
	process.exit(hadError ? 1 : 0);
});
process.on('uncaughtException', function (err) {
	fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
});
`],output:on(n,1)});return s.exit.then(({code:a,signal:c})=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with code ${a} and signal ${c}.`,1)},a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with error: ${a&&a.message||String(a)}`)}),s.stderr.on("data",a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host stderr: ${a.toString("utf8")}`,1)}),{sink:Dv.sink(s.stdin),source:Dv.source(s.stdout)}})();return{sink:i=>{o.then(s=>s.sink(i),s=>i(s,()=>{})).catch(s=>n.write(`Connection forwarding to sink error: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||String(s)}`))},source:(i,s)=>{o.then(a=>a.source(i,s),a=>s(a)).catch(a=>n.write(`Connection forwarding to source error: ${(a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a)}`))}}}}var yS=!1;function bf(e,t,n){return yS?function(o){return kte(e(o),`${t} ${JSON.stringify(o)}`,n)}:e}function kte(e,t,n){return yS?{source:xB(e.source,`${t} Source`,n),sink:Rte(e.sink,`${t} Sink`,n)}:e}function xB(e,t,n){return yS?function(o,i){n.write(`${t} end in (${typeof o}${o&&typeof o=="object"?`: ${Object.keys(o)}`:""}): ${o&&typeof o=="object"&&o.stack||o}`),e(o,function(a,c){n.write(`${t} end out (${typeof a}${a&&typeof a=="object"?`: ${Object.keys(a)}`:""}): ${a&&typeof a=="object"&&a.stack||a}`),n.write(`${t} data: ${c==null?void 0:c.toString("hex")}`),i(a,c)})}:e}function Rte(e,t,n){return yS?function(o){e(xB(o,t,n))}:e}var kT=W(Ar()),IB=/^\\\\wsl(\.localhost|\$)?\\/;function yr(e){return IB.test(e.toLowerCase())}function Tf(e){let t=e.toLowerCase(),n=IB.exec(t);if(!n)return"";let r=t.indexOf("\\",n[0].length);return e.substring(n[0].length,r)}async function Iv(e){let{stdout:t}=await X({exec:cs(void 0),cmd:"wsl",args:["-l","-v"],output:e}),n=t.toString(t[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(n)||[])[1]}async function Sl(e,t,n){let{stdout:r}=await X({exec:cs(void 0),cmd:"wsl",args:["-d",e,"-e","wslpath","-u",t],output:n}),o=r.toString().trim();if(o.startsWith("/mnt/wsl/")&&t.match(/^[a-zA-Z]:/)){let i=`/mnt/${t[0].toLowerCase()}${t.substring(2).replace(/\\/g,"/")}`;try{return await X({exec:cs(void 0),cmd:"wsl",args:["-d",e,"-e","test","-e",i],output:n}),i}catch(s){(s==null?void 0:s.code)!==1&&n.write(`Error checking WSL path: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||s}`)}}return o}async function Nte(e,t){let{stdout:n}=await X({exec:cs(void 0),cmd:"wsl",args:["-d",e,"-e","/bin/sh","-c","echo ~"],output:t});return n.toString().trim()}async function PB(e,t,n){let{stdout:r}=await X({exec:e.exec,cmd:"wslpath",args:["-w",t],output:n});return r.toString().trim()}async function sp(e,t){let n=Tf(e),r=await Sl(n,e,t);return Ce.parse(`vscode-remote://wsl+${n}${r}`)}function ap(e){if(e.scheme==="vscode-remote"){let t=CS(e.authority);if(t){let n=e.path;return pv(n)&&(n=_B.posix.dirname(n)),{wslDistro:t,wslPath:n}}}}function CS(e){return(/wsl\+(.*)/.exec(e)||[])[1]}async function ES(e,t,n,r,o,i,s,a){var p;let{distro:c,cwd:l}=await RT(e,t,s);DB.ok(!c.startsWith("-"),kT.t("Distro must not start with a dash: {0}",c));let u=kf("wsl",["-d",c,"-e"],l),f=await op({extensionPath:n,localCacheFolder:r,package:await ir(n),product:o,loadNativeModule:i,output:s,alternateDownload:a},u,l,!1),m=await Rf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((p=f.passwdUser)==null?void 0:p.shell)||"/bin/sh",remoteExec:f.exec});delete m.WSL_INTEROP,await f.setBaseEnv(m);let d=to("wsl",l,m,f.exec,f.ptyExec,bf(f.connect,"WSL",s),f.nodeExecutable,s);return d.toCommonURI=async g=>{try{return Ce.file((await X({exec:f.exec,cmd:"wslpath",args:["-w",g],output:s})).stdout.toString().trim())}catch{return}},d.reconnect=()=>f.reconnect(),d.terminate=()=>f.terminate(),d}async function RT(e,{defaultDistro:t},n){let r,o;return typeof e=="object"?(r=e.wslDistro,o=e.wslPath):e&&yr(e)?(r=Tf(e),o=await Sl(r,e,n)):(r=t||await Iv(n)||(()=>{throw new pe({description:kT.t("No default WSL distro found.")})})(),o=e?await Sl(r,e,n):await Nte(r,n)),{distro:r,cwd:o}}function Nf(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function bB(e,t,n,r,o){try{return(await jn(t,{posix:X({exec:e,cmd:"cat",args:[r],output:o}),win32:X({exec:e,cmd:n,args:["-e",`require('fs').createReadStream('${r.replace(/\\/g,"\\\\")}').pipe(process.stdout)`],output:o})})).stdout}catch(i){let s=new Error(`Could not read file: ${r}`);throw s.originalError=i,s.code="ENOENT",s}}async function TB(e,t,n,r,o,i){await jn(t,{posix:X({exec:e,cmd:"dd",args:[`of=${r}`],stdin:o,output:i}),win32:X({exec:e,cmd:n,args:["-e",`process.stdin.pipe(require('fs').createWriteStream('${r.replace(/\\/g,"\\\\")}'))`],stdin:o,output:i})})}async function SS(e,t,n,r,o){await jn(t,{posix:()=>X({exec:e,cmd:"mv",args:["-n",n,r],output:o}),win32:()=>X({exec:e,cmd:"powershell",args:["-NoProfile","-Command",`Move-Item -Path '${n}' -Destination '${r}'`],env:no(),output:o})})()}async function xS(e,t,n,r,o){let{recursive:i,force:s}=r;await jn(t,{posix:()=>X({exec:e,cmd:"rm",args:[i&&"-r",s&&"-f",n].filter(Boolean),output:o}),win32:()=>X({exec:e,cmd:"powershell",args:["-NoProfile","-Command",`Remove-Item${i?" -Recurse":""}${s?" -Force":""} '${n}'`],env:no(),output:o})})()}async function _S(e,t,n,r){await jn(t,{posix:()=>X({exec:e,cmd:"mkdir",args:["-p",n],output:r}),win32:()=>X({exec:e,cmd:"powershell",args:["-NoProfile","-Command",`New-Item -ItemType Directory '${n}'`],env:no(),output:r})})()}async function kB(e,t,n,r){return(await jn(t,{posix:()=>X({exec:e,cmd:"ls",args:["-a",n],output:r}),win32:()=>X({exec:e,cmd:"powershell",args:["-NoProfile","-Command",`(Get-ChildItem '${n}').Name`],env:no(),output:r})})()).stdout.toString().trim().split(/\r?\n/).filter(i=>i!=="."&&i!=="..")}var LT=W(require("path")),PS=W(require("os")),bS=W(require("crypto"));var RB=W(require("os")),DS=W(require("assert")),IS=W(Ar());async function NB(e,t,n,r,o,i,s,a,c,l){var w;let u=e.substr(6),f=u.indexOf(":"),m=[(l==null?void 0:l.settings.executablePath)||"ssh"];if(l!=null&&l.settings.executableArgs&&m.push(...l.settings.executableArgs),l!=null&&l.settings.configFilePath&&m.push("-F",Lte(l==null?void 0:l.settings.configFilePath)),f!==-1){let C=u.substr(f+1);DS.ok(!C.startsWith("-"),IS.t("Port number must not start with a dash: {0}",C));let v=u.substr(0,f);DS.ok(!v.startsWith("-"),IS.t("Hostname must not start with a dash: {0}",v)),m.push("-p",C,v)}else DS.ok(!u.startsWith("-"),IS.t("Hostname must not start with a dash: {0}",u)),m.push(u);let d=kf(m[0],m.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),p=await op({extensionPath:r,localCacheFolder:o,package:await ir(r),product:i,loadNativeModule:s,output:a,alternateDownload:c},d,t,!1),g=await Rf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((w=p.passwdUser)==null?void 0:w.shell)||"/bin/sh",remoteExec:p.exec});await p.setBaseEnv(g);let h=to("remote",t||p.homeFolder,g,p.exec,p.ptyExec,p.connect,p.nodeExecutable,a);return h.toCommonURI=()=>Promise.resolve(void 0),h.reconnect=()=>p.reconnect(),h.terminate=()=>p.terminate(),h}function Lte(e){return e.replace(/^~($|\/|\\)/,`${RB.homedir()}$1`)}function Pv(e,t){let n=Ate(e);if(n)return Ce.parse(`vscode-remote://${NT(n)}${t}`)}function NT(e){let t=e.hostName;if(e.user||e.hostName.toLowerCase()!==e.hostName||e.port||e.hostName.match(/[\/\\\+]/)){let n=JSON.stringify(e);t=Buffer.from(n,"utf8").toString("hex")}return`ssh-remote+${t}`}function Ate(e){if(!e.startsWith("ssh://"))return;let t=e.substr(6);return LB(t)}function LB(e){let t=e.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(t){let[,n,r,o]=t;return{hostName:r,user:n,port:o?parseInt(o,10):void 0}}return{hostName:e}}function xl(e){var t;return!!(e&&"host"in e&&((t=e.host)!=null&&t.startsWith("ssh://")))}function _l(e){return!!(e!=null&&e.startsWith("ssh-remote+"))}function bv(e){let t=/^ssh-remote\+(.*)$/.exec(e);if(!t)return;let n=t[1];try{let r=JSON.parse(Buffer.from(n,"hex").toString("utf8"));if(r&&r.hostName)return r}catch{}return LB(n)}var Fte=!1;async function AT(e,t,n,r,o,i,s,a,c,l){return e!=null&&e.startsWith("ssh://")&&!(l!=null&&l.localDocker)?NB(e,t,r,o,i,s,n,a,c,l):typeof t=="object"||r.executeInWSL==="forWSLPath"&&t&&yr(t)||r.executeInWSL==="always"?ES(t,r,o,i,s,n,a,c):Fte?Ote(t||process.cwd(),o,i,s,n,a,c):Hr(t||process.cwd(),n,a)}async function Hr(e,t,n=Fe){let r=cs(e),o=await FB(e,t);return AB(e,r,o,n?bf(TT,"Local",n):TT,t,n)}async function Ote(e,t,n,r,o,i,s){let a=cs(e),c=await op({extensionPath:t,localCacheFolder:n,package:await ir(t),product:r,loadNativeModule:o,output:i,alternateDownload:s},a,e,!0,process.platform);return AB(e,c.exec,c.ptyExec,bf(c.connect,"Local Test",i),o,i)}function to(e,t,n,r,o,i,s,a){let c,l,u;return{type:e,platform:"linux",exec:r,ptyExec:o,cwd:t,env:n,path:LT.posix,async homedir(){if(typeof l>"u"){let m=(await X({exec:r,cmd:"id",args:["-u"],output:Fe})).stdout.toString().trim(),d=await Wt(r,Fe,void 0,"linux","Host"),p=await Pf(d,m);l=this.env.HOME||(p==null?void 0:p.home)||"/"}return l},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async f=>{try{return await X({exec:r,cmd:"test",args:["-f",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isFolder:async f=>{try{return await X({exec:r,cmd:"test",args:["-d",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isSocket:async f=>{try{return await X({exec:r,cmd:"test",args:["-S",f],output:Fe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},readFile:async f=>{try{return(await X({exec:r,cmd:"cat",args:[f],output:Fe})).stdout}catch(m){let d=new Error(`Could not read file: ${f}`);throw d.originalError=m,d.code="ENOENT",d}},writeFile:async(f,m)=>{await X({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${f}'`],stdin:m,output:Fe})},rename:async(f,m)=>{await X({exec:r,cmd:"mv",args:[f,m],output:Fe})},rm:async(f,{recursive:m,force:d}={})=>{await X({exec:r,cmd:"rm",args:[...m?["-r"]:[],...d?["-f"]:[],f],output:Fe})},mkdirp:async f=>{await X({exec:r,cmd:"mkdir",args:["-p",f],output:Fe})},readDir:async f=>(await X({exec:r,cmd:"ls",args:["-a",f],output:Fe})).stdout.toString().trim().split(`
`).filter(m=>m!=="."&&m!==".."),readDirWithTypes:async f=>{let m={f:1,"*":1,"/":2,"@":64};return(await X({exec:r,cmd:"ls",args:["-aF",f],output:Fe})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,p])=>[d,m[p]||0])},getUsername:async()=>(c===void 0&&(c=(await X({exec:r,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()),c),toCommonURI:()=>Promise.resolve(void 0),connect:i,locateCertificatesFile:function(){return u||(u=TS(this,void 0,a))},nodeExecutable:s}}function AB(e,t,n,r,o,i){let s;return{type:"local",platform:process.platform,exec:t,ptyExec:n,cwd:e,env:process.env,path:LT,homedir:async()=>PS.homedir(),tmpdir:async()=>PS.tmpdir(),isFile:vr,isFolder:qF,isSocket:zF,readFile:ct,writeFile:pg,rename:Yc,rm:qc,mkdirp:async a=>{await Ki(a)},readDir:Gc,getUsername:kS,toCommonURI:async a=>Ce.file(a),connect:r,locateCertificatesFile:function(){return s||(s=TS(this,o,i))}}}var Ute=["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt","/etc/ssl/ca-bundle.pem"];async function TS(e,t,n){if(e.env.NODE_EXTRA_CA_CERTS&&await e.isFile(e.env.NODE_EXTRA_CA_CERTS))return e.env.NODE_EXTRA_CA_CERTS;if(e.platform==="linux"){for(let c of Ute)if(await e.isFile(c))return c;return}if(e.type!=="local")return;let r=await(t==null?void 0:t("@vscode/proxy-agent"));if(!(r!=null&&r.loadSystemCertificates))return;let o=await r.loadSystemCertificates({loadSystemCertificatesFromNode:()=>{},log:{trace(c,...l){n.write(c,1)},debug(c,...l){n.write(c,2)},info(c,...l){n.write(c,3)},warn(c,...l){n.write(c,4)},error(c,...l){n.write(typeof c=="string"?c:String(c),5)}}});if(!o.length)return;let i=Buffer.from(o.join(e.platform==="win32"?`\r
`:`
`)),s=bS.createHash("sha256").update(i).digest("hex"),a=e.path.join(await Tv(e),`certificates-${s}.pem`);if(!await e.isFile(a)){await e.mkdirp(e.path.dirname(a));let c=`${a}-${bS.randomUUID()}`;await e.writeFile(c,i),await e.rename(c,a)}return a}var $te=RS.join(__dirname,"..","..","node_modules",".bin","ts-node"),Cl=RS.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function X(e){let{exec:t,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,print:c}=e,l=await t({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((u,f)=>{let m=[],d=[],p=c==="continuous"?new kv.StringDecoder:void 0;l.stdout.on("data",w=>{m.push(w),c==="continuous"&&a.write(p.write(w))}),l.stdout.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let g=c==="continuous"?new kv.StringDecoder:void 0;l.stderr.on("data",w=>{d.push(w),c==="continuous"&&a.write(it(g.write(w)))}),l.stderr.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let h=[];l.exit.then(({code:w})=>{try{h.forEach(y=>y.dispose());let C=Buffer.concat(m),v=Buffer.concat(d);(c===!0||w&&c==="onerror")&&(a.write(C.toString().replace(/\r?\n/g,`\r
`)),a.write(it(v.toString()))),c&&w&&a.write(`Exit code ${w}`),w?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,stdout:C,stderr:v,code:w}):u({stdout:C,stderr:v})}catch(C){f(C)}},w=>{c&&(w!=null&&w.message)&&a.write(it(w==null?void 0:w.message)),f(w)}),s instanceof Buffer?(l.stdin.write(s,w=>{w&&f(w)}),l.stdin.end()):s instanceof OB.Readable?s.pipe(l.stdin):typeof s=="function"&&h.push(s(w=>l.stdin.write(w)))})}async function Ii(e){let{ptyExec:t,cmd:n,args:r,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=e,l=await t({cmd:n,args:r,cwd:o,env:i,output:s});return new Promise((u,f)=>{let m="",d=[c&&c(p=>l.write(p))];l.onData(p=>{m+=p,s.raw(p),a&&a.exec(m)&&u({cmdOutput:m})}),l.exit.then(({code:p,signal:g})=>{try{d.forEach(h=>h==null?void 0:h.dispose()),p||g?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,cmdOutput:m,code:p,signal:g}):u({cmdOutput:m})}catch(h){f(h)}},p=>{p!=null&&p.message&&s.write(it(p==null?void 0:p.message)),d.forEach(g=>g==null?void 0:g.dispose()),f(p)})})}var Mte={SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGEMT:void 0,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGSTKFLT:16,SIGCHLD:17,SIGCLD:void 0,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGINFO:void 0,SIGLOST:void 0,SIGSYS:31,SIGUNUSED:31};function cs(e){return async function(t){let{cmd:n,args:r,output:o}=t,i=`Run: ${n} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=t.cwd||e,c=t.env?{...process.env,...t.env}:process.env,l=await Jo(n,a,c),u=cp.spawn(l,r,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,m)=>{u.once("error",d=>{o.stop(i,s),m(d)}),u.once("close",(d,p)=>{o.stop(i,s),f({code:d,signal:p})})}),async terminate(){u.kill("SIGKILL")}}}}async function FB(e,t){let n=await t("node-pty");if(!n)throw new Error("Missing node-pty");return async function(r){var g,h;let{cmd:o,args:i,output:s}=r,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=r.cwd||e,f=r.env?{...process.env,...r.env}:process.env,m=await Jo(o,u,f),d=n.spawn(m,i||[],{cwd:u,env:f,cols:(g=s.dimensions)==null?void 0:g.columns,rows:(h=s.dimensions)==null?void 0:h.rows,useConpty:l}),p=[s.onDidChangeDimensions&&s.onDidChangeDimensions(w=>d.resize(w.columns,w.rows))];return{onData:d.onData.bind(d),write:d.write.bind(d),resize:d.resize.bind(d),exit:new Promise(w=>{d.onExit(({exitCode:C,signal:v})=>{if(p.forEach(y=>y==null?void 0:y.dispose()),s.stop(a,c),w({code:C,signal:v}),process.platform==="win32")try{d.kill()}catch{}})}),async terminate(){d.kill("SIGKILL")}}}}function $B(e){let t=async function(n){let r=await e(n),o=new Ms;if(r.stdout){let i=new kv.StringDecoder;r.stdout.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stdout.on("close",()=>{let s=i.end();s&&o.fire(s)})}if(r.stderr){let i=new kv.StringDecoder;r.stderr.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stderr.on("close",()=>{let s=i.end();s&&o.fire(s)})}return{onData:o.event,write:r.stdin.write.bind(r.stdin),resize:()=>{},exit:r.exit.then(({code:i,signal:s})=>({code:typeof i=="number"?i:void 0,signal:typeof s=="string"?Mte[s]:void 0})),terminate:r.terminate.bind(r)}};return t.isTTY=!1,t}function kf(e,t,n,r){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,l=o.cwd||n,u=l?`cd '${l}' && `:"",f=Object.keys(i||{}).map(y=>i[y]===void 0?"":`${y}='${i[y]}' `).join(""),m=(a||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),d=`${u}${f}${s}${m}`,p=d!==s?["/bin/sh","-c",d]:[d],g=[...t,...p],h=`Run: ${e} ${g.join(" ").replace(/\n.*/g,"")}`,w=c.start(h),C=await Jo(e,process.cwd(),process.env),v=cp.spawn(C,g,{windowsHide:!0,env:r?{...process.env,...r}:void 0});return{stdin:v.stdin,stdout:v.stdout,stderr:v.stderr,exit:new Promise((y,S)=>{v.once("error",I=>{c.stop(h,w),S(I)}),v.once("close",(I,_)=>{c.stop(h,w),y({code:I,signal:_})})}),async terminate(){v.kill("SIGKILL")}}}}function NS(e){let t=/^'?v?(\d+(\.\d+)*)/.exec(e);if(t)return t[1].split(".").map(n=>parseInt(n,10))}function LS(e,t){for(let n=0,r=Math.max(e.length,t.length);n<r;n++){let o=e[n]||0,i=t[n]||0;if(o!==i)return o<i}return!1}var MB=Cl?(e,t,n)=>cp.spawn($te,[e,...t||[]],{...n,windowsHide:!0}):cp.fork;async function Lf(e,t){if(!t){try{return require(e)}catch{}return}try{return require(`${t}/node_modules.asar/${e}`)}catch{}try{return require(`${t}/node_modules/${e}`)}catch{}try{return __non_webpack_require__(`${t}/node_modules.asar/${e}`)}catch{}try{return __non_webpack_require__(`${t}/node_modules/${e}`)}catch{}}function HB(e){let{output:t}=e,n=[];return{output:on({...t,get dimensions(){return t.dimensions},event:o=>n?n.push(o):t.event(o)}),flush:()=>{n&&(n.forEach(o=>t.event(o)),n=void 0)}}}function BB(e,t,n){return on({...e,get dimensions(){return e.dimensions},event:o=>{o.channel===t&&e.event(o),n.event(o)}})}function jn(e,t){return t&&typeof t=="object"&&"win32"in t?e==="win32"?t.win32:t.posix:t}async function Di(e,t){return jn(e.platform,{posix:async()=>{try{return await e.exec(`test -f '${t}'`),!0}catch{return!1}},win32:async()=>(await e.exec(`Test-Path '${t}' -PathType Leaf`)).stdout.trim()==="True"})()}var FT;async function kS(){return FT===void 0&&(FT=(async()=>{try{return UB.userInfo().username}catch(e){if(process.platform!=="linux")throw e;return(await X({exec:cs(void 0),cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim()}})()),FT}function WB(e){let t=e.replace(/['\\]/g,"\\$&"),n=Nf(e).replaceAll("'","\\'");return` (command -v getent >/dev/null 2>&1 && getent passwd '${t}' || grep -E '^${n}|^[^:]*:[^:]*:${n}:' /etc/passwd || true)`}async function jB(e,t,n,r,o,i){let s="Extracting tarball",a=i.start(s),c=`${r}_${Date.now()}`;try{await _S(e,t,c,i);let l=n instanceof Buffer?n:await(async()=>{let u=[];for await(let f of n)u.push(f);return Buffer.concat(u)})();await X({exec:e,cmd:"tar",args:["--no-same-owner",`-x${o?"z":""}`,"--strip-components","1","-C",c],stdin:l,output:i,print:"continuous"}),await SS(e,t,c,r,i)}catch(l){try{await xS(e,t,c,{recursive:!0,force:!0},i)}catch{}throw l}finally{i.stop(s,a)}}async function Tv(e){return e.path.join(await e.tmpdir(),e.platform==="linux"?`vsch-${await e.getUsername()}`:"vsch")}async function AS(e,t){let{output:n}=e,r=await Wt(t.remoteExec,n);try{for(let i=0;i<3;i++){let s=Date.now();await r.exec("echo ping!"),n.write(`Roundtrip ${i+1} to container took ${Date.now()-s} ms`)}}finally{r.process.terminate()}let o=await Wt(e.cliHost.exec,n);try{for(let i=0;i<3;i++){let s=Date.now();await o.exec("echo ping!"),n.write(`Roundtrip ${i+1} to host took ${Date.now()-s} ms`)}}finally{o.process.terminate()}}function no(e){return e?{...e,PSModulePath:void 0}:{PSModulePath:void 0}}var Xo="\u2404";async function Wt(e,t,n,r="linux",o="Container"){let i=typeof e=="function",s=r==="win32",a=n?{VSCODE_REMOTE_CONTAINERS_SESSION:n}:{},c=i?await e({env:s?no(a):a,cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:t}):e;if(!i){let d=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${Xo}; /bin/sh'
`;c.stdin.write(d),await new Promise(g=>{let h="",w=new OT.StringDecoder;c.stdout.on("data",function C(v){h+=w.write(v),h.includes(d)&&(c.stdout.off("data",C),g())})})}let l=Bte(c),u;async function f(d,p){let g=u=(async()=>{try{await u}catch{}return m(jn(r,d),p)})();try{return await Promise.race([g,l.unexpectedExit])}finally{l.disposeStdioListeners(),u===g&&(u=void 0)}}async function m(d,p){let g=`Run in ${o.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,h;if((p==null?void 0:p.logOutput)!=="silent"&&(h=t.start(g,p==null?void 0:p.logLevel)),c.stdin.destroyed){t.write("Stdin closed!");let{code:A,signal:U}=await c.exit;return Promise.reject({message:`Shell server terminated (code: ${A}, signal: ${U})`,code:A,signal:U})}r==="win32"?c.stdin.write(`[Console]::Write('${Xo}'); ( ${d} ); [Console]::Write("${Xo}$LastExitCode ${Xo}"); [Console]::Error.Write('${Xo}')
`):c.stdin.write(`echo -n ${Xo}; ( ${d} ); echo -n ${Xo}$?${Xo}; echo -n ${Xo} >&2
`);let[w,C]=VB(c.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(A,U,R)=>{U===1&&R===0&&t.write(A,p==null?void 0:p.logLevel)}:()=>{}),v=VB(c.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(A,U,R)=>{U===0&&R===0&&t.write(A,p==null?void 0:p.logLevel)}:()=>{})[0];p!=null&&p.stdin&&(await w,c.stdin.write(p==null?void 0:p.stdin));let[y,S]=await C,[I]=await v,_=parseInt(S,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(t.write(y,p==null?void 0:p.logLevel),t.write(I,p==null?void 0:p.logLevel),_&&t.write(`Exit code ${_}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&_&&t.write(`Exit code ${_}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&t.stop(g,h,p==null?void 0:p.logLevel),_?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${d}`,code:_,stdout:y,stderr:I}):{stdout:y,stderr:I}}return{exec:f,process:c,platform:r,path:jn(r,Hte)}}function VB(e,t,n){let r=t.map(()=>{let u;return{promise:new Promise((m,d)=>u={resolve:m,reject:d}),...u}}),o=new OT.StringDecoder("utf8"),i=[],s=0,a=[];function c(u){let f=o.write(u);l(f)}function l(u){let f=u.indexOf(Xo);if(f!==-1){let m=u.substr(0,f);i.push(m),n(m,s,a.length),a.push(i.join("")),i.length=0,a.length===t[s]&&(r[s].resolve(a),s++,a=[],s===t.length&&e.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else i.push(u),n(u,s,a.length)}return e.on("data",c),r.map(u=>u.promise)}function Bte(e){let t,n=new Promise((c,l)=>t=l),r=[],o=[],i=c=>r.push(c),s=c=>o.push(c);return e.stdout.on("data",i),e.stderr.on("data",s),e.exit.then(({code:c,signal:l})=>{t(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(r).toString()}
${Buffer.concat(o).toString()}`)},c=>{t(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:n,disposeStdioListeners:()=>{e.stdout.off("data",i),e.stderr.off("data",s),r.length=0,o.length=0}}}var sW=W(require("net")),aW=W(iW());async function cW({forwardedPorts:e,output:t,getLogLevel:n},r,o,i){t.write(`Port forwarding for container port ${o} starts listening on local port.`,2);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let l=!0,u=new Set,f=sW.createServer({pauseOnConnect:!0},m=>{let d=m.remotePort,p=f.address().port;t.write(`Port forwarding connection from ${d} > ${p} > ${o} in the container.`),n()===1&&(async()=>{let g=await(0,aW.default)("port",d);t.write(`Port forwarding process for ${d} > ${p} > ${o} in the container:
${JSON.stringify(g,void 0,"  ")}`)})().catch(console.error),lne(t,r,[r.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(g=>{let h;g.exit.then(({code:w,signal:C})=>{h||(u.delete(m),m.end()),t.write(`Port forwarding ${d} > ${p} > ${o} terminated${h?` by extension (${h})`:""} with code ${w} and signal ${C}.`)},w=>{u.delete(m),m.end(),t.write(`Port forwarding ${d} > ${p} > ${o} terminated with error: ${w&&w.message||String(w)}`)}),g.stderr.on("data",w=>{t.write(`Port forwarding ${d} > ${p} > ${o} stderr: ${w.toString("utf8")}`,2)}),m.on("close",w=>{t.write(`Port forwarding ${d} > ${p} > ${o}: Local close${w?" with error":""}`,2),u.delete(m),h="closed",g.stdin.end(),setTimeout(()=>{h="killed",g.terminate().catch(console.error)},5e3)}),g.stdout.pipe(m),m.pipe(g.stdin),u.add(m)}).catch(console.error)});f.on("listening",()=>{var d,p;let m={targetPort:o,server:f,connections:u};f.on("close",()=>{e.delete(m)}),e.add(m),t.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o}`),l?(l=!1,a(f)):t.write(`Port forwarding local port ${(p=f.address())==null?void 0:p.port} to container port ${o} failed before listening`)}),f.on("error",m=>{var d;if(m&&(m.code==="EADDRINUSE"||m.code==="EACCES")){f.listen(0,"127.0.0.1");return}l?(l=!1,c(m)):t.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o} error: ${(m==null?void 0:m.message)||String(m)}`)}),f.on("close",()=>{var m;l?(l=!1,c(new Error("Closed"))):t.write(`Port forwarding local port ${(m=f.address())==null?void 0:m.port} to container port ${o} closed`)}),f.listen(o,"127.0.0.1")})}async function lne(e,t,n,r){return t.remoteExec({env:r,cmd:n[0],args:n.slice(1),output:e})}function lW(e,t){return[...e].find(n=>{let r=n.server.address();return(r==null?void 0:r.port)===t})}var up=W(require("path"));var jT=W(Ar());function MS(e,t){let n,r=e.platform==="win32",o={...e,get env(){return n||(n=fW(r,e.env))}},i=dne.bind(void 0,r,o);return e.containerWorkspaceFolder&&(o.containerWorkspaceFolder=dW(i,e.containerWorkspaceFolder)),$S(i,t)}function uW(e,t,n,r){let o=e==="win32";return $S(mne.bind(void 0,o,t,fW(o,n)),r)}function $S(e,t){if(typeof t=="string")return dW(e,t);if(Array.isArray(t))return t.map(n=>$S(e,n));if(t&&typeof t=="object"){let n=Object.create(null);return Object.keys(t).forEach(r=>{n[r]=$S(e,t[r])}),n}return t}var une=/\$\{(.*?)\}/g;function fW(e,t){if(e){let n=Object.create(null);return Object.keys(t).forEach(r=>{n[r.toLowerCase()]=t[r]}),n}return t}function dW(e,t){return t.replace(une,fne.bind(void 0,e))}function fne(e,t,n){let r,o=n.split(":");return o.length>1&&(n=o[0],r=o[1]),e(t,n,r)}function dne(e,t,n,r,o){switch(r){case"env":case"localEnv":return mW(e,t.env,o,n,t.configFile);case"localWorkspaceFolder":return t.localWorkspaceFolder!==void 0?t.localWorkspaceFolder:n;case"localWorkspaceFolderBasename":return t.localWorkspaceFolder!==void 0?(e?up.win32:up.posix).basename(t.localWorkspaceFolder):n;case"containerWorkspaceFolder":return t.containerWorkspaceFolder!==void 0?t.containerWorkspaceFolder:n;case"containerWorkspaceFolderBasename":return t.containerWorkspaceFolder!==void 0?up.posix.basename(t.containerWorkspaceFolder):n;default:return n}}function mne(e,t,n,r,o,i){switch(o){case"containerEnv":return mW(e,n,i,r,t);default:return r}}function mW(e,t,n,r,o){if(n){e&&(n=n.toLowerCase());let i=t[n];return typeof i=="string"?i:""}throw new pe({description:o?jT.t("'{0}' in {1} can not be resolved because no environment variable name is given.",r,up.posix.basename(o.path)):jT.t("'{0}' can not be resolved because no environment variable name is given.",r)})}var HS=W(require("path"));var pne=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function pW(e,t,n,r,o){let{repository:i,installCommand:s,targetPath:a}=e.dotfilesConfiguration;if(i=o.getDotfileConfiguration("dotfiles.repository")||i,s=o.getDotfileConfiguration("dotfiles.installCommand")||s,a=o.getDotfileConfiguration("dotfiles.targetPath")||a,!i)return;await r;let c=await n;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let l=t.shellServer,u=hW(t),f=Object.keys(c).filter(m=>!(m.startsWith("BASH_FUNC_")&&m.endsWith("%%"))).reduce((m,d)=>`${m}${d}=${hne(c[d])} `,"");try{e.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${BS(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:3}):await l.exec(`# Clone & install dotfiles
${BS(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${pne.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:3}),e.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{e.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function hne(e){return`'${(e||"").replace(/'+/g,`'"$&"'`)}'`}function hW(e){return HS.posix.join(Ti(e),".dotfilesMarker")}async function gW(e){let t=hW(e),n=HS.posix.resolve(e.homeFolder,".devcontainer",".dotfilesMarker");try{await e.shellServer.exec(`test -f '${t}' && test ! -e '${n}' && mkdir -p '${HS.posix.dirname(n)}' && cp '${t}' '${n}'`)}catch{}}var YT=W(require("path"));async function vW(e,t){var i;let n=Ti(e),r=YT.posix.join(n,".writeMachineMCPConfigMarker"),o=wW(e);if(await WS(e.shellServer,r)&&!await Di(e.shellServer,o)){let s=(i=t.customizations)==null?void 0:i.vscode,a=(Array.isArray(s)?s:s?[s]:[]).map(l=>l.mcp).filter(Boolean),c=gne(a);Object.keys(c).length&&await e.shellServer.exec(`mkdir -p '${YT.posix.dirname(o)}' && cat >'${o}' <<'mcpJSON'
${JSON.stringify(c,null,"	")}
mcpJSON
`)}}function gne(e){let t={},n=Object.assign({},...e.map(s=>s.servers));Object.keys(n).length&&(t.servers=n);let r=e.filter(s=>s.inputs).map(s=>s.inputs).flat(),o=new Set,i=[];for(let s=r.length-1;s>=0;s--){let a=r[s];o.has(a.id)||(o.add(a.id),i.push(a))}return i.length&&(t.inputs=i.reverse()),t}var bl=0,yW=/Extension host agent listening on (\d+)/;var vne="updateContentCommand";async function qS(e){let{params:t,createdAt:n,startedAt:r,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,rootShellServer:d,remoteWaylandSocket:p}=e,g;if(d&&a==="root"?g=d:g=await Wt(u,t.output,t.sessionId),!l){let D=(await g.exec("echo $PATH")).stdout.trim();l=D?{PATH:D}:{}}a||(a=await El(g)),!m&&a==="root"&&(m=u);let h=await bT(g),w=await Pf(g,a);w||t.output.write(w0(`User ${a} not found with 'getent passwd'.`));let C=await yne(l,w),v=await wne(g,l,w),y=np(Se.posix,v,t.product),{commit:S,quality:I}=t.product,_=!1,A=S&&await Ene(y,S,I||"insider",t.web,_),U=wS(h,I==="stable"),R=S&&o&&await bW(Se.posix,o,U,S,I||"insider",t.web,_),E=A&&Il("linux",A),x;d?x=Promise.resolve(d):a==="root"&&(x=Promise.resolve(g));let b={createdAt:n,startedAt:r,osRelease:h,build:U,user:a,gid:c||(w==null?void 0:w.gid),env:l,shell:C,homeFolder:v,userDataFolder:y,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,legacy:_,installFolder:A,sharedInstallFolder:R,remoteWorkspaceFolder:s,nodeExecutable:E,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,shellServer:g,remoteWaylandSocket:p};return(x||m)&&(b.launchRootShellServer=()=>x||(x=Wt(m,t.output))),b}async function El(e){return(await e.exec("id -un")).stdout.trim()}async function wne(e,t,n){if(t.HOME){if(t.HOME===(n==null?void 0:n.home)||(n==null?void 0:n.uid)==="0")return t.HOME;try{return await e.exec(`[ ! -e '${t.HOME}' ] || [ -w '${t.HOME}' ]`),t.HOME}catch{}}return(n==null?void 0:n.home)||"/root"}async function yne(e,t){return e.SHELL||t&&t.shell||"/bin/sh"}async function Pf(e,t){let{stdout:n}=await e.exec(WB(t),{logOutput:!1});if(n.trim())return Cne(n)}function Cne(e){let t=e.replace(/\n$/,"").split(":");return{name:t[0],uid:t[2],gid:t[3],home:t[5],shell:t[6]}}async function Ene(e,t,n,r,o){return Se.posix.join(e,"bin",`${t}${n==="stable"?"":`-${n}`}${r?"-web":""}${o?"-legacy":""}`)}async function bW(e,t,n,r,o,i,s){return e.join(t,"bin",n.id,`${r}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}`)}function TW(e){return Se.posix.join(e.userDataFolder,"extensions")}function Ti(e){return Se.posix.join(typeof e=="string"?e:e.userDataFolder,"data/Machine")}function zS(e){return Se.posix.join(e.userDataFolder,"data/Machine/settings.json")}function wW(e){return Se.posix.join(e.userDataFolder,"data/User/mcp.json")}function Sne(e){return Se.posix.join(e,".vscode-remote")}function np(e,t,n){return e.join(t,n.serverDataFolderName)}function PT(e,t,n){return e.join(t,n.dataFolderName)}function KS(e){return Se.posix.join("/var",/^\.*(.*)$/.exec(e)[1])}function Il(e,t){return jn(e,{posix:()=>Se.posix.join(t,"node"),win32:()=>Se.win32.join(t,"node.exe")})()}var Lv=class{constructor(t){this.settings=t}getConfiguration(t){return this.settings[ss(t)]||this.settings[wl(t)]}getNewConfiguration(t){return this.settings[ss(t)]}getDotfileConfiguration(t){return this.settings[wl(t)]||this.settings[t]}};async function Tl(e,t,n,r,o=bl,i,s){await xne(e,t);let a=await _ne(e,t,r);await vW(t,r);let{serverDownloaded:c,didCheckRequirements:l}=await Rne(e,t),u,f,m=Promise.resolve(),d;if(t.nodeExecutable){let y=await vS(e,t,a);u=y.remoteContainersCLI,f=y.remoteEnv,m=y.ready;let S=i;i=S&&(async(..._)=>(await y.ready,S(..._))),d=y.mrpcExec;let I=e.cliHost.reconnect;I&&(e.cliHost.reconnect=async _=>{await I(_),y.reconnect().catch(A=>e.output.write(it(A&&(A.stack||A.message)||String(A))))})}let g=e.computeExtensionHostEnv||e.postCreate.enabled?Rf(e,t,r,d).then(async y=>({...y,...f,...await EB(t,y),REMOTE_CONTAINERS:"true",...uW(e.cliHost.platform,n.configFilePath,t.env,r.remoteEnv||{})})):Promise.resolve({}),h=a.getConfiguration("gitCredentialHelperConfigLocation")??e.credentialHelperConfigLocation;t.nodeExecutable&&(await vv(e,t,[".ssh","known_hosts"],"ssh"),h!=="none"&&await VS(t,u,e.output,"system"));let w,C,v;if(t.installFolder){let S=await qne(e,t,o,d,async()=>Ane(e,t,r,!1),void 0,!0,!1,l),I=S.serverPort;v=S.connectionToken,w=I,e.forwardServerPort&&t.nodeExecutable&&(C=await cW(e,t,I,e.sessionId),w=C.address().port,e.backgroundTasks.push(async()=>Xne(e,t,r)))}if(e.postCreate.enabled){let y,S=new Promise(_=>y=()=>{_()}),I=(async()=>{let _={...f,REMOTE_CONTAINERS:"true"},A=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],U=A.reduce((R,E)=>(R[E]=(r[`${E}s`]||[]).length>0,R),{});if(e.prebuild){let R=A.indexOf("updateContentCommand");if((!A.slice(0,R+1).some(b=>U[b])||!i?"prebuild":await i(!1,!1,!0,a,_))!=="prebuild")throw new Error('"prebuild" expected')}else{let R=!0,E=!0,x=r.waitFor||vne,b=A.indexOf(x),D=A.indexOf("postCreateCommand"),T=b<=D&&!A.slice(0,b+1).some(H=>U[H]),k=a.getDotfileConfiguration("dotfiles.repository")||e.dotfilesConfiguration.repository,L=!A.slice(0,D+1).some(H=>U[H])&&!k,N=T?"skipNonBlocking":L||!i?"stopForPersonalization":await i(R,E,!1,a,_);if(N==="skipNonBlocking"){if(y(),e.postCreate.skipNonBlocking)return;R=!1,N=!A.slice(b+1,D+1).some(B=>U[B])&&!k||!i?"stopForPersonalization":await i(R,E,!1,a,_)}if(N==="stopForPersonalization"){i||await pW(e,t,g,m,a),t.nodeExecutable&&((a.getConfiguration("copyGitConfig")??e.isCopyGitConfigEnabled)&&await nS(e,t,g.then(z=>({...t.env,...z}))),await VS(t,u,e.output,h)),await(s==null?void 0:s()),E=!1;let H=b>D&&!A.slice(D+1,b+1).some(z=>U[z]),B=!A.slice(D+1).some(z=>U[z]);N=H?"skipNonBlocking":B||!i?"done":await i(R,E,!1,a,_)}if(N==="skipNonBlocking"){if(y(),e.postCreate.skipNonBlocking)return;R=!1,N=!A.slice(b+1).some(B=>U[B])||!i?"done":await i(R,E,!1,a,_)}if(N!=="done")throw new Error('"done" expected')}})();I.then(()=>{e.postCreate.done()},_=>{e.postCreate.done(_)}),e.backgroundTasks.push(I),await Promise.race([S,I])}return{hostOrContainerPort:w,hostPortServer:C,connectionToken:v,remoteEnv:e.computeExtensionHostEnv?await g:{},serverDownloaded:c}}async function xne(e,t){let n=Sne(t.homeFolder);!await YS(t.shellServer,t.userDataFolder)&&await YS(t.shellServer,n)&&await Xa(e,t,["/bin/sh","-c",`cp -r '${n}' '${t.userDataFolder}'`])}async function _ne(e,t,n){var s;let r=Ti(t),o=Se.posix.join(r,".writeMachineSettingsMarker"),i=zS(t);if(await WS(t.shellServer,o)&&!await Di(t.shellServer,i)){let a=(s=n.customizations)==null?void 0:s.vscode,c=(Array.isArray(a)?a:a?[a]:[]).map(d=>d.settings).filter(Boolean),l=await Dne(t.shellServer,e.getLogLevel()),u=l.length?`

Some of the command line tools available on the \`PATH\`: ${l.map(d=>`\`${d}\``).join(", ")}`:"",f=t.osRelease.prettyName||"Linux";c.push({"github.copilot.chat.codeGeneration.instructions":[{text:`This workspace is in a dev container running on ${f}.

Use \`"$BROWSER" <url>\` to open a webpage in the host's default browser.${u}`}]});let m=Pne(c);if(bne(m,n.portsAttributes),Tne(m,n.otherPortsAttributes),Object.keys(m).length)return await t.shellServer.exec(`mkdir -p '${Se.posix.dirname(i)}' && cat >'${i}' <<'settingsJSON'
${JSON.stringify(m,null,"	")}
settingsJSON
`),new Lv(m)}try{let{stdout:a}=await t.shellServer.exec(`cat ${i}`);return new Lv($e(a)||{})}catch{return new Lv({})}}async function Dne(e,t){let n=["apt","dpkg","snap","dnf","yum","rpm","apk","docker","git","gh","kubectl","podman","curl","wget","ssh","scp","rsync","gpg","ps","lsof","netstat","top","tree","find","grep","zip","unzip","tar","gzip","bzip2","xz"],{stdout:r}=await e.exec(`which ${n.join(" ")} || true`,{logOutput:t===1});return r.split(`
`).filter(Boolean).map(i=>Se.posix.basename(i)).filter(i=>n.includes(i))}var Ine=["github.copilot.chat.reviewSelection.instructions","github.copilot.chat.codeGeneration.instructions","github.copilot.chat.commitMessageGeneration.instructions","github.copilot.chat.pullRequestDescriptionGeneration.instructions","github.copilot.chat.testGeneration.instructions"];function Pne(e){let t=e.reduce((n,r)=>Ine.reduce((o,i)=>{let s=r[i];return Array.isArray(s)&&(o[i]=o[i]?o[i].concat(s):s),o},n),{});return Object.assign({},...e,t)}function bne(e,t){if(!e||!t||!Object.keys(t).length)return;let n="remote.portsAttributes";if(!e[n]){e[n]=t;return}for(let r in t)e[n][r]||(e[n][r]=t[r])}function Tne(e,t){if(!e||!t)return;let n="remote.otherPortsAttributes";e[n]||(e[n]=t)}async function JS(e,t,n,r){let o=typeof e.gid=="string"?`${e.user}:${e.gid}`:e.user,i=await t();if((await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let c=Se.posix.dirname(n);c!=="/"&&await i.exec(`chown ${o} ${c}`),n!=="/"&&await i.exec(`chown -R ${o} ${n}`)}else if(r&&(await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let u=Se.posix.dirname(r);u!=="/"&&await i.exec(`chown -R ${o} ${u}`)}}async function VS(e,t,n,r){if(t||Cl)if(r==="none")n.write("Git credential helper not enabled.");else{let o=r==="system"?e.launchRootShellServer&&await e.launchRootShellServer():e.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${r} --replace-all credential.helper '!f() { ${e.nodeExecutable} ${t} git-credential-helper $*; }; f' || true`):n.write("Cannot configure system wide Git credential helper without root access.")}}async function vv(e,t,n,r,o){let{cliHost:i}=e,s=i.path.join(await i.homedir(),...n);if(!await i.isFile(s)&&(i.type==="local"||(i=await Hr(process.cwd(),e.loadNativeModule,e.output),s=i.path.join(await i.homedir(),...n),!await i.isFile(s))))return!1;let a=Se.posix.join(t.homeFolder,...n);return vl(i,t.shellServer,s,a,r,o)}async function vl(e,t,n,r,o,i=""){let s=await kne(e,n);if(s)try{let a=await r,c=Se.posix.dirname(a);return await t.exec(`# Test for ${a} and ${o}
[ -e '${a}' ] ${i}&& echo '${a}' exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p '${c}'
[ -w '${c}' ] || (echo '${c}' not writable && exit 1) || exit 1`),await t.exec(`# Copy ${n} to ${a}
${Df(s.byteLength)} >>'${a}'`,{stdin:s}),!0}catch(a){if(a&&a.code!==1)throw a}return!1}async function kne(e,t){try{return await e.readFile(t)}catch(n){if(n&&(n.code==="ENOENT"||n.code==="EISDIR"))return;throw n}}async function Rne(e,t){let n=await CW(e,t,t.legacy);if(n!=="retryWithLegacyServer")return n;let r=await CW(e,t,!0);return t.legacy=!0,t.installFolder=r.installFolder,t.sharedInstallFolder=r.sharedInstallFolder,t.nodeExecutable=r.installFolder&&Il("linux",r.installFolder),r}async function CW(e,t,n){let r=await Nne(e,t,n),o=!1;if(r.installFolder){let i=Se.posix.join(r.installFolder,"bin","helpers","check-requirements.sh");if(o=await Gne(t.shellServer,i),o)try{await t.shellServer.exec(`'${i}'`)}catch(s){if((s==null?void 0:s.code)===100){if(!n)return"retryWithLegacyServer"}else throw(s==null?void 0:s.code)===99?new pe({description:Pl.t("The container does not meet all the requirements of the VS Code Server."),detail:s==null?void 0:s.stdout.toString().trim(),step:"checkRequirements",data:{reload:!1,learnMoreUrl:"https://aka.ms/vscode-remote/faq/old-linux"},originalError:s}):s}}return{...r,didCheckRequirements:o}}async function Nne(e,t,n){let{commit:r}=e.product,{shellServer:o,launchRootShellServer:i,build:s}=t;if(!(r&&t.installFolder))return{serverDownloaded:void 0,installFolder:void 0,sharedInstallFolder:void 0};let a=n?`${t.installFolder}-legacy`:t.installFolder,c=n&&t.sharedInstallFolder?`${t.sharedInstallFolder}-legacy`:t.sharedInstallFolder;Lne(t.osRelease,s),s.preview&&e.output.write(`\r
\x1B[1mSupport for ${s.label} is in preview.\x1B[22m\r
\r
`);let l=await YS(o,a),u;if(l||s===LW[s.arch]&&(i?u=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):u=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`)),c&&await YS(o,c))return l||await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),i&&(async()=>{await(await i()).exec(`touch '${c}'`)})().catch(console.error),await u,{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};if(l)return{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};e.progress(4),e.output.write(`Installing VS Code Server for commit ${r}\r
`);let f=!!(c&&i),m=f?c:a,d=f?await i():o,p={localCacheFolder:e.localCacheFolder,build:s,commit:r,quality:e.product.quality||"insider",web:e.web,output:e.output,alternateDownload:e.alternateDownload,legacy:n},g=ip(p),h=await vr(g);h||await xv(p);try{if(t.sharedDataFolderIsLocalCacheFolder)await SW(p);else{let w=Sv(e,d,g,m);e.cliHost.type!=="local"&&await Promise.race([w,Bt(2e4).then(()=>!0)])&&AS(e,t).catch(C=>e.output.write(`Error testing connection: ${(C==null?void 0:C.stack)||(C==null?void 0:C.message)||C}`)),await w}}catch(w){if(w&&w.stderr&&/unexpected end of file|not in gzip format/i.test(w.stderr.toString()))await xv(p),t.sharedDataFolderIsLocalCacheFolder?await SW(p):await Sv(e,d,g,m);else throw w}return f&&(await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),(async()=>{await d.exec(`touch '${c}' && cd '${Se.posix.dirname(c)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await u,{serverDownloaded:!h,installFolder:a,sharedInstallFolder:c}}function Lne(e,t){let n=e.version;if(t.minVersion&&n){let r=NS(n.trim());if(r&&LS(r,t.minVersion)){let o=Pl.t("{0} {1} or later required.",t.label,t.minVersion.join("."));throw new pe({description:o,data:{reload:!1}})}}}async function xv(e){let{build:t,commit:n,quality:r,web:o,legacy:i,output:s}=e,a="Downloading VS Code Server",c=s.start(a);s.write(`${n} ${t.id} ${r}${o?" web":""}${i?" legacy":""}`);let l=ip(e);await Ki(Se.dirname(l));let u=`https://update.code.visualstudio.com/commit:${n}/server-${i?t.id.replace("linux-","linux-legacy-"):t.id}${o?"-web":""}/${r}`;s.write(`URL: ${u}`),s.write(`Path: ${l}`);let f,m;try{m=`${l}_${Date.now()}`,await new Promise((d,p)=>{let g=GS.createWriteStream(m);s.write("Starting download.",1),_W.https.get(u,{trackRedirects:!0},w=>{var y;if(w.statusCode<200||w.statusCode>299){s.write(`Download failed: ${w.statusCode} ${w.statusMessage}.`,1),p(new pe({description:Pl.t("Downloading the VS Code Server failed. Please try again later."),originalError:`Failed to download VS Code Server (${u}): HTTP ${w.statusCode} - ${w.statusMessage}`}));return}let v=(y=[...w.redirects,w].find(S=>S.headers["x-sha256"]))==null?void 0:y.headers["x-sha256"];f=Array.isArray(v)?v[0]:v,s.write("Downloading data.",1),w.on("error",p),w.pipe(g),w.on("end",d)}).on("error",p)}),f&&await EW(u,m,f,s)}catch(d){if(s.write("Downloading failed.",1),s.write((d==null?void 0:d.stack)||(d==null?void 0:d.message)||String(d),1),e.alternateDownload)s.write(d&&(d.originalError||d.message)),s.write("Retrying to download VS Code Server."),m=`${l}_${Date.now()}`,await e.alternateDownload(u,m),f&&await EW(u,m,f,s);else throw d||new pe({description:Pl.t("Downloading the VS Code Server failed. Please try again later.")})}finally{s.stop(a,c)}await Yc(m,l)}async function EW(e,t,n,r){let o=fp.createHash("sha256"),i=await ct(t);o.update(i);let s=o.digest("hex");if(s!==n)throw r.write(`Failed to download VS Code Server (${e}): SHA mismatch, actual ${s} != expected ${n} (${t}, ${i.byteLength} bytes)`),new pe({description:Pl.t("Downloading the VS Code Server failed. Please try again later.")})}async function Sv(e,t,n,r,o,i=!0){let s="Installing VS Code Server",a=e.output.start(s),c=`${r}_${Date.now()}`;try{if(await t.exec(`mkdir -p ${c}`),o)typeof n=="string"&&n.endsWith(".zip")?await t.exec(`unzip ${n} -d ${c}`):await t.exec(`cat ${n} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let l=typeof n=="string"?await ct(n):n;await t.exec(`${Df(l.byteLength,!0)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:l,logOutput:"continuous"})}await t.exec(`mv -n ${Se.posix.join(c,"*",".")} ${r} && rmdir ${c}`)}catch(l){try{await t.exec(`rm -rf ${c}`)}catch{}throw l}finally{e.output.stop(s,a)}}async function SW(e){let{localCacheFolder:t,build:n,commit:r,quality:o,web:i,legacy:s,output:a}=e,c="Unpacking VS Code Server",l=a.start(c);a.write(`${r} ${n.id} ${o} ${i?"web":""} ${s?"legacy":""}`);let u=await bW(Se,t,n,r,o,i,s),f=`${u}_${Date.now()}`;try{await Ki(f);let m=ip(e);await(await cs(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",m,"--strip-components","1","-C",f],cwd:process.cwd(),output:a})).exit,await qc(u,{recursive:!0,force:!0}),await Yc(f,u)}catch(m){try{await qc(f,{recursive:!0,force:!0})}catch{}throw m}finally{a.stop(c,l)}}function ip(e){let{localCacheFolder:t,build:n,commit:r,quality:o,web:i,legacy:s}=e,a=Se.join(t,"serverCache",r),c=`vscode-server-${n.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}${n.archiveExt||".tar.gz"}`;return Se.join(a,c)}async function kW(e,t){let n=await AW(t),r={},{stdout:o}=await Xa(e,t,[Se.posix.join(t.installFolder,...rS(n)),...FW(t.userDataFolder),...OW(e.getTelemetryLevel()),"--list-extensions"],t.installFolder,{remoteEnv:r});return o.toString().split(`
`).filter(i=>!!i)}async function Ane(e,t,n,r){let o="Preparing Extensions",i=e.output.start(o),{sharedDataFolder:s}=t,a=s?Bne(s):void 0,c=RW(t),l=Ti(t),u=Se.posix.join(l,".installExtensionsMarker"),f=!await WS(t.shellServer,u),m=One(e,f,n);if(t.sharedDataFolderIsLocalCacheFolder)t.launchRootShellServer&&await(await t.launchRootShellServer()).exec(`mkdir -p '${a}' && chown -R ${t.user} ${a}`),await t.shellServer.exec(`mkdir -p '${a}' && ln -s -T '${a}' '${c}' || true`);else{let p=Hne(e.localCacheFolder),g=await Une(e,t,p,a,c,[...m.builtinExtensions,...m.extensions]);$ne(e,t,p,a,c,g).catch(console.error)}m.extensions=m.extensions.filter(p=>!m.builtinExtensions.includes(p)),e.product.version&&DW.lte("1.77.0",e.product.version.split("-")[0])&&(e.output.write(`Optimizing extensions for quality: ${e.product.quality}`),m.builtinExtensions=await Fne(e,t,c,m.builtinExtensions));let d=[].concat(...m.builtinExtensions.map(p=>["--install-builtin-extension",p]),...m.extensions.map(p=>["--install-extension",p]));return r&&d.length&&d.push("--do-not-sync"),e.output.stop(o,i),{...m,args:d}}async function Fne(e,t,n,r){if(r.length===0)return r;let{shellServer:o}=t,i=(await o.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(a=>!!a&&a.endsWith("vsix"));e.output.write(`Available vsix: ${i.join(", ")||"None"}`);let s=r.map(a=>{let c=i.find(l=>l.startsWith(a.toLocaleLowerCase()));return c?`${n}/${c}`:a});return e.output.write(`Optimized extensions to install: ${s.join(", ")||"None"}`),s}function One(e,t,n){var a,c;let r=t?[]:e.installBuiltinExtensions||[],o=e.getAdditionalExtensionsToInstall(t),i=[...t?[]:(((a=n.customizations)==null?void 0:a.vscode)||[]).map(l=>l.extensions||[]),o],s=[];for(let l of i.flat()){let u=(c=/^(?<removal>-)?(?<idAndVersion>(?<id>[^@ ]*)[^ ]*)$/.exec(l))==null?void 0:c.groups;if(u){let f=s.findIndex(m=>m.id===u.id);f!==-1&&s.splice(f,1),u.removal||s.push(u)}}return{builtinExtensions:r,extensions:s.map(l=>l.idAndVersion)}}async function Une(e,t,n,r,o,i){e.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=t,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(r){let c=(await s.exec(`test -d ${r} && ls ${r} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(e.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${o}' && ln -s '${r}'/* '${o}' || true`);let{launchRootShellServer:u}=t;u&&(async()=>{await(await u()).exec(`cd ${r} && touch ${l.map(m=>`'${m}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await Ki(n);let c=await Gc(n),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(e.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=Se.basename(n),f=Mg({cwd:Se.dirname(n)},l.map(p=>Se.join(u,p))),m=Se.posix.join(o,`tmp-${Date.now()}`),d=await new Promise(p=>{let g=[];f.on("data",h=>g.push(h)),f.on("end",()=>p(Buffer.concat(g)))});await s.exec(`# Copy extensions to remote
mkdir -p ${m}
${Df(d.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${m}
mv ${m}/* ${o} && rmdir ${m}`,{stdin:d})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function $ne(e,t,n,r,o,i){if(r&&!t.launchRootShellServer)return;let s=1e4,a=6e4;for(await Bt(s);;)i=await Mne(e,t,n,r,o,i),await Bt(a)}async function Mne(e,t,n,r,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=t,u=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(m=>!!m);if(!r){let m=i.filter(d=>u.indexOf(d)===-1);e.output.write(`Extensions cache, remote removals: ${m.join(", ")||"None"}`);for(let d of m)try{await KF(Se.join(n,d))}catch(p){if(!(p&&p.code==="ENOENT"))throw p}}let f=u.filter(m=>i.indexOf(m)===-1&&s.indexOf(m)===-1);if(e.output.write(`Extensions cache, copy to ${r?"shared cache":"local"}: ${f.join(", ")||"None"}`,1),f.length)if(r){let m=await c();await m.exec(`mkdir -p '${r}' && cd '${o}' && cp ${f.map(d=>`'${d}'`).join(" ")} '${r}'`),await m.exec(`cd '${r}' && ls -t | tail -n +500 | xargs rm -f`)}else{let m=Se.posix.basename(o),d=await l({cmd:"tar",cwd:Se.posix.dirname(o),args:["c",...f.map(w=>Se.posix.join(m,w))],output:e.output}),p=Se.join(Se.dirname(n),`${Se.basename(n)}-${Date.now()}`);await Ki(p);let g=VP({cwd:p,strip:1}),h=new Promise((w,C)=>{g.on("error",C),g.on("finish",w)});d.stdout.pipe(g),await h;for(let w of await Gc(p))await Yc(Se.join(p,w),Se.join(n,w));await JF(p)}return{remoteExtensions:u,cachedExtensions:s}}var qT="extensionsCache";function Hne(e){return Se.join(e,qT)}function Bne(e){return Se.posix.join(e,qT)}function RW(e){return Se.posix.join(e.userDataFolder,qT)}var NW={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},LW={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},gS={x64:{label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Mac ARM",id:"darwin-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},Wne={x64:{label:"Windows",id:"win32-x64",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Windows ARM",id:"win32-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},jne={linux:NW,alpine:LW,darwin:gS,win32:Wne},Vne={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function wS(e,t){var o;let n=Vne[e.hardware],r=n&&(((o=jne[e.id])==null?void 0:o[n])||NW[n]);if(!r||t&&!r.stable)throw new pe({description:e.id==="alpine"?Pl.t("Alpine Linux is not supported on the hardware architecture '{0}' of the container.",e.hardware):Pl.t("The hardware architecture '{0}' of the container is not supported.",e.hardware),data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return r}async function bT(e){let t="unknown",n="unknown",r="unknown",o;try{t=(await e.exec("uname -m")).stdout.trim();let{stdout:i}=await e.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");n=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",r=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",o=(i.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(i){console.error(i)}return{hardware:t,id:n,version:r,prettyName:o}}async function Yne(e,t,n,r){let o=await jn(n,{async win32(){var c;return{amd64:"x86_64",arm64:"arm64"}[((c=t.PROCESSOR_ARCHITECTURE)==null?void 0:c.toLowerCase())||""]||"unknown"},async posix(){return(await X({exec:e,cmd:"uname",args:["-m"],output:r})).stdout.toString().trim()}})(),i=n,s="unknown",a;if(n==="linux")try{let c=(await X({exec:e,cmd:"/bin/sh",args:["(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null"],output:r})).stdout.toString();i=(c.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",s=(c.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",a=(c.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(c){console.error(c)}return{hardware:o,id:i,version:s,prettyName:a}}async function WS(e,t){try{return await e.exec(BS(t)),!0}catch{return!1}}function BS(e){return`test ! -f '${e}' && set -o noclobber && mkdir -p '${Se.posix.dirname(e)}' && { > '${e}' ; } 2> /dev/null`}async function YS(e,t){try{return await e.exec(`test -d '${t}'`),!0}catch{return!1}}async function Gne(e,t){try{return await e.exec(`test -x '${t}'`),!0}catch{return!1}}async function qne(e,t,n,r,o,i,s,a,c){let{installFolder:l,sharedInstallFolder:u,shellServer:f}=t,{processes:m,mntNS:d}=await nT(f),p=await AW(t),g=`(${Se.posix.join(...rS(p))})`.replace(".","\\."),h=new RegExp(`${Se.posix.join(Se.posix.dirname(l).replace(".","\\."),"[^/]*",g)}`),w=m.filter(z=>z.mntNS===d&&h.test(z.cmd));e.output.write(`Running extension host agents:
${JSON.stringify(w,void 0,"  ")}`,1);let C=w.length?(await f.exec(`readlink -f '${l}'`)).stdout.toString().trim():void 0,{current:v,others:y}=w.reduce((z,Y)=>(z[(Y.cwd===C||Y.cwd===l||Y.cwd===u)&&h.test(Y.cmd)?"current":"others"].push(Y),z),{current:[],others:[]});if(s&&y.length){e.output.write(`Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${y.map(z=>z.pgrp?`-${z.pgrp}`:z.pid).join(" ")}`)}catch{}}let{commit:S,quality:I}=e.product,_=Se.posix.join(Ti(t),`.connection-token-${S}${I==="stable"?"":`-${I}`}${e.web?"-web":""}${t.legacy?"-legacy":""}`),A=Se.posix.join(Ti(t),`.devport-${S}${I==="stable"?"":`-${I}`}${e.web?"-web":""}${t.legacy?"-legacy":""}`);if(v.length){e.output.write(`Extension host agent is already running.\r
`);try{let{stdout:z}=await f.exec(`cat '${A}' 2>/dev/null`),Y=z.toString().trim(),G=parseInt(Y,10),ce=new RegExp(" '?--connection-token-file'? ").test(v[0].cmd)?(await f.exec(`cat '${_}'`)).stdout.toString().trim():void 0;return{serverPort:G,connectionToken:ce}}catch(z){console.error(z),e.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${v.map(Y=>Y.pgrp?`-${Y.pgrp}`:Y.pid).join(" ")}`)}catch{}}}let U="isLocalContainer"in e&&e.isLocalContainer,R=`${_}-${fp.randomUUID()}`,{stdout:E}=await f.exec(`cat '${_}' 2>/dev/null || (umask 377 && echo '${fp.randomUUID()}' >'${R}' && mv -n '${R}' '${_}' && rm -f '${R}' && cat '${_}')`),x=E.toString().trim();e.progress(5);let b="Starting VS Code Server",D=e.output.start(b),T=[Se.posix.join(l,...rS(p)),"--log",Jr(e.getLogLevel()),"--force-disable-user-env",...FW(t.userDataFolder),...zne(U),...OW(e.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(n),"--connection-token-file",_,"--extensions-download-dir",RW(t),...(await o()).args,"--start-server",...U?["--disable-websocket-compression"]:[""],...a?["--enable-remote-auto-shutdown"]:[],...c?["--skip-requirements-check"]:[]],k={SHELL:t.shell,...await i};delete k.NODE_OPTIONS;let N=(await Xa(e,{remoteExec:t.remoteExec},T,l,{remoteEnv:k,resolveOn:yW,print:"continuous"})).cmdOutput;e.output.stop(b,D);let H=(yW.exec(N)||[])[1];if(!H)throw new Error("Port not found");return await f.exec(`echo ${H} >'${A}'`),{serverPort:parseInt(H,10),connectionToken:x}}async function AW({shellServer:e,installFolder:t}){return JSON.parse((await e.exec(`cat '${Se.posix.join(t,"product.json")}'`,{logOutput:!1})).stdout.toString().trim())}function FW(e){return["--server-data-dir",e]}function zne(e){return e?["--use-host-proxy"]:[]}function OW(e){return e?["--telemetry-level",e]:[]}var Kne=/^([a-z0-9\-]+):(\d{1,5})$/;function Jne(e){let t=e.match(Kne);if(!(!t||t.length!==3))return{host:t[1],port:Number(t[2])}}async function Xne(e,t,n){let r=(n.forwardPorts||[]).map(i=>typeof i=="number"?`localhost:${i}`:i).map(Jne).filter(Boolean),o=await e.getTunnels();await Promise.all(r.filter(i=>!o.find(s=>s.remoteAddress.host===i.host&&s.remoteAddress.port===i.port)).map(async({host:i,port:s})=>e.openTunnel(t,s,i)))}async function Xa(e,{remoteExec:t},n,r,o={}){let i=o.print||(o.silent?"off":"end"),s=await t({env:o.remoteEnv,cwd:r,cmd:n[0],args:n.slice(1),output:o.silent?Fe:e.output}),a=[],c=[],l=new GT.StringDecoder,u=new GT.StringDecoder,f="",m="",d,p,g=new Promise((y,S)=>{d=y,p=S});s.stdout.on("data",y=>{a.push(y);let S=l.write(y);i==="continuous"&&e.output.write(S.replace(/\r?\n/g,`\r
`)),f+=S,o.resolveOn&&o.resolveOn.exec(f)&&d()}),s.stderr.on("data",y=>{c.push(y);let S=u.write(y);i==="continuous"&&e.output.write(S.replace(/\r?\n/g,`\r
`)),m+=S}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,y=>{y&&p(y)}),s.stdin.end()):o.stdin instanceof GS.ReadStream&&o.stdin.pipe(s.stdin),i!=="off"&&s.exit.catch(y=>{y!=null&&y.message&&e.output.write(it(y==null?void 0:y.message))});let h=await Promise.race([s.exit,g]),w=Buffer.concat(a),C=Buffer.concat(c);i==="end"&&(e.output.write(f.replace(/\r?\n/g,`\r
`)),e.output.write(it(m)));let v=`${f}
${m}`;return h&&(h.code||h.signal)?Promise.reject({message:`Command failed: ${n.join(" ")}`,cmdOutput:v,stdout:w,stderr:C,code:h.code,signal:h.signal}):{cmdOutput:v,stdout:w,stderr:C}}function Df(e,t=!1){let r=e%8192;return`(dd iflag=fullblock bs=8192 count=${(e-r)/8192}${t?"":" 2>/dev/null"}; dd iflag=fullblock bs=${r} count=1${t?"":" 2>/dev/null"})`}async function Rf(e,t,n,r){let o=ere(n,e);if(!o||o==="none")return{};let i=await Zne(o,e,t.shellServer);return i||(e.output.write("userEnvProbe: not found in cache"),i=await xW(o,e,t,r,"cat /proc/self/environ","\0"),i||(e.output.write("userEnvProbe: falling back to printenv"),i=await xW(o,e,t,r,"printenv",`
`)),i&&await Qne(i,o,e,t.shellServer),i||{})}async function Zne(e,t,n){if(!n||!t.containerSessionDataFolder)return;let r=UW(e,t.containerSessionDataFolder);try{if(await Di(n,r)){let{stdout:o}=await n.exec(`cat '${r}'`);return JSON.parse(o)}}catch(o){t.output.write(`Failed to read/parse user env cache: ${o}`,5)}}async function Qne(e,t,n,r){if(!r||!n.containerSessionDataFolder)return;let o=UW(t,n.containerSessionDataFolder);try{await r.exec(`mkdir -p '${Se.posix.dirname(o)}' && cat > '${o}' << 'envJSON'
${JSON.stringify(e,null,"	")}
envJSON
`)}catch(i){n.output.write(`Failed to cache user env: ${i}`,5)}}function UW(e,t){return Se.posix.join(t,`env-${e}.json`)}async function xW(e,t,n,r,o,i){var s;if(e==="none")return{};try{let a=fp.randomUUID(),c=new RegExp(a+"([^]*)"+a),l=n.shell;t.output.write(`userEnvProbe shell: ${l}`);let u=Se.posix.basename(l),f=`echo -n ${a}; ${o}; echo -n ${a}`,m;/^pwsh(-preview)?$/.test(u)?m=e==="loginInteractiveShell"||e==="loginShell"?["-Login","-Command"]:["-Command"]:m=[e==="loginInteractiveShell"?"-lic":e==="loginShell"?"-lc":e==="interactiveShell"?"-ic":"-c"];let d=on(t.output,1),p=Xa({output:d},{remoteExec:await r||n.remoteExec},[l,...m,f],n.installFolder);Promise.race([p,Bt(2e3)]).then(async _=>{if(!_){let A,U=n.shellServer||await Wt(n.remoteExec,t.output);try{({processes:A}=await nT(U))}finally{n.shellServer||await U.process.terminate()}let R=A.find(E=>E.cmd.startsWith(l)&&E.cmd.indexOf(a)!==-1);if(R){let x=n2(A)[R.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${rT(x)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(_=>t.output.write(it(_&&(_.stack||_.message)||"Error reading process tree.")));let g=await Promise.race([p,Bt(1e4)]);if(!g)return t.output.write(it("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let h=g.stdout.toString(),w=c.exec(h),C=w?w[1]:"";if(!C||C.trim()==="-n")return;let v=C.split(i).reduce((_,A)=>{let U=A.indexOf("=");return U!==-1&&(_[A.substring(0,U)]=A.substring(U+1)),_},{});t.output.write(`userEnvProbe parsed: ${JSON.stringify(v,void 0,"  ")}`,1),delete v.PWD;let y=v.PATH,S=(s=n.env)==null?void 0:s.PATH,I=!(t.allowSystemConfigChange&&n.launchRootShellServer)&&y&&S;if(I){let _=n.user;v.PATH=tre(y,S,_==="root"||_==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof y=="string"?`'${y}'`:"None"}
Container: ${typeof S=="string"?`'${S}'`:"None"}${I?`
Merged:    ${typeof v.PATH=="string"?`'${v.PATH}'`:"None"}`:""}`),v}catch(a){return t.output.write(it("Error reading shell environment.")),t.output.write(it((a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a))),{}}}function ere(e,t){let n=e==null?void 0:e.userEnvProbe;return t.output.write(`userEnvProbe: ${n||t.defaultUserEnvProbe}${n?"":" (default)"}`),n||(n=t.defaultUserEnvProbe),n}function tre(e,t,n){let r=e.split(":"),o=0;for(let i of t.split(":")){let s=r.indexOf(i);s===-1?(n||!/\/sbin(\/|$)/.test(i))&&r.splice(o++,0,i):o=s+1}return r.join(":")}async function zT(e){for(let t of e)await(typeof t=="function"?t():t)}async function $W(e){let{localCacheFolder:t,output:n,alternateDownload:r,exec:o,env:i,isFile:s,userDataFolder:a,homeFolder:c,product:l,platform:u}=e,f=l.commit||await Zm(l.quality),m=l.commit?l.quality||"insider":"stable",d=u==="win32"?Se.win32:Se.posix,p=`${m.substring(0,1).toUpperCase()}${m.substring(1)}${m==="insider"?"s":""}-${f}`,g=d.join(np(d,c,l),"cli","servers",p,"server");if(await jS(u,g,s))return Il(u,g);let h=d.join(PT(d,c,l),"cli","servers",p,"server");if(await jS(u,h,s))return Il(u,h);let w=d.join(np(d,c,l),"bin",f);if(await jS(u,w,s))return Il(u,w);let C=d.join(a,"bin",f);return await jS(u,C,s)?Il(u,C):await nre(t,n,r,o,i,u,f,m,C)}async function nre(e,t,n,r,o,i,s,a,c){let l=await Yne(r,o,i,t),u=wS(l,!1),f={localCacheFolder:e,build:u,commit:s,quality:a,web:!1,output:t,alternateDownload:n,legacy:!1},m=ip(f);await vr(m)||await xv(f);let d=m.endsWith(".zip")?await ore(m):await rre(m);return await jB(r,i,d,c,!1,t),Il(i,c)}async function jS(e,t,n){let r=Il(e,t),i=(e==="win32"?Se.win32:Se.posix).join(t,"node_modules","node-pty","package.json");return await n(r)&&await n(i)}async function rre(e){let t=[];return await es({file:e,filter:n=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(n),onentry:n=>{new al(n).on("data",o=>t.push(o))}}),Buffer.concat(t)}async function ore(e){let n=new IW.default(e).getEntries().filter(o=>/^[^/]*\/(LICENSE$|node(\.exe)?$|node_modules\/node-pty\/.*[^/]$)/.test(o.entryName)),r=PW.pack();for(let o of n){let i=await new Promise((s,a)=>{o.getDataAsync((c,l)=>{l?a(l):s(c)})});r.entry({name:o.entryName,mode:o.attr>>>16&4095},i)}return r.finalize(),r}var Lj=W(require("crypto")),Gv=W(require("path"));function ej(e){return typeof e>"u"||e===null}function ire(e){return typeof e=="object"&&e!==null}function sre(e){return Array.isArray(e)?e:ej(e)?[]:[e]}function are(e,t){var n,r,o,i;if(t)for(i=Object.keys(t),n=0,r=i.length;n<r;n+=1)o=i[n],e[o]=t[o];return e}function cre(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function lre(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var ure=ej,fre=ire,dre=sre,mre=cre,pre=lre,hre=are,Vn={isNothing:ure,isObject:fre,toArray:dre,repeat:mre,isNegativeZero:pre,extend:hre};function tj(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function Fv(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=tj(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Fv.prototype=Object.create(Error.prototype);Fv.prototype.constructor=Fv;Fv.prototype.toString=function(t){return this.name+": "+tj(this,t)};var bo=Fv;function KT(e,t,n,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-t>a&&(i=" ... ",t=r-a+i.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:i+e.slice(t,n).replace(/\t/g,"\u2192")+s,pos:r-t+i.length}}function JT(e,t){return Vn.repeat(" ",t-e.length)+e}function gre(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=n.exec(e.buffer);)o.push(i.index),r.push(i.index+i[0].length),e.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",c,l,u=Math.min(e.line+t.linesAfter,o.length).toString().length,f=t.maxLength-(t.indent+u+3);for(c=1;c<=t.linesBefore&&!(s-c<0);c++)l=KT(e.buffer,r[s-c],o[s-c],e.position-(r[s]-r[s-c]),f),a=Vn.repeat(" ",t.indent)+JT((e.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=KT(e.buffer,r[s],o[s],e.position,f),a+=Vn.repeat(" ",t.indent)+JT((e.line+1).toString(),u)+" | "+l.str+`
`,a+=Vn.repeat("-",t.indent+u+3+l.pos)+`^
`,c=1;c<=t.linesAfter&&!(s+c>=o.length);c++)l=KT(e.buffer,r[s+c],o[s+c],e.position-(r[s]-r[s+c]),f),a+=Vn.repeat(" ",t.indent)+JT((e.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var vre=gre,wre=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],yre=["scalar","sequence","mapping"];function Cre(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function Ere(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(wre.indexOf(n)===-1)throw new bo('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Cre(t.styleAliases||null),yre.indexOf(this.kind)===-1)throw new bo('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Br=Ere;function MW(e,t){var n=[];return e[t].forEach(function(r){var o=n.length;n.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),n[o]=r}),n}function Sre(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function ZT(e){return this.extend(e)}ZT.prototype.extend=function(t){var n=[],r=[];if(t instanceof Br)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new bo("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(i){if(!(i instanceof Br))throw new bo("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new bo("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new bo("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof Br))throw new bo("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(ZT.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=MW(o,"implicit"),o.compiledExplicit=MW(o,"explicit"),o.compiledTypeMap=Sre(o.compiledImplicit,o.compiledExplicit),o};var xre=ZT,_re=new Br("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Dre=new Br("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Ire=new Br("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Pre=new xre({explicit:[_re,Dre,Ire]});function bre(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Tre(){return null}function kre(e){return e===null}var Rre=new Br("tag:yaml.org,2002:null",{kind:"scalar",resolve:bre,construct:Tre,predicate:kre,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Nre(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Lre(e){return e==="true"||e==="True"||e==="TRUE"}function Are(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Fre=new Br("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Nre,construct:Lre,predicate:Are,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Ore(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ure(e){return 48<=e&&e<=55}function $re(e){return 48<=e&&e<=57}function Mre(e){if(e===null)return!1;var t=e.length,n=0,r=!1,o;if(!t)return!1;if(o=e[n],(o==="-"||o==="+")&&(o=e[++n]),o==="0"){if(n+1===t)return!0;if(o=e[++n],o==="b"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!Ore(e.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!Ure(e.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;n<t;n++)if(o=e[n],o!=="_"){if(!$re(e.charCodeAt(n)))return!1;r=!0}return!(!r||o==="_")}function Hre(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function Bre(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Vn.isNegativeZero(e)}var Wre=new Br("tag:yaml.org,2002:int",{kind:"scalar",resolve:Mre,construct:Hre,predicate:Bre,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),jre=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Vre(e){return!(e===null||!jre.test(e)||e[e.length-1]==="_")}function Yre(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var Gre=/^[-+]?[0-9]+e/;function qre(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Vn.isNegativeZero(e))return"-0.0";return n=e.toString(10),Gre.test(n)?n.replace("e",".e"):n}function zre(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Vn.isNegativeZero(e))}var Kre=new Br("tag:yaml.org,2002:float",{kind:"scalar",resolve:Vre,construct:Yre,predicate:zre,represent:qre,defaultStyle:"lowercase"}),Jre=Pre.extend({implicit:[Rre,Fre,Wre,Kre]}),Xre=Jre,nj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),rj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Zre(e){return e===null?!1:nj.exec(e)!==null||rj.exec(e)!==null}function Qre(e){var t,n,r,o,i,s,a,c=0,l=null,u,f,m;if(t=nj.exec(e),t===null&&(t=rj.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,r,o));if(i=+t[4],s=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=+t[10],f=+(t[11]||0),l=(u*60+f)*6e4,t[9]==="-"&&(l=-l)),m=new Date(Date.UTC(n,r,o,i,s,a,c)),l&&m.setTime(m.getTime()-l),m}function eoe(e){return e.toISOString()}var toe=new Br("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Zre,construct:Qre,instanceOf:Date,represent:eoe});function noe(e){return e==="<<"||e===null}var roe=new Br("tag:yaml.org,2002:merge",{kind:"scalar",resolve:noe}),rk=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ooe(e){if(e===null)return!1;var t,n,r=0,o=e.length,i=rk;for(n=0;n<o;n++)if(t=i.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function ioe(e){var t,n,r=e.replace(/[\r\n=]/g,""),o=r.length,i=rk,s=0,a=[];for(t=0;t<o;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(t));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function soe(e){var t="",n=0,r,o,i=e.length,s=rk;for(r=0;r<i;r++)r%3===0&&r&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[r];return o=i%3,o===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):o===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):o===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function aoe(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var coe=new Br("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ooe,construct:ioe,predicate:aoe,represent:soe}),loe=Object.prototype.hasOwnProperty,uoe=Object.prototype.toString;function foe(e){if(e===null)return!0;var t=[],n,r,o,i,s,a=e;for(n=0,r=a.length;n<r;n+=1){if(o=a[n],s=!1,uoe.call(o)!=="[object Object]")return!1;for(i in o)if(loe.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}function doe(e){return e!==null?e:[]}var moe=new Br("tag:yaml.org,2002:omap",{kind:"sequence",resolve:foe,construct:doe}),poe=Object.prototype.toString;function hoe(e){if(e===null)return!0;var t,n,r,o,i,s=e;for(i=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],poe.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[t]=[o[0],r[o[0]]]}return!0}function goe(e){if(e===null)return[];var t,n,r,o,i,s=e;for(i=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],o=Object.keys(r),i[t]=[o[0],r[o[0]]];return i}var voe=new Br("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:hoe,construct:goe}),woe=Object.prototype.hasOwnProperty;function yoe(e){if(e===null)return!0;var t,n=e;for(t in n)if(woe.call(n,t)&&n[t]!==null)return!1;return!0}function Coe(e){return e!==null?e:{}}var Eoe=new Br("tag:yaml.org,2002:set",{kind:"mapping",resolve:yoe,construct:Coe}),oj=Xre.extend({implicit:[toe,roe],explicit:[coe,moe,voe,Eoe]}),Rl=Object.prototype.hasOwnProperty,XS=1,ij=2,sj=3,ZS=4,XT=1,Soe=2,HW=3,xoe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_oe=/[\x85\u2028\u2029]/,Doe=/[,\[\]\{\}]/,aj=/^(?:!|!!|![a-z\-]+!)$/i,cj=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function BW(e){return Object.prototype.toString.call(e)}function Ks(e){return e===10||e===13}function Of(e){return e===9||e===32}function To(e){return e===9||e===32||e===10||e===13}function mp(e){return e===44||e===91||e===93||e===123||e===125}function Ioe(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Poe(e){return e===120?2:e===117?4:e===85?8:0}function boe(e){return 48<=e&&e<=57?e-48:-1}function WW(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Toe(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function lj(e,t,n){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}var uj=new Array(256),fj=new Array(256);for(Ff=0;Ff<256;Ff++)uj[Ff]=WW(Ff)?1:0,fj[Ff]=WW(Ff);var Ff;function koe(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||oj,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function dj(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=vre(n),new bo(t,n)}function Pe(e,t){throw dj(e,t)}function QS(e,t){e.onWarning&&e.onWarning.call(null,dj(e,t))}var jW={YAML:function(t,n,r){var o,i,s;t.version!==null&&Pe(t,"duplication of %YAML directive"),r.length!==1&&Pe(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Pe(t,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Pe(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&QS(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var o,i;r.length!==2&&Pe(t,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],aj.test(o)||Pe(t,"ill-formed tag handle (first argument) of the TAG directive"),Rl.call(t.tagMap,o)&&Pe(t,'there is a previously declared suffix for "'+o+'" tag handle'),cj.test(i)||Pe(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Pe(t,"tag prefix is malformed: "+i)}t.tagMap[o]=i}};function kl(e,t,n,r){var o,i,s,a;if(t<n){if(a=e.input.slice(t,n),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Pe(e,"expected valid JSON character");else xoe.test(a)&&Pe(e,"the stream contains non-printable characters");e.result+=a}}function VW(e,t,n,r){var o,i,s,a;for(Vn.isObject(n)||Pe(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)i=o[s],Rl.call(t,i)||(lj(t,i,n[i]),r[i]=!0)}function pp(e,t,n,r,o,i,s,a,c){var l,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&Pe(e,"nested arrays are not supported inside keys"),typeof o=="object"&&BW(o[l])==="[object Object]"&&(o[l]="[object Object]");if(typeof o=="object"&&BW(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)VW(e,t,i[l],n);else VW(e,t,i,n);else!e.json&&!Rl.call(n,o)&&Rl.call(t,o)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,Pe(e,"duplicated mapping key")),lj(t,o,i),delete n[o];return t}function ok(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Pe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function bn(e,t,n){for(var r=0,o=e.input.charCodeAt(e.position);o!==0;){for(;Of(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(Ks(o))for(ok(e),o=e.input.charCodeAt(e.position),r++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&QS(e,"deficient indentation"),r}function nx(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||To(n)))}function ik(e,t){t===1?e.result+=" ":t>1&&(e.result+=Vn.repeat(`
`,t-1))}function Roe(e,t,n){var r,o,i,s,a,c,l,u,f=e.kind,m=e.result,d;if(d=e.input.charCodeAt(e.position),To(d)||mp(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(o=e.input.charCodeAt(e.position+1),To(o)||n&&mp(o)))return!1;for(e.kind="scalar",e.result="",i=s=e.position,a=!1;d!==0;){if(d===58){if(o=e.input.charCodeAt(e.position+1),To(o)||n&&mp(o))break}else if(d===35){if(r=e.input.charCodeAt(e.position-1),To(r))break}else{if(e.position===e.lineStart&&nx(e)||n&&mp(d))break;if(Ks(d))if(c=e.line,l=e.lineStart,u=e.lineIndent,bn(e,!1,-1),e.lineIndent>=t){a=!0,d=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=c,e.lineStart=l,e.lineIndent=u;break}}a&&(kl(e,i,s,!1),ik(e,e.line-c),i=s=e.position,a=!1),Of(d)||(s=e.position+1),d=e.input.charCodeAt(++e.position)}return kl(e,i,s,!1),e.result?!0:(e.kind=f,e.result=m,!1)}function Noe(e,t){var n,r,o;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=o=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(kl(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,o=e.position;else return!0;else Ks(n)?(kl(e,r,o,!0),ik(e,bn(e,!1,t)),r=o=e.position):e.position===e.lineStart&&nx(e)?Pe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);Pe(e,"unexpected end of the stream within a single quoted scalar")}function Loe(e,t){var n,r,o,i,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return kl(e,n,e.position,!0),e.position++,!0;if(a===92){if(kl(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),Ks(a))bn(e,!1,t);else if(a<256&&uj[a])e.result+=fj[a],e.position++;else if((s=Poe(a))>0){for(o=s,i=0;o>0;o--)a=e.input.charCodeAt(++e.position),(s=Ioe(a))>=0?i=(i<<4)+s:Pe(e,"expected hexadecimal character");e.result+=Toe(i),e.position++}else Pe(e,"unknown escape sequence");n=r=e.position}else Ks(a)?(kl(e,n,r,!0),ik(e,bn(e,!1,t)),n=r=e.position):e.position===e.lineStart&&nx(e)?Pe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Pe(e,"unexpected end of the stream within a double quoted scalar")}function Aoe(e,t){var n=!0,r,o,i,s=e.tag,a,c=e.anchor,l,u,f,m,d,p=Object.create(null),g,h,w,C;if(C=e.input.charCodeAt(e.position),C===91)u=93,d=!1,a=[];else if(C===123)u=125,d=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),C=e.input.charCodeAt(++e.position);C!==0;){if(bn(e,!0,t),C=e.input.charCodeAt(e.position),C===u)return e.position++,e.tag=s,e.anchor=c,e.kind=d?"mapping":"sequence",e.result=a,!0;n?C===44&&Pe(e,"expected the node content, but found ','"):Pe(e,"missed comma between flow collection entries"),h=g=w=null,f=m=!1,C===63&&(l=e.input.charCodeAt(e.position+1),To(l)&&(f=m=!0,e.position++,bn(e,!0,t))),r=e.line,o=e.lineStart,i=e.position,hp(e,t,XS,!1,!0),h=e.tag,g=e.result,bn(e,!0,t),C=e.input.charCodeAt(e.position),(m||e.line===r)&&C===58&&(f=!0,C=e.input.charCodeAt(++e.position),bn(e,!0,t),hp(e,t,XS,!1,!0),w=e.result),d?pp(e,a,p,h,g,w,r,o,i):f?a.push(pp(e,null,p,h,g,w,r,o,i)):a.push(g),bn(e,!0,t),C=e.input.charCodeAt(e.position),C===44?(n=!0,C=e.input.charCodeAt(++e.position)):n=!1}Pe(e,"unexpected end of the stream within a flow collection")}function Foe(e,t){var n,r,o=XT,i=!1,s=!1,a=t,c=0,l=!1,u,f;if(f=e.input.charCodeAt(e.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)XT===o?o=f===43?HW:Soe:Pe(e,"repeat of a chomping mode identifier");else if((u=boe(f))>=0)u===0?Pe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Pe(e,"repeat of an indentation width identifier"):(a=t+u-1,s=!0);else break;if(Of(f)){do f=e.input.charCodeAt(++e.position);while(Of(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ks(f)&&f!==0)}for(;f!==0;){for(ok(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Ks(f)){c++;continue}if(e.lineIndent<a){o===HW?e.result+=Vn.repeat(`
`,i?1+c:c):o===XT&&i&&(e.result+=`
`);break}for(r?Of(f)?(l=!0,e.result+=Vn.repeat(`
`,i?1+c:c)):l?(l=!1,e.result+=Vn.repeat(`
`,c+1)):c===0?i&&(e.result+=" "):e.result+=Vn.repeat(`
`,c):e.result+=Vn.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,n=e.position;!Ks(f)&&f!==0;)f=e.input.charCodeAt(++e.position);kl(e,n,e.position,!1)}return!0}function YW(e,t){var n,r=e.tag,o=e.anchor,i=[],s,a=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Pe(e,"tab characters must not be used in indentation")),!(c!==45||(s=e.input.charCodeAt(e.position+1),!To(s))));){if(a=!0,e.position++,bn(e,!0,-1)&&e.lineIndent<=t){i.push(null),c=e.input.charCodeAt(e.position);continue}if(n=e.line,hp(e,t,sj,!1,!0),i.push(e.result),bn(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&c!==0)Pe(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=r,e.anchor=o,e.kind="sequence",e.result=i,!0):!1}function Ooe(e,t,n){var r,o,i,s,a,c,l=e.tag,u=e.anchor,f={},m=Object.create(null),d=null,p=null,g=null,h=!1,w=!1,C;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),C=e.input.charCodeAt(e.position);C!==0;){if(!h&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Pe(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),i=e.line,(C===63||C===58)&&To(r))C===63?(h&&(pp(e,f,m,d,p,null,s,a,c),d=p=g=null),w=!0,h=!0,o=!0):h?(h=!1,o=!0):Pe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,C=r;else{if(s=e.line,a=e.lineStart,c=e.position,!hp(e,n,ij,!1,!0))break;if(e.line===i){for(C=e.input.charCodeAt(e.position);Of(C);)C=e.input.charCodeAt(++e.position);if(C===58)C=e.input.charCodeAt(++e.position),To(C)||Pe(e,"a whitespace character is expected after the key-value separator within a block mapping"),h&&(pp(e,f,m,d,p,null,s,a,c),d=p=g=null),w=!0,h=!1,o=!1,d=e.tag,p=e.result;else if(w)Pe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=l,e.anchor=u,!0}else if(w)Pe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=l,e.anchor=u,!0}if((e.line===i||e.lineIndent>t)&&(h&&(s=e.line,a=e.lineStart,c=e.position),hp(e,t,ZS,!0,o)&&(h?p=e.result:g=e.result),h||(pp(e,f,m,d,p,g,s,a,c),d=p=g=null),bn(e,!0,-1),C=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&C!==0)Pe(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return h&&pp(e,f,m,d,p,null,s,a,c),w&&(e.tag=l,e.anchor=u,e.kind="mapping",e.result=f),w}function Uoe(e){var t,n=!1,r=!1,o,i,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&Pe(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(r=!0,o="!!",s=e.input.charCodeAt(++e.position)):o="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(i=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Pe(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!To(s);)s===33&&(r?Pe(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),aj.test(o)||Pe(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),Doe.test(i)&&Pe(e,"tag suffix cannot contain flow indicator characters")}i&&!cj.test(i)&&Pe(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Pe(e,"tag name is malformed: "+i)}return n?e.tag=i:Rl.call(e.tagMap,o)?e.tag=e.tagMap[o]+i:o==="!"?e.tag="!"+i:o==="!!"?e.tag="tag:yaml.org,2002:"+i:Pe(e,'undeclared tag handle "'+o+'"'),!0}function $oe(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&Pe(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!To(n)&&!mp(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Pe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Moe(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!To(r)&&!mp(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Pe(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Rl.call(e.anchorMap,n)||Pe(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],bn(e,!0,-1),!0}function hp(e,t,n,r,o){var i,s,a,c=1,l=!1,u=!1,f,m,d,p,g,h;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=s=a=ZS===n||sj===n,r&&bn(e,!0,-1)&&(l=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;Uoe(e)||$oe(e);)bn(e,!0,-1)?(l=!0,a=i,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=l||o),(c===1||ZS===n)&&(XS===n||ij===n?g=t:g=t+1,h=e.position-e.lineStart,c===1?a&&(YW(e,h)||Ooe(e,h,g))||Aoe(e,g)?u=!0:(s&&Foe(e,g)||Noe(e,g)||Loe(e,g)?u=!0:Moe(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&Pe(e,"alias node should not have any properties")):Roe(e,g,XS===n)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(u=a&&YW(e,h))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Pe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,m=e.implicitTypes.length;f<m;f+=1)if(p=e.implicitTypes[f],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Rl.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,d=e.typeMap.multi[e.kind||"fallback"],f=0,m=d.length;f<m;f+=1)if(e.tag.slice(0,d[f].tag.length)===d[f].tag){p=d[f];break}p||Pe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&Pe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Pe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function Hoe(e){var t=e.position,n,r,o,i=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(bn(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(i=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!To(s);)s=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),o=[],r.length<1&&Pe(e,"directive name must not be less than one character in length");s!==0;){for(;Of(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Ks(s));break}if(Ks(s))break;for(n=e.position;s!==0&&!To(s);)s=e.input.charCodeAt(++e.position);o.push(e.input.slice(n,e.position))}s!==0&&ok(e),Rl.call(jW,r)?jW[r](e,r,o):QS(e,'unknown document directive "'+r+'"')}if(bn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,bn(e,!0,-1)):i&&Pe(e,"directives end mark is expected"),hp(e,e.lineIndent-1,ZS,!1,!0),bn(e,!0,-1),e.checkLineBreaks&&_oe.test(e.input.slice(t,e.position))&&QS(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&nx(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,bn(e,!0,-1));return}if(e.position<e.length-1)Pe(e,"end of the stream or a document separator is expected");else return}function mj(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new koe(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,Pe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Hoe(n);return n.documents}function Boe(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=mj(e,n);if(typeof t!="function")return r;for(var o=0,i=r.length;o<i;o+=1)t(r[o])}function Woe(e,t){var n=mj(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new bo("expected a single document in the stream, but found more")}}var joe=Boe,Voe=Woe,pj={loadAll:joe,load:Voe},hj=Object.prototype.toString,gj=Object.prototype.hasOwnProperty,sk=65279,Yoe=9,Ov=10,Goe=13,qoe=32,zoe=33,Koe=34,QT=35,Joe=37,Xoe=38,Zoe=39,Qoe=42,vj=44,eie=45,ex=58,tie=61,nie=62,rie=63,oie=64,wj=91,yj=93,iie=96,Cj=123,sie=124,Ej=125,Wr={};Wr[0]="\\0";Wr[7]="\\a";Wr[8]="\\b";Wr[9]="\\t";Wr[10]="\\n";Wr[11]="\\v";Wr[12]="\\f";Wr[13]="\\r";Wr[27]="\\e";Wr[34]='\\"';Wr[92]="\\\\";Wr[133]="\\N";Wr[160]="\\_";Wr[8232]="\\L";Wr[8233]="\\P";var aie=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],cie=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function lie(e,t){var n,r,o,i,s,a,c;if(t===null)return{};for(n={},r=Object.keys(t),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=e.compiledTypeMap.fallback[s],c&&gj.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[s]=a;return n}function uie(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new bo("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Vn.repeat("0",r-t.length)+t}var fie=1,Uv=2;function die(e){this.schema=e.schema||oj,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Vn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=lie(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Uv:fie,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function GW(e,t){for(var n=Vn.repeat(" ",t),r=0,o=-1,i="",s,a=e.length;r<a;)o=e.indexOf(`
`,r),o===-1?(s=e.slice(r),r=a):(s=e.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=n),i+=s;return i}function ek(e,t){return`
`+Vn.repeat(" ",e.indent*t)}function mie(e,t){var n,r,o;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(o=e.implicitTypes[n],o.resolve(t))return!0;return!1}function tx(e){return e===qoe||e===Yoe}function $v(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==sk||65536<=e&&e<=1114111}function qW(e){return $v(e)&&e!==sk&&e!==Goe&&e!==Ov}function zW(e,t,n){var r=qW(e),o=r&&!tx(e);return(n?r:r&&e!==vj&&e!==wj&&e!==yj&&e!==Cj&&e!==Ej)&&e!==QT&&!(t===ex&&!o)||qW(t)&&!tx(t)&&e===QT||t===ex&&o}function pie(e){return $v(e)&&e!==sk&&!tx(e)&&e!==eie&&e!==rie&&e!==ex&&e!==vj&&e!==wj&&e!==yj&&e!==Cj&&e!==Ej&&e!==QT&&e!==Xoe&&e!==Qoe&&e!==zoe&&e!==sie&&e!==tie&&e!==nie&&e!==Zoe&&e!==Koe&&e!==Joe&&e!==oie&&e!==iie}function hie(e){return!tx(e)&&e!==ex}function Av(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function Sj(e){var t=/^\n* /;return t.test(e)}var xj=1,tk=2,_j=3,Dj=4,dp=5;function gie(e,t,n,r,o,i,s,a){var c,l=0,u=null,f=!1,m=!1,d=r!==-1,p=-1,g=pie(Av(e,0))&&hie(Av(e,e.length-1));if(t||s)for(c=0;c<e.length;l>=65536?c+=2:c++){if(l=Av(e,c),!$v(l))return dp;g=g&&zW(l,u,a),u=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if(l=Av(e,c),l===Ov)f=!0,d&&(m=m||c-p-1>r&&e[p+1]!==" ",p=c);else if(!$v(l))return dp;g=g&&zW(l,u,a),u=l}m=m||d&&c-p-1>r&&e[p+1]!==" "}return!f&&!m?g&&!s&&!o(e)?xj:i===Uv?dp:tk:n>9&&Sj(e)?dp:s?i===Uv?dp:tk:m?Dj:_j}function vie(e,t,n,r,o){e.dump=(function(){if(t.length===0)return e.quotingType===Uv?'""':"''";if(!e.noCompatMode&&(aie.indexOf(t)!==-1||cie.test(t)))return e.quotingType===Uv?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=r||e.flowLevel>-1&&n>=e.flowLevel;function c(l){return mie(e,l)}switch(gie(t,a,e.indent,s,c,e.quotingType,e.forceQuotes&&!r,o)){case xj:return t;case tk:return"'"+t.replace(/'/g,"''")+"'";case _j:return"|"+KW(t,e.indent)+JW(GW(t,i));case Dj:return">"+KW(t,e.indent)+JW(GW(wie(t,s),i));case dp:return'"'+yie(t)+'"';default:throw new bo("impossible error: invalid scalar style")}})()}function KW(e,t){var n=Sj(e)?String(t):"",r=e[e.length-1]===`
`,o=r&&(e[e.length-2]===`
`||e===`
`),i=o?"+":r?"":"-";return n+i+`
`}function JW(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function wie(e,t){for(var n=/(\n+)([^\n]*)/g,r=(function(){var l=e.indexOf(`
`);return l=l!==-1?l:e.length,n.lastIndex=l,XW(e.slice(0,l),t)})(),o=e[0]===`
`||e[0]===" ",i,s;s=n.exec(e);){var a=s[1],c=s[2];i=c[0]===" ",r+=a+(!o&&!i&&c!==""?`
`:"")+XW(c,t),o=i}return r}function XW(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,o=0,i,s=0,a=0,c="";r=n.exec(e);)a=r.index,a-o>t&&(i=s>o?s:a,c+=`
`+e.slice(o,i),o=i+1),s=a;return c+=`
`,e.length-o>t&&s>o?c+=e.slice(o,s)+`
`+e.slice(s+1):c+=e.slice(o),c.slice(1)}function yie(e){for(var t="",n=0,r,o=0;o<e.length;n>=65536?o+=2:o++)n=Av(e,o),r=Wr[n],!r&&$v(n)?(t+=e[o],n>=65536&&(t+=e[o+1])):t+=r||uie(n);return t}function Cie(e,t,n){var r="",o=e.tag,i,s,a;for(i=0,s=n.length;i<s;i+=1)a=n[i],e.replacer&&(a=e.replacer.call(n,String(i),a)),(Za(e,t,a,!1,!1)||typeof a>"u"&&Za(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=o,e.dump="["+r+"]"}function ZW(e,t,n,r){var o="",i=e.tag,s,a,c;for(s=0,a=n.length;s<a;s+=1)c=n[s],e.replacer&&(c=e.replacer.call(n,String(s),c)),(Za(e,t+1,c,!0,!0,!1,!0)||typeof c>"u"&&Za(e,t+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=ek(e,t)),e.dump&&Ov===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=i,e.dump=o||"[]"}function Eie(e,t,n){var r="",o=e.tag,i=Object.keys(n),s,a,c,l,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),e.condenseFlow&&(u+='"'),c=i[s],l=n[c],e.replacer&&(l=e.replacer.call(n,c,l)),Za(e,t,c,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Za(e,t,l,!1,!1)&&(u+=e.dump,r+=u));e.tag=o,e.dump="{"+r+"}"}function Sie(e,t,n,r){var o="",i=e.tag,s=Object.keys(n),a,c,l,u,f,m;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new bo("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)m="",(!r||o!=="")&&(m+=ek(e,t)),l=s[a],u=n[l],e.replacer&&(u=e.replacer.call(n,l,u)),Za(e,t+1,l,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Ov===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,f&&(m+=ek(e,t)),Za(e,t+1,u,!0,f)&&(e.dump&&Ov===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,o+=m));e.tag=i,e.dump=o||"{}"}function QW(e,t,n){var r,o,i,s,a,c;for(o=n?e.explicitTypes:e.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,hj.call(a.represent)==="[object Function]")r=a.represent(t,c);else if(gj.call(a.represent,c))r=a.represent[c](t,c);else throw new bo("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=r}return!0}return!1}function Za(e,t,n,r,o,i,s){e.tag=null,e.dump=n,QW(e,n,!1)||QW(e,n,!0);var a=hj.call(e.dump),c=r,l;r&&(r=e.flowLevel<0||e.flowLevel>t);var u=a==="[object Object]"||a==="[object Array]",f,m;if(u&&(f=e.duplicates.indexOf(n),m=f!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(o=!1),m&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(u&&m&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(e.dump).length!==0?(Sie(e,t,e.dump,o),m&&(e.dump="&ref_"+f+e.dump)):(Eie(e,t,e.dump),m&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?ZW(e,t-1,e.dump,o):ZW(e,t,e.dump,o),m&&(e.dump="&ref_"+f+e.dump)):(Cie(e,t,e.dump),m&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&vie(e,e.dump,t,i,c);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new bo("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(l=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",e.dump=l+" "+e.dump)}return!0}function xie(e,t){var n=[],r=[],o,i;for(nk(e,n,r),o=0,i=r.length;o<i;o+=1)t.duplicates.push(n[r[o]]);t.usedDuplicates=new Array(i)}function nk(e,t,n){var r,o,i;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(t.push(e),Array.isArray(e))for(o=0,i=e.length;o<i;o+=1)nk(e[o],t,n);else for(r=Object.keys(e),o=0,i=r.length;o<i;o+=1)nk(e[r[o]],t,n)}function _ie(e,t){t=t||{};var n=new die(t);n.noRefs||xie(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Za(n,0,r,!0,!0)?n.dump+`
`:""}var Die=_ie,Iie={dump:Die};function ak(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Mv=pj.load,gEe=pj.loadAll,vEe=Iie.dump;var wEe=ak("safeLoad","load"),yEe=ak("safeLoadAll","loadAll"),CEe=ak("safeDump","dump");var ms=W(require("path")),Rj=W(require("os")),Nj=W(require("crypto"));var Hv=W(require("path")),bj=W(require("os"));var Pj=W(require("crypto"));var ds={async readDocument(e){switch(e.scheme){case"file":try{return(await ct(e.fsPath)).toString()}catch(t){if(t&&t.code==="ENOENT")return;throw t}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}},async applyEdits(e,t,n){switch(e.scheme){case"file":let r=Eo(n,t);await pg(e.fsPath,r);break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Je=class e{constructor(t,n=e.scheme){this.fileHost=t;this.scheme=n}static scheme="vscode-fileHost";async readDocument(t){switch(t.scheme){case this.scheme:try{return(await this.fileHost.readFile(_e(t,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,n,r){switch(t.scheme){case this.scheme:let o=Eo(r,n);await this.fileHost.writeFile(_e(t,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},ro=class e{constructor(t){this.shellServer=t}static scheme="vscode-remote";static nonce;async readDocument(t){switch(t.scheme){case e.scheme:try{let{stdout:n}=await this.shellServer.exec(`cat ${t.path}`);return n}catch{return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,n,r){switch(t.scheme){case e.scheme:try{e.nonce||(e.nonce=Pj.randomUUID());let o=Eo(r,n),i=`EOF-${e.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${t.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},lk=class{constructor(t){this.documents=t}async readDocument(t){let n=this.documents[t.scheme];if(!n)throw new Error(`Unsupported scheme: ${t.toString()}`);return n.readDocument(t)}async applyEdits(t,n,r){let o=this.documents[t.scheme];if(!o)throw new Error(`Unsupported scheme: ${t.toString()}`);return o.applyEdits(t,n,r)}};function ar(e,t){let n={file:ds,[Je.scheme]:new Je(e)};return t&&(n[ro.scheme]="readFile"in t?new Je(t,ro.scheme):new ro(t)),new lk(n)}var ck=new Map;async function uk(e,t){let n=e.toString(),r=ck.get(n);if(r||ck.set(n,r=[]),r.push(t),r.length===1){for(;r.length;)await r[0](),r.shift();ck.delete(n)}}function _e(e,t){let n;return e.authority&&e.path.length>1&&(e.scheme==="file"||e.scheme===Je.scheme)?n=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?n=e.path[1].toLowerCase()+e.path.substr(2):n=e.path,t==="win32"&&(n=n.replace(/\//g,"\\"),n[0]==="\\"&&n[1]!=="\\"&&(n=`C:${n}`)),n}function Tn(e,t,n){let r=e==="win32"?"/"+n.replace(/\\/g,"/"):n;return t.with({path:r})}function Nl(e,t){return[e.join(t,".devcontainer","devcontainer.json"),e.join(t,".devcontainer.json")]}function Bv(e,t){let n=e.normalize(t);return Nl(e,"").includes(n)}async function Uf(e,t){let n=Nl(e.path,t);for(let r of n)if(await e.isFile(r))return Ce.file(r).with({scheme:Je.scheme})}async function Tj(e){let t=Nl(Hv,e);for(let n of t)if(await vr(n))return n}var Qa=`{${bj.EOL}}`;async function ki(e,t,n,r){t.scheme==="file"&&await Ki(Hv.dirname(t.fsPath)),await e.applyEdits(t,n,r)}function $f(e){let t=Hv.posix.dirname(e.path);return e.with({path:t})}var Wv=require("string_decoder");function jv(e){if(!(e.extensions||e.settings||e.devPort!==void 0))return e;let t={...e},n=t.customizations||(t.customizations={}),r=n.vscode||(n.vscode={});return t.extensions&&(r.extensions=(r.extensions||[]).concat(t.extensions),delete t.extensions),t.settings&&(r.settings={...t.settings,...r.settings||{}},delete t.settings),t.devPort!==void 0&&r.devPort===void 0&&(r.devPort=t.devPort,delete t.devPort),t}function fk(e,t,n){return rx(e,t.configFilePath,n)}function rx(e,t,n){let r=$f(t);return t.with({path:ms.posix.resolve(r.path,e.platform==="win32"&&t.scheme!==ro.scheme?(ms.win32.isAbsolute(n)?"/":"")+n.replace(/\\/g,"/"):n)})}function ko(e){return"dockerFile"in e||"build"in e&&"dockerfile"in e.build}function ox(e){return e&&(ko(e)||"image"in e||"dockerComposeFile"in e)}function Mf(e,t){return fk(e,t,bie(t))}function bie(e){return"dockerFile"in e?e.dockerFile:e.build.dockerfile}async function Ll(e,t,n,r){if(Array.isArray(t.dockerComposeFile)){if(t.dockerComposeFile.length)return t.dockerComposeFile.map(o=>_e(fk(e,t,o),e.platform))}else if(typeof t.dockerComposeFile=="string")return[_e(fk(e,t,t.dockerComposeFile),e.platform)];if(r){let o=n==null?void 0:n.COMPOSE_FILE;if(o)return o.split(e.path.delimiter).map(a=>e.path.resolve(r,a));try{let a=e.path.join(r,".env"),c=await e.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(e.path.delimiter).map(f=>e.path.resolve(r,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[e.path.resolve(r,"docker-compose.yml")],s=e.path.resolve(r,"docker-compose.override.yml");return await e.isFile(s)&&i.push(s),i}return[]}async function Qo(e,t){let{cliHost:n,postCreate:r,output:o}=e;o.write(`Running Dev Containers CLI:   ${t.join(" ")}
`);let i=await Tie(e),s=Vv(n),a;try{await kie({exec:n.exec,cwd:e.cwd||i.cwd,cmd:s.cmd,args:[...s.args,i.script,...t],env:await dk(e,s.cmd),stdin:r==null?void 0:r.onDidInput,output:o,stdoutData:c=>a=c,stderrData:c=>o.event(c)}),o.write(a?JSON.stringify(a,void 0,4):"(No dev container CLI standard out)",1),o.write("Dev Containers CLI completed",1)}catch(c){throw c.data=a,c}return a}async function Tie(e){let{cliHost:t,extensionPath:n,output:r}=e,o=ms.join(n,"dist","spec-node","devContainersSpecCLI.js"),i=t.type==="local"?n:t.path.join(await t.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${e.package.version}`),s=t.type==="local"?o:t.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","remote"].indexOf(t.type)!==-1){let a="Checking for Dev Containers CLI",c=r.start(a),l=await t.isFile(s);if(r.stop(a,c),!l){let u="Copying Dev Containers CLI",f=r.start(u),m=`${i}-${Nj.randomUUID()}`,d=t.path.join(m,"dist","spec-node","devContainersSpecCLI.js");await t.mkdirp(t.path.dirname(d)),await Promise.all([kj(ms.join(n,"package.json"),t,t.path.join(m,"package.json")),kj(o,t,d),Yv(ms.join(n,"scripts"),t,t.path.join(m,"scripts"),r)]),await t.rename(m,i),r.stop(u,f)}}return{cwd:i,script:s}}function Vv(e){if(e.type==="local")return Cl?{cmd:process.argv[0],args:[]}:{cmd:process.argv[0],args:[]};if(e.nodeExecutable)return{cmd:e.nodeExecutable,args:[]};throw new Error("Node executable required")}async function kie(e){let{exec:t,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:l}=e,u=await t({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((f,m)=>{let d=new Wv.StringDecoder,p="";u.stdout.on("data",C=>{p+=d.write(C);let v=p.split(`
`);p=v.pop();for(let y of v)if(y.trim())try{c(JSON.parse(y))}catch{a.write(y)}}),u.stdout.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let g=new Wv.StringDecoder,h="";u.stderr.on("data",C=>{h+=g.write(C);let v=h.split(`
`);h=v.pop();for(let y of v)if(y.trim())try{l(JSON.parse(y))}catch{a.write(y)}}),u.stderr.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let w=[];u.exit.then(({code:C})=>{try{w.forEach(v=>v.dispose()),C?(a.write(`Exit code ${C}`),m({message:`Command failed: ${n} ${(r||[]).join(" ")}`,code:C})):f()}catch(v){m(v)}},m),typeof s=="function"&&w.push(s(C=>u.stdin.write(C)))})}async function dk(e,t){let{cliHost:n,env:r,appRoot:o}=e,i=await n.locateCertificatesFile();return{...r,...n.type==="local"?o?{NODE_PATH:`${n.path.join(o,"node_modules.asar")}${ms.delimiter}${n.path.join(o,"node_modules")}`}:void 0:n.type==="container"?void 0:{NODE_PATH:n.path.join(n.path.dirname(t),"node_modules")},...i?{NODE_EXTRA_CA_CERTS:i}:{},...Cl?{TS_NODE_PROJECT:void 0}:{}}}async function kj(e,t,n){await t.writeFile(n,await ct(e))}async function Yv(e,t,n,r){await t.mkdirp(n);let o=Mg({cwd:e,filter:l=>(console.log(l),!0)},["."]),i=new Promise((l,u)=>{o.on("error",u),o.on("finish",l)}),s=await t.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:n,output:r}),a=new Wv.StringDecoder;s.stdout.on("data",l=>{r.write(a.write(l))});let c=new Wv.StringDecoder;s.stderr.on("data",l=>{r.write(it(c.write(l)))}),o.pipe(s.stdin),await Promise.all([s.exit,i])}async function Cr(){return ms.join(Rj.tmpdir(),process.platform==="linux"?`vsch-${await kS()}`:"vsch")}function Rie(){return{contentHashes:{}}}async function sx(e,t,n,r){let o=e.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await mk(t,n,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(d=>u.delete(d));let f=new Set(s);l.forEach(d=>f.delete(d));let m=[];for(let d of s)d in c&&c[d]!==i[d]&&m.push(d);if(u.size||f.size||m.length){let d=await mk(t,n,r);(async()=>{await e.containerOutdated([...u,...f,...m].sort())==="ignore"&&await e.updateConfigurationState(d)})().catch(console.error)}}else await Aj(e,t,n,r)}async function ax(e,t,n,r,o){let i="Updating configuration state",s=o.start(i);await Aj(e,t,n,r),o.stop(i,s)}async function Aj(e,t,n,r){let o=await mk(t,n,r);await e.updateConfigurationState(o)}async function mk(e,t,n){let r=Rie();ix(r,Gv.posix.basename(n.configFilePath.path),JSON.stringify({...n,forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0}));let o=$f(n.configFilePath).path;if(ko(n)){let i=Mf(e,n),s=await t.readDocument(i);s!==void 0&&ix(r,Gv.posix.relative(o,i.path),s)}if("dockerComposeFile"in n){let i=await Ll(e,n,e.env,e.cwd),s=await Promise.all(i.map(async a=>{let c=Ce.file(a).with({scheme:Je.scheme});return{uri:c,content:await t.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&ix(r,Gv.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=Nie(l),f=u&&u.services,m=f&&f[n.service],d=m&&m.build,p=d&&(typeof d=="string"?d:d.context);if(p){let g=rx(e,c,p),h=Fj(g,d.dockerfile||"Dockerfile"),w=await t.readDocument(h);w!==void 0&&ix(r,Gv.posix.relative(o,h.path),w)}if(m&&(m.image||m.build))break}}}return r}function Nie(e){try{return Mv(e)}catch{return{}}}function ix(e,t,n){let r=Lj.createHash("sha256").update(n).digest("hex");e.contentHashes[t]=r}var vs=W(require("path")),Qs=W(require("crypto"));var Ml=W(Ar());var jr=W(require("path")),Sk=W(require("crypto"));var Bf=W(Ar());var Hj=W(require("net")),wk=W(require("path"));var pk=W(require("path")),gk=W(require("http")),Oj=W(require("os")),Uj=W(require("crypto"));async function $j(e,t){let n=await vk(e),r=new hk(n,t);return r.listen(),r}var hk=class{constructor(t,n){this.ipcHandlePath=t;this.server=gk.createServer((r,o)=>{Promise.resolve(n(r,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",r=>console.error(r))}server;listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function Mj(e){return new Promise((t,n)=>{let r=[];e.setEncoding("utf8"),e.on("data",o=>r.push(o)),e.on("error",o=>n(o)),e.on("end",()=>{let o=JSON.parse(r.join(""));t(o)})})}async function vk(e){let t=Uj.randomUUID(),n=`${e}-${t}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?pk.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):pk.join(Oj.tmpdir(),`${n}.sock`)}var cx=class{messages=[];dequeueRequest;push(t){this.messages.push(t),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(t){if(this.messages.length){let n=this.messages;return this.messages=[],n}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((n,r)=>{this.dequeueRequest={resolve:n,reject:r},typeof t=="number"&&setTimeout(r,t)})}};async function Al(e,t,n){if(process.env.SSH_ASKPASS)return{};let r=await vk("ssh-askpass");return await new Promise((o,i)=>{Hj.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{n.write(`SSH askpass request: ${a}`,1);let l=await t(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(r,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:wk.join(e,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_MAIN:wk.join(e,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var Lie=0;function cr(e){return e.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++Lie)}:{}}async function ei(e,t){return(await ps(e,[t]))[0]}async function ps(e,t){let n=await ux(e,"container",t);for(let r of n){r.Ports=[];let o=r.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:l,HostPort:u}=c;r.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return n}async function Bj(e,t){return(await ux(e,"image",[t]))[0]}async function lx(e,t){return(await ux(e,"volume",[t]))[0]}async function Hf(e,t){return ux(e,"volume",t)}async function ux(e,t,n){if(!n.length)return[];let r=Ni(e),o=await X({...r,args:(r.args||[]).concat(["inspect","--type",t,...n])});try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function Fl(e,t=!1,n=[]){let r=[];t&&r.push("-a");for(let i of n)r.push("--filter",`label=${i}`);return(await tt(e,"ps","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Ro(e,t=[]){let n=[];for(let o of t)n.push("--filter",`label=${o}`);return(await tt(e,"volume","ls","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function Ol(e,t=[]){return(await tt(e,"volume","ls","-q","-f","dangling=true",...t.map(r=>["-f",`label=${r}`]).flat())).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function gp(e,t,n){let r=[];for(let o of n||[])r.push("--label",o);await tt(e,"volume","create",...r,t)}async function Ri(e,t){var o;let n,r;try{for(let i=0,s=7;i<s;i++)try{return await tt(e,"rm","-f",t)}catch(a){let c=((o=a==null?void 0:a.stderr)==null?void 0:o.toString().toLowerCase())||"";if(i===s-1||!c.includes("already in progress"))throw a;r||(n=await fx(e,{container:[t],event:["destroy"]}),r=new Promise(l=>{n.stdout.on("data",()=>{l(),n.terminate(),r=new Promise(()=>{})})})),await Promise.race([r,Bt(1e3)])}}finally{n&&n.terminate()}throw new Error("Unreachable")}async function fx(e,t){let{exec:n,cmd:r,args:o,env:i,output:s}=Ni(e),a=[];for(let m in t)for(let d of t[m])a.push("--filter",`${m}=${d}`);let c="isPodman"in e&&e.isPodman?"json":"{{json .}}",l=(o||[]).concat(["events","--format",c,...a]),u=await n({cmd:r,args:l,env:i,output:s}),f=[];return u.stderr.on("data",m=>f.push(m)),u.exit.then(({code:m,signal:d})=>{f.length&&s.write(it(Buffer.concat(f).toString())),(m||d&&d!=="SIGKILL")&&s.write(it(`Docker events terminated (code: ${m}, signal: ${d}).`))},m=>{s.write(it(m&&(m.stack||m.message)))}),u}async function tt(e,...t){let n=Ni(e);return X({...n,args:(n.args||[]).concat(t)})}async function yk(e){var t;try{let{stdout:n}=await tt(e,"context","ls","--format","{{json .}}"),r=`[${n.toString().trim().split(/\r?\n/).join(",")}]`;return(t=JSON.parse(r).find(s=>s.Current))==null?void 0:t.Name}catch{return}}async function Wj(e){try{let{stdout:t}=await tt(e,"-v");return t.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function jj(e,...t){let n=Gj(e);return Ii({...n,args:(n.args||[]).concat(t)})}async function qv(e,...t){let n=Ni(e,"dockerComposeCLI"in e?await e.dockerComposeCLI():void 0);return X({...n,args:(n.args||[]).concat(t)})}function hs(e,t,n){return async function(r){let{exec:o,cmd:i,args:s,env:a}=Ni(e),{argsPrefix:c,args:l}=Yj(t,n,r,!1);return o({cmd:i,args:(s||[]).concat(l),env:a,output:Vj(r.output,i,c)})}}async function Js(e,t,n,r){if(!await r("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:l}=Gj(e),{argsPrefix:u,args:f}=Yj(t,n,i,s.isTTY!==!1);return s({cmd:a,args:(c||[]).concat(f),env:l,output:Vj(i.output,a,u)})}}function Vj(e,t,n){return Aie(e,`Run: ${t} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function Aie(e,t,n){let r=new RegExp(Nf(t),"g");return on({...e,get dimensions(){return e.dimensions},event:i=>e.event("text"in i?{...i,text:i.text.replace(r,n)}:i)})}function Yj(e,t,n,r){let{env:o,cwd:i,cmd:s,args:a}=n,c=["exec","-i"];r&&c.push("-t"),t&&c.push("-u",t),o&&Object.keys(o).forEach(u=>c.push("-e",`${u}=${o[u]}`)),i&&c.push("-w",i),c.push(e);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function Ni(e,t){return"dockerEnv"in e?{exec:e.common.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.dockerEnv,...cr(e.dockerEnv)},output:e.common.output}:"cliHost"in e?{exec:e.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.env,...cr(e.env)},output:e.output}:{...e,env:{...e.env,...cr(e.env)}}}function Gj(e,t){return"dockerEnv"in e?{ptyExec:e.common.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.dockerEnv,...cr(e.dockerEnv)},output:e.common.output}:"cliHost"in e?{ptyExec:e.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.env,...cr(e.env)},output:e.output}:{...e,env:{...e.env,...cr(e.env)}}}var qj=W(Ar()),Fie="com.docker.compose.project";async function zj(e,t,n,r,o,i,s,a,c,l,u,f,m,d){var w,C;let{common:p}=e,{cliHost:g}=t,h;try{let v=await Ll(g,n,g.env,g.cwd),y=g.path.join(g.cwd,".env"),S=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await g.isFile(y)?y:void 0,I=!c,_=r.remoteUser,A=Oie(n);h=await wp(e,s.Id,A,_),u&&c&&h.user!=="root"&&(h.launchRootShellServer?await JS(h,h.launchRootShellServer,A,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let U=await mx(p,c,s,A,h),R=ar(g,h.shellServer);I||await ax(e.configurationTracking,g,R,n,p.output);let E=r.shutdownAction;E==="stopContainer"&&(E="stopCompose");let x={cwd:o,dockerCLI:e.dockerCLI,dockerComposeCLI:await e.dockerComposeCLI(),env:p.env,containerId:s.Id,user:h.user,sessionId:p.sessionId,shutdownAction:E,projectName:zv(s),composeFiles:v,envFile:S,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:b,doneWithDocuments:D}=await dx(e,g,R,"dockerCompose",x,I?n:void 0);p.backgroundTasks.push(D);let T=((C=(((w=r.customizations)==null?void 0:w.vscode)||[]).slice().reverse().find(z=>typeof z.devPort=="number"))==null?void 0:C.devPort)||bl,{hostOrContainerPort:k,hostPortServer:L,connectionToken:N,remoteEnv:H,serverDownloaded:B}=await Tl(p,h,n,r,T,yp(e,t,h,i,f,s.Id,a,m,d),U);return b.hostPortServer=L,{params:p,properties:h,config:n,resolvedAuthority:{host:ec,port:k,connectionToken:N,extensionHostEnv:H},tunnelInformation:p.isLocalContainer?vp(s):{},dockerParams:e,dockerContainerId:s.Id,serverDownloaded:B}}catch(v){let y=v instanceof pe?v:new pe({description:qj.t("An error occurred setting up the container."),originalError:v});throw s&&(y.manageContainer=!0,y.params=e.common,y.containerId=s.Id,y.dockerParams=e),h&&(y.containerProperties=h),y.config=n,y}}function Oie(e){return e.workspaceFolder||"/"}function zv(e){let t=(e.Config.Labels||{})[Fie];return t||void 0}function gs(e,t,n){let r;return()=>r||(r=(async()=>{let o=!0,i;try{i=(await qv({...e,cmd:t},"compose","version","--short")).stdout}catch{i=(await qv({...e,cmd:n},"version","--short")).stdout,o=!1}let s=i.toString().trim();return e.output.write(`Docker Compose version: ${s}`),{version:s,cmd:o?t:n,args:o?["compose"]:[]}})())}var Kv=W(Ar());var px=W(kC()),Kj=W(require("url"));function hx(e,t){return new Promise((n,r)=>{let o=new Kj.URL(e.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:e.type,headers:e.headers},s=(o.protocol==="https:"?px.https:px.http).request(i,a=>{if(a.statusCode<200||a.statusCode>299)r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),t&&t.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,5);else{a.on("error",r);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>n(Buffer.concat(c)))}});s.on("error",r),e.data&&s.write(e.data),s.end()})}async function Cp(e,t,n,r){var c;let o=await Mie(t,e.output),i=Object.keys(n.features||{}).map(l=>{let u=Uie(o,l);return u?{configFeatureId:l,disallowedFeatureEntry:u}:void 0}).filter(Boolean);if(!i.length)return;let s=!1;if(r){let l=await Ul(e,r);((c=l==null?void 0:l.State)==null?void 0:c.Status)==="running"&&(await tt(e,"stop","-t","0",l.Id),s=!0)}let a=i[0];throw Ck(a.configFeatureId,a.disallowedFeatureEntry.documentationURL,s)}function Ck(e,t,n){return new pe({description:n?Kv.t("Cannot use the '{0}' feature since it was reported to be problematic. The existing dev container was stopped.",e):Kv.t("Cannot use the '{0}' feature since it was reported to be problematic.",e),detail:Kv.t("Please remove this feature from your devcontainer.json and rebuild the dev container before continuing."),data:{learnMoreUrl:t,reload:!1}})}function Uie(e,t){return e.disallowedFeatures.find(n=>t.startsWith(n.featureIdPrefix)&&(t.length===n.featureIdPrefix.length||"/:@".indexOf(t[n.featureIdPrefix.length])!==-1))}var Jj="devcontainers.controlManifest",$ie=300*1e3;async function Mie(e,t){let n=e.get(Jj);return n&&Date.parse(n.timestamp)+$ie>Date.now()?n.manifest:Hie(e,n==null?void 0:n.manifest,t)}async function Hie(e,t,n){let r;try{r=await Bie()}catch(o){n.write(Kv.t("Failed to fetch control manifest: {0}",o.message)),r=t||{disallowedFeatures:[]}}return e.update(Jj,{timestamp:new Date().toISOString(),manifest:r}),r}async function Bie(){let e=await hx({type:"GET",url:"https://containers.dev/static/devcontainer-control-manifest.json",headers:{"user-agent":"devcontainers-vscode",accept:"application/json"}}),t=$e(e.toString())||{};return Array.isArray(t.disallowedFeatures)?t.disallowedFeatures=t.disallowedFeatures.filter(n=>typeof n.featureIdPrefix=="string"):t.disallowedFeatures=[],t}async function xk(e,t,n,r){if(t&&!/\/\.?devcontainer\.json$/.test(t.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${_e(t,e.common.cliHost.platform)}).`);let o=e.parsedAuthority;if(!o||ln(o))return Wie(e,o,t,n,r);if(oo(o))return o.inspectVolume?Ek(e,o):jie(e,o,t);if(Vf(o))return o.inspectVolume?Ek(e,o):Vie(e,o,t);if(Qv(o))return Ek(e,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function Wie(e,t,n,r,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=e,{cliHost:l,env:u,output:f}=i,m=l.cwd,d=e.originalCwd||m,p=t&&It(l.path,pv(t.hostPath)?l.path.join(m,jr.basename(t.hostPath)):m);t!=null&&t.configFile&&!n&&(n=t.configFile,l.type==="wsl"&&n.scheme==="file"&&(n=Ce.from({scheme:Je.scheme,path:await aV(n,l)})));let g={cliHost:l,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:u,output:f},h=o?void 0:_k(d),w=o||[`${Zv}=${d}`,`${Cx}=${i.product.quality}`];return Dk(e,g,h,w,d,m,n,r,void 0,p,t==null?void 0:t.settings,[],"on")}function _k(e,t){let n=[`${Xv}=${e}`];if(t){let{buildCLIHost:r,configFile:o}=t,i;o.scheme===Je.scheme||o.scheme==="file"&&r.type==="local"?i=_e(o,r.platform):i=o.toString(),n.push(`${Wf}=${i}`)}return n}async function jie(e,t,n){let{repositoryPath:r,volumeName:o,folder:i}=t,s=ni(r);o=await rV(e,s,o);let{labels:a,remoteWorkspaceFolder:c}=oV(s,r,i,o),l=[...a],u=[...a,`${Cx}=${e.common.product.quality}`];t.configFile&&!n&&(n=t.configFile);let{containerId:f,shellServer:m,remoteContainersEnv:d,config:p,preInstalledExtensions:g}=await s.cloneAndInitializeRepository(e,t,s,o,n),h=i?s.workspaceFolder(i):s.fullRepositoryName,w=bk(s,o,i,e.dockerSocketPath);return Xj(e,t,n,p,g,f,m,d,o,h,c,l,u,w)}async function Vie(e,t,n){let{common:r}=e,{extensionPath:o,appRoot:i,loadNativeModule:s,output:a}=r,{volumeName:c,folder:l}=t,u=[`${wx}=${c}`,`${tV}=${l}`],f=u;await kk(e);let m=Tk(c,jf(),e.dockerSocketPath),{stdout:d}=await tt(e,...m),p=d.toString().trim(),g=hs(e,p,"root"),h=await Wt(g,a),w=[],C=Jv(l),v=C,y=await Js(e,p,"root",s),S=to("container",C,{},g,y,()=>{throw new Error("not implemented")},"node",a),{configuration:I}=await gx({cliHost:S,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:o,appRoot:i,package:r.package,output:a},C,n,e.common.getLogLevel(),u,void 0,void 0,e.useExperimentalMountGitWorktreeCommonDir);return Xj(e,t,n,I,w,p,h,{},c,C,v,u,f,m)}async function Xj(e,t,n,r,o,i,s,a,c,l,u,f,m,d){var A,U,R;let p=It(jr.posix,l),g=[`type=volume,source=${c},target=${jr.posix.dirname(p.rootFolderPath)},external=true`],h=await iV(e,i,a,u),w={},{HOME:C,USERPROFILE:v}=e.common.env;C!=null&&C.startsWith("/")&&(w.HOME=C,await s.exec(`test -e "${C}" || (mkdir -p "$(dirname "${C}")" && ln -s ~ "${C}")`)),v!==void 0&&(w.USERPROFILE=v);let y=h.cliHost,S,I,_=ko(r)||"image"in r;if(_||"dockerComposeFile"in r&&r.workspaceFolder||o.length){let E=o.length?{...r.customizations,vscode:{...(A=r.customizations)==null?void 0:A.vscode,extensions:[...((R=(U=r.customizations)==null?void 0:U.vscode)==null?void 0:R.extensions)||[],...o]}}:r.customizations;I=_?T=>({...T,workspaceFolder:void 0,workspaceMount:"",customizations:E}):T=>({...T,workspaceFolder:p.rootFolderPath,customizations:E});let x=y.path.join(await y.tmpdir(),`devcontainer-${Sk.randomUUID()}.json`),b=`EOF-${x}`,D=`${x}_${Date.now()}`;await s.exec(`cat <<'${b}' >${D}
${JSON.stringify({...I(r),configFilePath:void 0})}
${b}
mv ${D} ${x}`),S=Ce.from({scheme:Je.scheme,path:x})}try{return await Dk(e,h,f,m,e.common.cliHost.cwd,y.cwd,n,S,I,p,t.settings,g,"off",d,!0,void 0,w)}finally{Promise.all(e.common.backgroundTasks.filter(E=>typeof E!="function").map(E=>E.catch(()=>{}))).then(()=>Ri(e,i))}}async function Ek(e,t){let{common:n,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i}=e,{cliHost:s,env:a,output:c}=n,{volumeName:l}=t,u,f,m=Qv(t);m?(u=yx,f="Inspect Volume"):(u=ni(t.repositoryPath).volumeDestination,f="Recovery Container");let d=[`${Ep}=${l}`],p=[`${Ep}=${l}`,`${Cx}=${n.product.quality}`],g=await nV(e),h=[`type=volume,source=${l},target=${u},external=true`],w={cliHost:s,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},C=It(s.path,g);return Dk(e,w,d,p,g,g,void 0,void 0,void 0,C,t.settings,h,"never",void 0,!m,f)}async function Dk(e,t,n,r,o,i,s,a,c,l,u,f,m,d,p,g,h){var pt,rt,Dt,Ct;let{common:w,userRepositoryConfigurationPaths:C}=e,{output:v,extensionPath:y,appRoot:S,postCreate:I,localWaylandSocket:_}=w,{cliHost:A}=t,U=[...f];if(e.cacheMount==="bind"&&(await Ki(w.localCacheFolder),U.push(`type=bind,source=${w.localCacheFolder},target=/vscode`)),e.cacheMount==="volume"){let j="vscode";(await Ro(t)).indexOf(j)===-1&&await gp(t,j),U.push("type=volume,source=vscode,target=/vscode,external=true")}if(_){let j=await CB(void 0);U.push(`type=bind,source=${_},target=${j}`)}let R=s?{uri:s,type:Yie(A,l,s),fileHost:A}:l?await Qj(A,l,C,e.common.loadNativeModule,!a,v):void 0,E=R==null?void 0:R.uri;if((E==null?void 0:E.scheme)==="file"&&A.type!=="local"){let j=jr.dirname(E.fsPath),oe=jr.basename(E.fsPath),xe=oe===".devcontainer.json"?j:jr.dirname(j),le=A.path.join(await A.tmpdir(),`devcontainer-config-${Sk.randomUUID()}`);await Yv(xe,A,le,v),E=Ce.from({scheme:Je.scheme,path:A.path.join(le,...oe===".devcontainer.json"?[oe]:[jr.basename(j),oe])})}typeof e.removeOnStartup=="string"&&await ti(e,e.removeOnStartup)&&await Ri(e,e.removeOnStartup);let x=await Ul(t,r);x&&e.removeOnStartup===!0&&n&&(await Ri(e,x.Id),x=void 0);let b=!!x||!n,D=b?r:await Gie(e,t,R,n),T=!1,k=e.removeOnStartup!==!0?x||n&&await Ul(t,n):void 0;((pt=k==null?void 0:k.State)==null?void 0:pt.Status)==="running"&&(T=!0,tt({...Ni(e),print:"continuous"},"exec","-i","-u","root",k.Id,"/bin/sh","-c",`echo "Container already running. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${e.common.sessionId} ; /bin/sh`).catch(()=>{T=!1,v.write("Keep-alive process ended.")}));let L="",N=w.postCreate.output,H=on({...N,get dimensions(){return N.dimensions},event:j=>{(j.type==="text"||j.type==="raw")&&(L+=j.text),N.event(j)}}),B={...h,...t.env,...cr(t.env)},z={cliHost:A,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:B,extensionPath:y,appRoot:S,package:w.package,postCreate:I,output:H},Y=w.postCreate.output.dimensions||w.output.dimensions,G=w.additionalFeaturesToInstall,ce;try{ce=await Qo(z,["up",...t.cliHost.type==="local"&&w.persistedFolder?["--user-data-folder",w.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...w.containerSessionDataFolder?["--container-session-data-folder",w.containerSessionDataFolder]:[],...b?["--container-data-folder",Ti(e.common.product.serverDataFolderName)]:[],...b?["--container-system-data-folder",KS(e.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...e.workspaceMountConsistencyDefault?["--workspace-mount-consistency",e.workspaceMountConsistencyDefault]:[],"--gpu-availability",e.gpuAvailability,...[].concat(...D.map(j=>["--id-label",j])),"--log-level",Jr(w.getLogLevel()),"--log-format","json",...E?["--config",_e(E,A.platform)]:[],...a?["--override-config",_e(a,A.platform)]:[],"--default-user-env-probe",w.defaultUserEnvProbe,...e.buildNoCache?["--build-no-cache"]:[],...e.removeOnStartup===!0?["--remove-existing-container"]:[],...e.expectExistingContainer||!e.common.hostConfig.canRebuildContainer?["--expect-existing-container"]:[],...e.useExperimentalLockfile?["--experimental-lockfile"]:[],...e.useExperimentalMountGitWorktreeCommonDir?["--mount-git-worktree-common-dir"]:[],...[].concat(...U.map(j=>["--mount",j])),"--skip-post-create","--update-remote-user-uid-default",m,"--mount-workspace-git-root",...Y?["--terminal-columns",String(Y.columns),"--terminal-rows",String(Y.rows)]:[],...Object.keys(G).length>0?["--additional-features",JSON.stringify(G)]:[],"--include-configuration","--include-merged-configuration"])}catch(j){let oe;if((rt=j==null?void 0:j.data)!=null&&rt.disallowedFeatureId){let{disallowedFeatureId:xe,didStopContainer:le,learnMoreUrl:De}=j.data;oe=Ck(xe,De,le),oe.originalError=j}else oe=j instanceof pe?j:new pe({description:Bf.t("An error occurred setting up the container."),originalError:j});throw j&&!(j instanceof pe)&&(j.cmdOutput=L),(Dt=j==null?void 0:j.data)!=null&&Dt.containerId&&(oe.manageContainer=!0,oe.params=e.common,oe.containerId=(Ct=j==null?void 0:j.data)==null?void 0:Ct.containerId,oe.dockerParams=e),oe.step="devContainersCLIUP",oe}if((ce==null?void 0:ce.outcome)!=="success")throw new pe({description:Bf.t("devcontainer command failed: {0}",JSON.stringify(ce)),step:"devContainersCLIUP"});ce.configuration.configFilePath=ce.mergedConfiguration.configFilePath=ce.configuration.configFilePath&&Ce.revive(ce.configuration.configFilePath).with({scheme:A.type==="local"?"file":Je.scheme});let Be=await ti(e,ce.containerId);if(!Be)return Rk(w.output,"Dev container not found.");T||(T=!0,tt({...Ni(e),print:"continuous"},"exec","-i","-u","root",Be.Id,"/bin/sh","-c",`echo "New container started. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${e.common.sessionId} ; /bin/sh`).catch(()=>{T=!1,v.write("Keep-alive process ended.")}));let{configuration:mt,mergedConfiguration:Mt,remoteWorkspaceFolder:wo}=ce,Dn=Sp(w.cliHost.authority,u),gn=g||(mt.name?Bf.t("Dev Container: {0}{1}",mt.name,Dn):Bf.t("Dev Container{0}",Dn));w.setWorkspaceName(gn);let Jt;try{if(ko(mt)||"image"in mt)Jt=await sV(e,t,mt,Mt,wo,o,i,Be,b,!k,p,D,E,a);else if("dockerComposeFile"in mt)Jt=await zj(e,t,mt,Mt,o,i,Be,b,!k,d,p,D,E,a);else throw new pe({description:Bf.t('Dev container config ({0}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.',mt.configFilePath.toString())})}catch(j){let oe=j instanceof pe?j:new pe({description:Bf.t("An error occurred setting up the container."),originalError:j});throw oe.step||(oe.step="setupDevContainer"),oe}if(qie(e,z,mt,a,c,Be,d,i,E,D,Jt.properties),Jt.configLocationType=R==null?void 0:R.type,(R==null?void 0:R.type)==="workspace")if(A.type==="container")Jt.configWorkspaceURI=R.uri.with({scheme:ro.scheme,authority:w.authority});else{let j=_e(R.uri,A.platform),oe=Be.Mounts.find(xe=>qu(A.path,xe.Source,j));if(oe){let xe=A.path.relative(oe.Source,j),le=A.platform==="win32"?xe.replace(/\\/g,"/"):xe;Jt.configWorkspaceURI=Ce.from({scheme:ro.scheme,authority:w.authority,path:jr.posix.join(oe.Destination,le)})}}return Jt}function Yie(e,t,n){return t&&(n.scheme===Je.scheme||n.scheme==="file"&&e.type==="local")&&qu(jr,t.rootFolderPath,_e(n,e.platform))?"workspace":n.scheme==="file"?"repositoryConfig":"unknown"}async function Gie(e,t,n,r){var s;let{cliHost:o}=t,i;if(n){let{uri:a}=n,c;a.scheme===Je.scheme||a.scheme==="file"&&o.type==="local"?c=_e(a,o.platform):c=a.toString();let l=[...r,`${Wf}=${c}`];if(await Ul(t,l))i=l;else{let u=await Ul(t,r);u&&!((s=u.Config.Labels)!=null&&s[Wf])?e.removeOnStartup===!0?(await Ri(t,u.Id),i=l):i=r:i=l}}else i=r;return i}function qie(e,t,n,r,o,i,s,a,c,l,u){let{common:f}=e,{output:m,extensionPath:d,appRoot:p}=f,{cliHost:g}=t;if(f.hostConfig.canRebuildContainer&&e.watch){let h,w=n.configFilePath;if(w.scheme===Je.scheme)if(g.type==="local")h=w.with({scheme:"file"});else if(g.type==="container")h=w.with({scheme:ro.scheme,authority:f.authority});else{let C=_e(w,g.platform),v=i.Mounts.find(y=>qu(g.path,y.Source,C));if(v){let y=g.path.relative(v.Source,C),S=g.platform==="win32"?y.replace(/\\/g,"/"):y;h=Ce.from({scheme:ro.scheme,authority:f.authority,path:jr.posix.join(v.Destination,S)})}}else(w.scheme==="file"||w.scheme===ro.scheme)&&(h=w);if(h){let I=function(){C||(y=v().finally(async()=>{await Bt(g.type==="container"?5e3:1e3),y=void 0,S&&(S=!1,I())}))},C=!1;async function v(){let A=t,U;try{if(g.type==="container"){let{stdout:x}=await tt(e,...s);U=x.toString().trim();let b=hs(e,U,"root");if(r&&o){let k=r.path,L=`EOF-${k}`,N=`${k}_${Date.now()}`,H=await Wt(b,m),B=$e((await H.exec(`cat '${w.path}'`)).stdout);await H.exec(`cat <<'${L}' >${N}
${JSON.stringify({...o(B),configFilePath:void 0})}
${L}
mv ${N} ${k}`)}let D=await Js(e,U,"root",f.loadNativeModule);A={cliHost:to("container",a,{},b,D,()=>{throw new Error("not implemented")},"node",m),dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:d,appRoot:p,package:f.package,output:m}}let R=await gx(A,a,c,f.getLogLevel(),l,i.Id,r,e.useExperimentalMountGitWorktreeCommonDir),E=ar(A.cliHost,u.shellServer);await sx({...e.configurationTracking,containerOutdated:async x=>{C=!0;let b=await e.configurationTracking.containerOutdated(x);return b==="ignore"&&(C=!1),b}},A.cliHost,E,R.configuration)}finally{U&&await Ri(e,U)}}let y,S=!1,_=e.watch(h,()=>{y?S=!0:I()});e.common.shutdowns.push(async()=>(await _).dispose())}}}async function Ul(e,t){let n=await Fl(e,!0,t);return(await ps(e,n)).filter(o=>o.State.Status!=="removing")[0]}async function gx(e,t,n,r,o,i,s,a){let{cliHost:c,output:l}=e,u=await Qo(e,["read-configuration",...e.dockerPath!=="docker"?["--docker-path",e.dockerPath]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],"--workspace-folder",t,...(o||[]).map(f=>["--id-label",f]).flat(),...i?["--container-id",i]:[],"--log-level",Jr(r),"--log-format","json",...n?["--config",_e(n,c.platform)]:[],...s?["--override-config",_e(s,c.platform)]:[],"--mount-workspace-git-root",...a?["--mount-git-worktree-common-dir"]:[],...l.dimensions?["--terminal-columns",String(l.dimensions.columns),"--terminal-rows",String(l.dimensions.rows)]:[]]);return u.configuration.configFilePath=Ce.revive(u.configuration.configFilePath).with({scheme:c.type==="local"?"file":Je.scheme}),u}async function Zj(e,t,n,r,o,i){let s=await Qj(e,t,n,r,o,i);return s==null?void 0:s.uri}async function Qj(e,t,n,r,o,i){let s=await tS(e,t,Fe),a=s&&await Ik(s,n);if(a)return{uri:a,type:"repositoryConfig",fileHost:await Hr(process.cwd(),r,i)};let c=await Uf(e,t.configFolderPath);if(c)return{uri:c,type:"workspace",fileHost:e};o&&i&&(s!=null&&s.length?i.write(`No dev container config found. Additional locations checked:
${vx(s,n).map(l=>`- ${jr.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function Ik(e,t){let n=vx(e,t);for(let r of n){let o=await Tj(r);if(o)return Ce.file(o)}}function vx(e,t){let n=[],r=new Set(e.map(zie).filter(o=>!!o));for(let o of r)for(let i of t){let s=jr.join(i,o);n.push(s)}return n}function eV(e,t,n){let r=e.path.relative(t.rootFolderPath,_e(n,e.platform));return r&&!r.startsWith("..")&&!e.path.isAbsolute(r)}function zie(e){let t;if(e.startsWith("https://"))t=e.substr(8);else{let n=/[^@:]+@([^:]+):(.+)/.exec(e);if(n)t=`${n[1]}/${n[2]}`;else return}if(!(t.toLowerCase().startsWith("github.com")&&(t=(/^[^/]+\/[^/]+\/[^/]+/.exec(t)||[])[0],!t)))return t.endsWith(".git")&&(t=t.substr(0,t.length-4)),t}var wx="vsc.devcontainer.volume.name",tV="vsc.devcontainer.volume.folder";function Pk(e){return e?`${e.volumeName}:${e.folder}`:void 0}function $l(e){let t=(e.Config.Labels||{})[wx],n=(e.Config.Labels||{})[tV];return t&&n?{volumeName:t,folder:n}:void 0}var Xs=W(require("url")),cV=W(require("https"));var lV=W(Ar());function Zs(e){return e.toLowerCase().indexOf("github.com")>=0?Qie(e):e.toLowerCase().indexOf("visualstudio.com")>=0?Xie(e):e.toLowerCase().indexOf("dev.azure.com")>=0?Jie(e):e.toLowerCase().indexOf("gitlab.com")>=0?Zie(e):Kie(e)}function tc(e){let t="owner",n="repository";return{repository:"unknown",repositoryUrl:e,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`}}function Kie(e){var s;let t="unknown-owner",n,r=e,o;o=(s=Xs.parse(e))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?tc(e):(n=i[i.length-1],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),{repository:"unknown",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`})}function Jie(e){var i,s;let t,n,r=e,o;if(Sx(e)){let a=`http://${e}`;o=(i=Xs.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return tc(e);t=c[3],n=c[4]}else{o=(s=Xs.parse(e))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return tc(e);t=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`}}function Xie(e){var i,s;let t,n,r=e,o;if(Sx(e)){let a=`http://${e}`;o=(i=Xs.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return tc(e);t=c[3],n=c[4]}else{o=(s=Xs.parse(e))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return tc(e);t=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`}}function Zie(e){var s,a;let t,n,r,o=e,i;if(Sx(e)){let c=`http://${e}`;i=(s=Xs.parse(c))==null?void 0:s.path,i&&(i=i.replace("/:","/"));let l=i==null?void 0:i.split("/");if(!l||l.length<3)return tc(e);t=l[1],n=l.slice(2,l.length-1).join("/")||void 0,r=l[l.length-1]}else{i=(a=Xs.parse(e))==null?void 0:a.path;let c=i==null?void 0:i.split("/");if(!c||c.length<3)return tc(e);t=c[1],n=c.slice(2,c.length-1).join("/")||void 0,r=c[c.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:o,ref:void 0,commit:!1,repositoryOwner:t,repositoryProject:n,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}${n?`/${n}`:""}/${r}`}}function Qie(e){var c,l;let t,n,r=e,o,i,s;if(Sx(e)){let u=`http://${e}`;s=(c=Xs.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=Xs.parse(e))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return tc(e);if(t=a[1],n=a[2],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=e.match(/\/tree\/|\/commit\//);u&&u.index&&(r=e.substring(0,u.index),o=e.substring(u.index+u[0].length))}if(a[3]==="pull"){i=a[4];let u=e.match(/\/pull\//);u&&u.index&&(r=e.substring(0,u.index))}}return{repository:"github",repositoryUrl:r,ref:o,commit:a[3]==="commit",repositoryOwner:t,repositoryName:n,pullRequestId:i,fullRepositoryName:`${t}/${n}`}}function Sx(e){return e=e.toLowerCase(),e.indexOf("://")<0?e.indexOf("@")<e.indexOf(":"):!1}var ew=class extends Error{description;code;constructor(t,n){super(),this.code=t,this.description=n}},tw=class{inputUrl;gitUrlInfo;constructor(t){this.inputUrl=t,this.gitUrlInfo=Zs(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(t,n,r,o){}installExtension(){return null}},Nk=class extends tw{constructor(t){super(t)}async parseUrl(t){var i,s,a;let n=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,r=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(t,n,r,o)}async getPullRequestInfo(t,n,r,o){var u,f,m,d,p,g,h,w,C,v,y;let i=await this.fetchPullRequestInfo(t,n,r,o),s=(f=(u=i.head)==null?void 0:u.repo)==null?void 0:f.clone_url,a=(d=(m=i.base)==null?void 0:m.repo)==null?void 0:d.clone_url;if(!a)throw new ew(2,lV.t("Cannot access the head repository of the Pull Request."));let c=(p=i.head)==null?void 0:p.ref,l=((w=(h=(g=i.head)==null?void 0:g.repo)==null?void 0:h.owner)==null?void 0:w.login)===n?null:(y=(v=(C=i.head)==null?void 0:C.repo)==null?void 0:v.owner)==null?void 0:y.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(t,n,r,o){let i=`/repos/${n}/${r}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};t&&(s.authorization=`token ${t}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,l)=>{let u="",f=cV.request(a,m=>{if(m.statusCode<200||m.statusCode>=300)return l(new Error(`Status Code: ${m.statusCode}`));m.on("data",d=>{u+=d}),m.on("end",()=>{let d=JSON.parse(u.toString());c(d)})});f.on("error",l),f.end()})}cloneOptions(t){return{url:t.urlToClone,fullClone:!0}}async postClone(t,n,r,o){if(t.sourceOwner){let l=t.prRepositoryUrl.replace(/\.[^/.]+$/,"");await X({exec:n.exec,cmd:"git",args:["remote","add",t.sourceOwner,l],cwd:r,output:o}),await X({exec:n.exec,cmd:"git",args:["fetch",t.sourceOwner,t.ref],cwd:r,output:o});try{await X({exec:n.exec,cmd:"git",args:["checkout","-t",`${t.sourceOwner}/${t.ref}`],cwd:r,output:o})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${t.ref}' already exists`)))throw u}await X({exec:n.exec,cmd:"git",args:["config","--local",`remote.${t.sourceOwner}.github-pr-remote`,"true"],cwd:r,output:o})}else await X({exec:n.exec,cmd:"git",args:["checkout",t.ref],cwd:r,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await X({exec:n.exec,cmd:"git",args:["config","--local",`branch.${t.ref}.github-pr-owner-number`,c],cwd:r,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},Lk=class extends tw{constructor(t){super(t)}async parseUrl(t){var n,r;return{urlToClone:(n=this.gitUrlInfo)==null?void 0:n.repositoryUrl,ref:(r=this.gitUrlInfo)==null?void 0:r.ref}}cloneOptions(t){let n=this.gitUrlInfo.commit;return{url:t.urlToClone,branch:!n&&t.ref||void 0,fullClone:n}}async postClone(t,n,r,o){this.gitUrlInfo.commit&&await X({exec:n.exec,cmd:"git",args:["checkout",t.ref],cwd:r,output:o})}},Ex=class extends tw{constructor(n,r){super(n);this.branch=r}async parseUrl(n){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(n){return{url:n.urlToClone,branch:n.ref||void 0}}};function xx(e,t){if(t)return new Ex(e,t);let n=Zs(e);if(n.repository==="github"){if(n.pullRequestId)return new Nk(e);if(n.ref)return new Lk(e)}return new Ex(e)}var Ok="vsch.local.repository",_x="dev.container.volume";function ni(e){return{repositoryPath:e,fullRepositoryName:Uk(e),repositoryName:$k(e),workspaceFolder:Jv,volumeDestination:jf(),oldVolumeName:tse(e),alreadyCloned:!1,uniqueVolumeName:nse(e),legacyUniqueVolumeName:rse(e),getOldWorkspacePath:mV,cloneAndInitializeRepository:ose,gitUrlHandler:xx(e),gitUrlInfo:Zs(e)}}function Uk(e){let t=Zs(e);return t==null?void 0:t.fullRepositoryName}function $k(e){let t=Zs(e);return t==null?void 0:t.repositoryName}function jf(){return"/workspaces"}function tse(e){let t=Uk(e);return`vsc-${vs.posix.basename(t)}-${fV(e)}`}function nse(e){let t=uV(e),n=Qs.createHash("sha256").update(e).digest("hex");return`${t}-${n}`}function rse(e){let t=uV(e),n=fV(e);return`${t}-${n}`}function uV(e){let t=Zs(e),n="";return t&&t.repositoryName&&(n=t.repositoryName,t.ref?n=`${n}-${t.ref.replace(/\//g,"-")}`:t.pullRequestId&&(n=`${n}-pull-${t.pullRequestId}`)),n}function fV(e){return Qs.createHash("md5").update(e).digest("hex")}function Jv(e){return vs.posix.join(`${jf()}`,`${e}`)}async function ose(e,{folder:t,cloneInfo:n},r,o,i){var f;await kk(e);let{containerId:s,shellServer:a,remoteContainersEnv:c}=await ise(e,r,o,t,i,e.configProvider,n),{config:l}=await sse(e,r,t,i,a),u=(f=r.gitUrlHandler)==null?void 0:f.installExtension();return{repository:r,volumeName:o,containerId:s,shellServer:a,remoteContainersEnv:c,config:l,preInstalledExtensions:u?[u]:[]}}async function ise(e,t,n,r,o,i,s){let{common:a}=e,{output:c,loadNativeModule:l}=a,u=t.fullRepositoryName,f,m,d,p;e.common.progress(1);let g=bk(t,n,r,e.dockerSocketPath,e.buildContainerRunArgs);r?(c.write(`Cloning Github repository: ${u} into ${t.workspaceFolder(r)}
\r`),f=`fatal: destination path '${t.workspaceFolder(r)}' already exists`,p=t.workspaceFolder(r),d=`Repository '${u}' was already cloned into '${t.workspaceFolder(r)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${n}
\r`),f=`fatal: destination path '${u}' already exists`,p=`${u}`,d=`Repository '${u}' was already cloned into volume.`);let h=t.gitUrlHandler;if(!h)throw new pe({description:Ml.t("Could not analyze the URL.")});s?m=h.cloneOptions(s):m={url:t.repositoryPath};let{stdout:w}=await tt(e,...g),C=w.toString().trim(),v=hs(e,C,"root"),y=await Wt(v,c),S=await vS(a,{remoteExec:v,user:"root",nodeExecutable:"node",shellServer:y,launchRootShellServer:async()=>y}),I=S.remoteContainersCLI,_=S.remoteEnv,A=S.ready,U=S.mrpcExec,R=await Js(e,C,"root",l),E=to("container",p,{},await U||v,R,()=>{throw new Error("not implemented")},void 0,c);try{e.common.isCopyGitConfigEnabled&&await nS(e.common,{homeFolder:"/root",shellServer:y},{}),await VS({shellServer:y,nodeExecutable:"node"},I,c,"global"),await vv(e.common,{homeFolder:"/root",shellServer:y},[".ssh","known_hosts"],"ssh"),await A;let b=HB(a),D=await QH(a,E,p,{...m,env:{..._,...m.env}},c,b.output,!!e.removeOnStartup);if(await D.gitClone,D.gitUnshallow&&(a.backgroundTasks.push(D.gitUnshallow.then(()=>{})),D.gitUnshallow.then(b.flush,b.flush)),D.gitClone&&s)try{await h.postClone(s,E,p,c)}catch{return Ak(e,C,Ml.t("Failed to checkout the repository {0}.",s.urlToClone))}}catch(b){let D=b&&(b.cmdOutput||b.stack||b.message)||String(b);if(D=D.replace(Hs,""),D.replace(/[\r\n]+/gm,"").includes(f))c.write(d),t.alreadyCloned=!0;else return Ak(e,C,Ml.t("Git clone failed. {0}",D))}let{configRaw:x}=await dV(e,t,r,o,y);if(!ox(x)&&i){c.write(`Repository ${u} has no dev container files.
\r`);let b=!0;for(;b;){let D=await i.createConfiguration(p,E);if(D)b=!1;else{let T=Ml.t("Select Configuration");if(D=await i.showError(Ml.t("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started."),T),D!==T)return Ak(e,C,Ml.t("Cancelled container configuration selection."),{closeRemote:!0})}}}return{containerId:C,shellServer:y,remoteContainersEnv:_}}function bk(e,t,n,r,o=[]){let i=n?e.volumeDestination:e.fullRepositoryName;return Tk(t,i,r,o)}function Tk(e,t,n,r=[]){return["run","-d","--mount",`type=volume,src=${e},dst=${t}`,"-v",`${n}:/var/run/docker.sock`,"--security-opt","label=disable",...r,`${pV}`,"sleep","infinity"]}function Ak(e,t,n,r){throw t&&Ri(e,t),new pe({description:n,data:r})}async function dV(e,t,n,r,o){let i,s;if(n?s=t.workspaceFolder(n):s=`${mV(t.repositoryPath)}`,r)return i=(await o.exec(`cat ${r.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&$e(i),configFile:r,workspaceFolder:s};if(r=await Ik([t.repositoryPath],e.userRepositoryConfigurationPaths),r&&(i=(await ct(r.fsPath)).toString()),!r)for(let a of Nl(vs.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,r=Ce.from({scheme:"vscode-remote",path:a});break}catch{}return{configRaw:i&&$e(i),configFile:r,workspaceFolder:s}}async function sse(e,t,n,r,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await dV(e,t,n,r,o);if(!s||!i)throw new pe({description:Ml.t("The repository does not have a 'devcontainer.json' configuration file.")});let{common:c,configUpdater:l}=e,{cliHost:u,output:f}=c,m=jv({...i}),d=m;l&&(m.configFilePath=s,d=l(m),delete d.configFilePath);let p=MS({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},d);return p.configFilePath=s,("workspaceMount"in p||"workspaceFolder"in p)&&f.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:p}}function mV(e){return`/workspaces/${vs.posix.basename(Uk(e))}`}var pV="vsc-volume-bootstrap",Fk="bootstrap.Dockerfile",ase="volume.Dockerfile";async function kk(e,t,n,r){let{cliHost:o,output:i}="cliHost"in e?e:e.common;"cliHost"in e||(t=e.common.extensionPath,n=e.common.package.version,r=e.development);let s=o.path.join(await Tv(o),"bootstrap-image",r?`${n}-dev-${Date.now()}`:n),a=o.path.join(s,Fk),c=o.path.join(s,".vscode-remote-containers","dist",`dev-containers-cli-${n}`),l=o.path.join(c,"dist","spec-node","devContainersSpecCLI.js"),u=!await o.isFolder(s);if(!u&&!(await o.isFile(a)&&await o.isFile(l))){let g="Removing incomplete bootstrap-image folder.",h=i.start(g),w=`${s}-${Qs.randomUUID()}`;await o.rename(s,w),await o.rm(w,{recursive:!0,force:!0}),u=!await o.isFolder(s),i.stop(g,h)}if(u){let g=`${s}-${Qs.randomUUID()}`,h=o.path.join(g,".vscode-remote-containers","dist",`dev-containers-cli-${n}`);await o.mkdirp(o.path.join(h,"dist","spec-node")),await o.writeFile(o.path.join(g,Fk),await ct(vs.join(t,"scripts",Fk))),await o.writeFile(o.path.join(h,"package.json"),await ct(vs.join(t,"package.json"))),await o.writeFile(o.path.join(h,"dist","spec-node","devContainersSpecCLI.js"),await ct(vs.join(t,"dist","spec-node","devContainersSpecCLI.js"))),await o.mkdirp(o.path.join(h,"scripts")),await o.writeFile(o.path.join(h,"scripts","updateUID.Dockerfile"),await ct(vs.join(t,"scripts","updateUID.Dockerfile"))),await o.rename(g,s)}let f=["build","-f",a,"-t",pV,s],m=await o.locateCertificatesFile(),d=o.path.join(s,"host-ca-certificates.crt"),p=`${d}-${Qs.randomUUID()}`;await o.writeFile(p,m?await o.readFile(m):Buffer.from("")),await o.rename(p,d),await jj(e,...f)}async function nV(e){let{common:t}=e,{cliHost:n,output:r}=t,o=await cse(e),i=n.path.join(o,ase),s=!await n.isFolder(o);if(!s&&!await n.isFile(i)){let u="Removing incomplete inspect-volume folder.",f=r.start(u),m=`${o}-${Qs.randomUUID()}`;await n.rename(o,m),await n.rm(m,{recursive:!0,force:!0}),s=!await n.isFolder(o),r.stop(u,f)}if(s){let u=`${o}-${Qs.randomUUID()}`;await Yv(vs.join(t.extensionPath,"scripts","inspect-volume"),n,u,r),await n.rename(u,o)}let a=await n.locateCertificatesFile(),c=n.path.join(o,"host-ca-certificates.crt"),l=`${c}-${Qs.randomUUID()}`;return await n.writeFile(l,a?await n.readFile(a):Buffer.from("")),await n.rename(l,c),o}async function cse(e){let{common:t,development:n}=e,{cliHost:r}=t,o=t.package.version;return r.path.join(await Tv(r),"inspect-volume",n?`${o}-dev-${Date.now()}`:o)}async function rV(e,t,n){let r=[`${Ok}=${t.repositoryPath}`];!n||n===ri?r.push("vsch.local.repository.unique=true"):r.push("vsch.local.repository.unique=false"),t.gitUrlInfo.ref&&r.push(`vsch.local.repository.branch=${t.gitUrlInfo.ref}`),t.gitUrlInfo.pullRequestId&&r.push(`vsch.local.repository.pullRequestId=${t.gitUrlInfo.pullRequestId}`);let o=await Ro(e),i=Mk(t,n,o);return o.indexOf(i)===-1&&await gp(e,i,r),i}function Mk(e,t,n){return t?t===ri&&(n.indexOf(e.uniqueVolumeName)!==-1||n.indexOf(e.legacyUniqueVolumeName)===-1?t=e.uniqueVolumeName:t=e.legacyUniqueVolumeName):n.indexOf(e.uniqueVolumeName)!==-1||n.indexOf(e.oldVolumeName)===-1?t=e.uniqueVolumeName:t=e.oldVolumeName,t}var xp="vsch.local.repository",Hk="vsch.local.repository.volume",Bk="vsch.local.repository.folder";function oV(e,t,n,r){return n?{labels:[`${xp}=${t}`,`${Hk}=${r}`,`${Bk}=${n}`],remoteWorkspaceFolder:e.workspaceFolder(n)}:{labels:[`${xp}=${t}`],remoteWorkspaceFolder:e.getOldWorkspacePath(t)}}async function iV(e,t,n,r){let{loadNativeModule:o,output:i}=e.common,s=hs(e,t,"root"),a=await Js(e,t,"root",o),c=to("container",r,n,s,a,()=>{throw new Error("not implemented")},"node",i);return{cliHost:c,dockerCLI:"docker",dockerComposeCLI:gs({exec:c.exec,env:n,output:i},"docker","docker-compose"),dockerComposePath:"docker-compose",env:n,output:i}}var hV=W(Ar()),Xv="devcontainer.local_folder",Wf="devcontainer.config_file",Ep="vsch.local.volume",yx="/volume",Cx="vsch.quality",Zv="vsch.local.folder";async function sV(e,t,n,r,o,i,s,a,c,l,u,f,m,d){let{common:p}=e,g;try{let h=!l,w=r.remoteUser;g=await wp(e,a.Id,o,w),u&&l&&o&&g.user!=="root"&&(g.launchRootShellServer?await JS(g,g.launchRootShellServer,o,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let C=await mx(p,l,a,o,g);return await use(a,c,e,t,g,n,r,h,i,s,f,m,d,C)}catch(h){throw lse(h,a,e,g,n)}}function lse(e,t,n,r,o){let i=e instanceof pe?e:new pe({description:hV.t("An error occurred setting up the container."),originalError:e});return t&&(i.manageContainer=!0,i.params=n.common,i.containerId=t.Id,i.dockerParams=n),r&&(i.containerProperties=r),o&&(i.config=o),i}async function use(e,t,n,r,o,i,s,a,c,l,u,f,m,d){var R,E;let{common:p}=n,g=ar(r.cliHost,o.shellServer);a||await ax(n.configurationTracking,r.cliHost,g,i,p.output);let h=s.shutdownAction;h==="stopCompose"&&(h="stopContainer");let w={cwd:c,dockerCLI:n.dockerCLI,env:p.env,containerId:e.Id,user:o.user,sessionId:p.sessionId,shutdownAction:h,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:C,doneWithDocuments:v}=await dx(n,r.cliHost,g,"singleContainer",w,a?i:void 0);p.backgroundTasks.push(v);let y=((E=(((R=s.customizations)==null?void 0:R.vscode)||[]).slice().reverse().find(x=>typeof x.devPort=="number"))==null?void 0:E.devPort)||bl,{hostOrContainerPort:S,hostPortServer:I,connectionToken:_,remoteEnv:A,serverDownloaded:U}=await Tl(p,o,i,s,y,yp(n,r,o,l,u,e.Id,t,f,m),d);return C.hostPortServer=I,{params:p,properties:o,config:i,resolvedAuthority:{host:ec,port:S,connectionToken:_,extensionHostEnv:A},tunnelInformation:p.isLocalContainer?vp(e):{},dockerParams:n,dockerContainerId:e.Id,serverDownloaded:U}}function Hl(e){let t=e.Config.Labels||{},n=t[Xv]||t[Zv];return n||void 0}function gV(e){return(e.Config.Labels||{})[Wf]||void 0}function nc(e){let t=(e.Config.Labels||{})[xp];return t||void 0}function Dx(e){let t=(e.Config.Labels||{})[Hk];return t||void 0}function vV(e){let t=(e.Config.Labels||{})[Ep];return t||void 0}function wV(e){let t=(e.Config.Labels||{})[Bk];return t||void 0}function Rk(e,t){throw e.write(it(t)),new Error(t)}function rc(e){return!!(e!=null&&e.startsWith("tunnel+"))}function yV(e){let t=/^tunnel\+(.*)$/.exec(e);return t?{tunnelName:t[1]}:void 0}var CV=W(require("path"));async function EV(e,t,n,r,o,i){let s,a=new Promise(p=>s=p),c=new cx,l=[],u=await $j("vscode-remote-containers",async(p,g)=>{let h=await Mj(p),w=[];if(h.type==="poll")try{w=await c.dequeue(6e4)}catch{}else if(h.type==="reply"){let C=l[h.sequence];C&&(C(h.reply),delete l[h.sequence])}else h.type==="done"&&s?s():h.type==="log"&&r.event(h.event);g.write(JSON.stringify(w)),g.end()});u.server.unref();let f=CV.join(n,"dist","shutdown","shutdownMonitorProcess"),m=[u.ipcHandlePath,e,er[t],o||"",i.getTime().toString()];r.write(`Forking shutdown monitor: ${f} ${m.join(" ")}\r
`);let d=MB(f,m,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return d.on("error",p=>{console.error(p)}),d.unref(),{queue:c,sequence:0,replies:l,done:a}}async function Ix(e,t,n){let r=e.sequence++,o=new Promise(s=>e.replies[r]=s);return e.queue.push({type:"configure",sequence:r,options:t}),await o}async function SV({queue:e,done:t}){e.push({type:"cleanup"}),await t}var _V=require("net"),DV=require("util");var ri="__UNIQUE__",ec="127.0.0.1";async function aV(e,t){if(e.scheme==="file"&&t.type==="wsl"){let{stdout:n}=await X({exec:t.exec,cmd:"wslpath",args:["-u",e.fsPath],output:Fe});return n.toString().trim()}return _e(e,t.platform)}async function Yf(e,t){let n=!e.env.SSH_AUTH_SOCK&&await DT(e)?Ev:e.type==="wsl"?e.env.SSH_AUTH_SOCK:void 0,r={DOCKER_CONTEXT:"default"};return t&&("context"in t?r.DOCKER_CONTEXT=t.context:(t.host&&(t.host.startsWith("ssh://")&&e.type==="remote"?r.VSCODE_DOCKER_HOST=t.host:r.DOCKER_HOST=t.host),t.certPath&&(r.DOCKER_CERT_PATH=t.certPath),t.tlsVerify&&(r.DOCKER_TLS_VERIFY=t.tlsVerify))),n&&(r.SSH_AUTH_SOCK=n),r}function lr(e){let t;if(e.DOCKER_CONTEXT&&e.DOCKER_CONTEXT!=="default")t={context:e.DOCKER_CONTEXT};else{t={};let n=e.VSCODE_DOCKER_HOST||e.DOCKER_HOST;n&&(t.host=n),e.DOCKER_CERT_PATH&&(t.certPath=e.DOCKER_CERT_PATH),e.DOCKER_TLS_VERIFY&&(t.tlsVerify=e.DOCKER_TLS_VERIFY),Object.keys(t).length||(t=void 0)}return t}function Px(e,{parentAuthority:t,settings:n}){t&&e.write(`Host authority: ${t}\r
`),n&&("context"in n&&n.context&&e.write(`Context: ${n.context}\r
`),"host"in n&&n.host&&e.write(`Host: ${n.host}\r
`),"certPath"in n&&n.certPath&&e.write(`CertPath: ${n.certPath}\r
`),"tlsVerify"in n&&n.tlsVerify&&e.write(`TLSVerify: ${n.tlsVerify}\r
`))}function Wl(e,t){return(!e||e.startsWith("wsl+"))&&!t.VSCODE_DOCKER_HOST&&!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default"||t.DOCKER_CONTEXT==="desktop-linux")}function Sp(e,t){var r,o;let n;return rc(e)?n=(r=yV(e))==null?void 0:r.tunnelName:_l(e)?n=(o=bv(e))==null?void 0:o.hostName:t&&("context"in t||t.host)&&(n="context"in t?t.context:t.host),n?` @ ${n}`:""}function oc(e){let{Name:t}=e;return t[0]==="/"?t.substring(1):t}async function ti(e,t){try{return await ei(e,t)}catch{return}}async function bx(e,t=!0){let{common:n}=e,{output:r}=n,o="Check Docker is running",i=r.start(o);try{let{stdout:s}=await Wk(e,e.common.loadNativeModule,t,"version"),a=s.toString();if(a.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(a)}catch(s){console.error(s);let a=_p.t("Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed."),c=s&&(s.stderr?s.stderr.toString().toLowerCase():s.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a=_p.t("Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction."):a=_p.t("Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group."):c.indexOf("ENOENT")!==-1&&(a=_p.t("The 'docker' command was not found. Make sure Docker is installed.")),new pe({description:a,originalError:`Docker returned an error code ${s.code}, message: ${s.message}`})}finally{r.stop(o,i)}}async function Wk(e,t,n,...r){let o={...Ni(e),print:"continuous"};try{return await tt(o,...r)}catch(i){if(!xV(i)||!n)throw i;let s="cliHost"in e?e.cliHost:e.common.cliHost,a="output"in e?e.output:e.common.output;if(s.type==="wsl"&&(s=await Hr(process.cwd(),t,a)),s.platform==="linux")throw i;if(s.platform==="darwin"&&await s.isFolder("/Applications/Docker.app"))await X({exec:s.exec,cmd:"open",args:["-g","-a","Docker"],env:{ELECTRON_RUN_AS_NODE:""},output:a,print:"continuous"});else{let c=fse(s);if(s.platform==="win32"&&await s.isFile(c))await X({exec:s.exec,cmd:c,env:{ELECTRON_RUN_AS_NODE:""},output:"output"in e?e.output:e.common.output,print:"continuous"});else throw i}for(let c=6;c>0;c--){await Bt(5e3);try{return await tt(o,...r)}catch(l){if(c===1||!xV(l))throw l}}throw i}}function fse(e){return e.path.join(e.env.ProgramW6432||"C:\\Program Files","Docker\\Docker\\Docker Desktop.exe")}function xV(e){let t=Buffer.concat([e==null?void 0:e.stdout,e==null?void 0:e.stderr].filter(Boolean)).toString().toLowerCase();return t.includes("cannot connect to the docker daemon")||t.includes("docker daemon is not running")||t.includes("internal server error for api route and version")||t.includes("activate the wsl integration")}function ln(e){return e.hostPath!==void 0}function oo(e){return e.repositoryPath!==void 0}function Vf(e){return!oo(e)&&!!e.folder}function Qv(e){return!oo(e)&&!Vf(e)&&e.volumeName!==void 0}function io(e){let t=PV("dev-container",e);if(t)return"unparsedConfig"in t?{parentAuthority:t.parentAuthority,hostPath:t.unparsedConfig}:("repositoryPath"in t&&t.configFile&&(t.configFile=Ce.revive(t.configFile)),"repositoryPath"in t?t.dockerHost?{parentAuthority:t.parentAuthority,repositoryPath:t.repositoryPath,settings:{host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`},cloneInfo:t.cloneInfo}:t:("hostPath"in t&&t.configFile&&(t.configFile=Ce.revive(t.configFile)),"hostPath"in t&&t.dockerHost?{parentAuthority:t.parentAuthority,hostPath:t.hostPath,settings:{host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`}}:t))}function nw(e,t,n,r,o,i){e=qf(e);let s=r||i?JSON.stringify({hostPath:t,localDocker:o,settings:r,configFile:i}):t;return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${e?`@${e}`:""}${n}`}function Li(e,t,n,r,o,i,s,a){if(e=qf(e),t){let l=ni(t);if(!n){let f=JSON.stringify({repositoryPath:t,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(f,"utf8").toString("hex")}${e?`@${e}`:""}${l.getOldWorkspacePath(t)}`}let u=JSON.stringify({repositoryPath:t,volumeName:n,folder:r,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${e?`@${e}`:""}${l.workspaceFolder(r)}`}if(r){let l={volumeName:n,folder:r,settings:i};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(l),"utf8").toString("hex")}${e?`@${e}`:""}${Jv(r)}`}let c=JSON.stringify({volumeName:n,settings:i});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${e?`@${e}`:""}${yx}`}function Gf(e){let t=PV("attached-container",e);if(t)return"unparsedConfig"in t?{parentAuthority:t.parentAuthority,containerId:t.unparsedConfig}:(t.dockerHost&&(t.settings={host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`},delete t.dockerHost),t)}function IV(e,t,n,r){e=qf(e);let o=JSON.stringify({containerName:t,settings:n,cwd:r});return`attached-container+${Buffer.from(o,"utf8").toString("hex")}${e?`@${e}`:""}`}function PV(e,t){try{let n=jl(t);if(!n)return;let{name:r,config:o,parentAuthority:i}=n,s=r===e&&o?Buffer.from(o,"hex").toString("utf8"):void 0;if(!s)return;if(!s.startsWith("{"))return{parentAuthority:i,unparsedConfig:s};let a=JSON.parse(s);return a.parentAuthority=i,a}catch(n){console.warn(n);return}}function jl(e){let t=e==null?void 0:e.match(/^(?<name>[^@+]+)\+(?<config>[^@]+)(?:@(?<parentAuthority>.*))?$/);if(!t)return;let{name:n,config:r,parentAuthority:o}=t.groups;return{name:n,config:r,parentAuthority:o}}function Vl(e,t){return Tn(t.startsWith("/")?"linux":"win32",Ce.parse(`vscode-remote://${e}`),t)}function qf(e){if(e){if(_l(e)){let t=e.indexOf("@");if(t!==-1&&e.indexOf("+",t)===-1){let r=bv(e);return NT(r)}return e}if(rc(e))return e}}async function bV(e,t,n){return await gv(e,t,n)||t}function TV(e,t,n){let r=e.path.relative(e.path.dirname(t),n);return`/workspaces/${e.platform==="win32"?r.replace(/\\/g,"/"):r}`}function Fj(e,t){return e.with({path:Bl.posix.resolve(e.path,t)})}async function dx(e,t,n,r,o,i){let{common:s,onRemoveOnShutdownChanged:a}=e,c=s.output.start("Setup shutdown monitor"),l=await EV(r,s.getLogLevel(),s.extensionPath,s.output,s.logFilePath?Bl.dirname(s.logFilePath):void 0,s.sessionStart);Ix(l,o,s.output).catch(d=>console.error(d)),a&&a(async d=>{o.rebuild=!!d,o.delay=0,await Ix(l,o,s.output)}),s.onDidChangeLogLevel(async d=>{o.logLevel=d,await Ix(l,o,s.output)});let u={},f=async()=>{let d=SV(l);u.hostPortServer&&await(0,DV.promisify)(u.hostPortServer.close.bind(u.hostPortServer))(),await d};s.shutdowns.push(f);let m=e.common.hostConfig.canRebuildContainer&&i?sx(e.configurationTracking,t,n,i).catch(console.error):Promise.resolve();return s.output.stop("Setup shutdown monitor",c),{monitor:l,shutdownArgs:u,doneWithDocuments:m}}function vp(e){return{environmentTunnels:e.Ports.filter(t=>!!t.PublicPort).map(t=>{let n=t.IP,r=(0,_V.isIPv4)(n)?n==="0.0.0.0"?"127.0.0.1":n:n==="::"?"[::1]":"["+n+"]";return{remoteAddress:{port:t.PrivatePort,host:"0.0.0.0"},localAddress:r+":"+t.PublicPort}})}}async function wp(e,t,n,r,o){var y;let{common:i}=e,s="Inspecting container",a=i.output.start(s),c=await ei(e,t);i.output.stop(s,a);let l=r||c.Config.User||"root",[,u,,f]=/([^:]*)(:(.*))?/.exec(l),m=dse(c.Config.Env),d=hs(e,t,l),p=await Js(e,t,l,i.loadNativeModule),g=hs(e,t,"root"),h=c.Mounts.find(S=>S.Type==="volume"&&S.Name==="vscode"),w=c.Mounts.find(S=>S.Type==="bind"&&S.Source===i.localCacheFolder),C=h&&Bl.posix.join(h.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(w==null?void 0:w.Destination),v=(y=c.Mounts.find(S=>S.Type==="bind"&&S.Destination.startsWith("/tmp/vscode-wayland-")))==null?void 0:y.Destination;return qS({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:C,sharedDataFolderIsLocalCacheFolder:!h&&!!w,remoteWorkspaceFolder:n,containerUser:u==="0"?"root":u,containerGroup:f,containerEnv:m,remoteExec:d,remotePtyExec:p,remoteExecAsRoot:g,rootShellServer:o,remoteWaylandSocket:v})}function dse(e){return(e||[]).reduce((t,n)=>{let r=n.indexOf("=");return r!==-1&&(t[n.substr(0,r)]=n.substr(r+1)),t},{})}async function kV(e){let{common:t,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,dockerEnv:i}=e,{cliHost:s,output:a}=t;return{cliHost:s,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,env:i,output:a}}async function RV(e,t){return e.type==="local"&&t?e.path.join(t,"data"):e.path.join(await e.homedir(),".vscode-remote-containers","data")}function yp(e,t,n,r,o,i,s,a,c){let l=!s;return async(u,f,m,d,p)=>{let{common:g}=e,{cliHost:h}=t,{dotfilesConfiguration:w}=g,C=d.getDotfileConfiguration("dotfiles.repository")||w.repository,v=d.getDotfileConfiguration("dotfiles.installCommand")||w.installCommand,y=d.getDotfileConfiguration("dotfiles.targetPath")||w.targetPath;l&&C&&(l=!1,await gW(n));let S={...t.env,...cr(t.env)},I={cliHost:t.cliHost,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:S,extensionPath:g.extensionPath,appRoot:g.appRoot,package:g.package,postCreate:g.postCreate,output:g.postCreate.output},_=g.postCreate.output.dimensions||g.output.dimensions,A=await Qo(I,["run-user-commands",...t.cliHost.type==="local"&&g.persistedFolder?["--user-data-folder",g.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...g.containerSessionDataFolder?["--container-session-data-folder",g.containerSessionDataFolder]:[],...s?["--container-data-folder",Ti(e.common.product.serverDataFolderName)]:[],...s?["--container-system-data-folder",KS(e.common.product.serverDataFolderName)]:[],...r?["--workspace-folder",r]:[],...(o||[]).map(U=>["--id-label",U]).flat(),"--container-id",i,"--log-level",Jr(g.getLogLevel()),"--log-format","json",...a?["--config",_e(a,h.platform)]:[],...c?["--override-config",_e(c,h.platform)]:[],"--default-user-env-probe",g.defaultUserEnvProbe,"--skip-non-blocking-commands",String(u),...g.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(m),"--stop-for-personalization",String(f),...[].concat(...Object.keys(p).map(U=>["--remote-env",`${U}=${p[U]}`])),"--mount-workspace-git-root",...e.useExperimentalMountGitWorktreeCommonDir?["--mount-git-worktree-common-dir"]:[],..._?["--terminal-columns",String(_.columns),"--terminal-rows",String(_.rows)]:[],...C?["--dotfiles-repository",C]:[],...v?["--dotfiles-install-command",v]:[],...y?["--dotfiles-target-path",y]:[]]);if((A==null?void 0:A.outcome)!=="success")throw new pe({description:_p.t("devcontainer command failed: {0}",JSON.stringify(A))});return A.result}}async function NV(e,t,n,r,o,i,s,a,c){let{cliHost:l,output:u}=e,f=await Qo(e,["read-configuration",...e.dockerPath!=="docker"?["--docker-path",e.dockerPath]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...t?["--workspace-folder",t]:[],...(i||[]).map(m=>["--id-label",m]).flat(),...s?["--container-id",s]:[],"--log-level",Jr(r),"--log-format","json",...n?["--config",_e(n,l.platform)]:[],...a?["--override-config",_e(a,l.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",...c?["--mount-git-worktree-common-dir"]:[],...u.dimensions?["--terminal-columns",String(u.dimensions.columns),"--terminal-rows",String(u.dimensions.rows)]:[],...Object.keys(o).length>0?["--additional-features",JSON.stringify(o)]:[]]);return f.configuration.configFilePath=f.configuration.configFilePath&&Ce.revive(f.configuration.configFilePath).with({scheme:l.type==="local"?"file":Je.scheme}),f}async function mx(e,t,n,r,o){let{output:i}=e;if(t&&r)try{i.write(`safe.directory: Looking up root folder for workspace folder '${r}'.`);let s=n.Mounts.find(a=>qu(Bl.posix,a.Destination,r,!0));if((s==null?void 0:s.Type)==="bind"){let a;try{let{stdout:u}=await o.shellServer.exec(`command -v git >/dev/null 2>&1 && ROOT_FOLDER="$(git -C '${r}' rev-parse --show-toplevel)" && test "$(stat -c %u "$ROOT_FOLDER")" != "$(id -u)" && echo -n "$ROOT_FOLDER"`);a=u.trim()}catch(u){a=u!=null&&u.stderr?(/dubious ownership in repository at '([^']+)'/.exec(u.stderr)||[])[1]:void 0}if(!a||!qu(Bl.posix,s.Destination,a,!0)){i.write(`safe.directory: Checking host ownership of root folder${a?` '${a}'`:""} at mount point '${s.Destination}' skipped.`);return}i.write(`safe.directory: Checking host ownership of root folder '${a}' at mount point '${s.Destination}'.`);let c=Bl.posix.relative(s.Destination,a),l=e.cliHost.path.join(s.Source,e.cliHost.platform==="win32"?c.replace(/\//g,"\\"):c);if(e.cliHost.platform==="win32"){let u;try{u=(await X({exec:e.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","(Get-Acl .).Owner"],cwd:l,env:no(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get host owner for '${l}': ${m==null?void 0:m.message}`);return}let f;try{f=(await X({exec:e.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],cwd:l,env:no(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get current user ('${l}' owned by '${u}'): ${m==null?void 0:m.message}`);return}if(i.write(`safe.directory: '${l}' owned by '${u}', current user is '${f}'.`),u!==f)return}else await X({exec:e.cliHost.exec,cmd:"/bin/sh",args:["-c",`cd '${l}' && test "$(stat -${e.cliHost.platform==="darwin"?"f":"c"} %u .)" = "$(id -u)"`],output:i});if(o.launchRootShellServer){i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Adding to safe directory list in Git system config.`),await(await o.launchRootShellServer()).exec(`git config --system --get-all safe.directory | grep -x '${a}' || git config --system --add safe.directory '${a}'`);return}else return i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Later adding to safe directory list in Git global config.`),async()=>{await o.shellServer.exec(`git config --global --get-all safe.directory | grep -x '${a}' || git config --global --add safe.directory '${a}'`)}}}catch{}}var $t=W(require("vscode")),vi=require("vscode");var K=W(require("vscode")),im=W(require("path"));var Dp=W(require("vscode")),Tx=W(require("path")),FV=require("stream");var mse=dS();async function Vr(e,t,n,r,o,i,s,a,c,l,u){return e?pse(e,n,s,a,c,l):AT(t,n,r,o,i,s,a,c,l,u)}async function pse({server:e,authority:t},n,r,o,i,s){var A,U,R,E,x,b,D,T;let a="Loading environment from ExecServer",c=i.start(a),l=await e.env();i.stop(a,c),i.write(`Host OS: ${l.osPlatform}${l.osRelease?` ${l.osRelease}`:""}`),i.write(`Host CWD: ${n}`);let u=hse(()=>e,void 0),f=l.osPlatform,{homeFolder:m,localEnv:d}=await jn(f,{posix:async()=>{let k=await Wt(u,i,void 0,f,"Host"),L=f==="darwin"?(await X({exec:u,cmd:"/bin/sh",args:["-c","echo ~"],output:i})).stdout.toString().trim():(await k.exec("echo ~")).stdout.trim(),N=f==="darwin"?(await X({exec:u,cmd:"/bin/sh",args:["-c","id -un"],output:i})).stdout.toString().trim():await El(k),H=await Pf(k,N),B=(H==null?void 0:H.shell)||"/bin/sh",z=await Rf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:i},{shell:B,remoteExec:u});return k.process.terminate(),{homeFolder:L,localEnv:z}},win32:async()=>(i.write(`USERPROFILE: ${l.env.USERPROFILE}`),i.write(`PATH: ${l.env.PATH}`),{homeFolder:l.env.USERPROFILE,localEnv:l.env})})(),p=async k=>u({...k,env:{...d,...k.env}}),g=async k=>{if(!e.fs){let L=await e.fsStat(k);return L.exists&&L.type==="file"}try{return(await e.fs.stat(k)).type===Dp.FileType.File}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},h=l.osPlatform==="win32",w=h?Tx.win32:Tx.posix,C=w.join(m,".vscode-remote-containers"),v=await $W({localCacheFolder:r,output:i,alternateDownload:s,exec:p,env:d,isFile:g,userDataFolder:C,homeFolder:m,product:o,platform:f}),y=SB(v,p,i),S=n||m,I,_;return{type:"remote",authority:t,platform:f,exec:p,ptyExec:$B(p),cwd:S,env:d,path:w,async homedir(){return m},tmpdir:jn(f,{posix:async()=>d.TMPDIR||"/tmp",win32:async()=>d.TEMP}),isFile:g,isFolder:async k=>{if(!e.fs){let L=await e.fsStat(k);return L.exists&&L.type==="dir"}try{return(await e.fs.stat(k)).type===Dp.FileType.Directory}catch(L){if((L==null?void 0:L.code)==="FileNotFound"||(L==null?void 0:L.code)==="FileNotADirectory"||L!=null&&L.message.toLowerCase().includes("file not found"))return!1;throw L}},isSocket:async k=>{if(h)return!1;try{return await X({exec:p,cmd:"test",args:["-S",k],output:Fe}),!0}catch(L){if((L==null?void 0:L.code)!==1)throw L;return!1}},readFile:(A=e.fs)!=null&&A.read?async k=>{let L=await e.fs.read(k),N=[];return L.onDidReceiveMessage(H=>N.push(H)),await L.onEnd,Buffer.concat(N)}:k=>bB(p,f,v,k,Fe),writeFile:(U=e.fs)!=null&&U.write?async(k,L)=>{let{stream:N,done:H}=await e.fs.write(k);N.write(L),N.end(),await H}:(k,L)=>TB(p,f,v,k,L,Fe),rename:(R=e.fs)!=null&&R.rename?async(k,L)=>e.fs.rename(k,L):(k,L)=>SS(p,f,k,L,Fe),rm:(E=e.fs)!=null&&E.rm?async k=>e.fs.rm(k):(k,L)=>xS(p,f,k,L||{},Fe),mkdirp:(x=e.fs)!=null&&x.mkdirp?async k=>e.fs.mkdirp(k):k=>_S(p,f,k,Fe),readDir:(b=e.fs)!=null&&b.readdir?async k=>(await e.fs.readdir(k)).map(N=>N.name):k=>kB(p,f,k,Fe),readDirWithTypes:(D=e.fs)!=null&&D.readdir?async k=>(await e.fs.readdir(k)).map(N=>{let H=0;return N.type&Dp.FileType.File&&(H|=1),N.type&Dp.FileType.Directory&&(H|=2),N.type&Dp.FileType.SymbolicLink&&(H|=64),[N.name,H]}):jn(f,{posix:async k=>{let L={f:1,"*":1,"/":2,"@":64};return(await X({exec:p,cmd:"ls",args:["-aF",k],output:Fe})).stdout.toString().trim().split(`
`).map(N=>"/*@=%|>".indexOf(N[N.length-1])!==-1?[N.substr(0,N.length-1),N[N.length-1]]:[N,"f"]).filter(([N])=>N!=="."&&N!=="..").map(([N,H])=>[N,L[H]||0])},win32:void 0}),getUsername:async()=>(I===void 0&&(I=await jn(f,{posix:async()=>(await X({exec:p,cmd:"id",args:["-u","-n"],output:Fe})).stdout.toString().trim(),win32:async()=>d.USERNAME})()),I),toCommonURI:()=>Promise.resolve(void 0),connect:bf((T=e.fs)!=null&&T.connect?k=>{if("port"in k&&!e.tcpConnect)return y(k);let L=(async()=>{let{stream:N}=await("port"in k?e.tcpConnect(k.host,k.port):e.fs.connect(k.socketPath));return mse.duplex(jk(N,N))})();return{sink:N=>{L.then(H=>H.sink(N),H=>N(H,()=>{})).catch(H=>i.write(`Connection forwarding to sink error: ${(H==null?void 0:H.stack)||(H==null?void 0:H.message)||String(H)}`))},source:(N,H)=>{L.then(B=>B.source(N,H),B=>H(B)).catch(B=>i.write(`Connection forwarding to source error: ${(B==null?void 0:B.stack)||(B==null?void 0:B.message)||String(B)}`))}}}:y,"Exec Server",i),locateCertificatesFile:function(){return _||(_=TS(this,void 0,i))},nodeExecutable:v,reconnect:async k=>{k?k!==e?(i.write("Updating to new ExecServer to reconnect."),e=k):i.write("New ExecServer to reconnect same as old."):i.write("No new ExecServer to reconnect.")}}}function hse(e,t){return async function(n){let{cmd:r,args:o,output:i}=n,s=e(),a=`Run: ${r} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=i.start(a),l=n.cwd||t,u=await s.env(),f=n.env?{...u.env,...n.env}:u.env,m=await s.spawn(r,o||[],{cwd:l,env:f});return{stdin:gse(m.stdin),stdout:LV(m.stdout),stderr:LV(m.stderr),exit:Promise.all([m.onExit,m.stdout.onEnd,m.stderr.onEnd]).then(([{status:d}])=>(i.stop(a,c),{code:d,signal:null})).catch(d=>{throw i.stop(a,c),d!=null&&d.message.includes("NotFound")&&(d.code="ENOENT"),d}),async terminate(){}}}}function LV(e){return jk(void 0,e)}function gse(e){return jk(e,void 0)}function jk(e,t){let n=new FV.Stream,r=!1;if(e&&(n.writable=!0,n.write=function(o,i,s){s=Array.from(arguments).find(c=>typeof c=="function");let a;try{e.write(o)}catch(c){a=c,setImmediate(()=>n.emit("error",c))}return s&&s(a),!0},n.end=function(o,i,s){s=Array.from(arguments).find(a=>typeof a=="function"),typeof o=="function"&&(o=void 0);try{o&&e.write(o),r=!0,e.end()}catch(a){setImmediate(()=>n.emit("error",a))}return s&&s(),this}),t){let c=function(){for(;i.length&&!n.paused;)n.emit("data",i.shift());!n.paused&&o&&n.emit("end")},o=!1;n.readable=!0,n.paused=!0;let i=[];(t.onDidReceiveMessage||t.onData)(l=>{let u=Buffer.from(l);n.paused?i.push(u):n.emit("data",u)}),t.onEnd.then(()=>{o=!0,n.paused||n.emit("end")});let s=n.on.bind(n);n.on=(l,u)=>{let f=s(l,u);return l==="data"&&n.paused&&setImmediate(n.resume.bind(n)),f};let a=n.pipe.bind(n);n.pipe=function(l,u){let f=a(l,u);return n.paused&&n.resume(),f},n.pause=function(){return n.paused=!0,n},n.resume=function(){return n.paused=!1,c(),n}}return n.destroy=function(o){return e&&!r&&(r=!0,n.end()),o&&n.emit("error",o),n.emit("close"),this},n}var wz=W(require("https")),Oh=W(require("os")),Ay=W(require("vscode"));var ole=async(e,t,n)=>{let r=await Promise.resolve().then(()=>(Id(),hG)),o=await Promise.resolve().then(()=>(QG(),ZG)),i=new r.AppInsightsCore,s=new o.PostChannel,a={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:n};a.extensionConfig[s.identifier]=u}let l=t.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(a,[]),i.addTelemetryInitializer(u=>{u.ext=u.ext??{},u.ext.web=u.ext.web??{},u.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),i},eq=async(e,t,n)=>{let r=await ole(e,t,n);return{logEvent:(s,a)=>{try{r==null||r.track({name:s,baseData:{name:s,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!r){a();return}r.flush(!0,l=>{if(!l){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!r){a();return}r.unload(!1,()=>{a(),r=void 0},1e3)})}};Lc();var Jd=class e{static applyReplacements(t,n){for(let r of Object.keys(t))for(let o of n)o.lookup.test(r)&&(o.replacementString!==void 0?t[r]=o.replacementString:delete t[r])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getAdditionalCommonProperties(t){return{"common.os":t.platform,"common.nodeArch":t.architecture,"common.platformversion":(t.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"PACKAGE_JSON_VERSION"}}static getInstance(){return e._instance||(e._instance=new e),e._instance}};var gz=async(e,t,n,r,o)=>{let i;try{let a=await Promise.resolve().then(()=>(hz(),pz)),c={};if(r){let f={alwaysUseXhrOverride:!0,httpXHROverride:r};c[WD]=f}let l;e.startsWith("InstrumentationKey=")||(l=e);let u=l?{instrumentationKey:l}:{connectionString:e};i=new a.ApplicationInsights({...u,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:c})}catch(a){return Promise.reject(a)}return{logEvent:(a,c)=>{let l={...c==null?void 0:c.properties,...c==null?void 0:c.measurements};o!=null&&o.length&&Jd.applyReplacements(l,o),i==null||i.track({name:a,data:l,baseType:"EventData",ext:{user:{id:t,authId:t},app:{sesId:n}},baseData:{name:a,properties:c==null?void 0:c.properties,measurements:c==null?void 0:c.measurements}})},flush:async()=>{i==null||i.flush(!1)},dispose:async()=>new Promise(c=>{i==null||i.unload(!0,()=>{c(),i=void 0},1e3)})}};var QD=class{constructor(t,n,r){this.telemetrySender=t,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(t,n,r,o){o?this.telemetrySender.sendEventData(t,{properties:n,measurements:r}):this.telemetryLogger.logUsage(t,{properties:n,measurements:r})}sendTelemetryEvent(t,n,r){this.internalSendTelemetryEvent(t,n,r,!1)}sendRawTelemetryEvent(t,n,r){let o={...n};for(let i of Object.keys(o??{})){let s=o[i];typeof i=="string"&&s!==void 0&&(o[i]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(t,o,r)}sendDangerousTelemetryEvent(t,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(t,n,r,!0)}internalSendTelemetryErrorEvent(t,n,r,o){o?this.telemetrySender.sendEventData(t,{properties:n,measurements:r}):this.telemetryLogger.logError(t,{properties:n,measurements:r})}sendTelemetryErrorEvent(t,n,r){this.internalSendTelemetryErrorEvent(t,n,r,!1)}sendDangerousTelemetryErrorEvent(t,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(t,n,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(t=>t.dispose()))}};var Mc;(function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"})(Mc||(Mc={}));var eI=class{constructor(t,n){this._instantiationStatus=Mc.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=t}sendEventData(t,n){if(!this._telemetryClient){this._instantiationStatus!==Mc.INSTANTIATED&&this._eventQueue.push({eventName:t,data:n});return}this._telemetryClient.logEvent(t,n)}sendErrorData(t,n){if(!this._telemetryClient){this._instantiationStatus!==Mc.INSTANTIATED&&this._exceptionQueue.push({exception:t,data:n});return}let r={stack:t.stack,message:t.message,name:t.name};if(n){let o=n.properties||n;n.properties={...o,...r}}else n={properties:r};this._telemetryClient.logEvent("unhandlederror",n)}async flush(){var t;return(t=this._telemetryClient)==null?void 0:t.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:n})=>this.sendEventData(t,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:n})=>this.sendErrorData(t,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Mc.NOT_INSTANTIATED&&(this._instantiationStatus=Mc.INSTANTIATING,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=Mc.INSTANTIATED,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=Mc.INSTANTIATED}))}};function vz(){return{sendPOST:(t,n)=>{let r={method:"POST",headers:{...t.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)}};try{let o=wz.request(t.urlString,r,i=>{i.on("data",function(s){n(i.statusCode??200,i.headers,s.toString())}),i.on("error",function(){n(0,{})})});o.write(t.data,i=>{i&&n(0,{})}),o.end()}catch{n(0,{})}}}}var Fy=class extends QD{constructor(t,n){let r=s=>gz(s,Ay.env.machineId,Ay.env.sessionId,vz(),n);Jd.shouldUseOneDataSystemSDK(t)&&(r=s=>eq(s,Ay,vz()));let o={release:Oh.release(),platform:Oh.platform(),architecture:Oh.arch()},i=new eI(t,r);if(t&&t.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,Ay,{additionalCommonProperties:Jd.getAdditionalCommonProperties(o)})}};var Au=W(Fz());var Oz=W(require("vscode"));function Ut(e){let t=Oz.workspace.getConfiguration(),n=ss(e),r=t.get(n),o=wl(e),i=t.get(o);if(i!=null&&i!==r){let s=t.inspect(n);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return i}return r}function EA(e,t){return e.affectsConfiguration(ss(t))||e.affectsConfiguration(wl(t))}var Nu=W(require("path"));var Uz=W(require("os")),Pt=W(require("vscode")),rm=require("vscode");async function dI(){await Pt.window.showInformationMessage(rm.l10n.t("You need to first save your workspace in a folder containing all its workspace folders."),{modal:!0})}async function Ta(e){var r;let t=e?[e]:(r=Pt.workspace.workspaceFolders)==null?void 0:r.map(o=>o.uri);if(!t)return[];let n=await Promise.all([...t.map(o=>(async()=>{try{let i=o.with({path:Nu.posix.join(o.path,".devcontainer.json")});if((await Pt.workspace.fs.stat(i)).type===Pt.FileType.File)return[i]}catch(i){if((i==null?void 0:i.code)!=="FileNotFound")throw i}return[]})()),...t.map(o=>Pt.workspace.findFiles(new Pt.RelativePattern(o.with({path:Nu.posix.join(o.path,".devcontainer")}),"{devcontainer.json,*/devcontainer.json}")))]);return[].concat(...n)}async function Lu(e,t){let n;if(e.length>1){let r=Pt.window.createQuickPick();r.placeholder=rm.l10n.t("Select a devcontainer.json file."),r.busy=!0,r.enabled=!1,r.show(),r.items=(await Promise.all(e.map(async i=>{let s=i.uri,a=i.fileHost.path,c=i.fileHost.platform,l=_e(s,c),u=$e((await i.fileHost.readFile(l)).toString())||{},f,m,d=a.dirname(l),p=a.dirname(d);a.basename(d)===".devcontainer"?(f=rm.l10n.t("Main"),m=p):a.basename(p)===".devcontainer"?(f=a.basename(d),m=a.dirname(p)):(f=rm.l10n.t("Project Root"),m=d);let g=u.name||f,h=i.type==="repositoryConfig"||i.type==="userData"?Uy(c,l,Uz.homedir()):a.relative(m,l);return{label:g,description:h+(s.toString()===(t==null?void 0:t.toString())?` ${rm.l10n.t(" (Current)")}`:""),uri:s,buttons:[{iconPath:new Pt.ThemeIcon("go-to-file"),tooltip:rm.l10n.t("Open File")}]}}))).sort((i,s)=>{let a=Nu.posix.dirname(i.uri.path),c=Nu.posix.dirname(s.uri.path);return a!==c?a.localeCompare(c):i.label.localeCompare(s.label)}),r.busy=!1,r.enabled=!0;let o=await new Promise(i=>{r.onDidAccept(()=>i(r.selectedItems[0])),r.onDidHide(()=>i(void 0)),r.onDidTriggerItemButton(({item:s})=>{Pt.commands.executeCommand("vscode.open",s.uri),i(void 0)})});r.dispose(),n=o?Ce.from(o.uri):"cancelled"}else e.length===1&&(n=e[0].uri);return n}function Uy(e,t,n){if(e==="win32")return t;let r=`${lue(n,"/")}/`;return(e==="linux"?t.startsWith(r):t.toLowerCase().startsWith(r.toLowerCase()))&&(t=`~/${t.substr(r.length)}`),t}function lue(e,t){if(t.length===0)return e;for(;e.endsWith(t);)e=e.substr(0,e.length-t.length);return e}function ka(e,t){let n=Pt.workspace.fs;return{platform:e,path:e==="win32"?Nu.win32:Nu.posix,async isFile(r){try{return((await n.stat(Tn(e,t,r))).type&Pt.FileType.File)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async isFolder(r){try{return((await n.stat(Tn(e,t,r))).type&Pt.FileType.Directory)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async readFile(r){try{let o=await n.readFile(Tn(e,t,r));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${r}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(r,o){try{let i=Tn(e,t,r),s=Tn(e,t,o);await n.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${r} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async rm(r,o){try{let i=Tn(e,t,r);await n.delete(i,{recursive:o.recursive})}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not remove ${r}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(r,o){await n.writeFile(Tn(e,t,r),o)},async readDir(r){return(await n.readDirectory(Tn(e,t,r))).map(i=>i[0])},async readDirWithTypes(r){return n.readDirectory(Tn(e,t,r))},async mkdirp(r){await n.createDirectory(Tn(e,t,r))},async toCommonURI(r){return Tn(e,t,r)}}}var Oy=class{async readDocument(t){try{let n=Pt.workspace.textDocuments.find(o=>o.uri.toString()===t.toString());if(n)return n.getText();let r=await Pt.workspace.fs.readFile(t);return Buffer.from(r).toString()}catch{return}}async applyEdits(t,n,r){let o=Pt.workspace.textDocuments.find(s=>s.uri.toString()===t.toString());if(o){let s=new Pt.WorkspaceEdit;for(let a of n){let c=o.positionAt(a.offset),l=o.positionAt(a.offset+a.length);s.replace(t,new Pt.Range(c,l),a.content)}if(await Pt.workspace.applyEdit(s))return}let i=Eo(r,n);await Pt.workspace.fs.writeFile(t,Buffer.from(i))}};function $y(e){var o,i;let t=((o=/\r?\n/.exec(e))==null?void 0:o[0])||`
`,n=((i=/^\t|^ +/m.exec(e))==null?void 0:i[0])||"	",r=n[0]===" ";return{eol:t,insertSpaces:r,tabSize:r?n.length:void 0}}function My(){let e=Ut("logLevel")||"debug";return _C(e)}var He=require("vscode");var $z=W(require("crypto"));async function mI(e,t,n){let r=await SA(e,t,n);return r?Ta(await e.toCommonURI(r)):[]}var pI=".devcontainer-internal.json";async function SA(e,t,n){let r=xA(e,t,n),o=e.path.basename(r),i=e.path.dirname(r),s=await e.isFolder(i)?await e.readDir(i):[];for(let a of s)if(a===o||a.startsWith(`${o}-`)&&!isNaN(Number(a.substring(o.length+1)))){let c=e.path.join(i,a),l=e.path.join(c,pI);if(await e.isFile(l)){let u=$e((await e.readFile(l)).toString());if((u==null?void 0:u.rootFolder)===t.rootFolderPath)return c}}}function Mz(e,t,n){return`${xA(e,t,n)}-${$z.randomUUID()}`}async function Hz(e,t,n,r){let o=`// Maintained by the Dev Container extension
${JSON.stringify({rootFolder:t.rootFolderPath},void 0,"	")}`;await e.writeFile(e.path.join(r,pI),Buffer.from(o));let i=xA(e,t,n),s;for(let a=1;;a++)if(s=a>1?`${i}-${a}`:i,!await e.isFolder(s)){await e.rename(r,s);break}return s}function xA(e,t,n){return e.path.join(n,"configs",e.path.basename(t.rootFolderPath))}async function Bz(e,t){await e.rm(t,{recursive:!0})}process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";process.env.APPLICATIONINSIGHTS_CONFIGURATION_CONTENT="{}";function Wz(e){return e.serverDataFolderName?e.serverDataFolderName:e.quality?e.quality==="stable"?".vscode-server":e.quality==="insider"?".vscode-server-insiders":`.vscode-server-${e.quality}`:".vscode-server-oss"}var st="remote-containers.revealLogTerminal",RA="remote-containers.revealPostCreateTerminal",sm="remote-containers.openDevContainerFile",Kz="remote-containers.openRepositoryInVolume",gI="remote-containers.openRepositoryInUniqueVolume",Jz="remote-containers.openRepositoryFromRemoteHubWithEditSession",Xz="remote-containers.openRepositoryFromGitWithEditSession",Zz="remote-containers.openPullRequestInVolume",jz=new SC,Xn={onRemoveOnShutdownChangedEmitter:jz,onRemoveOnShutdownChanged:jz.event,results:new Map},om,pn=e=>Lf(e,K.env.appRoot);function Wy(e,t,n,r,o,i){return async(s,a)=>{r(),K.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0);let c=K.env.remoteAuthority;if(a.resolveAttempt>1){let l=n.get(c);if(!l)throw new Error("Reconnect attempt without old result.");let u=He.l10n.t("Reconnection attempt {0}",a.resolveAttempt-1),f=e.log.start(u),{cliHost:m}=l.params;if(m.reconnect){let h=`Reconnecting CLIHost ${a.execServer?"with":"without"} ExecServer.`,w=e.log.start(h);try{await m.reconnect(a.execServer)}catch(C){throw e.log.write(it(String(C&&(C.stack||C.message)||C))),K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Cannot reconnect to remote host."))}finally{e.log.stop(h,w)}}else e.log.write("CLIHost does not need reconnection.");if((await jy(m,e.log)).pauseResolver&&await Qz(m,e.log),l.dockerContainerId){let h=await ti(l.dockerParams,l.dockerContainerId);if(!h)throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container no longer exists."));if(h.State.Status==="paused")throw K.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Container is paused."));if(h.State.Status!=="running")throw K.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container is no longer running."))}let p=l.resolvedAuthority.port,g=lW(l.params.forwardedPorts,p);if(g){if(g.connections.size){e.log.write(`Destroying ${g.connections.size} leftover connections to forwarded port ${p}.`);for(let h of g.connections)h.destroy()}}else e.log.write(`Forwarded port ${p} not found.`);return e.log.stop(u,f),{...l.resolvedAuthority,isTrusted:l.isTrusted}}else{let l=He.l10n.t("Resolving Remote"),u=e.log.start(l),f=await i(c,a,e,t);return uue(f.params,f.properties).catch(m=>{}),n.set(c,f),o(),e.log.stop(l,u),K.window.withProgress({location:K.ProgressLocation.Window,title:Nue,cancellable:!1},async m=>{await zT(f.params.backgroundTasks)}).then(void 0,m=>{e.log.write(it(String(m&&(m.stack||m.message)||m)))}),{...f.resolvedAuthority,...f.tunnelInformation,isTrusted:f.isTrusted}}}}async function jy(e,t){let n=e.path.join(await e.homedir(),".vscode-remote-containers","config.json");try{let r=$e((await e.readFile(n)).toString())||{},o=r.canConnectToContainer!==!1,i=r.canRebuildContainer!==!1&&o;return await K.commands.executeCommand("setContext","hideConnectCommands",!o),await K.commands.executeCommand("setContext","hideRebuildCommands",!i),{canConnectToContainer:o,canRebuildContainer:i,pauseResolver:!!r.pauseResolver}}catch(r){return r.code!=="ENOENT"&&t.write(`Error reading ${n}: ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||r}`),{canConnectToContainer:!0,canRebuildContainer:!0,pauseResolver:!1}}}async function Qz(e,t){let n=He.l10n.t("Pausing resolver"),r=t.start(n),o=Vv(e),i=`
const fs = require('fs');
const path = require('path');
const os = require('os');

const filepath = path.join(os.homedir(), '.vscode-remote-containers', 'config.json');

fs.watch(path.dirname(filepath), (event, filename) => {
	if (filename === path.basename(filepath)) {
		console.log(\`config.json file event: \${event}\`);
		rereadConfig(true);
	}
});
rereadConfig();
setInterval(() => {
	rereadConfig();
}, 5000);
function rereadConfig(event = false) {
	try {
		const text = fs.readFileSync(filepath, 'utf8');
		const config = JSON.parse(text);
		if (!config.pauseResolver) {
			console.log(\`config.json: Continuing... (\${event ? 'event' : 'poll'})\`);
			process.exit();
		}
		if (event) {
			console.log('config.json: Still paused.');
		}
	} catch (err) {
		console.log('config.json: Not a JSON file.');
	}
}
`;try{await X({exec:e.exec,cmd:o.cmd,args:[...o.args,"-e",i],output:on(t,1),print:"continuous"})}catch(s){t.write(it((s==null?void 0:s.message)||String(s)))}t.stop(n,r)}async function uue(e,t){if(!t.nodeExecutable)return;let n=await ct(im.join(e.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:r}=await Xa(e,t,[t.nodeExecutable,"-e",n],void 0,{silent:!0}),o=r.toString().trim();e.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var _A;async function vI(e){return _A||(_A=Al(im.join(__dirname,"..",".."),am,e)),_A}var Hy={};async function am(e,t=!0){var n;if(e.counter&&((n=Hy[e.prompt])==null?void 0:n.from)===e.counter&&delete Hy[e.prompt],!Hy[e.prompt]){if(!t)return"";Hy[e.prompt]={result:Promise.resolve(K.window.showInputBox({prompt:e.prompt||He.l10n.t("Enter password"),password:!0,ignoreFocusOut:!0}).then(r=>r||"")),from:e.counter}}return Hy[e.prompt].result}async function Qe(e,t,n,r=!0,o=vI(t),i=!0){var C;let s=!n;if(s){if(Xn.results.size){let v=[...Xn.results.values()].filter(y=>y.dockerParams)[0];if(v)return kV(v.dockerParams)}if(om)return om}PI()&&(t.write(He.l10n.t("Getting Docker parameters for own remote.")),cm()===1&&t.write(new Error().stack,1)),n&&typeof n!="string"&&"scheme"in n&&(n.scheme==="file"?n=n.fsPath:n=ap(n));let a,c;if(!n){let v=(K.workspace.workspaceFolders||[])[0];if(K.env.remoteName==="wsl")v?n=ap(v.uri):n={wslDistro:CS(K.env.remoteAuthority),wslPath:"/"};else if(K.env.remoteName==="ssh-remote"){if(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),!c){let y=bv(K.env.remoteAuthority);if(y){let{user:S,hostName:I,port:_}=y;a={host:`ssh://${S?`${S}@`:""}${I}${_?`:${_}`:""}`}}}(c||a)&&(v?n=v.uri.path:n="/")}else K.env.remoteName==="tunnel"?(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),v?n=v.uri.path:n="/"):K.env.remoteName==="attached-container"?a=(C=Gf(K.env.remoteAuthority))==null?void 0:C.settings:(v==null?void 0:v.uri.scheme)==="file"&&(n=v.uri.fsPath);n||(n=process.cwd())}let l=a&&"host"in a&&a.host||void 0,u=r?Gi():{executeInWSL:"never",defaultDistro:void 0},f=await wv(K.env.appRoot),m=Vr(c?{server:c,authority:K.env.remoteAuthority}:void 0,l,n,pn,u,e.extensionPath,await Cr(),f,t,gi,{sshAskpassEnv:o,settings:Bh()});i&&!await Promise.race([m,Bt(1e3)])&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Setting up Dev Containers (show log)")}](command:${st} "${He.l10n.t("Show details in terminal")}")`,cancellable:!1},async()=>{await m});let d=await m,p=As(),g=Ra();if(!a){let v=K.workspace.getConfiguration("containers"),y=K.workspace.getConfiguration("docker"),S=v.get("environment")||{},I=y.get("environment")||{},_=S.DOCKER_CONTEXT||I.DOCKER_CONTEXT||y.get("context")||d.env.DOCKER_CONTEXT;if(!_){let A={cliHost:d,dockerCLI:p,dockerComposeCLI:gs({exec:d.exec,env:{},output:Fe},p,g),dockerComposePath:g,env:{},output:Fe};_=await yk(A)||"default"}_&&_!=="default"?a={context:_}:(a={...lr(d.env),...["host","certPath","tlsVerify"].reduce((A,U)=>fue(A,y,U),{}),...lr({...I,...S})},Object.keys(a).length||(a=void 0))}let h={...d.type==="local"?await o:void 0,...await Yf(d,a)},w={cliHost:d,dockerCLI:p,dockerComposeCLI:gs({exec:d.exec,env:h,output:t},p,g),dockerComposePath:g,env:h,output:t};return s&&(om=w,NA(e,f),await jy(w.cliHost,t)),w}async function e4(){if(!K.env.remoteName||K.env.remoteName==="test")return process.platform;if(K.env.remoteName==="ssh-remote"||K.env.remoteName==="tunnel"){let e=await K.workspace.getRemoteExecServer(K.env.remoteAuthority);if(e)return(await e.env()).osPlatform}return"linux"}var hI;function NA(e,t){if(hI)return hI;let n=pue(e,t);return e.subscriptions.push(n),e.subscriptions.push(n.event(()=>{let r=om==null?void 0:om.cliHost;om=void 0,r!=null&&r.terminate&&r.terminate()})),hI=n.event,hI}function fue(e,t,n){let r=t.get(n);return r&&(e[n]=r),e}var due=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment","containers.environment"],mue=["dockerPath","dockerComposePath","executeInWSL","executeInWSLDistro"];function pue(e,t){let n=new K.EventEmitter,r=K.workspace.onDidChangeConfiguration(async l=>{(due.some(u=>l.affectsConfiguration(u))||mue.some(u=>EA(l,u)))&&n.fire()}),o,i,s,a=()=>{(async()=>{i||(i=await Vr(void 0,void 0,process.cwd(),pn,Gi(),e.extensionPath,await Cr(),t,Fe,gi));let l={cliHost:i,dockerCLI:As(),dockerComposeCLI:gs({exec:i.exec,env:{},output:Fe},As(),Ra()),dockerComposePath:Ra(),env:{},output:Fe},u=await yk(l);u===void 0?s=setTimeout(a,120*1e3):(u!==o&&(o!==void 0&&n.fire(),o=u),s=setTimeout(a,2*1e3))})().catch(console.error)};a();let c=n.dispose;return n.dispose=()=>{r.dispose(),s&&clearTimeout(s),c.call(n)},n}function Fu(){let e=K.workspace.workspaceFolders;if((e==null?void 0:e.length)===1){let t=e[0].uri;return LA(t)}return null}function LA(e){if(e&&e.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(e.authority)){let n=io(e.authority);if(ln(n))return null;if(oo(n)&&n.inspectVolume&&n.inspectVolume===!0)return n}return null}function wI(e){return{getConfigurationState:()=>e.get("configurationState"),updateConfigurationState:async t=>e.update("configurationState",t),containerOutdated:hue}}async function hue(e){let t="Rebuild",n="Ignore",r=await K.window.showInformationMessage(He.l10n.t("Configuration file(s) changed: {0}. The container might need to be rebuilt to apply the changes.",e.join(", ")),t,n);if(r===t)return K.commands.executeCommand("remote-containers.rebuildContainer");if(r===n)return"ignore"}var DA="remote.defaultExtensionsIfInstalledLocally",Vz="dev.containers.defaultExtensionsIfInstalledLocally";async function t4(){let e=K.workspace.getConfiguration(),t=e.get(Vz);if(!t)return;let n=e.inspect(DA);if(!(n!=null&&n.globalValue))await e.update(DA,t,K.ConfigurationTarget.Global);else{let r=n.globalValue.slice(),o=n.globalValue.map(i=>i.toLowerCase());for(let i of t){let s=i.toLowerCase();o.includes(s)||r.push(i)}await e.update(DA,r,K.ConfigurationTarget.Global)}await e.update(Vz,void 0,K.ConfigurationTarget.Global)}function gue(e){return e?Yz():Array.from(new Set([...Ut("defaultExtensions")||[],...Yz()]))}function n4(){return Fu()?{}:Ut("defaultFeatures")||{}}function Yz(){let e=K.env.language,t=e.indexOf("-"),n=Gz(e)||(t!==-1?Gz(e.substr(0,t)):void 0);return n?[n]:[]}function Gz(e){let t=e.toLowerCase();return K.extensions.all.filter(n=>{var o;let r=n.packageJSON&&n.packageJSON.contributes;return(o=r==null?void 0:r.localizations)!=null&&o.length?!!r.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===t}):!1}).map(n=>n.id)[0]}function qz(){return!!K.workspace.getConfiguration().get("workbench.enableExperiments")}function vue(){return!!Ut("enableWebAccess")}function yI(){return Ut("workspaceMountConsistency")||"cached"}async function CI(e,t,n){if(e.type!=="local")try{let r=e.path.join(await e.homedir(),Wz(t),"data","Machine","settings.json"),o=await e.readFile(r),i=$e(o.toString());return(i==null?void 0:i["dev.containers.gpuAvailability"])||"detect"}catch(r){return(r==null?void 0:r.code)!=="ENOENT"&&n.write(it(String(r&&(r.stack||r.message)||r))),"detect"}return Ut("gpuAvailability")||"detect"}function EI(){return Ut("cacheVolume")??!0}function wue(){let e=Ut("copyGitConfig");return typeof e=="boolean"?e:!0}function yue(){return Ut("gitCredentialHelperConfigLocation")||"global"}function Cue(){let e=Ut("dockerCredentialHelper");return typeof e=="boolean"?e:!0}function Eue(){let e=Ut("githubCLILoginWithToken");return typeof e=="boolean"?e:!0}function Sue(){let e=Ut("mountWaylandSocket");return typeof e=="boolean"?e:!0}function As(){return Ut("dockerPath")||"docker"}function SI(){return Ut("dockerSocketPath")||"/var/run/docker.sock"}function Gi(){return{executeInWSL:AA(),defaultDistro:xI()}}function AA(){return process.platform!=="win32"?"never":Ut("executeInWSL")?"always":"forWSLPath"}function xI(){if(process.platform==="win32")return Ut("executeInWSLDistro")||void 0}function xue(){return process.platform==="win32"&&Ut("forwardWSLServices")!==!1}function Ra(){return Ut("dockerComposePath")||"docker-compose"}function _I(){return Ut("experimentalLockfile")||!1}function Hh(){return Ut("experimentalMountGitWorktreeCommonDir")||!1}function FA(){let e=Ut("optimisticallyLaunchDocker");return typeof e=="boolean"?e:!0}function cm(){let e=Ut("logLevel")||"debug";return _C(e)}var _ue=e=>K.workspace.onDidChangeConfiguration(t=>{EA(t,"logLevel")&&e(cm())});function Due(){let e=K.workspace.getConfiguration(),t=n=>(e.get(wl(n),"")||e.get(n,"")).trim();return{repository:t("dotfiles.repository")||void 0,installCommand:t("dotfiles.installCommand")||void 0,targetPath:t("dotfiles.targetPath")||"~/dotfiles"}}function Bh(){let e=K.workspace.getConfiguration();return{executablePath:e.get("remote.SSH.path"),executableArgs:cm()===1?["-v"]:void 0,configFilePath:e.get("remote.SSH.configFile")}}function qi(e,t,n,r,o,i,s,a,c){var m,d;let l={resolver:t,outcome:n};if(o){l.hostType=o.cliHost.type;let p=o.cliHost.authority;if(p){let g=p.indexOf("+");g!==-1&&(l.hostAuthority=p.substring(0,g))}}i&&(l.configProperties=JSON.stringify(Object.keys(i)),l.configExtensions=JSON.stringify(((d=(m=i.customizations)==null?void 0:m.vscode)==null?void 0:d.extensions)||[]),l.configFeatures=JSON.stringify(Object.keys(i.features||{}).map(p=>zu(p))),"image"in i?l.configType="image":ko(i)?l.configType="dockerfile":"dockerComposeFile"in i&&(l.configType="dockerCompose")),s&&(l.configLocation=s),a&&(l.hardwareId=a.osRelease.hardware,l.osReleaseId=a.osRelease.id,l.osReleaseVersion=a.osRelease.version);let u=c&&c.originalError,f=u&&(u.stack||u.message||String(u))||c&&c.description;f&&(l.errorMessage=f),c!=null&&c.step&&(l.step=c.step),e.sendTelemetryEvent("resolver",l,{sessionTimeInMs:Date.now()-r.getTime()})}var IA=class{constructor(t){this.onClose=t}writeEmitter=new K.EventEmitter;onDidWrite=this.writeEmitter.event;inputEmitter=new K.EventEmitter;onDidInput=this.inputEmitter.event;queue=[];ready=!1;open(){this.ready=!0,this.queue.forEach(t=>this.writeEmitter.fire(t))}close(){this.ready=!1,this.onClose()}write(t){this.queue.push(t),this.ready&&this.writeEmitter.fire(t)}handleInput(t){this.inputEmitter.fire(t)}},By=class{constructor(t,n,r=void 0){this.sessionStart=n;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=t?im.join(t,`remoteContainers-${n.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=Iue(o,cm,this.logFilePath,n,r),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>K.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}_terminal;outputTerminal=new IA(()=>this._terminal=void 0);onDidInput=this.outputTerminal.onDidInput;_name=He.l10n.t("Dev Containers");_revealOnNextOutput=!1;log;logFilePath;get name(){return this._name}set name(t){this._name=t}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(t){this._revealOnNextOutput=t}show(){this._terminal||(this._terminal=K.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function Iue(e,t,n,r,o=void 0){let i=[];return n&&i.push(g0(n,()=>Math.min(2,t()))),i.push(v0(e,t,r)),i.push(Pue()),on(h0(i,o))}function Pue(){return{event(e){e.type==="notification"&&K.window.showInformationMessage(e.message,He.l10n.t("Dismiss"))}}}async function OA(e,t){let n=await ti(e,t.Id);if(n&&n.State.Status==="running")try{await tt(e,"stop",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error stopping container: {0}",r.message))}}async function DI(e,t){let n=await ti(e,t.Id);if(n&&n.State.Status!=="running")try{await tt(e,"start",n.Id)}catch(r){K.window.showErrorMessage(He.l10n.t("Error starting container: {0}",r.message))}}async function r4(e,t){try{await tt(e,"rm",t)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing container: {0}",n.message))}}async function UA(e,t){try{await tt(e,"volume","rm","--force",t)}catch(n){K.window.showErrorMessage(He.l10n.t("Error removing volume: {0}",n.message))}}function bue(){return K.env.sessionId!=="someValue.sessionId"?K.env.sessionId:`${K.env.sessionId}_${Date.now()}`}function Tue(e,t){let n=K.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:e.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:t,tildify:!0}});e.shutdowns.push(n.dispose.bind(n))}async function o4(e,t){if(e.globalState.get("removeOnStartup")===t)return await e.globalState.update("removeOnStartup",null),!0;let n=e.workspaceState.get("removeOnStartup",!1);return n&&await e.workspaceState.update("removeOnStartup",null),n}async function i4(e,t){await e.workspaceState.update("removeOnStartup",t)}async function $A(e,t){await e.globalState.update("removeOnStartup",t)}async function s4(e,t){return e.globalState.get("buildNoCache")===t?(await e.globalState.update("buildNoCache",null),!0):!1}async function Vy(e,t){await e.globalState.update("buildNoCache",t)}async function Wh(e,t,n,r,o){await e.globalState.update("openEditorsOnStartup",{workspaceFolder:t,fileWithError:n==null?void 0:n.toString(),logFile:r,openLog:o})}async function a4(e){var n;let t=e.globalState.get("openEditorsOnStartup");if(t){await e.globalState.update("openEditorsOnStartup",void 0);let r=(n=K.workspace.workspaceFolders)==null?void 0:n.some(i=>i.uri.fsPath===t.workspaceFolder||i.uri.path===t.workspaceFolder),o=await Fu();if(r||o&&o.repositoryPath===t.workspaceFolder&&(r=!0),r){let i=t.fileWithError?Ce.parse(t.fileWithError):void 0;if(t.openLog==="onTheSide"&&await zz(i),t.openLog&&t.logFile){let s={viewColumn:t.openLog==="onTheSide"?K.ViewColumn.Beside:K.ViewColumn.One,preserveFocus:!0},a=await K.window.showTextDocument(K.Uri.file(t.logFile),s),c=new K.Position(a.document.lineCount-1,0);a.selection=new K.Selection(c,c),a.revealRange(a.selection)}return t.openLog!=="onTheSide"&&await zz(i),!0}}return!1}function c4(e){return[`vscode-remote:/workspaces/${e}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${e}/.devcontainer.json`]}async function zz(e){return e?K.commands.executeCommand("vscode.open",K.Uri.parse(e.toString()),{viewColumn:K.ViewColumn.One}):K.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:K.ViewColumn.One})}async function II(e,t,n,r){return!r&&Xn.results.size?[...Xn.results.values()].filter(o=>o.config).map(o=>({type:o.configLocationType||"unknown",uri:o.configWorkspaceURI||o.config.configFilePath,fileHost:e})):(await Promise.all([!r||r==="workspace"?Ta().then(o=>o.map(i=>({type:"workspace",uri:i,fileHost:e}))):[],!r||r==="repositoryConfig"?MA(e,t).then(o=>o.map(i=>({type:"repositoryConfig",uri:i,fileHost:ka(process.platform,i.with({path:im.posix.dirname(i.path)}))}))):[],n&&(!r||r==="userData")?mI(e,t,n).then(o=>o.map(i=>({type:"userData",uri:i,fileHost:e}))):[]])).flat()}async function MA(e,t){let n=Yy();if(n.length){let r=await tS(e,t,Fe);if(r!=null&&r.length){let o=vx(r,n);return(await Promise.all(o.map(s=>Ta(Ce.file(s))))).flat()}}return[]}function Yy(){return Ut("repositoryConfigurationPaths")||[]}async function Hc(e,t){if(t.type==="local")return e.globalStoragePath}async function kue(e,t,n="localhost"){await K.workspace.openTunnel({remoteAddress:{host:n,port:t}})}function l4(e,t){let n=new By(void 0,t);n.name=He.l10n.t("Configuring..."),n.revealOnNextOutput=!0;let r=!1;n.onDidInput(()=>{r&&(r=!1,n.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:BB(n.log,"postCreate",e),onDidInput:n.onDidInput,done:()=>{n.shown&&(n.log.raw(`\x1B[1m${He.l10n.t("Done. Press any key to close the terminal.")}\x1B[0m`),r=!0),o()},promise:new Promise(s=>o=s)};return{channel:n,postCreate:i}}async function Ou(e){let{authority:t,extensionContext:n,sessionStart:r,progress:o,cliHost:i,env:s,cwd:a,wslSettings:c,isLocalContainer:l,telemetry:u,onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,postCreate:g}=e,h=vue(),w=bue(),C=await Cr(),v;if(i.type!=="wsl"&&xue())try{v=await ES(void 0,c,n.extensionPath,C,u.product,pn,m,gi)}catch(S){m.write("Could not connect to WSL."),m.write((S==null?void 0:S.message)||String(S)),S!=null&&S.stdout&&m.write(S.stdout.toString()),S!=null&&S.stderr&&m.write(S.stderr.toString())}let y={computeExtensionHostEnv:!0,...u,appRoot:K.env.appRoot,localCacheFolder:C,containerSessionDataFolder:im.posix.join("/tmp",`devcontainers-${w}`),extensionPath:n.extensionPath,sessionId:w,sessionStart:r,authority:t,cliHost:i,hostConfig:await jy(i,m),env:s,cwd:a,isLocalContainer:l,getAdditionalExtensionsToInstall:gue.bind(void 0),additionalFeaturesToInstall:n4(),isCopyGitConfigEnabled:wue(),credentialHelperConfigLocation:yue(),isDockerCredentialHelperEnabled:Cue(),isGitHubCLILoginWithTokenEnabled:Eue(),dotfilesConfiguration:Due(),progress:Fue(o),onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,defaultUserEnvProbe:"loginInteractiveShell",postCreate:g,getTelemetryLevel:()=>u.getTelemetryLevel(),forwardServerPort:!0,web:h,getLogLevel:cm,onDidChangeLogLevel:_ue,loadNativeModule:pn,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:S=>Tue(y,S),openTunnel:kue,getTunnels:()=>Promise.resolve(K.workspace.tunnels),onAdoptProcess:K.window.onDidOpenTerminal,persistedFolder:await RV(i,n.globalStoragePath),alternateDownload:gi,skipPostAttach:!1,wslCLIHost:v,localWaylandSocket:l?await Rue(i,v,m):void 0,globalState:n.globalState};return y.hostConfig.pauseResolver&&await Qz(i,m),y}async function Rue(e,t,n){if(!Sue())return;let r=await IT(e);if(r)return r;let o=t&&await IT(t);if(o)return PB(t,o,n)}async function gi(e,t){let n=await K.commands.executeCommand("_workbench.downloadResource",K.Uri.parse(e));if(!n)throw new pe({description:He.l10n.t("Downloading the VS Code Server failed. Please try again later.")});await Yc(n.fsPath,t)}var Uu=`[${He.l10n.t("Connecting to Dev Container (show log)")}](command:${st} "${He.l10n.t("Show details in terminal")}")`,Nue=`[${He.l10n.t("Configuring Dev Container (show log)")}](command:${RA} "${He.l10n.t("Show details in terminal")}")`,Lue=`[${He.l10n.t("Reading Dev Container Configuration (show log)")}](command:${st} "${He.l10n.t("Show details in terminal")}")`,Aue={0:"",1:He.l10n.t("Cloning Repository"),2:He.l10n.t("Building image"),3:He.l10n.t("Starting container"),4:He.l10n.t("Installing server"),5:He.l10n.t("Starting server"),6:""};function Fue(e){let t=0;return n=>{let r=6-n,o=(100-t)/(r+1);e.report({message:Aue[n],increment:o}),t+=o}}function u4(e,t,n){let{name:r,publisher:o,version:i,aiKey:s}=t;if(!s)return XF(t,n);let a=o?`${o}.${r}`:r,c=new Fy(s);e.subscriptions.push(c);let l=new PA(c),u=Oue(n),f=qz()?(0,Au.getExperimentationService)(a,i,u,l,e.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async m=>f&&qz()?f.isCachedFlightEnabled(m):!1,product:n,package:t,getTelemetryLevel:()=>c.telemetryLevel}}var PA=class{constructor(t){this.baseReporter=t}sharedProperties={};sendTelemetryEvent(t,n,r){this.baseReporter.sendTelemetryEvent(t,{...this.sharedProperties,...n},r)}setSharedProperty(t,n){this.sharedProperties[t]=n}postEvent(t,n){let r={};for(let[o,i]of n)r[o]=i;this.sendTelemetryEvent(t,r)}};function Oue(e){switch(e.quality){case"stable":return Au.TargetPopulation.Public;case"insider":return Au.TargetPopulation.Insiders;case"exploration":return Au.TargetPopulation.Internal;case void 0:return Au.TargetPopulation.Team;default:return Au.TargetPopulation.Public}}var Gy=He.l10n.t("Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container."),bA="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function qy(e,t){if(t!=null&&t.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-")||e.globalState.get(bA))return!0;let n=He.l10n.t("Got It"),r=He.l10n.t("Learn More"),o=await K.window.showWarningMessage(He.l10n.t("Cloning a repository in a Dev Container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only clone a repository in a Dev Container if you trust its authors.")},n,r);return o===n?(await e.globalState.update(bA,!0),!0):(o===r&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var TA="userConfirmedAttachToContainerRequiresTrust";async function Fs(e){if(e.globalState.get(TA))return!0;let t=He.l10n.t("Got It"),n=He.l10n.t("Learn More"),r=await K.window.showWarningMessage(He.l10n.t("Attaching to a container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only attach to a container if you trust its origin.")},t,n);return r===t?(await e.globalState.update(TA,!0),!0):(r===n&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function f4(e){e.globalState.setKeysForSync([bA,TA,kA])}function d4(){let e=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(e)&&(process.env.PATH=`${e}:/usr/local/bin`)}var kA="updatedToPreRelease2",Uue="2022-01-19T05:14:31.474Z";async function m4(e,t){try{t.quality==="insider"&&t.date&&t.date.localeCompare(Uue)>=0&&!e.globalState.get(kA,!1)&&(await e.globalState.update(kA,!0),await K.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(n){console.error(n)}}async function jh(e,t,n,r){try{return await gx(e,t,n,cm(),void 0,void 0,r,Hh())}catch{return}}async function HA(e,t,n,r){let o=(async()=>{try{return await NV(e,t,n,cm(),n4(),void 0,void 0,r,Hh())}catch{return}})(),i=await Promise.race([o,new Promise(s=>setTimeout(()=>s("timeout"),1e3))]);return i!=="timeout"?i:K.window.withProgress({location:K.ProgressLocation.Notification,title:Lue,cancellable:!0},async(s,a)=>Promise.race([o,new Promise(c=>{let l=a.onCancellationRequested(()=>{l.dispose(),c("canceled")})})]))}async function $u(e){return K.commands.executeCommand("_workbench.addToRecentlyOpened",e)}async function p4(e,t,n,r){try{return await Cp(t,e.globalState,n,r),!0}catch(o){if(!(o instanceof pe))throw o;let i=He.l10n.t("Learn More");return await K.window.showWarningMessage(o.description,{modal:!0,detail:o.detail},...o.data.learnMoreUrl?[i]:[])===i&&await K.env.openExternal(K.Uri.parse(o.data.learnMoreUrl)),!1}}async function h4(e,t){let n="";for(let r=jl(K.env.remoteAuthority);r;r=jl(r.parentAuthority)){let o=r.name==="tunnel"?await K.extensions.getExtension("ms-vscode.remote-server"):r.name==="ssh-remote"?await K.extensions.getExtension("ms-vscode-remote.remote-ssh"):void 0;o&&(n+=` over ${o.packageJSON.displayName} ${o.packageJSON.version}`)}return`Dev Containers ${e.version}${n} in VS Code ${K.version} (${t.commit||"out-of-source"}).`}function g4(e){PI()&&(async()=>await Promise.race([e,new Promise(n=>setTimeout(()=>n("timeout"),1e4))])==="timeout"&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${He.l10n.t("Dev Containers waiting for connection request (show log)")}](command:${st} "${He.l10n.t("Show details in terminal")}")`},async()=>e))()}var $ue=["dev-container","attached-container","k8s-container","apple-container"];function PI(){return K.env.remoteName&&$ue.includes(K.env.remoteName)}var Bc={id:"openDocumentation",title:vi.l10n.t("Open Documentation"),isLastAction:!1,applicable:(e,t)=>!t,execute:async e=>{await $t.env.openExternal($t.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},Wc={id:"reloadWindow",title:vi.l10n.t("Reload Window"),isLastAction:!0,applicable:(e,t)=>!t&&e.data.reload!==!1,execute:async e=>{e.manageContainer&&e.dockerParams&&e.containerId&&await tt(e.dockerParams,"stop","-t","0",e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},w4={id:"rebuildContainer",title:vi.l10n.t("Rebuild Container"),isLastAction:!0,applicable:(e,t)=>e.manageContainer&&!!e.dockerParams&&!!e.containerId&&!t&&!(e.params&&"hostConfig"in e.params&&!e.params.hostConfig.canRebuildContainer),execute:async e=>{await Ri(e.dockerParams,e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},Mu={id:"openRecent",title:vi.l10n.t("Open Recent..."),isLastAction:!0,applicable:(e,t)=>!t,execute:async e=>{await $t.commands.executeCommand("workbench.action.openRecent")}},y4={id:"startContainer",title:vi.l10n.t("Start Container"),isLastAction:!0,applicable:e=>!!e.dockerParams&&!!e.containerId&&e.data.start===!0,execute:async e=>{await tt(e.dockerParams,"start",e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},C4={id:"chooseContainer",title:vi.l10n.t("Choose Container"),isLastAction:!0,applicable:e=>e.data.attach===!0,execute:async()=>{await $t.commands.executeCommand("remote-containers.attachToRunningContainer")}},Na={id:"closeRemote",title:vi.l10n.t("Close Remote"),isLastAction:!0,applicable:(e,t)=>{if(!t)return!1;let n=$t.workspace.workspaceFile;return!(n&&n.scheme==="untitled"||$t.workspace.textDocuments.some(o=>o.isDirty))},execute:async e=>{await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Hu=[{id:"retry",title:vi.l10n.t("Retry"),isLastAction:!0,applicable:(e,t)=>t&&e.data.reload!==!1,execute:Wc.execute},{id:"moreActions",title:vi.l10n.t("More Actions..."),isCloseAffordance:!0,isLastAction:!1,applicable:(e,t)=>t,execute:async e=>{}},{id:"learnMore",title:vi.l10n.t("Learn More"),isLastAction:!1,applicable:(e,t)=>t&&!!e.data.learnMoreUrl,async execute(e){await $t.env.openExternal($t.Uri.parse(e.data.learnMoreUrl))}}];async function La(e,t,n,r=!1,o){var d,p,g,h,w,C;let i=e instanceof pe?e:new pe({description:vi.l10n.t("An error occurred setting up the container."),originalError:e});$t.commands.executeCommand(st);let s=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(s!==void 0){o.write(it(String(s)));let v=(p=(d=i.originalError)==null?void 0:d.stdout)==null?void 0:p.toString().trim();v&&o.write(v);let y=(h=(g=i.originalError)==null?void 0:g.stderr)==null?void 0:h.toString().trim();y&&o.write(it(y)),(w=i.originalError)!=null&&w.code&&o.write(`Exit code ${(C=i.originalError)==null?void 0:C.code}`)}if(i.data.closeRemote)throw await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),$t.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let a=i.actions;a.length||(a=[Bc]);let c=await a.reduce(async(v,y)=>await y.applicable(i,!0)?[...await v,y]:v,Promise.resolve([])),l=await $t.window.showErrorMessage(i.description,{modal:!0,detail:i.detail},...c);if(l&&(v4(n,t,l.id),await l.execute(i)),l&&l.isLastAction){if(r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await a.reduce(async(v,y)=>await y.applicable(i,!1)?[...await v,y]:v,Promise.resolve([])),f=u.map(v=>({label:v.title,action:v}));async function m(){let y=await(u.length?$t.window.showQuickPick(f,{ignoreFocusOut:!0,placeHolder:vi.l10n.t("Pick an action to help resolve the problem.")}):Promise.resolve(void 0));y&&(v4(n,t,y.action.id),y.action.execute(i).catch(console.error),y.action.isLastAction||await m())}if(m().catch(console.error),r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function v4(e,t,n){e.sendTelemetryEvent("errorAction",{resolver:t,action:n})}var hn=W(require("vscode")),zt=require("vscode"),Aa=W(require("path"));var fe=W(require("vscode")),qt=require("vscode");var $4=W(mb());function E4(e){var t;return(t=e.options)!=null&&t.version?"version":void 0}var Kh=W(require("path"));async function Bu(e){let r=await hx({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},e),o=$e(r.toString());return o.collections.find(i=>i.templates.length)||e.write("No container templates retrieved from index.",5),o.collections.find(i=>i.features.length)||e.write("No container features retrieved from index.",5),o}var Nt=W(require("vscode")),at=require("vscode"),Xy=W(require("os"));var Jy=W(require("path"));var _n=W(require("vscode")),Gt=require("vscode");var S4=Gt.l10n.t("Keep Defaults"),Mue=Gt.l10n.t("Configure Options"),zy={iconPath:new _n.ThemeIcon("check-all"),tooltip:Gt.l10n.t("Finish")},BA=["devcontainers","microsoft","github"];async function Vh(e,t,n,r=[],o,i=!0,s=!1){if(!t.length)return{};let a={iconPath:new _n.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")},c=e.quickPick.onDidTriggerItemButton(y=>{let S=y.item.feature.documentationURL;_n.env.openExternal(_n.Uri.parse(S))}),l=await o,u=Gt.l10n.t("Suggested by GitHub Copilot"),f=t.map(y=>{let S=r.indexOf(y)!==-1,I;if(S)I=Gt.l10n.t("$(lock) Feature is included in base image and cannot be removed");else if(y.owner){let A=y.owner==="devcontainers"?"$(verified)":"";I=`${y.owner||Gt.l10n.t("Unknown Publisher")} ${A}`}else I=void 0;let _=l==null?void 0:l.features.includes(y);return{label:_?`$(sparkle) ${y.name}`:y.name,detail:y.description,description:_?I?`${I} ${u}`:u:I,picked:n.indexOf(y)!==-1,buttons:y.documentationURL?[a]:void 0,feature:y,isAlreadyInstalledViaBaseImage:S,kind:_n.QuickPickItemKind.Default}}).sort((y,S)=>{if(y.isAlreadyInstalledViaBaseImage!==S.isAlreadyInstalledViaBaseImage)return y.isAlreadyInstalledViaBaseImage?1:-1;let I=l==null?void 0:l.features.includes(y.feature),_=l==null?void 0:l.features.includes(S.feature);return I!==_?I?-1:1:y.label.localeCompare(S.label)}),m,d=e.quickPick,{matchOnDetail:p}=d;try{d.matchOnDetail=!0;let y=[];s&&y.push(_n.QuickInputButtons.Back),i&&y.push(zy),m=await go(d,f,Gt.l10n.t("Select additional features to install"),Gt.l10n.t("Select Features"),!0,y)}finally{d.matchOnDetail=p}if(c.dispose(),!m)return;if(m.button===_n.QuickInputButtons.Back)return"back";let g=m.pick.filter(y=>!y.isAlreadyInstalledViaBaseImage).map(y=>y.feature),h={};if(!g.length)return h;let w=[];for(let y of t){let S=g.indexOf(y)!==-1;h[y.id]=S?{}:!1,S&&BA.indexOf(y.owner)===-1&&w.push(y)}if(e.askForTrust&&w.length){let y=[...new Set(w.map(E=>E.owner))].sort().map(E=>`@${E}`),S=y.length===1?y[0]:`${y.slice(0,-1).join(", ")} and ${y[y.length-1]}`,I={label:Gt.l10n.t("Trust {0}",S),description:Gt.l10n.t("from GitHub"),buttons:[{iconPath:new _n.ThemeIcon("info"),tooltip:Gt.l10n.t("Open Documentation")}]},_={label:Gt.l10n.t("Back")},A={label:Gt.l10n.t("Cancel")},U=d.onDidTriggerItemButton(()=>{for(let E of w)_n.env.openExternal(_n.Uri.parse(E.documentationURL))}),R=await go(d,[I,_,A],Gt.l10n.t("Some features are from the {0} GitHub owner/organization(s).",S),void 0,void 0,!0);if(U.dispose(),!R||R===A)return;if(R==="back"||R===_)return Vh(e,t,n,r,o,i,s)}return m.button===zy||!i||!g.some(y=>{let S=y.options;return S&&Object.keys(S).some(I=>{let _=S[I];return _.type==="boolean"||_.type==="string"&&("enum"in _&&(_.enum||[]).length>1||"proposals"in _&&(_.proposals||[]).length>1)})})||await _n.window.showQuickPick([S4,Mue],{title:Gt.l10n.t("Keep Feature defaults or configure options?"),canPickMany:!1})===S4?h:Hue(e,h,g,()=>Vh(e,t,n,r,o))}async function Hue(e,t,n,r){return(async function o(i,s,a){if(!s.length)return i;let c=s[0],l=i;if(!(c!=null&&c.options))return o(l,s.slice(1),a);let u,f;return u=await Bue(e,l,c),u&&(f=await Wue(e,u,c,a)),!u||!f?await a():o(f,s.slice(1),a)})(t,n,r)}async function Bue(e,t,n){let r=n==null?void 0:n.options;if(!r)return t;let i=Object.keys(r).filter(l=>{var u;return((u=r[l])==null?void 0:u.type)==="boolean"}).map(l=>{let u=r[l];return{label:l,description:u.description,key:l,value:!0,picked:!!(u!=null&&u.default)}});if(!i.length)return t;let s=n.id,a=n.name||s,c=await go(e.quickPick,i,Gt.l10n.t("Select boolean options for {0}",a),Gt.l10n.t("Select boolean options for '{0}'",a),!0,[_n.QuickInputButtons.Back,zy]);if(!(!c||c.button===_n.QuickInputButtons.Back))return c.pick.reduce((l,u)=>({...l,[s]:{...l==null?void 0:l[s],[u.key]:u.value}}),t)}async function Wue(e,t,n,r){let o=n==null?void 0:n.options;if(!o)return t;let i=n.id,s=n.name||i;return(async function a(c,l,u){if(!l.length)return c;let f=l[0],m=o[f],d=("enum"in m&&m.enum||"proposals"in m&&m.proposals||[]).map(w=>({label:String(w),value:w,description:m.default===w?Gt.l10n.t("(default)"):void 0}));if(d.length===0)return a(c,l.slice(1),u);let p="enum"in m?void 0:w=>{if(!(!w||d.some(C=>C.value===w)))return{label:Gt.l10n.t("Use: {0}",w),value:w,description:Gt.l10n.t("(custom)")}},g=d.length===1?{pick:d[0],button:"ok"}:await go(e.quickPick,d,m.description||Gt.l10n.t("Select a value"),Gt.l10n.t("Select options for '{0}'",s),void 0,[_n.QuickInputButtons.Back,zy],p);if(!g||g.button===_n.QuickInputButtons.Back)return;let h={...c,[i]:{...c==null?void 0:c[i],[f]:g.pick.value}};return g.button===zy?h:a(h,l.slice(1),u)})(t,Object.keys(o).filter(a=>{var c;return((c=o[a])==null?void 0:c.type)==="string"}),r)}var jue=["png","md","json","txt","map"],Vue=["node_modules",".git","bin","out","dist",".vscode-test"],Yue=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],x4={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},_4={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},Gue=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function D4(e,t){let n=new Map;for(let r of t)if(r.platforms){if(Gue.indexOf(r.id)>-1)continue;let o=0,i=0,s=r.platforms;if(s[0]==="Any")o+=5;else for(let a of s)if(_4[a]){let c=_4[a];for(let l of c)e.fileTypes.get(l.toLowerCase())&&(o+=10),e.mostPopularFileType===l&&(o+=10)}else if(x4[a]){let c=x4[a],l=!1;for(let u of c)e.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}n.set(r,o+(i<0?-4:i))}return n}async function I4(e,t){return que(e,t.rootFolderPath,Vue,jue)}async function que(e,t,n,r){let o=new Map,i=new Map,s=500;function a(d,p,g,h){let w=[];(e.readDirWithTypes||e.readDir)(d).then(v=>{if(g.count>=s)return g.count+=v.length,g.maxReached=!0,h(w);let y=v.length;if(y===0)return h(w);let S=v;g.count+v.length>s&&(g.maxReached=!0,y=s-g.count,S=v.slice(0,y)),g.count+=v.length;for(let I of S){let _=Array.isArray(I)?I[0]:I;(Array.isArray(I)?Promise.resolve((I[1]&1)!==0):e.isFile(e.path.join(d,_))).then(U=>{U?(w.push(_),--y===0&&h(w)):p.indexOf(_)===-1?a(e.path.join(d,_),p,g,R=>{if(w=w.concat(R),--y===0)return h(w)}):--y===0&&h(w)},()=>{if(--y===0)return h(w)})}},()=>h(w))}let c=d=>{o.has(d)?o.set(d,o.get(d)+1):o.set(d,1)},l=d=>{for(let p of Yue)p.pattern.test(d)&&(i.has(p.tag)?i.set(p.tag,i.get(p.tag)+1):i.set(p.tag,1))},u=d=>{if(d.lastIndexOf(".")>=0){let p=d.split(".").pop();p&&!r.includes(p)&&c(p.toLowerCase())}l(d)},f=d=>[...d.entries()].reduce((p,g)=>g[1]>p[1]?g:p,["",0])[0],m={count:0,maxReached:!1};return new Promise((d,p)=>{a(t,n,m,async g=>{g.forEach(u),d({configFiles:i,fileTypes:o,fileCount:m.count,mostPopularFileType:f(o)})})})}var wi=W(require("vscode")),bI=require("vscode");var Ky={"ghcr.io/devcontainers/templates/anaconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/kubernetes-helm":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/alpine":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-outside-of-docker-compose":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/jekyll":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/docker-outside-of-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-in-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/go":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet-fsharp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/debian":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/rust-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/universal":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/conda","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/dotnet","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/git-lfs","ghcr.io/devcontainers/features/github-cli","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/hugo","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/kubectl-helm-minikube","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/oryx","ghcr.io/devcontainers/features/php","ghcr.io/devcontainers/features/python","ghcr.io/devcontainers/features/ruby","ghcr.io/devcontainers/features/sshd"],"ghcr.io/devcontainers/templates/python":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/markdown":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/rust":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/java-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/java":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/anaconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/php":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/powershell":["ghcr.io/devcontainers/features/common-utils"],"ghcr.io/devcontainers/templates/kubernetes-helm-minikube":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby-rails-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/cpp-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/cpp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-mssql":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/typescript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/ubuntu":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/php-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/go-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-mongo":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"]};async function b4(e,t,n,r,o){var u;let i=await WA(e,t,n);if(i.type==="cancelled")return;if(i.type==="failure"){let f=bI.l10n.t("OK");return await wi.window.showInformationMessage(wi.l10n.t("Something went wrong. Please pick a Dev Container configuration yourself."),{modal:!0,detail:i.message},f)===f||void 0}if(!i.template){let f=bI.l10n.t("OK");return await wi.window.showInformationMessage(wi.l10n.t("GitHub Copilot did not have enough contextual information. Please pick a Dev Container configuration yourself."),{modal:!0},f)===f||void 0}let s=i.template,a=await jA(e,{id:s,name:s},void 0),c=new Set(Ky[s]||[]);a.features=((u=i.features)==null?void 0:u.filter(f=>!c.has(f)).map(f=>({id:f,copilotSuggested:!0,options:{}})))||[];let l=await Yh(e,t,r,o,a);return l&&Vo(e.telemetry,"copilot",a,o),l}var T4="github.copilot.devcontainer.generateDevContainerConfig",P4=6e3;async function WA(e,t,n){var i,s;let r={index:{templates:((i=e.index)==null?void 0:i.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/templates").map(a=>a.templates).flat().filter(a=>!Gh.includes(a.id)).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[],features:((s=e.index)==null?void 0:s.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/features").map(a=>a.features).flat().filter(a=>!a.deprecated).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[]},rootUri:wi.Uri.parse((await t.toCommonURI(n.rootFolderPath)).toString())},o=new wi.CancellationTokenSource;try{return await Promise.race([wi.commands.executeCommand(T4,r,o.token),Bt(P4).then(()=>(o.cancel(),{type:"failure",message:bI.l10n.t("Timeout after {0} seconds.",P4/1e3)}))])}catch(a){return{type:"failure",message:(a==null?void 0:a.message)||String(a)}}finally{o.dispose()}}async function k4(){return(await wi.commands.getCommands()).includes(T4)}var VA=Jy.default.join(__dirname,"..",".."),R4=Nt.env.appRoot,zue=e=>Lf(e,R4);async function zh(e,t){let{fileHost:n,output:r}=e;r.write("Entering createDevContainerConfig_v2");let o=await U4();if(o){let i=_e(o,n.platform),s=It(n.path,i),a=await XE(n,s);if(a){let l=at.l10n.t("Continue");if(await Nt.window.showInformationMessage(at.l10n.t("The workspace could fail to open in a container: {0}",a),{modal:!0},l)!==l)return!1}let c=await qA(e,s,void 0,void 0,t);if(c){let l=await n.toCommonURI(c);l&&Nt.window.showTextDocument(Nt.Uri.parse(l.toString()))}return!!c}return!1}async function Yh(e,t,n,r,o,i=(s,a)=>a){return Nt.window.withProgress({location:Nt.ProgressLocation.Notification,title:at.l10n.t("Adding Dev Container Configuration Files..."),cancellable:!1},async()=>GA(e,t,n,r,o,i))}async function N4(e){let{output:t}=e,n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await Cr(),o=process.cwd();return{cliHost:await Vr(void 0,void 0,o,zue,n,VA,r,e.telemetry.product,t,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:VA,appRoot:R4,output:t,package:await ir(VA)}}async function GA(e,t,n,r,o,i=(s,a)=>a){let{output:s}=e;s.write(`Preparing to apply Template '${o==null?void 0:o.id}'`);let a=Jy.default.join(Xy.tmpdir(),`tmp-output-dir-${Date.now()}`),c=Jy.default.join(Xy.tmpdir(),`tmp-dir-${Date.now()}`);e.quickPick.busy=!0,e.quickPick.enabled=!1;let l=await N4(e),u;try{u=await Qo(l,["templates","apply","--workspace-folder",a,"--template-id",o.id,"--template-args",o.options?JSON.stringify(o.options):"{}","--features",o.features?JSON.stringify(o.features):"[]","--tmp-dir",c,"--log-level",Jr(My()),"--omit-paths",o.omitPaths?JSON.stringify(o.omitPaths):"[]"])}catch{let d=at.l10n.t("Show Log");await Nt.window.showErrorMessage(at.l10n.t("Application of the template failed."),{modal:!0},...e.showLogCommandId?[d]:[])===d&&Nt.commands.executeCommand(e.showLogCommandId);return}let f=at.l10n.t("Skip"),m;for(let d of u.files){s.write(`Copying file '${d}'`,1);let p=t.path.join(n,d);if(await t.isFile(p)){let w=r==="userData"?Uy(t.platform,p,Xy.homedir()):d,C=await Nt.window.showInformationMessage(at.l10n.t("File '{0}' already exists, overwrite?",w),{modal:!0},f,at.l10n.t("Overwrite"));if(!C)return;if(C===f)continue}await t.mkdirp(t.path.dirname(p));let g=await ct(Jy.default.join(a,d)),h=i(d,g);await t.writeFile(p,h),!m&&Bv(t.path,d)&&(m=p)}return s.write("Cleaning up...",1),await qc(a,{recursive:!0,force:!0}),await qc(c,{recursive:!0,force:!0}),e.quickPick.busy=!1,e.quickPick.enabled=!0,m}async function qA(e,t,n,r,o){let{fileHost:i,telemetry:s}=e,a=await zA(e,n,!1);if(r){Vo(await s,"existsMissingImageInfo");let d=_e(r,i.platform);if(!await Nt.window.showWarningMessage(at.l10n.t("Dev Container configuration '{0}' file is missing image information. You can add this manually or overwrite with a template.",i.path.relative(t.configFolderPath,d)),{modal:!0},at.l10n.t("Use Template"))){let g=await i.toCommonURI(d);g&&Nt.window.showTextDocument(Nt.Uri.parse(g.toString()));return}}let c,l,u="workspace";if(e.userDataFolderForConfigurations){c=await SA(i,t,e.userDataFolderForConfigurations);let d=c&&await Uf(i,c),p={label:at.l10n.t("Add configuration to user data folder"),description:d?at.l10n.t("Configuration already exists"):void 0,detail:at.l10n.t("This avoids having outgoing changes in your workspace folder")},g=await Uf(i,t.configFolderPath),h={label:at.l10n.t("Add configuration to workspace"),description:g?at.l10n.t("Configuration already exists"):void 0,detail:at.l10n.t("This allows you to share the configuration with others via source control")},w=await go(a.quickPick,[h,p],at.l10n.t("Where would you like to create your container configuration?"));if(!w)return;w===p&&(l=c||Mz(i,t,e.userDataFolderForConfigurations),u="userData")}else if(!r){let d=await kI(i,t);if(d){Vo(await s,"exists");let p=_e(d.uri,i.platform);if(!await Nt.window.showWarningMessage(at.l10n.t("Dev Container configuration '{0}' file already exists.",i.path.relative(t.configFolderPath,p)),{modal:!0},at.l10n.t("Continue"))){let h=await i.toCommonURI(p);h&&Nt.window.showTextDocument(Nt.Uri.parse(h.toString()));return}}}let f=l||t.configFolderPath,m;if((o==null?void 0:o.picker)==="copilot"){let d=await b4(a,i,t,f,u);d===!0&&(d=await qh(a,i,t,f,u,void 0)),m=d}else m=await qh(a,i,t,f,u,void 0);if(m&&l&&!c){let d=await Hz(i,t,e.userDataFolderForConfigurations,l);m=i.path.resolve(d,i.path.relative(l,m))}return a.quickPick.hide(),m}async function zA(e,t,n){let r=Nt.window.createQuickPick();r.ignoreFocusOut=!0,t&&(r.title=t);let o=await Bu(e.output);return{existingFilesLearnMoreLink:F4,predefinedDefinitionsLearnMoreLink:O4,...e,quickPick:r,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await e.telemetry,index:o,skipOptions:n}}async function L4(e,t,n,r,o,i,s){if(!e.index)return;let c=await TI(e,t,n,i);if(!c)return;if(c==="back")return s?s():void 0;let l=await Yh(e,t,r,o,c);return l&&Vo(e.telemetry,"definition",c,o),l}var Gh=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function TI(e,t,n,r){let{index:o}=e,i=((o==null?void 0:o.collections.map(l=>l.templates).flat())||[]).filter(l=>!Gh.includes(l.id));if(!(i!=null&&i.length))return;let s=()=>TI(e,t,n,r),a=await Kue(e,t,n,i);if(!(a!=null&&a.length))return YA(e,[],i,r,s);let c=[{label:at.l10n.t("Show All Templates..."),detail:at.l10n.t("Show all available predefined container templates."),alwaysShow:!0,type:"showAll"}];return YA(e,c,a,r,s)}async function Kue(e,t,n,r){r=r.filter(a=>a.owner==="devcontainers");let o=e.stats||t&&n&&(e.stats=await I4(t,n));if(!(o!=null&&o.mostPopularFileType.length))return;let i=D4(o,r);return r.filter(a=>(i.get(a)||0)>0).sort(Jue.bind(null,i))}function Jue(e,t,n){let r=e.get(n)||0,o=e.get(t)||0;return r-o}async function YA(e,t,n,r,o){let{index:i,predefinedDefinitionsLearnMoreLink:s,telemetry:a}=e,c={iconPath:new Nt.ThemeIcon("info"),tooltip:at.l10n.t("Open Documentation")},l=e.quickPick.onDidTriggerItemButton(p=>{let g=p.item.template.documentationURL;Nt.env.openExternal(Nt.Uri.parse(g))}),u=(async()=>{let p=await r,g=n;p!=null&&p.template&&n.indexOf(p.template)===-1&&(g=[p.template,...n]);let h=at.l10n.t("Suggested by GitHub Copilot"),w=g.map(v=>{let y;if(v.owner){let I=(v==null?void 0:v.owner)==="devcontainers"?"$(verified)":"";y=`${((v==null?void 0:v.owner)==="microsoft"&&v.id.includes("microsoft/vscode-dev-containers")?at.l10n.t("community"):v==null?void 0:v.owner)||at.l10n.t("Unknown Publisher")} ${I}`}let S=v===(p==null?void 0:p.template);return{label:S?`$(sparkle) ${v.name}`:v.name,picked:n.indexOf(v)!==-1,detail:v==null?void 0:v.description,description:S?y?`${y} ${h}`:h:y,buttons:[c],template:v}}).sort((v,y)=>v===y?0:v.template===(p==null?void 0:p.template)?-1:y.template===(p==null?void 0:p.template)?1:v.label.localeCompare(y.label));return[...t,...s?[JA]:[],...w]})(),f=p=>{let g=p.trim();if(/^\S+(\/\S+){2,}$/.test(g))return{label:at.l10n.t("Use '{0}' as template...",g),detail:at.l10n.t("Apply this custom template instead of one of the listed templates."),templateId:g}},m=at.l10n.t("Select a container configuration template or enter a custom template id"),d=await go(e.quickPick,u,m,void 0,void 0,void 0,f);if(l.dispose(),!d){Vo(a,"canceled");return}if(d.type==="help"){Vo(a,"help"),Nt.env.openExternal(s);return}if(d.type==="showAll"){let p=((i==null?void 0:i.collections.map(g=>g.templates).flat())||[]).filter(g=>!Gh.includes(g.id));return YA(e,[],p,r,o)}if(d.template)return lm(e,d.template,r.then(p=>{var w,C;if(!p)return;let g=((i==null?void 0:i.collections.map(v=>v.features).flat())||[]).filter(v=>!v.deprecated),h=new Set([...p.features,...p.template&&((w=Ky[p.template.id])==null?void 0:w.map(v=>g.find(y=>y.id===v)).filter(v=>!!v))||[]]);return(((C=Ky[d.template.id])==null?void 0:C.map(v=>g.find(y=>y.id===v)).filter(v=>!!v))||[]).forEach(v=>h.delete(v)),{template:p.template,features:Array.from(h)}}),o);if(d.templateId)return lm(e,{id:d.templateId,name:d.templateId},r,o)}async function jA(e,t,n){if(!t.version){let r=await Xue(e,t.id);r&&(t={...r,id:t.id})}return{id:t.id,options:{},features:[],omitPaths:[],metadata:{template:t,features:[],copilotSuggestion:n}}}async function Xue(e,t){let{output:n}=e;n.write(`Attempting metadata fetch for Template '${t}' from remote manifest`,3);let r=await N4(e);try{return await Qo(r,["templates","metadata",t,"--log-level",Jr(My())])}catch{n.write(`Metadata for '${t}' not cached on manifest. Some features will be unavailable.`,1),n.write(`Ask the Template owner to republish '${t}' to populate the data`,1);return}}async function lm(e,t,n,r){let o=await jA(e,t,await n),i={...o.metadata.template};if(e.skipOptions)return o;if(!i.options){let u=await KA(e,o,[],n,r);return u?u==="back"?r():u:void 0}let s=i.options,a=[],c=[];for(let u in s){let f=s[u];f.name=u,f.type==="boolean"?a.push(f):f.type==="string"&&c.push(f)}let l=await Que(e,c,o,async()=>"back",(u,f)=>A4(e,a,i.name,u,n,f));if(l==="back")return r();if(l)return l}async function Zue(e,t,n,r){var o;if((o=t.optionalPaths)!=null&&o.length){let i=t.optionalPaths.map(l=>({label:l,picked:!1})),s=at.l10n.t("Optional Files/Directories"),a=at.l10n.t("Include the following optional files/directories"),c=await go(e.quickPick,i,a,s,!0,!0);if(c==="back")return r();c&&(n.omitPaths=i.filter(l=>!c.includes(l)).map(l=>l.label))}return n}async function Que(e,t,n,r,o){let i=t.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0?a=s.enum:s.default&&(a=[s.default]);let c=s.default,l=a.map(f=>({label:f,description:f===c?at.l10n.t("(default)"):void 0,value:f})),u=l.findIndex(f=>f.value===c);return u!==-1&&l.unshift(...l.splice(u,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,enum:"enum"in s,items:l}});return(async function s(a,c,l){if(!a.length)return o(c,l);let u=a[0],f=u.enum?void 0:p=>{if(!(!p||u.items.some(g=>g.value===p)))return{label:at.l10n.t("Use: {0}",p),value:p,description:at.l10n.t("(custom)")}},m=await go(e.quickPick,u.items,u.placeholder,void 0,void 0,!0,f);if(!m)return;if(m==="back")return l();let d={...c.options};return d[u.name]=m.value,c.options={...d},s(a.slice(1),c,()=>s(a,c,l))})(i,n,r)}async function A4(e,t,n,r,o,i){let s=r,a=t.map(u=>{let f=u.default==="true";return{label:u.description||u.name,picked:f,name:u.name,default:f}}),c=a.length?await go(e.quickPick,a,at.l10n.t("Select the options for the '{0}' dev container",n),void 0,!0,!0):[];if(!c)return r;if(c==="back")return i();for(let u of a){let f=c.indexOf(u)!==-1,m={...r.options};m[u.name]=f.toString(),r.options={...m}}let l=await KA(e,r,[],o,()=>t.length>0?A4(e,t,n,s,o,i):i());if(l)return l==="back"?i():l}async function KA(e,t,n,r,o){let{quickPick:i,telemetry:s,output:a,index:c,askForTrust:l}=e,u=c==null?void 0:c.collections.reduce((g,h)=>g.concat(h.features),[]).filter(g=>!g.deprecated);if(!(u!=null&&u.length))return t;let m=await Vh({quickPick:i,askForTrust:l,telemetry:s,output:a},u,n,[],r,!0,!0);if(!m)return;if(m==="back")return o();let d=[],p=[];for(let g in m)if(m[g]){let h=u.find(w=>w.id===g);if(h){p.push(h);let w=h.majorVersion||"latest",C={id:`${g}:${w}`,options:m[g]};d.push(C)}}return t.features=d,t.metadata.features=p,await Zue(e,t.metadata.template,t,()=>KA(e,t,p,r,o))}function M4(e){return{provideCompletionItems(t,n,r){let o=GF(t.getText(),t.offsetAt(n)),i=t.getWordRangeAtPosition(n)||new fe.Range(n,n);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=$e(t.getText());return s.configFilePath=t.uri,efe(s,i)}if(o.path[0]==="features"){let s=$e(t.getText());s.configFilePath=t.uri;try{return tfe(e,s,o,i)}catch(a){console.error(a)}}return[]}}}function efe(e,t){var r,o;let n=((e==null?void 0:e.extensions)||[]).concat(((o=(r=e==null?void 0:e.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(n)){let i=fe.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||n.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new fe.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=fe.CompletionItemKind.Value,a.insertText=c,a.range=t,a.filterText=c,a})}}async function tfe(e,t,n,r){var i;let o=t&&t.features||{};if(typeof o=="object"){if(t.configFilePath.scheme==="vscode-remote"&&e.fileHost.type==="local"){t={...t,configFilePath:t.configFilePath.with({scheme:Je.scheme,authority:""})};let c=fe.env.remoteName&&fe.env.remoteName!=="test"?"linux":process.platform,l=((i=(fe.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||Ce.file(process.cwd());e={...e,fileHost:await ka(c,l)}}let s=await Bu(e.output),a=(s==null?void 0:s.collections.map(c=>c.features).flat().filter(c=>!c.deprecated))||[];if(n.path.length===2)if(n.isAtPropertyKey){let c=a.filter(l=>!(l.id in o));if(c.length)return c.map(l=>{let u=new fe.CompletionItem(l.id),f=`"${l.id}": `;return u.kind=fe.CompletionItemKind.Property,u.insertText=f,u.range=r,u.filterText=f,u})}else{let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=E4(l),f=u&&(l.options||{})[u]||{type:"boolean",description:qt.l10n.t("Set to true to install.")},m=(f.type==="string"?("enum"in f&&f.enum||"proposals"in f&&f.proposals||[""]).map(d=>`"${d}"`):["true","false"]).map(d=>({label:d,text:d}));return m.push({label:"{}",text:new fe.SnippetString(`{
	$1
}$0`)}),m.map(({label:d,text:p},g)=>{let h=new fe.CompletionItem(d);return h.kind=fe.CompletionItemKind.Value,h.insertText=p,h.range=r,h.sortText=`${g}_${d}`,h})}}else if(n.path.length===3){let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=l.options||{};if(n.isAtPropertyKey)return Object.keys(u).filter(f=>!(f in(o[c]||{}))).map(f=>{let m=new fe.CompletionItem(f),d=`"${f}": `;return m.kind=fe.CompletionItemKind.Property,m.insertText=d,m.range=r,m.filterText=d,m.detail=u[f].description,m});{let f=n.path[2],m=u[f];if(m)return(m.type==="string"?("enum"in m&&m.enum||"proposals"in m&&m.proposals||[""]).map(p=>`"${p}"`):["true","false"]).map((p,g)=>{let h=new fe.CompletionItem(p),w=p;return h.kind=fe.CompletionItemKind.Value,h.insertText=w,h.range=r,h.filterText=w,h.sortText=`${g}_${p}`,h})}}}}}async function H4(e){let t=await ZA(e);if((t==null?void 0:t.scheme)===Je.scheme){let n=_e(t,e.fileHost.platform);t=await e.fileHost.toCommonURI(n)}t&&await fe.window.showTextDocument(fe.Uri.parse(t.toString()))}async function ZA(e){let t=await e.findDevContainerFiles();if(!t.length){let r=qt.l10n.t("Add Files...");await fe.window.showInformationMessage(qt.l10n.t("No container configuration file found."),{modal:!0},r)===r&&await zh(e)&&(t=await e.findDevContainerFiles())}let n=await Lu(t);return n!=="cancelled"?n:void 0}async function B4(e,t){var r,o,i,s,a,c,l;let n=await ZA(e);if(n){let u=ar(e.fileHost);n.scheme==="file"&&!await vr(n.fsPath)?await ki(ds,n,[],Qa):(n.scheme==="file"||n.scheme==="vscode-remote")&&(u=new Oy);let f=await u.readDocument(n);if(f){let m=!/\.?devcontainer\.json/.test(Kh.default.posix.basename(n.path)),d=$e(f),p=!m&&(((o=(r=d.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||!d.extensions),g=(p?(s=(i=d.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:d.extensions)||[],h=e.openConfigurationCommandId?`[${qt.l10n.t("Dev Container configuration")}](command:${e.openConfigurationCommandId})`:qt.l10n.t("Dev Container configuration");if((d.extensions||[]).concat(((c=(a=d.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(t)===-1){g.push(t);let w,C=$y(f);p?(l=d.customizations)!=null&&l.vscode?w=In(f,["customizations","vscode","extensions"],g,{formattingOptions:C}):d.customizations?w=In(f,["customizations","vscode"],{extensions:g},{formattingOptions:C}):w=In(f,["customizations"],{vscode:{extensions:g}},{formattingOptions:C}):w=In(f,["extensions"],g,{formattingOptions:C}),await u.applyEdits(n,w,f),await fe.window.showInformationMessage(qt.l10n.t("Extension has been added to the {0}.",h))}else await fe.window.showInformationMessage(qt.l10n.t("Extension is already included in the {0}.",h))}}}async function W4(e,t){let n=await fe.commands.executeCommand("remote.tunnel.label",t);if(n===void 0)return;let r=n.label,o=n.port,i=await ZA(e);if(i){let s=ar(e.fileHost);i.scheme==="file"&&!await vr(i.fsPath)?await ki(ds,i,[],Qa):(i.scheme==="file"||i.scheme==="vscode-remote")&&(s=new Oy);let a=await s.readDocument(i);if(a){let l=$e(a).portsAttributes??{},u=l[`${o}`]??{},f=e.openConfigurationCommandId?`[${qt.l10n.t("Dev Container configuration")}](command:${e.openConfigurationCommandId})`:qt.l10n.t("Dev Container configuration");if(l&&u&&u.label===r)await fe.window.showInformationMessage(qt.l10n.t("Port attributes are already included in the {0}.",f));else{u.label=r,l[`${o}`]=u;let m=$y(a),d=In(a,["portsAttributes"],l,{formattingOptions:m});await s.applyEdits(i,d,a),await fe.window.showInformationMessage(qt.l10n.t("Port attributes have been added to the {0}.",f))}}}}function j4(e,t){let n=fe.languages.createDiagnosticCollection("devcontainer"),r=fe.window.activeTextEditor;r&&XA(r.document,n,t.output),e.subscriptions.push(fe.workspace.onDidChangeTextDocument(async o=>{XA(o.document,n,t.output)})),e.subscriptions.push(fe.workspace.onDidOpenTextDocument(async o=>{XA(o,n,t.output)})),e.subscriptions.push(fe.workspace.onDidCreateFiles(async o=>{await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(Kh.default.posix.basename(i.path))).map(i=>fe.workspace.openTextDocument(i)))})),e.subscriptions.push(fe.workspace.onDidDeleteFiles(o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.toString())&&n.delete(s)}))})),e.subscriptions.push(fe.workspace.onDidRenameFiles(async o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.oldUri.toString())&&n.delete(s)})),await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(Kh.default.posix.basename(i.newUri.path))).map(i=>fe.workspace.openTextDocument(i.newUri)))})),(async()=>{let o=await Ta().catch(i=>[]);await Promise.all(o.map(i=>fe.workspace.openTextDocument(i)))})().catch(o=>{t.output.write(`Error opening dev container configurations: ${(o==null?void 0:o.stack)||(o==null?void 0:o.message)||String(o)}`)}),e.subscriptions.push(n)}function V4(e,t,n){let r=async(s,a,c)=>{let l=Kh.default.basename(s.uri.fsPath);if(/\.?devcontainer\.json/.test(l)){let u=Gu(s.getText());if(!u)return;if((EC(u)||{}).features){let m=s.getText(s.getWordRangeAtPosition(a,/"[^"]*"/)).replace(/"/g,""),d=rfe(m,t.output,await n());if(d)return{contents:[d],range:s.getWordRangeAtPosition(a,/"[^"]*"/)}}}},o=fe.languages.registerHoverProvider({pattern:"**/devcontainer.json"},{provideHover:r}),i=fe.languages.registerHoverProvider({pattern:"**/.devcontainer.json"},{provideHover:r});return e.subscriptions.push(o),e.subscriptions.push(i),[o,i]}function XA(e,t,n){let r=Kh.default.basename(e.uri.fsPath);if(/\.?devcontainer\.json/.test(r)){let o=Gu(e.getText());if(!o)return;let i=[...ofe(e,o,n),...ife(o,e)];t.set(e.uri,i)}}function nfe(e,t){let n=new RegExp("^[a-zA-Z0-9_-]*$");if(!e)return{type:void 0,tooltip:qt.l10n.t("Empty feature id")};let r={};if(!e.includes("/")&&!e.includes("\\")&&n.test(e)){let s=["fish","homebrew"].indexOf(e)>-1;return{...r,type:"local-cache",isLegacy:!0,tooltip:s?qt.l10n.t("Legacy feature not supported. Please check https://containers.dev/features for replacements."):void 0,code:s?{target:fe.Uri.parse("https://containers.dev/features"),value:"legacy-feature"}:void 0,level:fe.DiagnosticSeverity.Error}}if(e.startsWith("http://"))return{...r,type:void 0,tooltip:qt.l10n.t("Direct tarball references must be served over HTTPS."),level:fe.DiagnosticSeverity.Error};if(e.startsWith("https://"))try{return fe.Uri.parse(e,!0).scheme==="https"?{...r,type:"direct-tarball",level:void 0}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:qt.l10n.t("Failed to parse scheme of URI")}}catch{return{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:qt.l10n.t("Invalid URI")}}if(e.startsWith("/"))return{...r,type:void 0,tooltip:qt.l10n.t("Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json."),level:fe.DiagnosticSeverity.Error};if(e.startsWith("./")||e.startsWith("../"))return{...r,type:"file-path"};if(e.split("/").length===3&&e.length>=5&&!e.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(e)?{...r,type:"github-repo",isLegacy:!0,level:fe.DiagnosticSeverity.Warning}:{...r,type:void 0,tooltip:qt.l10n.t("GitHub release feature id contains invalid characters"),level:fe.DiagnosticSeverity.Error};let i=e.split("/");return e.includes(".")&&i.length>1&&i[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(e)?i[1]==="devcontainers-contrib"?{...r,type:"oci",level:fe.DiagnosticSeverity.Warning,tooltip:qt.l10n.t("Replace the reference to the discontinued `devcontainers-contrib` with `devcontainers-extra`")}:{...r,type:"oci"}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:qt.l10n.t("OCI Feature id contains invalid characters")}:{...r,type:void 0,level:fe.DiagnosticSeverity.Error,tooltip:qt.l10n.t("Failed to parse feature identifier.")}}function rfe(e,t,n){var i;if(!n){t.write("No index found.",5);return}let o=(n==null?void 0:n.collections.map(s=>s.features).flat()).find(s=>e===s.id||e.startsWith(`${s.id}:`));if(o){let s=`${o.name}
`,a=o.description?`
${o.description}
`:"",c=o.documentationURL?`
${o.documentationURL}
`:"",l="";if(o.majorVersion){let u=e.split(":");if(u.length===2){let f=u[1];if(f&&f!=="latest")try{let m=(i=$4.parse(f,{loose:!0}))==null?void 0:i.major,d=Number.parseInt(o.majorVersion),p=`
${qt.l10n.t("New major version '{0}' published.",d)}
`;if(m&&m<d)l=p;else{let g=Number.parseInt(f);g!==void 0&&g<d&&(l=p)}}catch{}}}return new fe.MarkdownString(`${s}${a}${c}${l}`)}}function ofe(e,t,n){var i;let r=zi(t,["features"]),o=[];for(let s of(r==null?void 0:r.children)||[])if(s.type==="property"){let a=(i=s.children)==null?void 0:i[0].value,c=nfe(a,n);if(c.hint){let l=e.positionAt(s.offset),u=e.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.hint,fe.DiagnosticSeverity.Hint);o.push(f)}if(c.level!==void 0&&c.tooltip){let l=e.positionAt(s.offset),u=e.positionAt(s.offset+s.length),f=new fe.Diagnostic(new fe.Range(l,u),c.tooltip,c.level);f.code=c.code||{target:fe.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"},o.push(f)}}return o}function ife(e,t){return["extensions","settings","devPort"].filter(n=>zi(e,[n])&&zi(e,["vscode",n])).map(n=>{var s,a;let r=(((a=(s=zi(e,[n]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=t.positionAt(r.offset),i=t.positionAt(r.offset+r.length);return new fe.Diagnostic(new fe.Range(o,i),qt.l10n.t('Legacy "{0}" property when "{0}" property under "vscode" is also present.',n),fe.DiagnosticSeverity.Warning)})}var Jh=W(require("vscode")),QA=require("vscode");async function Y4(e,t){let n=await sfe(e);if(!n)return e.output.write("Failed to find configuration.  Cannot configure container features.",5),!1;let r=await afe(e,n,(t==null?void 0:t.preInstalledInBaseImageFeatureIds)||[]);if(!r)return!1;let o=await e.fileHost.toCommonURI(r);return o&&Jh.window.showTextDocument(Jh.Uri.parse(o.toString())),!!o}async function sfe(e){let t=await e.findDevContainerFiles();if(t.length){let n=await Lu(t);if(!n||n==="cancelled")return;let r=n.scheme==="file"?ka(process.platform,$f(n)):e.fileHost,o=r.path.dirname(_e(n,r.platform)),i=r.path.basename(o)===".devcontainer"?r.path.dirname(o):o,s=It(r.path,i),a=await kI(r,s,n);if(a)return{fileHost:r,workspace:s,config:a}}else{let n=QA.l10n.t("Add Files...");await Jh.window.showInformationMessage(QA.l10n.t("No container configuration file found."),{modal:!0},n)===n&&await zh(e)}}async function afe(e,t,n){var d;let{fileHost:r,workspace:o,config:i}=t,s=Jh.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:o,quickPick:s,telemetry:await e.telemetry,output:e.output},l=(await Bu(e.output)).collections.reduce((p,g)=>p.concat(g.features),[]).filter(p=>!p.deprecated),u=l.filter(p=>n.includes(p.id)),f=[];if(i.object.features&&Object.entries(i.object.features).length>0){let p=Object.keys(i.object.features);f=l.filter(g=>p.some(h=>h.split(":")[0]===g.id))}let m=await Vh(a,l,f,u,Promise.resolve(void 0),!0,!1);if(m)try{let p=i.text,g=i.text,h=$y(i.text);for(let w of l){let C=[],v=w.majorVersion?`${w.id}:${w.majorVersion}`:w.id,y=["features",v];if(!m[w.id]&&((d=i.object.features)!=null&&d[v]))C=C.concat(In(g,y,void 0,{formattingOptions:h}));else if(m[w.id]){let I=m[w.id];C=C.concat(In(g,y,I,{formattingOptions:h}))}C.length&&(g=Eo(g,C))}return p!==g&&await ar(r,r).applyEdits(i.uri,[{content:g,offset:0,length:i.text.length}],i.text),s.dispose(),_e(i.uri,r.platform)}catch(p){e.output.write(`Error in selecting dev container features: ${p}`,5),console.log("Error in selecting dev container features: ",p),s.dispose();return}}var bt=W(require("vscode")),q4=W(require("crypto")),RI=W(require("path")),um=require("vscode");var G4={features:{}};function z4(e,t){let n=new Set,r=Promise.resolve(G4),o,a=t.codespaces?"codespaces.editDevContainerJSON":"remote-containers.editDevContainerJSON";e.subscriptions.push(bt.commands.registerCommand(a,async u=>u()),bt.languages.registerCodeLensProvider([{pattern:"**/devcontainer.json"},{pattern:"**/.devcontainer.json"}],{async provideCodeLenses(u,f){var p;let m=Object.keys(((p=$e(u.getText()))==null?void 0:p.features)||{}).sort();m.some(g=>!n.has(g))&&(n=new Set(m),r=c(u,m));let d=await r;if(!f.isCancellationRequested)return l(u,d)}}));async function c(u,f){o||(o=await ufe(e,t));let m=u.uri;if(m.scheme!=="file"){let d=o.path.join(await o.tmpdir(),`dev-container-tmp-${q4.randomUUID()}`);await o.mkdirp(d);let p=o.path.join(d,".devcontainer.json");await o.writeFile(p,Buffer.from(JSON.stringify({features:f.reduce((w,C)=>(w[C]={},w),{})})));let g=RI.posix.basename(m.path)===".devcontainer.json",h=m.with({path:RI.posix.join(RI.posix.dirname(m.path),g?".devcontainer-lock.json":"devcontainer-lock.json")});try{let w=await bt.workspace.fs.readFile(h),C=o.path.join(d,".devcontainer-lock.json");await o.writeFile(C,Buffer.from(w))}catch(w){if((w==null?void 0:w.code)!=="FileNotFound")throw w}m=bt.Uri.file(p)}try{return ffe(e,o,o.cwd,m,t.output)}catch(d){return t.output.write(`Error fetching version info: ${(d==null?void 0:d.message)||d}`),G4}}function l(u,f){let m=Gu(u.getText());if(!m)return;let d=zi(m,["features"]);if(!(d!=null&&d.children)||d.type!=="object")return;let p=[];for(let g of d.children)if(g.type==="property"&&g.children){let S=function(_,A){return async()=>{let U=h.value.substring(0,C.length)+_;n.add(U),A&&!f.features[U]&&(f.features[U]=A);let R=bt.window.activeTextEditor;await(R==null?void 0:R.edit(E=>{E.replace(new bt.Range(R.document.positionAt(v),R.document.positionAt(v+y)),_)}))}},I=function(){return async()=>{let _={title:um.l10n.t("Remove")};if(await bt.window.showInformationMessage(um.l10n.t("The feature was not found either because it is no longer available or because of insufficient permissions to access it."),{modal:!0,detail:um.l10n.t("If this is permanent you may want to remove it from your configuration.")},_)!==_)return;let U=bt.window.activeTextEditor;await(U==null?void 0:U.edit(R=>{let E=g.parent,x=E.children,b=x.indexOf(g),D=x[b+1];if(D)R.delete(new bt.Range(U.document.positionAt(g.offset),U.document.positionAt(D.offset)));else{let T=x[b-1];T?R.delete(new bt.Range(U.document.positionAt(T.offset+T.length),U.document.positionAt(g.offset+g.length))):R.delete(new bt.Range(U.document.positionAt(E.offset+1),U.document.positionAt(g.offset+g.length)))}}))}},h=g.children[0],w=f.features[h.value],C=lfe(h.value),v=h.offset+1+C.length,y=h.length-2-C.length;if(w!=null&&w.wanted&&w.current!==w.wanted){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:um.l10n.t("Update to {0}",w.wanted),command:a,arguments:[S(`:${w.wanted}`,{current:w.wanted,wanted:w.wanted,latest:w.latest})]});p.push(_)}if(w!=null&&w.latest&&w.current!==w.latest){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:um.l10n.t("Update to latest {0}",w.latest),command:a,arguments:[S(`:${w.latest}`)]});p.push(_)}if(w&&!w.latest){let _=new bt.CodeLens(new bt.Range(u.positionAt(h.offset),u.positionAt(h.offset+h.length)),{title:um.l10n.t("Not found..."),command:a,arguments:[I()]});p.push(_)}}return p}}var cfe=/[:@][^/]*$/;function lfe(e){let t=cfe.exec(e);return t?e.substring(0,t.index):e}async function ufe(e,t){let n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await Cr(),o=process.cwd();return Vr(void 0,void 0,o,s=>Lf(s,bt.env.appRoot),n,e.extensionPath,r,(await t.telemetry).product,t.output,void 0,void 0)}async function ffe(e,t,n,r,o){let i={cliHost:t,dockerPath:"",dockerComposePath:"",extensionPath:e.extensionPath,appRoot:bt.env.appRoot,output:o,package:await ir(e.extensionPath)};return await Qo(i,["outdated","--workspace-folder",n,...r?["--config",_e(r,t.platform)]:[],"--output-format","json","--log-level",Jr(My()),"--log-format","json",...o.dimensions?["--terminal-columns",String(o.dimensions.columns),"--terminal-rows",String(o.dimensions.rows)]:[]])}var F4=hn.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),O4=hn.Uri.parse("https://aka.ms/vscode-dev-containers");function J4(e,t){let{output:n}=t;n.write("Internal initialization of dev container support package...");let r,o=()=>r||(r=Bu(t.output));return{async openConfiguration(){return H4(t)},async createConfiguration(i){return zh(t,i)},async addExtensionToConfiguration(i){return B4(t,i)},async addPortLabelToConfiguration(i){return W4(t,i)},async configureContainerFeatures(i){return Y4(t,i)},createCompletionItemProvider(){return M4(t)},startCodeLensProvider(){z4(e,t)},startHoverProvider(){V4(e,t,o)},startDiagnosticsCollection(){j4(e,t)}}}async function U4(){let e=hn.workspace.workspaceFile,t=hn.workspace.workspaceFolders,n;if(e){if(e.scheme==="untitled"){await dI();return}n=e}else if(t&&t.length)if(t.length>1){let r=await hn.window.showWorkspaceFolderPick({placeHolder:zt.l10n.t("Select a folder to create a container configuration for")});r&&(n=r.uri)}else n=t[0].uri;return n}function go(e,t,n,r,o,i,s){if(e.value="",e.title=r||e.title||zt.l10n.t("Add Dev Container Configuration Files"),e.placeholder=n,e.canSelectMany=!!o,Array.isArray(t))if(e.items=t,o)e.selectedItems=t.filter(m=>m.picked);else{let m=t.find(d=>d.picked);m&&(e.activeItems=[m])}e.buttons=i?Array.isArray(i)?i:[hn.QuickInputButtons.Back]:[];let a=[],c=e.items,l=c.filter(m=>m.isAlreadyInstalledViaBaseImage===!0),u={kind:hn.QuickPickItemKind.Separator,label:zt.l10n.t("pre-installed features")};l.length&&(e.items=e.items.slice(0,c.length-l.length).concat(u).concat(e.items.slice(c.length-l.length)));let f=new Promise((m,d)=>{if(Array.isArray(t)||(e.busy=!0,t.then(p=>{if(e.busy=!1,e.items=p,o)e.selectedItems=p.filter(g=>g.picked);else{let g=p.find(h=>h.picked);g&&(e.activeItems=[g])}},p=>{e.busy=!1,d(p)})),a.push(e.onDidAccept(()=>{let p=o?e.selectedItems.slice():e.selectedItems[0];m(Array.isArray(i)?{pick:p,button:"ok"}:p),a.forEach(g=>g.dispose())})),a.push(e.onDidChangeSelection(p=>{if(!o)return;let g=l.filter(h=>!e.selectedItems.includes(h));g.length&&(e.selectedItems=e.selectedItems.concat(g))})),e.buttons.length&&a.push(e.onDidTriggerButton(p=>{let g=o?e.selectedItems.slice():e.activeItems[0];m(i===!0?"back":{pick:g,button:p}),a.forEach(h=>h.dispose())})),a.push(e.onDidHide(()=>{a.forEach(p=>p.dispose()),e.dispose(),m(void 0)})),s){let p;a.push(e.onDidChangeValue(g=>{let h=s(g);if(h||p){let w=e.items.filter(C=>C!==p);h&&w.push(h),p=h,e.items=w}}))}});return e.show(),f}var JA={label:zt.l10n.t("Learn More"),description:zt.l10n.t("Documentation on predefined container templates"),alwaysShow:!0,type:"help"};async function NI(e,t,n,r){return qA(e,t,n,r)}async function qh(e,t,n,r,o,i){var U;let{telemetry:s,existingFilesLearnMoreLink:a,index:c}=e,u=(o!=="userData"&&await((U=e.findDevContainerFiles)==null?void 0:U.call(e,"userData"))||[]).reduce((R,E)=>R&&R.uri.path.length<E.uri.path.length?R:E,void 0),f=(u==null?void 0:u.uri.scheme)==="file"?[{iconPath:new hn.ThemeIcon("go-to-file"),tooltip:zt.l10n.t("Open File")}]:[],m=u?{label:zt.l10n.t("Copy existing configuration to workspace"),detail:zt.l10n.t("Copy the configuration from your user data folder to the workspace folder"),type:"userDataConfig",buttons:f}:void 0,d=c==null?void 0:c.collections.find(R=>R.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),p=d==null?void 0:d.templates.find(R=>R.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),g=d==null?void 0:d.templates.find(R=>R.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),h=await t.readDir(n.rootFolderPath),w=p?h.filter(R=>/(docker.*)?compose.*\.ya?ml$/i.test(R)).map(R=>t.path.join(n.rootFolderPath,R)):[],C=g?h.filter(R=>/dockerfile/i.test(R)).map(R=>t.path.join(n.rootFolderPath,R)):[],v=C.map(R=>{let E=t.path.basename(R);return{label:zt.l10n.t("From '{0}'",E),description:K4(t,R),dockerfile:E,dockerfilePath:R,detail:zt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerfile"}}),y=w.map(R=>{let E=t.path.basename(R);return{label:zt.l10n.t("From '{0}'",E),description:K4(t,R),dockerComposeFile:E,dockerComposePath:R,detail:zt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerComposeFile"}}),S=m||C.length>0||w.length>0,I={label:zt.l10n.t("From a predefined container configuration template..."),detail:zt.l10n.t("Use a base configuration from the container template registry"),alwaysShow:!0,type:"predefined"},_=e.quickPick.onDidTriggerItemButton(async()=>{await hn.commands.executeCommand("vscode.open",u.uri),e.quickPick.hide()}),A=S?await go(e.quickPick,[I,...m?[m]:[],...v,...y,...a?[JA]:[]],zt.l10n.t("How would you like to create your container configuration?")):I;if(_.dispose(),!A){Vo(s,"canceled");return}if(A.type==="help"){Vo(s,"help"),hn.env.openExternal(a);return}if(A.type==="userDataConfig")return dfe(t,n,u);if(i||(i=t&&n&&await k4()?WA(e,t,n).then(R=>{if(R.type!=="success")return;let E=((c==null?void 0:c.collections.map(b=>b.templates).flat())||[]).filter(b=>!Gh.includes(b.id)),x=((c==null?void 0:c.collections.map(b=>b.features).flat())||[]).filter(b=>!b.deprecated);return{template:E.find(b=>b.id===R.template),features:(R.features||[]).map(b=>x.find(D=>D.id===b)).filter(b=>!!b)}}):Promise.resolve(void 0)),A.type==="predefined")return L4(e,t,n,r,o,i,()=>qh(e,t,n,r,o,i));if(A.type==="dockerComposeFile")return pfe(e,t,r,o,A.dockerComposePath,p,i,()=>qh(e,t,n,r,o,i));if(A.type==="dockerfile")return mfe(e,t,r,o,A.dockerfilePath,g,i,()=>qh(e,t,n,r,o,i))}function K4(e,t){let n=hn.workspace.workspaceFolders||[];if(n.length<2)return;let r=n.find(o=>e.platform==="win32"?t.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):t.startsWith(o.uri.fsPath));return r&&r.name}async function dfe(e,t,n){let r=zt.l10n.t("Skip"),o=n.fileHost,i=_e(n.uri,o.platform),s;if(o.path.basename(i)===".devcontainer.json")s=o.path.dirname(i);else for(let d=i;o.path.basename(d);d=o.path.dirname(d))if(o.path.basename(d)===".devcontainer"){s=o.path.dirname(d);break}if(!s)throw new Error(`Unexpected user config path: ${i}`);let a=o.readDirWithTypes||o.readDir,c=await a(s);for(;c.length;){let d=c.shift();if(d===pI)continue;let p=typeof d=="string"?d:d[0],g=o.path.join(s,p);if(typeof d=="string"?await o.isFile(g):(d[1]&1)!==0){let w=o.path.sep===e.path.sep?p:p.replaceAll(o.path.sep,e.path.sep),C=e.path.join(t.configFolderPath,w);if(await e.isFile(C)){let y=await hn.window.showInformationMessage(zt.l10n.t("File '{0}' already exists, overwrite?",w),{modal:!0},r,zt.l10n.t("Overwrite"));if(!y)return;if(y===r)continue}await e.mkdirp(e.path.dirname(C));let v=await o.readFile(g);await e.writeFile(C,v)}else(typeof d=="string"?await o.isFolder(g):(d[1]&2)!==0)&&c.push(...(await a(g)).map(C=>typeof C=="string"?o.path.join(p,C):[o.path.join(p,C[0]),C[1]]))}let l=zt.l10n.t("Delete");await hn.window.showInformationMessage(zt.l10n.t("Delete the configuration from the user data folder?"),{modal:!0},zt.l10n.t("Keep"),l)===l&&await Bz(o,s);let f=o.path.relative(s,i),m=o.path.sep===e.path.sep?f:f.replaceAll(o.path.sep,e.path.sep);return e.path.join(t.configFolderPath,m)}async function mfe(e,t,n,r,o,i,s,a){let{telemetry:c}=e,l=await lm(e,i,s,async()=>{});if(!l){Vo(c,"canceled");return}if(l==="back")return a();let u=await Yh(e,t,n,r,l,(f,m)=>{if(!Bv(t.path,f))return m;let d=t.path.sep!==Aa.sep?f.replace(Aa.sep===Aa.win32.sep?/\\/g:/\//g,t.path.sep):f,p=t.path.resolve(n,d),g=t.path.relative(t.path.dirname(p),o),h=t.platform==="win32"?g.replace(/\\/g,"/"):g,w=m.toString(),C="dockerFile"in $e(w)?["dockerFile"]:["build","dockerfile"],v=In(w,C,h,{formattingOptions:{}}),y=Eo(w,v);return Buffer.from(y)});return u&&Vo(c,"dockerFile"),u}async function pfe(e,t,n,r,o,i,s,a){let{telemetry:c}=e,l=(await t.readFile(o)).toString(),u=Mv(l);if(!u){await hn.window.showErrorMessage(zt.l10n.t("Invalid docker-compose file '{0}'",o),{modal:!0});return}let f=u.version,m=Object.keys(u&&u.services||{}),d=m.length<2?m[0]||"":await go(e.quickPick,m.map(w=>({label:w,type:"service"})),zt.l10n.t("Select a service"),void 0,void 0,!0);if(d==="back")return a();if(d===void 0){Vo(c,"canceled");return}let p=typeof d=="string"?d:d.label,g=await lm(e,i,s,async()=>{});if(!g)return;if(g==="back")return a();let h=await Yh(e,t,n,r,g,(w,C)=>{if(Bv(t.path,w)){let v=t.path.sep!==Aa.sep?w.replace(Aa.sep===Aa.win32.sep?/\\/g:/\//g,t.path.sep):w,y=t.path.resolve(n,v),S=t.path.relative(t.path.dirname(y),o),I=t.platform==="win32"?S.replace(/\\/g,"/"):S,_=C.toString(),A=$e(_).dockerComposeFile,U=Array.isArray(A)?A.slice(1):[],R=[I,...U],E=In(_,["dockerComposeFile"],R,{formattingOptions:{}}),x=Eo(_,E),b=In(x,["service"],p,{formattingOptions:{}}),D=Eo(x,b);return Buffer.from(D)}if(/compose.*\.ya?ml$/.test(Aa.posix.basename(w))){let v=C.toString(),y=Mv(v);y.version&&f&&y.version!==f&&(v=v.replace(new RegExp(`^(version:.*)(${Nf(y.version)})`,"m"),`$1${f}`));let S=Object.keys(y&&y.services||{});return S.length&&(v=v.replace(new RegExp(`\\b${S[0]}\\b`),p)),Buffer.from(v)}return C});return h&&Vo(c,"dockerComposeFile"),h}function Vo(e,t,n,r){var i;let o={outcome:t};if(n){o.definitionName=zu(n.metadata.template.id);let s=n.metadata.copilotSuggestion,a=(i=s==null?void 0:s.template)==null?void 0:i.id;a&&(o.copilotSuggested=zu(a)),o.features=n.metadata.features.map(l=>zu(l.id)).join(",");let c=s==null?void 0:s.features.map(l=>zu(l.id)).join(",");c&&(o.copilotFeatures=c),a&&(o.copilotUsed="true")}r&&(o.targetLocation=r),e.sendTelemetryEvent("createConfiguration",o)}async function kI(e,t,n){if(n||(n=await Uf(e,t.configFolderPath)),!n)return;let r=await ar(e,e).readDocument(n);if(!r)return;let o=$e(r);return{uri:n,text:r,object:o}}async function X4(e,t,n,r,o,i,s){let a=io(n);if(ln(a)&&!await Ue.workspace.requestWorkspaceTrust({message:Gy}))return yr(a.hostPath)?(await Ue.window.showInformationMessage(kr.l10n.t("The WSL folder is currently not trusted."),{modal:!0,detail:kr.l10n.t("Trust is required to build a dev container from it. The folder will now reopen in WSL.")}),await Ue.commands.executeCommand("remote-containers.reopenInWSL")):(await Ue.window.showInformationMessage(kr.l10n.t("The local folder is currently not trusted."),{modal:!0,detail:kr.l10n.t("Trust is required to build a dev container from it. The folder will now reopen locally.")}),await Ue.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let c=oo(a);if(c&&!await qy(e,a.repositoryPath))return await Ue.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let l=Vf(a);return{...await hfe(a,e,i,s,t,n,r,o),isTrusted:c||l||void 0}}async function hfe(e,t,n,r,o,i,s,a){let{log:c,logFilePath:l}=n,u="hostPath"in e&&yr(e.hostPath)&&!!Ue.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&Ue.commands.executeCommand("setContext","canReopenInWSL",!0);let f=e.settings,m="localDocker"in e&&e.localDocker,d=_l(e.parentAuthority)||xl(f)&&!m,p=d&&(!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));p&&Ue.commands.executeCommand("setContext","canReopenInSSH",!0);let g=rc(e.parentAuthority)&&!!Ue.extensions.getExtension("ms-vscode.remote-server");g&&Ue.commands.executeCommand("setContext","canReopenInTunnel",!0);let h=!d&&!rc(e.parentAuthority);h&&Ue.commands.executeCommand("setContext","canReopenLocally",!0);let w;return Ue.window.withProgress({location:Ue.ProgressLocation.Notification,title:Uu,cancellable:!1},async C=>{if(e.parentAuthority&&!s.execServer)throw new Error(`Parent authority found without ExecServer: ${i}`);let v=Gi(),y=Al(t.extensionPath,am,c),{cliHost:S,originalCwd:I}=await vfe(s.execServer,e,v,t.extensionPath,await Cr(),y,o.product,c),_={...S.type==="local"?await y:void 0,...await Yf(S,e.settings)},A={...S.env,..._},U=await Ou({authority:i,extensionContext:t,sessionStart:n.sessionStart,progress:C,cliHost:S,env:A,cwd:S.cwd,wslSettings:v,isLocalContainer:Wl(e.parentAuthority,_),telemetry:o,onDidInput:n.onDidInput,output:c,logFilePath:l,allowSystemConfigChange:!0,postCreate:r}),R={async createConfiguration(E,x){return NI({fileHost:x,userDataFolderForConfigurations:ln(e)?await Hc(t,S):void 0,telemetry:o,output:c,openConfigurationCommandId:sm,showLogCommandId:st},It(Zy.posix,E))},async showError(E,...x){return await Ue.window.showErrorMessage(E,{modal:!0},...x)}};w={common:U,parsedAuthority:e,dockerCLI:As(),dockerComposePath:Ra(),dockerComposeCLI:gs({exec:U.cliHost.exec,env:{..._,...cr(_)},output:U.output},As(),Ra()),dockerSocketPath:SI(),dockerEnv:_,workspaceMountConsistencyDefault:yI(),gpuAvailability:await CI(S,o.product,c),cacheMount:EI()?"volume":"none",configurationTracking:wI(t.workspaceState),removeOnStartup:await o4(t,i),buildNoCache:await s4(t,i),onRemoveOnShutdownChanged:a,userRepositoryConfigurationPaths:Yy(),originalCwd:I,configProvider:R,development:t.extensionMode===Ue.ExtensionMode.Development,watch:async(E,x)=>{let b=Ue.workspace.createFileSystemWatcher(new Ue.RelativePattern(E,"*"));return b.onDidChange(x),b.onDidCreate(x),b.onDidDelete(x),b},ensureNoDisallowedFeatures:(E,x,b)=>Cp(E,t.globalState,x,b),useExperimentalLockfile:_I(),useExperimentalMountGitWorktreeCommonDir:Hh()},await bx(w);try{return await xk(w)}catch(E){return gfe(w,E)}}).then(C=>(a(async v=>{await i4(t,v&&C.dockerContainerId||!1),await Vy(t,v==="rebuildNoCache"?i:!1)}),qi(o,eF(e),"success",n.sessionStart,w==null?void 0:w.common,C.config,C.configLocationType,C.properties),C),C=>{var R;let v=C instanceof pe?C:new pe({description:kr.l10n.t("An error occurred setting up the container."),originalError:C});oo(e)&&(v.volumeName=e.volumeName,v.repositoryPath=e.repositoryPath,v.folderPath=e.folder),qi(o,eF(e),"failure",n.sessionStart,w==null?void 0:w.common,v.config,void 0,v.containerProperties,v);let y="onTheSide",S=(R=v.data)==null?void 0:R.fileWithError;!S&&(w!=null&&w.parsedAuthority)&&ln(w.parsedAuthority)&&w.parsedAuthority.configFile&&(S=_e(w.parsedAuthority.configFile,w.common.cliHost.platform));let I=S&&(w==null?void 0:w.common.cliHost.path.basename(S))||"devcontainer.json",_=ln(e)?[{id:"openFileWithErrorLocally",title:kr.l10n.t("Edit {0} Locally",I),isLastAction:!0,applicable:async(E,x)=>h&&!(x&&u),async execute(){let E=w==null?void 0:w.common.cliHost,x=S?E.type==="wsl"?await E.toCommonURI(S):Ce.file(S):void 0;await Wh(t,e.hostPath,x,l,y);let b=Ue.Uri.file(e.hostPath);await Ue.commands.executeCommand("vscode.openFolder",b)}},{id:"openFileWithErrorinWSL",title:kr.l10n.t("Edit {0} in WSL",I),isLastAction:!0,applicable:async()=>u,async execute(){let E=Ue.Uri.parse((await sp(e.hostPath,c)).toString()),x=S?Tn(S.startsWith("/")?"linux":"win32",E,S):void 0;await Wh(t,E.path,x,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}},{id:"openFileWithErrorinSSH",title:kr.l10n.t("Edit {0} in SSH",I),isLastAction:!0,applicable:async()=>p,async execute(){let E=e.settings,x=xl(E)?Pv(E.host,e.hostPath):Vl(e.parentAuthority,e.hostPath),b=Ue.Uri.parse(x.toString()),D=S?Tn(S.startsWith("/")?"linux":"win32",b,S):void 0;await Wh(t,b.path,D,l,y),await Ue.commands.executeCommand("vscode.openFolder",b)}},{id:"openFileWithErrorinTunnel",title:kr.l10n.t("Edit {0} in Tunnel",I),isLastAction:!0,applicable:async()=>g,async execute(){let E=Ue.Uri.parse(Vl(e.parentAuthority,e.hostPath).toString()),x=S?Tn(S.startsWith("/")?"linux":"win32",E,S):void 0;await Wh(t,E.path,x,l,y),await Ue.commands.executeCommand("vscode.openFolder",E)}}]:[],A=oo(e)?e.inspectVolume?[Na]:[{id:"reopenInRecoveryContainer",title:kr.l10n.t("Edit {0} in Recovery Container",I),isLastAction:!0,applicable:(E,x)=>!0,execute:async E=>{await Wh(t,e.repositoryPath,S?Ce.file(S).with({scheme:"vscode-remote"}):void 0,l,y);let x=ni(E.repositoryPath),b=await Ro(w),D=Mk(x,E.volumeName,b);await Ue.commands.executeCommand("remote-containers.inspectVolume",D,E.repositoryPath,E.folderPath)}},Na,{id:"openRepository",title:kr.l10n.t("Open Repository"),isLastAction:!1,applicable:(E,x)=>!x,async execute(){Ue.env.openExternal(Ue.Uri.parse(e.repositoryPath))}}]:[],U=Qv(e)?[Na]:[];return v.actions=[...Hu,Wc,w4,..._,...A,...U,Mu,Bc],wfe(v),La(v,eF(e),o,!0,n.log)})}async function gfe(e,t){let{common:n}=e,{output:r}=n,o=((t==null?void 0:t.originalError)&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();if(n.localWaylandSocket&&o.includes(`path does not exist: ${n.localWaylandSocket}`.toLowerCase())){n.localWaylandSocket=void 0;let i=await xk(e);return(async()=>{let s=ss("mountWaylandSocket");for(await Bt(3e3);Ue.workspace.getConfiguration().get(s,!0);){try{await Ue.workspace.getConfiguration().update(s,!1,Ue.ConfigurationTarget.Global)}catch{}await Bt(3e3)}r.write("Wayland socket mount disabled in user settings.")})().catch(s=>{r.write(it(s&&(s.stack||s.message)||String(s)))}),i}throw t}async function vfe(e,t,n,r,o,i,s,a){let{settings:c}=t,l=c&&"host"in c&&c.host||void 0;if(ln(t)){let u=It(Zy,t.hostPath),f=u.rootFolderPath,m=await Vr(e?{server:e,authority:t.parentAuthority}:void 0,l,u.rootFolderPath,pn,n,r,o,s,a,gi,{sshAskpassEnv:i,settings:Bh(),localDocker:t.localDocker});return m.cwd!==u.rootFolderPath&&(u=It(m.path,u.isWorkspaceFile?m.path.join(m.cwd,Zy.basename(t.hostPath)):m.cwd)),a.write(`Setting up container for folder or workspace: ${u.workspaceOrFolderPath}\r
`),Px(a,t),t.localDocker&&a.write(`Local Docker: ${t.localDocker}\r
`),{cliHost:m,originalCwd:f}}else{let u=await Vr(e?{server:e,authority:t.parentAuthority}:void 0,l,void 0,pn,n,r,o,s,a,gi,{sshAskpassEnv:i,settings:Bh()});return{cliHost:u,originalCwd:await u.homedir()}}}function eF(e){return ln(e)?"config":oo(e)?e.inspectVolume?"volume":"repository":"volume"}function wfe(e){let t=(e.originalError&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();t&&t.indexOf("drive has not been shared")!==-1?e.description=kr.l10n.t("The drive of the workspace folder is not shared. Share it in the Docker settings first."):t&&(t.indexOf("port is already allocated")!==-1||t.indexOf("address already in use")!==-1)?e.description=kr.l10n.t("A port the container is setup to bind to is already in use. See the Dev Containers terminal for details."):t&&t.indexOf('invalid mount config for type "bind"')!==-1?e.description=kr.l10n.t("A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running."):t&&t.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(e.description=kr.l10n.t("The base image references the obsolete Debian 8 update repository."),e.actions.push({id:"learnMore",title:kr.l10n.t("Learn More"),isLastAction:!1,applicable:(n,r)=>r,async execute(){Ue.env.openExternal(Ue.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var Oa=W(require("vscode")),Xh=require("vscode");var LI=W(Ar());var Q4=require("util");var Fa=W(require("path")),e6=W(require("crypto"));async function t6(e,t,n,r){var p,g;let{dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,common:a}=e,{cliHost:c,extensionPath:l,appRoot:u,postCreate:f,output:m}=a,d;try{let{commit:h}=a.product;if(!h)throw new pe({description:LI.t("Cannot attach without commit id for the remote extension host.")});let w=r?n.configFilePath:void 0;if((w==null?void 0:w.scheme)==="file"&&c.type!=="local"){let k=c.path.join(await c.tmpdir(),`devcontainer-config-${e6.randomUUID()}.json`);await c.writeFile(k,await ct(w.fsPath)),w=Ce.from({scheme:Je.scheme,path:k})}let C={...a.env,...cr(a.env)},v={cliHost:c,dockerPath:o,dockerComposePath:s,env:C,extensionPath:l,appRoot:u,package:a.package,postCreate:f,output:m},y=a.postCreate.output.dimensions||m.dimensions,S=await Qo(v,["set-up","--container-id",t.Id,...c.type==="local"&&a.persistedFolder?["--user-data-folder",a.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...a.containerSessionDataFolder?["--container-session-data-folder",a.containerSessionDataFolder]:[],"--log-level",Jr(a.getLogLevel()),"--log-format","json",...w?["--config",_e(w,c.platform)]:[],"--default-user-env-probe",a.defaultUserEnvProbe,"--skip-post-create",...y?["--terminal-columns",String(y.columns),"--terminal-rows",String(y.rows)]:[],"--include-configuration","--include-merged-configuration"]);if((S==null?void 0:S.outcome)!=="success")throw new pe({description:LI.t("devcontainer command failed: {0}",JSON.stringify(S))});S.configuration.configFilePath=S.mergedConfiguration.configFilePath=S.configuration.configFilePath&&Ce.revive(S.configuration.configFilePath).with({scheme:c.type==="local"?"file":Je.scheme});let I=S.mergedConfiguration,_=I.remoteUser;d=await wp(e,t.Id,I.workspaceFolder,_);let A={cliHost:c,dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,env:C,output:f.output},U=((g=(((p=I.customizations)==null?void 0:p.vscode)||[]).slice().reverse().find(k=>typeof k.devPort=="number"))==null?void 0:g.devPort)||bl,{hostOrContainerPort:R,hostPortServer:E,connectionToken:x,remoteEnv:b,serverDownloaded:D}=await Tl(a,d,n,I,U,yp(e,A,d,void 0,void 0,t.Id,!1,w,void 0)),T=ar(a.cliHost,d.shellServer);if(yfe(a,d,T,n.configFilePath),Efe(a,d,T,n.configFilePath),E){let k=async()=>{await(0,Q4.promisify)(E.close.bind(E))()};a.shutdowns.push(k)}return{params:a,properties:d,config:n,resolvedAuthority:{host:ec,port:R,connectionToken:x,extensionHostEnv:b},tunnelInformation:a.isLocalContainer?vp(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:D}}catch(h){let w=h instanceof pe?h:new pe({description:LI.t("An error occurred attaching to the container."),originalError:h});throw t&&(w.manageContainer=!1,w.params=e.common,w.containerId=t.Id,w.dockerParams=e),d&&(w.containerProperties=d),w.config=n,w}}function yfe(e,t,n,r){t.installFolder&&n6(e,t,n,r).catch(console.error)}async function n6(e,t,n,r){try{await Xa(e,t,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],TW(t),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Cfe(e,t,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return n6(e,t,n,r)}async function Cfe(e,t,n,r){let o=await kW(e,t);await uk(r,async()=>{var s,a;let i=await AI(e.cliHost,n,r,t.remoteWorkspaceFolder);if(!xfe(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=In(i.text,["extensions"],o,{formattingOptions:{}});await ki(n,r,c,i.text)}})}function Efe(e,t,n,r){r6(e,t,n,r).catch(console.error)}async function r6(e,t,n,r){try{let o=zS(t),i=Fa.posix.dirname(o),s=Fa.posix.basename(o);await Xa(e,t,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Sfe(e.cliHost,t,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return r6(e,t,n,r)}async function Sfe(e,t,n,r){let{stdout:o}=await t.shellServer.exec(`cat ${zS(t)}`),i=$e(o)||{};await uk(r,async()=>{var a,c;let s=await AI(e,n,r,t.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let l=In(s.text,["settings"],i,{formattingOptions:{}});await ki(n,r,l,s.text)}})}function xfe(e,t){let n=new Set(e),r=new Set(t);return n.size===r.size&&e.every(o=>r.has(o))}async function o6(e,t){let n=OI(e,t),r=await Z4(n);return r||(n=a6(e,t.Config.Image),r=await Z4(n)),r}async function i6(e,t,n,r,o){let i=Ce.file(OI(n,r)),s=await AI(e,t,i,o);return s.exists||(i=Ce.file(a6(n,r.Config.Image)),s=await AI(e,t,i,o)),s}function FI(e){return Fa.join(e,"nameConfigs")}function OI(e,t){return Fa.join(FI(e),`${l6(oc(t))}.json`)}async function s6(e){try{let t=FI(e);return(await Gc(t)).filter(r=>r.endsWith(".json")).map(r=>({name:u6(r.substr(0,r.length-5)),uri:Ce.file(Fa.join(t,r))}))}catch(t){if(t&&t.code==="ENOENT")return[];throw t}}function UI(e){return Fa.join(e,"imageConfigs")}function a6(e,t){return Fa.join(UI(e),`${l6(t)}.json`)}async function c6(e){try{let t=UI(e);return(await Gc(t)).filter(r=>r.endsWith(".json")).map(r=>({image:u6(r.substr(0,r.length-5)),uri:Ce.file(Fa.join(t,r))}))}catch(t){if(t&&t.code==="ENOENT")return[];throw t}}function l6(e){return e.replace(/[:/%]/g,t=>`%${t.charCodeAt(0).toString(16)}`)}function u6(e){return e.replace(/%([0-9a-f]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}async function Z4(e){if(!await vr(e))return;let t=await ct(e),n=$e(t.toString())||{},r=jv(n);return r.configFilePath=Ce.file(e),r}async function AI(e,t,n,r){let o=await t.readDocument(n),i=o||Qa,s=$e(i)||{},a=jv(s),c=MS({platform:e.platform,configFile:n,env:e.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:r},a);return c.configFilePath=n,{exists:!!o,text:i,config:c}}async function f6(e,t,n,r,o,i){return await Fs(e)?{...await _fe(e,t,n,r,o,i),isTrusted:!0}:(await Oa.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function _fe(e,t,n,r,o,i){let s,a;return Oa.window.withProgress({location:Oa.ProgressLocation.Notification,title:Uu,cancellable:!1},async c=>{var l,u;try{let f=Gf(n);if(f.parentAuthority&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let{settings:m}=f,d="containerName"in f?f.containerName:f.containerId;o.log.write(`Setting up container: ${d}\r
`),Px(o.log,f);let p=m&&"host"in m&&m.host||void 0,g=Gi(),h=Al(e.extensionPath,am,o.log),w=await Vr(r.execServer?{server:r.execServer,authority:f.parentAuthority}:void 0,p,f.cwd,pn,g,e.extensionPath,await Cr(),t.product,o.log,gi,{sshAskpassEnv:h,settings:Bh()}),C=As(),v={...w.type==="local"?await h:void 0,...await Yf(w,m)},y=gs({exec:w.exec,env:{...v,...cr(v)},output:o.log},As(),Ra()),S={...w.env,...v},I=await ti({cliHost:w,dockerCLI:C,dockerComposeCLI:y,dockerComposePath:Ra(),env:S,output:o.log},"containerName"in f?f.containerName:f.containerId);if(!I)throw new pe({description:Xh.l10n.t("Cannot attach to the container with name/id {0}, it no longer exists.",d),data:{reload:!1,attach:!0}});let _=(u=(l=(Oa.workspace.workspaceFolders||[void 0])[0])==null?void 0:l.uri)==null?void 0:u.path,A=await i6(w,ds,e.globalStoragePath,I,_);if(_&&A.config.workspaceFolder!==_){let x=In(A.text,["workspaceFolder"],_,{formattingOptions:{}});await ki(ds,A.config.configFilePath,x,A.text)}s={common:await Ou({authority:n,extensionContext:e,sessionStart:o.sessionStart,progress:c,cliHost:w,env:S,cwd:f.cwd||await w.homedir(),wslSettings:g,isLocalContainer:Wl(f.parentAuthority,v),telemetry:t,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:f,dockerCLI:C,dockerComposePath:Ra(),dockerComposeCLI:y,dockerSocketPath:SI(),dockerEnv:v,workspaceMountConsistencyDefault:yI(),gpuAvailability:await CI(w,t.product,o.log),cacheMount:EI()?"volume":"none",configurationTracking:wI(e.workspaceState),userRepositoryConfigurationPaths:[],development:e.extensionMode===Oa.ExtensionMode.Development,ensureNoDisallowedFeatures:(x,b,D)=>Cp(x,e.globalState,b,D),useExperimentalLockfile:_I(),useExperimentalMountGitWorktreeCommonDir:Hh()},await bx(s);let U=Sp(f.parentAuthority,m),R=oc(I),E=Xh.l10n.t("Container {0} ({1}){2}",I.Config.Image,R,U);if(s.common.setWorkspaceName(E),I.State.Status!=="running")throw new pe({description:Xh.l10n.t("Cannot attach to the container {0} ({1}){2}, it is not running.",I.Config.Image,R,U),params:s.common,containerId:I.Id,dockerParams:s,data:{reload:!1,start:!0}});return await t6(s,I,A.config,A.exists)}catch(f){let m=f instanceof pe?f:new pe({description:Xh.l10n.t("An error occurred attaching to the container."),originalError:f});throw m.actions=[y4,C4,...Hu,Wc,Na,Mu,Bc],m}}).then(c=>(qi(t,"attach","success",o.sessionStart,s==null?void 0:s.common,a,void 0,c.properties),c),c=>{let l=c instanceof pe?c:new pe({description:Xh.l10n.t("An error occurred attaching to the container."),originalError:c});return qi(t,"attach","failure",o.sessionStart,s==null?void 0:s.common,a,void 0,l.containerProperties,l),La(l,"attach",t,!0,o.log)})}var ut=W(require("vscode")),We=require("vscode");var nn=W(require("vscode")),Ua=require("vscode"),m6=W(require("path")),fm=W(require("os")),Qy=W(require("fs")),p6=W(require("child_process")),h6=W(require("crypto")),g6=W(kC());async function MI(e){Pfe()?await new tF().downloadAndInstallDocker(e):v6()?await new nF().downloadAndInstallDocker(e):await nn.env.openExternal(nn.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var $I=class{async downloadAndInstallDocker(t){if(await this.preInstallCheck(t)){let r=Ua.l10n.t("Downloading Docker installer..."),o=Ua.l10n.t("The Docker Desktop installation is started. Complete the installation and then start Docker Desktop."),i;try{i=await nn.window.withProgress({location:nn.ProgressLocation.Notification,title:r},async()=>this.downloadInstaller())}catch(a){let c=Ua.l10n.t("Downloading the Docker Desktop installer failed. Do you want to manually download and install?"),l=Ua.l10n.t("Download");throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(i);nn.window.showInformationMessage(o);try{await this.install(i,s,t)}catch(a){let c=Ua.l10n.t("Docker Desktop installation failed. ({0})",String(a==null?void 0:a.message)),l=Ua.l10n.t("Install Instruction");throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(t){let n=!0;if(await new rF(t).isDockerInstalledRealTimeCheck()){let r=Ua.l10n.t("Docker Desktop is already installed. Would you like to reinstall?"),o=Ua.l10n.t("Reinstall");n=await nn.window.showInformationMessage(r,{modal:!0},o)!==void 0}return n}async downloadInstaller(){let t=`${Ife()}.${this.fileExtension}`;return await Tfe(this.downloadUrl,t),t}handleError(t,n,r){nn.window.showErrorMessage(t,{title:n}).then(o=>{o&&nn.env.openExternal(nn.Uri.parse(r))})}},tF=class extends $I{downloadUrl="https://aka.ms/download-docker-windows-vscode";fileExtension="exe";getInstallCommand(t){return`"${t}"`}async install(t,n,r){try{r.write(`Executing command ${n}`),await w6(n,r)}finally{try{await Qy.promises.stat(t),await Qy.promises.unlink(t)}catch{}}}},nF=class extends $I{downloadUrl=`https://aka.ms/download-docker-mac${process.arch==="arm64"?"-arm64":""}-vscode`;fileExtension="dmg";getInstallCommand(t){return`chmod +x '${t}' && open '${t}'`}async install(t){let n=Ua.l10n.t("Docker Install"),r=this.getInstallCommand(t);await bfe(r,n,{addDockerEnv:!1})}},Dfe=0;function Ife(){return m6.join(fm.tmpdir(),`${nn.env.sessionId}-${Dfe++}.tmp`)}function Pfe(){return fm.platform()==="win32"}function v6(){return fm.platform()==="darwin"}async function bfe(e,t,n){var a,c;let r;n=n??{},n.addDockerEnv&&(r={});let o=new nn.Task({type:"shell"},n.workspaceFolder??nn.TaskScope.Workspace,t,"Docker",new nn.ShellExecution(e,{cwd:n.cwd||((c=(a=n.workspaceFolder)==null?void 0:a.uri)==null?void 0:c.fsPath)||fm.homedir(),env:r}),[]);n.alwaysRunNew&&(o.definition.idRandomizer=h6.randomUUID()),n.focus&&(o.presentationOptions={focus:!0});let i=await nn.tasks.executeTask(o);return new Promise((l,u)=>{let f=nn.tasks.onDidEndTaskProcess(m=>{m.execution===i&&(f.dispose(),m.exitCode&&n.rejectOnError&&u(m.exitCode),l())})})}var rF=class{constructor(t){this.output=t;this.isDockerInstalledLazy=new iF(async()=>{let n=await this.isDockerInstalledRealTimeCheck();return n&&this.isDockerInstalledLazy.cacheForever(),n},this.maxCacheTime)}maxCacheTime=3e4;isDockerInstalledLazy;async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{let t=await Jo("docker");return await w6(`${t} -v`,this.output),!0}catch{return!1}}};async function Tfe(e,t){await new Promise((n,r)=>{let o=Qy.createWriteStream(t);g6.https.get(e,s=>{if(s.statusCode<200||s.statusCode>299){r(new Error(`Failed to download Docker (${e}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",r),s.pipe(o),s.on("end",n)}).on("error",r)})}var d6=10*1024;async function w6(e,t,n,r){let o=Buffer.alloc(n&&n.maxBuffer||d6),i=Buffer.alloc(n&&n.maxBuffer||d6);return await kfe(e,t,n,r,o,r,i),{stdout:oF(o),stderr:oF(i)}}async function kfe(e,t,n,r,o,i,s,a){return await new Promise((c,l)=>{let u,f=0,m=0;n=n||{},n.shell=!0,Rfe(n,t);let d=p6.spawn(e,n);d.on("error",p=>(u&&(u.dispose(),u=void 0),l(p))),d.on("close",(p,g)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(p){let h=`Process '${e.length>50?`${e.substring(0,50)}...`:e}' exited with code ${p}`;s&&(h+=`
Error: ${oF(s)}`);let w=new Error(h);return w.code=p,w.signal=g,w.stdErrHandled=i!==null,l(w)}return c()}),n!=null&&n.stdin&&(d.stdin.write(n.stdin),d.stdin.end()),(r||o)&&d.stdout.on("data",p=>{let g=p.toString();r&&r(g,d),o&&(f+=o.write(g,f))}),(i||s)&&d.stderr.on("data",p=>{let g=p.toString();i&&i(g,d),s&&(m+=s.write(g,m))}),a&&(u=a.onCancellationRequested(()=>{d.kill()}))})}function Rfe(e,t){var n;v6()&&(/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((n=e==null?void 0:e.env)==null?void 0:n.PATH)||process.env.PATH||"")||(e=e??{},e.env=e.env??{...process.env},t.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),e.env.PATH=`${e.env.PATH}:/usr/local/bin`))}function oF(e){return e.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var iF=class{constructor(t,n){this.valueFactory=t;this._valueLifetime=n}_isValueCreated=!1;_value;_valuePromise;get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let t=this._valuePromise===void 0;t&&(this._valuePromise=this.valueFactory());let n=await this._valuePromise;if(t&&(this._value=n,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&t){let r=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(r)},this._valueLifetime)}return n}};var y6=W(require("os")),Zh=W(require("crypto")),C6=W(require("net")),E6=W(require("path")),Kt=W(require("vscode")),rn=require("vscode");var S6=require("string_decoder");var x6="done",HI="devcontainers";async function WI(e,t,n,r){return Kt.commands.executeCommand(st),Kt.window.withProgress({location:Kt.ProgressLocation.Notification,title:"Installing Docker in WSL"},async o=>{let i={},s={};try{await Nfe(e,t,n,o,i,s)}catch(a){i.outcome="error",i.errorMessage=a==null?void 0:a.message,t.write(`Failed with error: ${(a==null?void 0:a.message)||a}`)}finally{r.sendTelemetryEvent("installDockerInWSL",i,s)}return i.outcome===x6})}async function _6(e){if(process.platform!=="win32")return!1;let t=I6();if(e.write(`Windows build number: ${t}`),t<eC)return e.write(`WSL version 2 is required to run Docker and that is only available since Windows build ${eC}.`),!1;let n=await Hr(process.cwd(),pn,e);return!await BI(n,t,e)&&t<D6?(e.write(`WSL is not installed and can only be installed automatically since Windows build ${eC}.`),!1):!0}async function Nfe(e,t,n,r,o,i){let s=I6();if(t.write(`Windows build number: ${s}`),s<eC)return o.outcome="wsl2NotAvailableForWindowsBuild",Kt.window.showInformationMessage(rn.l10n.t("WSL version 2 is required to run Docker and that is only available since Windows build {0}.",eC),{modal:!0});let a=await Hr(process.cwd(),pn,t);if(r.report({message:rn.l10n.t("Checking if WSL is installed.")}),!await BI(a,s,t)){if(s<D6)return o.outcome="wslInstallerNotAvailableWithWindowsBuild",Kt.window.showInformationMessage(rn.l10n.t("WSL is not installed. Please install WSL manually and retry."),{modal:!0});if(r.report({message:rn.l10n.t("Installing WSL.")}),await Afe(a,e.extensionPath,t,n))return o.outcome="rebootRequiredAfterWSLInstall",Kt.window.showInformationMessage(rn.l10n.t("Please reboot your machine to finalize the WSL setup."),{modal:!0});if(!await BI(a,s,t)&&(await new Promise(_=>setTimeout(_,3e3)),!await BI(a,s,t)))return o.outcome="wslNotFoundAfterInstall",Kt.window.showInformationMessage(rn.l10n.t("WSL not found after install."),{modal:!0})}r.report({message:rn.l10n.t("Checking WSL version.")}),o.wslVersion=await Ffe(a,t),r.report({message:rn.l10n.t("Listing installed WSL distributions.")});let l=await sF(a,t);if(!l.length){if(r.report({message:rn.l10n.t("Installing WSL distribution.")}),await Ufe(a,t,n))return o.outcome="featureMissingDuringDistroInstall",Kt.window.showInformationMessage(rn.l10n.t("A required feature is missing. Please reboot your machine to finalize the WSL setup if you haven't done so yet."),{modal:!0});if(l=await sF(a,t),!l.length&&(await new Promise(S=>setTimeout(S,3e3)),l=await sF(a,t),!l.length))return o.outcome="noDistroAfterInstall",Kt.window.showInformationMessage(rn.l10n.t("No WSL distro found after install."),{modal:!0})}i.wslDistros=l.length;let u=l.find(y=>y.isDefault);if(!u&&l.length===1&&(u=l[0]),!u)return o.outcome="noDefaultDistro",Kt.window.showInformationMessage(rn.l10n.t("No default WSL distro found."),{modal:!0});if(o.isDefaultDistro=String(u.isDefault),u.version!=="2")return o.outcome="defaultDistroNotVersion2",Kt.window.showInformationMessage(rn.l10n.t("Default distro is not using WSL version 2."),{modal:!0});r.report({message:rn.l10n.t("Reading distribution information.")});let f=kf("wsl",["-u","root","-e"],void 0),m=await Wt(f,t,void 0,"linux","Host"),{stdout:d}=await m.exec("cat /etc/os-release || cat /usr/lib/os-release || true"),p=$fe(d);if(o.distro=p.ID,p.ID!=="debian"&&p.ID!=="ubuntu")return o.outcome="distroNotSupported",Kt.window.showInformationMessage(p.NAME?rn.l10n.t("Unsupported WSL distribution: {0}",p.NAME):rn.l10n.t("Unsupported WSL distribution."),{modal:!0});let g=kf("wsl",["-e"],void 0),h=await Wt(g,t,void 0,"linux","Host"),w=await El(h);if(w==="root"){try{await m.exec(`id ${HI}`)}catch{await m.exec(`useradd --create-home --shell /usr/bin/bash --user-group --groups adm,dialout,cdrom,floppy,sudo,audio,dip,video,plugdev,netdev --password '${Zh.randomUUID()}' ${HI}`)}if(await m.exec(`cat >>/etc/wsl.conf <<'wslConf'
[user]
default=${HI}
wslConf
`),await X({exec:a.exec,cmd:"wsl",args:["--terminate",u.name],output:t,print:"continuous"}),m=await Wt(f,t,void 0,"linux","Host"),h=await Wt(g,t,void 0,"linux","Host"),await El(h)==="root")return o.outcome="failedToSwitchUser",Kt.window.showInformationMessage(rn.l10n.t("Default user in WSL is root, requiring a regular user."),{modal:!0})}let C=await aF(h,"docker")||await aF(m,"docker")||await aF(m,"dockerd");if(C){await m.exec(`usermod -aG docker ${w}`).catch(()=>{});let y=rn.l10n.t("Reinstall");if(await Kt.window.showInformationMessage(rn.l10n.t("Docker is already installed in WSL."),{modal:!0,detail:rn.l10n.t("Path: {0}",C)},y)!==y){o.outcome="dockerAlreadyInstalled";return}}r.report({message:rn.l10n.t("Installing Docker.")}),await m.exec("export DEBIAN_FRONTEND=noninteractive"),await m.exec("apt update && apt -y install --no-install-recommends apt-transport-https ca-certificates curl gnupg2"),await m.exec(`curl -fsSL https://download.docker.com/linux/${p.ID}/gpg | tee /etc/apt/trusted.gpg.d/docker.asc`),await m.exec(`echo "deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/${p.ID} ${p.VERSION_CODENAME} stable" | tee /etc/apt/sources.list.d/docker.list`),await m.exec("apt update && apt -y install --no-install-recommends docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin"),await m.exec(`usermod -aG docker ${w}`),r.report({message:rn.l10n.t("Updating Settings.")});let v=Kt.workspace.getConfiguration();await v.update(ss("executeInWSL"),!0,Kt.ConfigurationTarget.Global),await v.update(ss("executeInWSLDistro"),u.isDefault?void 0:u.name,Kt.ConfigurationTarget.Global),o.outcome=x6}var eC=18917,D6=20262;function I6(){let e=y6.release(),t=process.platform==="win32"&&e&&/(\d+)\.(\d+)\.(\d+)/g.exec(e);return t&&t.length===4?parseInt(t[3]):0}async function BI(e,t,n){if(e.platform!=="win32")return!1;if(t>=22e3)try{return await X({exec:e.exec,cmd:"wsl",args:["--status"],output:n,print:"continuous"}),!0}catch{return n.write("WSL feature installed: false (wsl --status failed)"),!1}else{let r=Lfe(e);if(r){let o=await e.isFile(r);return n.write(`WSL feature installed: ${o} (dll path: ${r})`),o}return n.write("WSL feature installed: false (no dll path)"),!1}}function Lfe(e){let t=e.env.SystemRoot;if(t){let n=e.env.PROCESSOR_ARCHITEW6432;return e.path.join(t,n?"Sysnative":"System32","lxss","LxssManager.dll")}}async function Afe(e,t,n,r){let{wrappedOutput:o,wrappedInput:i}=P6(n,r);try{let s=e.path.join(await e.tmpdir(),`wsl-install-${Zh.randomUUID()}.js`);await e.writeFile(s,await ct(E6.join(t,"dist/extension/runAsMain.js")));let a=`\\\\.\\pipe\\wsl-install-${Zh.randomUUID()}-sock`,c=e.path.join(await e.tmpdir(),`wsl-install-${Zh.randomUUID()}.bat`),l=Vv(e),u=await dk({cliHost:e,env:{RUN_AS_CMD:await Jo("wsl"),RUN_AS_ARGS:JSON.stringify(["--install"]),...n.dimensions?{RUN_AS_COLS:String(n.dimensions.columns),RUN_AS_ROWS:String(n.dimensions.rows)}:{},RUN_AS_SOCKET:a,ELECTRON_RUN_AS_NODE:"1"},appRoot:Kt.env.appRoot},l.cmd)||{},f=`@echo off

${Object.keys(u).map(g=>`set ${g}=${u[g]}`).join(`
`)}
"${l.cmd}" ${l.args.map(g=>`"${g}"`).join(" ")} "${s}"
`;await e.writeFile(c,Buffer.from(f.replaceAll(/\r?\n/g,`\r
`)));let m="",d=new C6.Server(g=>{d.close();let h=new S6.StringDecoder;g.on("data",w=>{let C=h.write(w);o.raw(C),m+=C}),i.event(w=>g.write(w))});return d.listen(a),await Ii({ptyExec:e.ptyExec,cmd:"powershell.exe",args:["Start-Process","-FilePath",`'${c}'`,"-Verb","RunAs","-WindowStyle","Hidden","-Wait"],env:no(),output:o,onDidInput:i.event}),m.replace(Hs,"").replaceAll(/\s/g,"").indexOf("untilthesystemisrebooted")!==-1}finally{i.dispose()}}async function Ffe(e,t){try{let{stdout:n}=await X({exec:e.exec,cmd:"wsl",args:["--version"],output:t,print:"continuous"});return n.toString("utf16le").match(/^.*$/m)[0]}catch{return"unknown"}}async function sF(e,t){try{let{stdout:n}=await X({exec:e.exec,cmd:"wsl",args:["-l","-v"],output:t,print:"continuous"});return Ofe(n.toString("utf16le"))}catch{return[]}}function Ofe(e){let t=/\r\n/.test(e)?`\r
`:`
`,n=e.split(t),r=/^(?<default>\*|\s)\s*(?<name>[a-zA-Z0-9\.\-_]+)\s+(?<state>\w+)\s+(?<version>\d)/,o=[];for(let i=1;i<n.length;i++){let s=r.exec(n[i]);if(s!=null&&s.groups){let a=s.groups.name,c=s.groups.version,l=i===1;o.push({name:a,isDefault:l,version:c})}}return o}async function Ufe(e,t,n){await X({exec:e.exec,cmd:"wsl",args:["--set-default-version","2"],output:t,print:"continuous"});let{wrappedOutput:r,wrappedInput:o}=P6(t,n);try{let{cmdOutput:i}=await Ii({ptyExec:e.ptyExec,cmd:"wsl",args:["--install","-d","Ubuntu"],output:r,onDidInput:o.event});return i.replace(Hs,"").replaceAll(/\s/g,"").indexOf("0x80370114")!==-1}finally{o.dispose()}}function P6(e,t){let n=t(a=>r.fire(a)),r=new Ms(n),o="",i=Zh.randomUUID();return{wrappedOutput:on({...e,get dimensions(){return e.dimensions},event:a=>{if(e.event(a),a.type==="text"||a.type==="raw"){o+=a.text;let c=o.replace(Hs,"");/Enter new UNIX username:\s*$/.test(c)?r.fire(`${HI}\r`):/(New|Retype new) password:\s*$/.test(c)?r.fire(`${i}\r`):/any key to continue\.*\s*$/.test(c)?r.fire("\r"):/Installation successful!/.test(c)&&r.fire("exit\r")}}}),wrappedInput:r}}function $fe(e){return e.split(`
`).reduce((t,n)=>{let r=n.indexOf("=");return r!==-1&&(t[n.substring(0,r)]=n.substring(r+1)),t},{})}async function aF(e,t){try{let{stdout:n}=await e.exec(`command -v ${t}`);return n.trim()}catch{return}}var Mfe={reopenInContainer:We.l10n.t("Do you want to continue with reopening the folder in a container?"),openInContainer:We.l10n.t("Do you want to continue with opening a folder in a container?"),cloneInVolume:We.l10n.t("Do you want to continue with cloning a repository in a Docker volume?"),attachToContainer:We.l10n.t("Do you want to continue with attaching to a container?"),checkoutPRInVolume:We.l10n.t("Do you want to continue with checking out a pull-request in a Docker volume?"),createDevContainer:We.l10n.t("Do you want to continue with creating a Dev Container?"),inspectVolume:We.l10n.t("Do you want to continue with inspecting a Docker volume?"),trySample:We.l10n.t("Do you want to continue with trying a sample Dev Container?")},Hfe=`[${We.l10n.t("Starting Docker (show log)")}](command:${st} "${We.l10n.t("Show details in terminal")}")`;async function Kr(e,t,n,r,o,i){var f;let s=await Qe(e,t,i),a=(f=(ut.workspace.workspaceFolders||[])[0])==null?void 0:f.uri;a&&(a.scheme==="file"&&yr(a.fsPath)||ap(a))&&(s=await Qe(e,s.output,a));let c=nC(s,r),l=await Promise.race([c,new Promise(m=>setTimeout(()=>m("timeoutOrCanceled"),2e3))]);if(l==="timeoutOrCanceled"&&(l=await ut.window.withProgress({location:ut.ProgressLocation.Notification,title:Hfe,cancellable:!0},async(m,d)=>Promise.race([c,new Promise(p=>{let g=d.onCancellationRequested(()=>{g.dispose(),p("timeoutOrCanceled")})})])),l==="timeoutOrCanceled"))return!1;let u=await c;if(u==="permission")return await ut.window.showErrorMessage(We.l10n.t("Current user does not have permission to run 'docker'."),{modal:!0,detail:We.l10n.t("Try adding the user to the 'docker' group.")},We.l10n.t("Documentation"))&&ut.env.openExternal(ut.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(u==="ssh")return await ut.window.showErrorMessage(We.l10n.t("Cannot connect to Docker daemon using 'ssh'."),{modal:!0,detail:We.l10n.t("Make sure public/private keys are set up for connecting without keyboard interaction.")},We.l10n.t("Show Log"))&&ut.commands.executeCommand(st),!1;if(u==="daemon")return await ut.window.showErrorMessage(We.l10n.t("Docker returned an error."),{modal:!0,detail:We.l10n.t("Make sure the Docker daemon is running.")},We.l10n.t("Show Log"))&&ut.commands.executeCommand(st),!1;if(u==="cwd")return await ut.window.showErrorMessage(We.l10n.t("Workspace folder does not exist.",s.cliHost.cwd),{modal:!0,detail:s.cliHost.cwd},We.l10n.t("Show Log"))&&ut.commands.executeCommand(st),!1;if(u==="command"&&(s.cliHost.type==="local"||s.cliHost.type==="wsl")&&await _6(s.output)){let m=We.l10n.t("Install");if(await ut.window.showInformationMessage(We.l10n.t("Dev Containers require Docker to run."),{modal:!0,detail:We.l10n.t("Do you want to install Docker in WSL?")},m)===m){if(Wu(r,"installInWSL","install"),await WI(e,s.output,n,r)){let g=We.l10n.t("Continue");return await ut.window.showInformationMessage(We.l10n.t("Docker has been installed. {0}",Mfe[o]),g)===g?(Wu(r,"continueAfterInstall","continue"),!0):(Wu(r,"continueAfterInstall","cancel"),!1)}return!1}return Wu(r,"installInWSL","cancel"),!1}if(!u||u==="command"){if(s.cliHost.type==="wsl")await ut.window.showErrorMessage(We.l10n.t("Docker Desktop WSL 2 backend required."),{modal:!0},We.l10n.t("Read more on docker.com"))&&ut.env.openExternal(ut.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let m=We.l10n.t("Install"),d=We.l10n.t("License"),p=We.l10n.t("Ignore"),g=[],h=[];u==="command"&&s.dockerCLI!=="docker"&&h.push(We.l10n.t("Command not found: '{0}'.",s.dockerCLI)),s.cliHost.type==="local"&&(g.push(m,d),h.push(We.l10n.t("Check the license for details."))),u===!1&&g.push(p);let w=h.join(" "),C=s.cliHost.type==="remote"?We.l10n.t("Docker version 17.12.0 or later required on remote host."):We.l10n.t("Docker version 17.12.0 or later required."),v=await ut.window.showErrorMessage(C,{modal:!0,detail:w},...g);if(v===m)return MI(s.output).then(console.error),Wu(r,"dockerDesktop","install"),!1;if(v===d)return ut.env.openExternal(ut.Uri.parse("https://aka.ms/docker-subscription-service-agreement")),Wu(r,"dockerDesktop","license"),!1;if(v===p)return Wu(r,"dockerDesktop","ignore"),!0;Wu(r,"dockerDesktop","cancel")}return!1}return u==="wsl1"?(await ut.window.showErrorMessage(We.l10n.t("WSL 2 distro required."),{modal:!0,detail:We.l10n.t("The WSL distro is running with WSL 1.")},We.l10n.t("Read more on docker.com"))&&ut.env.openExternal(ut.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}function Wu(e,t,n){e.sendTelemetryEvent("dockerVersionUserChoice",{dialog:t,choice:n})}async function nC(e,t,n=!0){var a,c,l,u;let r;try{r=(await Wk(e,pn,n,"version","--format","{{json .}}")).stdout.toString()}catch(f){console.error(f);let m=f&&(f.stderr?f.stderr.toString():f.message)||"";tC(t,"error",void 0,m);let d=m.toLowerCase();return d.indexOf("permission denied")!==-1?d.indexOf("ssh")!==-1?"ssh":"permission":d.indexOf("enoent")!==-1||d.indexOf("not found")!==-1||d.indexOf("notfound")!==-1?await e.cliHost.isFolder(e.cliHost.cwd)?(e.output.write(`CLI host's PATH: ${e.cliHost.env.PATH}`),"command"):"cwd":e.cliHost.type==="wsl"&&((l=(c=(a=f==null?void 0:f.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let o;try{let f=$e(r);o=(u=f==null?void 0:f.Server)==null?void 0:u.ApiVersion}catch{}let i=o&&NS(o);if(!i&&r.toLowerCase().indexOf("error during connect")!==-1)return tC(t,"error",void 0,r),"daemon";if(!i)return tC(t,"unparsed",r),!0;let s=!LS(i,[1,35]);return!s&&await Wj(e)?(tC(t,"podman",r),!0):(tC(t,s?"success":"failure",r),s)}function tC(e,t,n,r){let o={outcome:t};n&&(o.version=n),r&&(o.errorMessage=r),e.sendTelemetryEvent("dockerVersion",o)}async function b6(e){try{let t=Ni(e,await e.dockerComposeCLI());return await qv({...t,print:!0},"version","--short"),!0}catch(t){return(t==null?void 0:t.code)==="ENOENT"?await ut.window.showErrorMessage(We.l10n.t("Docker Compose required"),{modal:!0,detail:e.dockerComposePath!=="docker-compose"?We.l10n.t("Command not found: '{0}'.",e.dockerComposePath):void 0},We.l10n.t("Documentation"))&&ut.env.openExternal(ut.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")):await ut.window.showErrorMessage(We.l10n.t("Docker Compose returned an error."),{modal:!0},We.l10n.t("Show Log"))&&ut.commands.executeCommand(st),!1}}var Qh=W(require("vscode"));var jI=class{constructor(t){this.fileHost=t}async provideDocumentLinks(t,n){let r=[],o=Gu(t.getText());if(!o)return r;let i=EC(o)||{};return i.configFilePath=t.uri,ko(i)&&this._linksForDockerfile(r,i,o,t),"dockerComposeFile"in i&&await this._linksForDockerCompose(r,i,o,t),r}_tryAddDocumentLinkToBucket(t,n,r,o,i){let s=t.positionAt(n),a=t.positionAt(r);s.compareTo(a)!==0&&i.push(new Qh.DocumentLink(new Qh.Range(s,a),o))}_linksForDockerfile(t,n,r,o){let i=zi(r,["build","dockerfile"])||zi(r,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,Mf(this.fileHost,n),t)}async _linksForDockerCompose(t,n,r,o){let s=(await Ll(this.fileHost,n)).map(c=>Qh.Uri.file(c).path),a=zi(r,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),t);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),t)}};var Z=W(require("vscode")),Ae=require("vscode"),ng=W(require("path"));var eg=require("vscode"),T6=W(require("path"));function VI(e){let t=Hl(e);if(t)return`${T6.basename(t)}`;{let n=zv(e);if(n)return n;let r=nc(e);if(r)return $k(r);let o=$l(e);return o?o.volumeName:e.Config.Image}}function YI(e,t=!1){let n=oc(e);return t?`${n} (${cF(e)})`:n}function cF(e){let t="",n=e.State.Status,r=new Date(e.State.StartedAt),o=new Date(e.State.FinishedAt);if(r.getFullYear()>1&&o.getFullYear()>1){let i=new Date,s=new Date(r>o?e.State.StartedAt:e.State.FinishedAt);t=` ${fF(i,s)}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+t}function GI(e){let t=e.Name;if(e.Labels&&tg(e)){let r=zI(e);r&&r.gitUrlInfo.repository!=="unknown"&&(t=r.gitUrlInfo.fullRepositoryName)}return t}function qI(e){let t="";if(e.Labels&&tg(e)){let r=zI(e);if(r&&r.gitUrlInfo.repository!=="unknown"){let o=lF(e),i=uF(e);i?t=`#${i}`:o&&(t=`${o}`)}}return t}function tg(e){let t=e.Labels;if(t){let n=t["vsch.local.repository.unique"];if(n&&n==="true")return!0}return!1}function lF(e){let t=e.Labels;if(t&&tg(e)&&t["vsch.local.repository.branch"])return t["vsch.local.repository.branch"]}function uF(e){let t=e.Labels;if(t&&tg(e)&&t["vsch.local.repository.pullRequestId"])return t["vsch.local.repository.pullRequestId"]}function zI(e){let t=e.Labels;if(t){let n=t["vsch.local.repository.unique"];if(n&&n==="true"){let r=t["vsch.local.repository"];return ni(r)}}}var k6=1e3,R6=k6*60,N6=R6*60,L6=N6*24,Bfe=L6*365;function fF(e,t){let n,r=e.getTime()-t.getTime();return(n=Math.round(r/Bfe))>0?n===1?"1 year":eg.l10n.t("{0} years",n):(n=Math.round(r/L6))>0?n===1?"1 day":eg.l10n.t("{0} days",n):(n=Math.round(r/N6))>0?n===1?"1 hour":eg.l10n.t("{0} hours",n):(n=Math.round(r/R6))>0?n===1?"1 minute":eg.l10n.t("{0} minutes",n):(n=Math.round(r/k6),n===1?"1 second":eg.l10n.t("{0} seconds",n))}var rC=W(require("vscode")),oC=require("vscode");async function A6(e){let t=(await Promise.all([Xv,Zv,xp,Ep,wx].map(async o=>{let{stdout:i}=await tt(e,"ps","-a","-q","--filter","status=exited","--filter",`label=${o}`);return i.toString().split(/\r?\n/).filter(s=>!!s)}))).flat(),n;if(t.length){let i=(await ps(e,t)).map(a=>({label:VI(a),description:YI(a,!0),container:a}));i.sort((a,c)=>a.label.localeCompare(c.label));let s=await rC.window.showQuickPick(i,{canPickMany:!0,placeHolder:oC.l10n.t("Select stopped dev containers to delete")});if(!s)return;s.length&&(n=new Set(await Ol(e)),await tt(e,"rm",...s.map(a=>a.container.Id)))}let r=await O6(e,n);(!t.length||r==="none")&&await rC.window.showInformationMessage(oC.l10n.t("There are no stopped dev containers or unused dev volumes to delete."),{modal:!0})}async function F6(e){await O6(e)==="none"&&await rC.window.showInformationMessage(oC.l10n.t("There are no unused dev volumes to delete."),{modal:!0})}async function O6(e,t){let n=[...new Set([...t?(await Ol(e)).filter(r=>!t.has(r)&&r!=="vscode"):[],...await Ol(e,[Ok]),...await Ol(e,[_x])])];if(n.length){let o=(await Hf(e,n)).map(s=>({label:GI(s),description:qI(s),volume:s}));o.sort((s,a)=>s.label.localeCompare(a.label));let i=await rC.window.showQuickPick(o,{canPickMany:!0,placeHolder:oC.l10n.t("Select unused dev volumes to delete")});if(!i)return"cancel";i.length&&await tt(e,"volume","rm",...i.map(s=>s.volume.Name))}return n.length?"done":"none"}var U6=Ae.l10n.t("Stop Container"),$6=Ae.l10n.t("Reopen Folder locally"),M6=Ae.l10n.t("Close Workspace");var hr=class{static isGroupItem(t){return!!t&&t.type==="Group"}static isContainerItem(t){return!!t&&t.type==="Container"}static isFolderItem(t){return!!t&&t.type==="Folder"}};var KI=class extends hr{constructor(n,r){super();this.label=n;this.groupType=r}type="Group";async asTreeItem(n,r,o,i){return new Z.TreeItem(this.label,Z.TreeItemCollapsibleState.Expanded)}},rg=class extends hr{constructor(n,r=[],o,i=!1){super();this.container=n;this.folders=r;this.parent=o;this.isDevContainer=i}type="Container";async asTreeItem(n,r,o,i){let s=new Z.TreeItem(this.getContainerLabel(),this.getCollapsibleState());s.description=YI(this.container);let a=this.getContextBase();s.iconPath=XI(r,Yfe),s.contextValue="exited"+a;let c=!1;return o&&this.container.Id===o.Id?(s.iconPath=XI(r,Vfe),s.contextValue="active"+a,c=!0):n&&await this.setTreeItemIconAndContext(n,a,s),s.tooltip=this.getHover(c,s.iconPath instanceof Z.ThemeIcon?s.iconPath:new Z.ThemeIcon("vm"),s.label),this.folders.length===1&&this.isDevContainer&&(s.contextValue+="Folder"),s}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?Z.TreeItemCollapsibleState.Expanded:Z.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(n,r,o){switch(this.container.State.Status){case"created":{o.iconPath=new Z.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"paused":{o.iconPath=new Z.ThemeIcon("vm-outline"),o.contextValue="running"+r;break}case"restarting":{o.iconPath=new Z.ThemeIcon("vm-outline"),o.contextValue="exited"+r;break}case"exited":{o.iconPath=new Z.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"running":{o.iconPath=new Z.ThemeIcon("vm-running"),o.contextValue="running"+r;break}}}getTimeElapsed(n){return n?cF(n):""}getContainerLabel(){return VI(this.container)}getHover(n,r,o){let i=new Z.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${o} (${oc(this.container)})  
`),this.repository){let a=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${a} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let s=Dx(this.container);return s&&i.appendMarkdown(`$(file-symlink-directory) ${s}  
`),n?i.appendMarkdown(Ae.l10n.t("$(remote) Connected")):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}_repository;_alreadyCheckedRepository=!1;get repository(){if(!this._alreadyCheckedRepository){let n=nc(this.container);n&&(this._repository=ni(n)),this._alreadyCheckedRepository=!0}return this._repository}inspect(n){return ei(n,this.container.Id)}},jc=class extends hr{constructor(n,r,o){super();this.container=n;this.folder=r;this.isDevContainer=o}type="Folder";async asTreeItem(n,r,o,i){let s=new Z.TreeItem(ng.basename(this.folder.path),Z.TreeItemCollapsibleState.None);return s.description=this.folder.path,s.iconPath=XI(r,qfe),s.contextValue="attachedFolder",this.isDevContainer&&!nc(this.container)&&!$l(this.container)&&(s.contextValue="devFolder"),o&&this.container.Id===o.Id&&i===this.folder.path&&(s.iconPath=XI(r,Gfe),s.tooltip=Ae.l10n.t("Active Folder {0}",String(s.label)),s.contextValue=`active${s.contextValue}`),s}};function Wfe(e,t,n,r){if(!(!Z.env.remoteName||Z.env.remoteName!=="attached-container"&&Z.env.remoteName!=="dev-container"))return H6(e,t,n,r)}function H6(e,t,n,r){Z.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new gF(e,t,r,t.output),i=Z.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},e.subscriptions.push(n.onDidChangeActiveContainer(s=>o.refresh(s))),o}function jfe(e,t){let n=[U6];return e&&e.Id===t.Id&&Z.workspace.workspaceFolders&&Z.workspace.workspaceFolders.length>0&&(n.push(M6),Z.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&n.push($6)),n}var dF=class{constructor(t,n){this.dockerParams=t;this.containerId=n}writeEmitter=new Z.EventEmitter;onDidWrite=this.writeEmitter.event;destroyables=[];open(){let{cliHost:t,env:n,output:r}=this.dockerParams;t.exec({cmd:As(),args:["logs","-f",this.containerId],env:n,output:r}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(t=>{t.destroy()})}write(t){this.writeEmitter.fire(t.replace(/\n/g,`\r
`))}},JI=class{constructor(t,n,r,o,i,s){this.targetsTreeData=t;this.detailsTreeData=n;this.devVolumesTreeData=r;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(t){this.dockerParams=t}registerCommands(){let t=[];return t.push(Z.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),t.push(Z.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),t.push(Z.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),t.push(Z.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),t.push(Z.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),t.push(Z.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),t.push(Z.commands.registerCommand("remote-containers.attachToContainerInCurrentWindow",this.commandAttachToContainerInCurrentWindow,this)),t.push(Z.commands.registerCommand("remote-containers.attachToContainerInNewWindow",this.commandAttachToContainerInNewWindow,this)),t.push(Z.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),t.push(Z.commands.registerCommand("remote-containers.openInformationAboutMountPerformance",this.openInformationAboutMountPerformance,this)),t.push(Z.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),t.push(Z.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),t.push(Z.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),t.push(Z.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),t.push(Z.commands.registerCommand("remote-containers.openFolderInContainerInCurrentWindow",n=>this.commandStartAndOpenFolder(n,{forceReuseWindow:!0}),this)),t.push(Z.commands.registerCommand("remote-containers.openFolderInContainerInNewWindow",n=>this.commandStartAndOpenFolder(n,{forceNewWindow:!0}),this)),t.push(Z.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),t}async commandStopContainer(t){if(!hr.isContainerItem(t))return;let n=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===t.container.Id?Ae.l10n.t("Stop active container? This will disconnect your current window."):Ae.l10n.t("Stop {0}?",t.getContainerLabel()),r=await Z.window.showWarningMessage(n,{modal:!0},...jfe(this.targetsTreeData.currentContainer,t.container));await this.targetsTreeData.withProgress(t,async()=>{switch(r){case U6:{await OA(this.dockerParams,t.container),t.container=await ei(this.dockerParams,t.container.Id);break}case M6:{await Z.commands.executeCommand("workbench.action.closeFolder");break}case $6:{await Z.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(t){if(!hr.isContainerItem(t))return;let n=await ti(this.dockerParams,t.container.Id);if(!n)return;let r=Ae.l10n.t("Remove"),o=await Z.window.showWarningMessage(Ae.l10n.t("Remove this container?"),{modal:!0,detail:Ae.l10n.t("This action is not reversible and deletes the container permanently.")},r);await this.targetsTreeData.withProgress(t.parent,async()=>{o===r&&(await OA(this.dockerParams,t.container),await r4(this.dockerParams,n.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(t.container))})}async tryRemoveVolume(t){let n=Dx(t);if(n||(n=vV(t)),n){let r=await lx(this.dockerParams,n);if((await Ol(this.dockerParams)).indexOf(n)>=0){let s;r!=null&&r.Labels&&r.Labels["vsch.local.repository.unique"]==="true"?s=Ae.l10n.t("The container is using a volume with a cloned repository."):s=Ae.l10n.t("This is the last container using '{0}'.",n);let a=Ae.l10n.t("Remove");await Z.window.showInformationMessage(s,{modal:!0,detail:Ae.l10n.t("Do you want to remove the volume and the data it contains?")},a)===a&&await UA(this.dockerParams,n)}}}async commandExplorerVolumesRefresh(t){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(t){hr.isContainerItem(t)&&await this.targetsTreeData.withProgress(t,async()=>{await DI(this.dockerParams,t.container),t.container=await ei(this.dockerParams,t.container.Id)})}async commandRemoveRecentFolder(t){hr.isFolderItem(t)&&(await Z.commands.executeCommand("vscode.removeFromRecentlyOpened",t.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(t){hr.isContainerItem(t)&&(this.detailsTreeData||(this.detailsTreeData=H6(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(t))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(t,n){let r,o;hr.isFolderItem(t)?(o=t,r=t.container):rg.isContainerItem(t)&&(o=t.folders[0],r=t.container),r&&(o&&Gf(o.folder.authority)?(await DI(this.dockerParams,r),await iC(this.dockerParams,r,this.context,!!(n!=null&&n.forceNewWindow),o.folder.path)):await Z.commands.executeCommand("remote-containers.openFolder",o,n))}async commandAttachToContainerInCurrentWindow(t){return this.attachToContainerInternal(t,!1)}async commandAttachToContainerInNewWindow(t){return this.attachToContainerInternal(t,!0)}async attachToContainerInternal(t,n){let r;hr.isContainerItem(t)?r=t.container:this.detailsTreeData&&(r=this.detailsTreeData.container),r&&(await DI(this.dockerParams,r),await iC(this.dockerParams,r,this.context,n))}async commandInspectDockerResource(t){let n;(hr.isContainerItem(t)||Vc.isImageItem(t)||Vc.isVolume(t)||Vc.isDevVolume(t))&&(n=await t.inspect(this.dockerParams)),n&&Z.window.showTextDocument(await Z.workspace.openTextDocument({language:"json",content:JSON.stringify(n,null,"	")}))}async openInformationAboutMountPerformance(){await Z.env.openExternal(Z.Uri.parse("https://aka.ms/vscode-remote/containers/open-repo"))}async commandInspectInBasicDevContainer(t){Vc.isDevVolume(t)&&await t.inspectInBasicDevContainer()}async commandCloneInVolume(t){Vc.isDevVolume(t)&&await t.cloneRepositoryInVolume()}async commandRemoveVolume(t){Vc.isDevVolume(t)&&await t.removeVolume(this.dockerParams)}static async commandNewContainer(){var r;let t=[...(r=Z.workspace.workspaceFolders)!=null&&r.length?[{label:Ae.l10n.t("Open Current Folder in Container"),command:"remote-containers.reopenInContainer"}]:[],{label:Ae.l10n.t("Open Folder in Container..."),command:"remote-containers.openFolder"},{label:Ae.l10n.t("Open Workspace in Container..."),command:"remote-containers.openWorkspace"},{label:Ae.l10n.t("New Dev Container..."),command:"remote-containers.createDevContainer"},{label:Ae.l10n.t("Clone Repository in Container Volume..."),command:"remote-containers.openRepositoryInVolume"},{label:Ae.l10n.t("Clone GitHub Pull Request in Container Volume..."),command:"remote-containers.openPullRequestInVolume"},{label:Ae.l10n.t("Try a Sample..."),command:"remote-containers.trySample"}],n=await Z.window.showQuickPick(t,{placeHolder:Ae.l10n.t("Select an action to create a dev container")});if(n)return Z.commands.executeCommand(n.command)}async commandShowContainerLog(t){if(!hr.isContainerItem(t))return;let n=new dF(this.dockerParams,t.container.Id);Z.window.createTerminal({name:t.container.Config.Image,pty:n}).show()}};function B6(e,t,n,r){Z.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new mF(e,t,s,n,r),i=Z.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,e.subscriptions.push(Z.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0)))),e.subscriptions.push(Z.commands.registerCommand("remote-containers.newContainer",JI.commandNewContainer)),e.subscriptions.push(Z.commands.registerCommand("remote-containers.pruneVolumes",async()=>{let a=await o.getDockerParams(!0);a&&await F6(a)}));function s(a){let c=Wfe(e,a,o,n),l=new wF(e,n,r),u=Z.window.createTreeView("devVolumes",{treeDataProvider:l});e.subscriptions.push(u);let f=new JI(o,c,l,a,e,n);e.subscriptions.push(...f.registerCommands()),e.subscriptions.push(NA(e,n.product)(async()=>{o.refresh(void 0),l.refresh(void 0);let m=await Qe(e,r);c&&c.updateDockerParameters(m),f.updateDockerParameters(m)}))}}var mF=class{constructor(t,n,r,o,i){this.context=t;this.resolverResults=n;this.onFirstReveal=r;this.telemetry=o;this.output=i}_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_onDidChangeActiveContainer=new Z.EventEmitter;onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;dockerParams;refreshDockerParams=!1;needsSSHCredentials=!1;passiveSSHAskpassEnv;eventsProcess;setTreeMessage=()=>{};_currentContainer;currentFolder;devContainers=[];attachContainers=[];otherContainers=[];recentAttachEntries=new Map;recentAttachDevContainerEntries=new Map;recentDevComposeEntries=new Map;containerItems=new Map;action=Promise.resolve();set setMessage(t){this.setTreeMessage=t}get currentContainer(){return this._currentContainer}async getDockerParams(t=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Al(this.context.extensionPath,async n=>(this.needsSSHCredentials=!0,am(n,!1)),this.output));try{this.dockerParams=await Qe(this.context,this.output,void 0,void 0,t?void 0:this.passiveSSHAskpassEnv,!1);let n=FA();await nC(this.dockerParams,this.telemetry,n)!==!0&&(this.dockerParams=void 0)}catch(n){if(!this.needsSSHCredentials)throw n}}return this.dockerParams}handleDockerEvent(t){try{let n=JSON.parse(t.toString());if(!n.Action)return;let r="exec_create: /root/.vscode-server";if(n.Action==="die"||n.Action==="destroy"||n.Action==="create")this._onDidChangeTreeData.fire();else if(!n.Action.startsWith("exec_create")&&n.Actor&&n.Actor.ID&&this.containerItems.has(n.Actor.ID)){let o=this.containerItems.get(n.Actor.ID);this.dockerParams&&o?(async()=>(o.container=await ei(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)))():this._onDidChangeTreeData.fire(o);return}else if(n.Action.startsWith(r)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let t=await this.getDockerParams();if(t)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await fx(t,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async getTreeItem(t){return t.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}needsDockerStartOrInstallContext=void 0;async setDockerStartOrInstallContext(t){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==t)&&(this.needsDockerStartOrInstallContext=t,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await Z.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await Z.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}hasContainersContext=void 0;async setHasContainersContext(t){if(this.hasContainersContext===void 0||this.hasContainersContext!==t){this.hasContainersContext=t;let n=Z.workspace.workspaceFolders&&Z.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await Z.commands.executeCommand("setContext",n,!this.hasContainersContext)}}async getDockerOrShowMessage(t){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(t===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(t){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(t);let n=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&n.push(new KI(Ae.l10n.t("Dev Containers"),0)),this.otherContainers.length>0&&n.push(new KI(Ae.l10n.t("Other Containers"),2)),n}async getChildDevContainer(t,n){let r=await this.getWorkspaceFolderFromContainer(t),o=r?[new jc(t,r,!0)]:[],i=Hl(t);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new jc(t,a,!1))):i&&this.recentAttachEntries.has(t.Id)?o.push(...this.recentAttachEntries.get(t.Id).map(a=>new jc(t,a,!1))):(i=nc(t))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new jc(t,a,!1))):(i=Pk($l(t)))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new jc(t,a,!1))):i===void 0&&this.recentDevComposeEntries.has(t.Id)&&o.push(...this.recentDevComposeEntries.get(t.Id).map(a=>new jc(t,a,!1)));let s=new rg(t,o,n,!0);return this.setContainerItems(s),s}setContainerItems(t){this.containerItems.set(t.container.Id,t),this._currentContainer&&t.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(t)}async getChildContainers(t){let n;if(t.groupType===0){let r=this.devContainers.map(async o=>this.getChildDevContainer(o,t));r.push(...this.attachContainers.map(async o=>{let i=new rg(o,this.recentAttachEntries.get(o.Id).map(s=>new jc(o,s,!1)),t);return this.setContainerItems(i),i})),n=await Promise.all(r)}else n=this.otherContainers.map(r=>{let o=new rg(r,[],t);return this.setContainerItems(o),o});return n.sort((r,o)=>r.getContainerLabel().localeCompare(o.getContainerLabel()))}getChildFolders(t){return t.folders&&t.folders.length>1?t.folders:[]}async getChildItems(t){if(t===void 0){let n=await Fl(this.dockerParams,!0);if(await this.setHasContainersContext(n.length>0),n.length===0)return[];let r=await ps(this.dockerParams,n);return this.getChildGroups(r)}else{if(hr.isGroupItem(t))return this.getChildContainers(t);if(hr.isContainerItem(t))return this.getChildFolders(t)}return[]}async getChildren(t){return await this.action,await this.getDockerOrShowMessage(t)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(t)):[]}async refresh(t){t===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(t)}async setCurrents(){let t=Z.workspace.workspaceFolders,n;if(this.dockerParams){if(t&&t.length>0){let r=this.resolverResults.get(t[0].uri.authority);r&&r.dockerContainerId&&(n=await ti(this.dockerParams,r.dockerContainerId),this.currentFolder=t[0].uri.path)}else if(this.resolverResults.size>0){let r=[...this.resolverResults.values()][0].dockerContainerId;r&&(n=await ti(this.dockerParams,r))}}n!==this._currentContainer&&(this._currentContainer=n)}addContainerToMap(t){if(Hl(t)){this.devContainers.push(t);return}else if(nc(t)){this.devContainers.push(t);return}else if($l(t)){this.devContainers.push(t);return}else if(zv(t)&&this.recentDevComposeEntries.has(t.Id)){this.devContainers.push(t);return}else if(this.recentAttachEntries.has(t.Id)){this.attachContainers.push(t);return}this.otherContainers.push(t)}async setContainerTypes(t){return await this.setRecentEntries(t),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,t.forEach(n=>{this.addContainerToMap(n)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(t,n){let{cliHost:r,dockerCLI:o,dockerComposePath:i}=this.dockerParams,s=It(r.path,t),a=n?Ce.from({scheme:Je.scheme,path:n}):await Zj(r,s,Yy(),pn),c={cliHost:r,dockerPath:o,dockerComposePath:i,appRoot:Z.env.appRoot,extensionPath:this.context.extensionPath,package:await ir(this.context.extensionPath),output:this.output},l=a&&await jh(c,s.rootFolderPath,a);if(l){let u=lr(this.dockerParams.env);return Z.Uri.parse(nw(r.authority,t,l.workspace.workspaceFolder,u),!0)}}async getWorkspaceFolderFromContainer(t){let n=Hl(t);if(n){let r=gV(t);return this.getWorkspaceFolderFromHostWorkspace(n,r)}else{let r=nc(t),o=Dx(t),i=wV(t),s=this.dockerParams;if(r){let c=lr(s.env);return Z.Uri.parse(Li(s.cliHost.authority,r,o,i,!1,c,void 0))}let a=$l(t);if(a){let c=lr(s.env);return Z.Uri.parse(Li(s.cliHost.authority,void 0,a.volumeName,a.folder,!1,c,void 0))}}}async getWorkspaceFolderFromHostPath(t){let n=this.dockerParams.cliHost,r=await bV(n,t,this.output),o=TV(n,r,t),i=lr(this.dockerParams.env);return Z.Uri.parse(nw(n.authority,t,o,i),!0)}getWorkspaceFolderFromRepository(t,n,r){let o=this.dockerParams,i=lr(o.env);return Z.Uri.parse(Li(o.cliHost.authority,t,n,r,!1,i,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(t,n){let r=this.dockerParams,o=lr(r.env);return Z.Uri.parse(Li(r.cliHost.authority,void 0,t,n,!1,o,void 0),!0)}async findComposeTargetContainer(t,n){var r;return(r=n.find(o=>Hl(o)===t))==null?void 0:r.Id}trySetEntryWithAttachAuthority(t,n,r){let o;if("containerName"in n){let i=r.find(s=>s.Name===n.containerName);i&&(o=i.Id)}else o=n.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(t):this.recentAttachEntries.set(o,[t]))}async trySetEntryWithDevAuthority(t,n,r,o){let i=n.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(n.hostPath),o[i]=s),s.path!==t.path){this.recentAttachDevContainerEntries.has(n.hostPath)?this.recentAttachDevContainerEntries.get(n.hostPath).push(t):this.recentAttachDevContainerEntries.set(n.hostPath,[t]);let a=await this.findComposeTargetContainer(n.hostPath,r);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(t):a&&this.recentDevComposeEntries.set(a,[t])}}trySetEntryWithRepoAuthority(t,n){this.getWorkspaceFolderFromRepository(n.repositoryPath,n.volumeName,n.folder).path!==t.path&&(this.recentAttachDevContainerEntries.has(n.repositoryPath)?this.recentAttachDevContainerEntries.get(n.repositoryPath).push(t):this.recentAttachDevContainerEntries.set(n.repositoryPath,[t]))}trySetEntryWithDevContainerInVolumeAuthority(t,n){if(this.getWorkspaceFolderFromDevContainerInVolume(n.volumeName,n.folder).path!==t.path){let o=Pk(n);this.recentAttachDevContainerEntries.has(o)?this.recentAttachDevContainerEntries.get(o).push(t):this.recentAttachDevContainerEntries.set(o,[t])}}trySetEntryWithVolumeAuthority(t,n){let r=n.volumeName;r&&(this.recentAttachEntries.has(r)?this.recentAttachEntries.get(r).push(t):this.recentAttachEntries.set(r,[t]))}async trySetEntry(t,n,r){if(!t||!t.folderUri&&!t.workspace.configPath)return;let o=t.folderUri??t.workspace.configPath,i=Gf(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,n);else{let s=io(o.authority);s&&(ln(s)?await this.trySetEntryWithDevAuthority(o,s,n,r):oo(s)?this.trySetEntryWithRepoAuthority(o,s):Vf(s)?this.trySetEntryWithDevContainerInVolumeAuthority(o,s):this.trySetEntryWithVolumeAuthority(o,s))}}async setRecentEntries(t){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let n=await Z.commands.executeCommand("_workbench.getRecentlyOpened");if(n&&n.workspaces){let r={};for(let o of n.workspaces)await this.trySetEntry(o,t,r)}}withProgress(t,n){return this.action=this.action.then(()=>n()),this.refresh(t)}};var Vc=class{constructor(t){this.label=t}detail;context;command;type="Default";static isDetailItem(t){return!!t&&t.label!==void 0&&t.type!==void 0}static isImageItem(t){return!!t&&t.type==="Image"}static isVolume(t){return!!t&&t.type==="Volume"}static isDevVolume(t){return!!t&&t.type==="DevVolume"}},pF=class{constructor(t){this.detail=t}type="Image";context="image";label=Ae.l10n.t("Image");inspect(t){return Bj(t,this.detail)}},hF=class{constructor(t,n,r){this.label=t;this.detail=n;this.volumeDetails=r}type="Volume";context="volume";async inspect(t){return lx(t,this.volumeDetails)}},gF=class{constructor(t,n,r,o){this.context=t;this.dockerParams=n;this.telemetry=r;this.output=o}_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_container;setTreeTitle=()=>{};updateDockerParameters(t){this.dockerParams=t}set setTitle(t){this.setTreeTitle=t}get container(){return this._container?this._container.container:void 0}getTreeItem(t){let n=new Z.TreeItem(t.label,Array.isArray(t.detail)&&t.detail.length>0?Z.TreeItemCollapsibleState.Expanded:Z.TreeItemCollapsibleState.None);return n.tooltip=t.label,t.detail&&!Array.isArray(t.detail)&&(n.description=t.detail,n.tooltip+=` ${n.description}`),n.contextValue=t.context,n.command=t.command,n}async getAttributes(t,n,r){let o=[];n&&o.push({label:Ae.l10n.t("Workspace"),detail:n});let i=nc(t.container);i&&o.push({label:Ae.l10n.t("Repository"),detail:i});let s=$l(t.container);return s&&(o.push({label:Ae.l10n.t("Volume"),detail:s.volumeName}),o.push({label:Ae.l10n.t("Folder"),detail:s.folder})),o.push({label:Ae.l10n.t("Name"),detail:t.container.Name}),o.push(new pF(t.container.Config.Image)),r&&o.push({label:Ae.l10n.t("Configuration"),detail:r,command:{title:Ae.l10n.t("Open Dev Container File"),command:"remote-containers.openDevContainerFile",arguments:[r]},context:"devContainer"}),o}async getMounts(t){let n=[];return t&&t.Mounts.forEach(r=>{if(r.Type==="volume"){let o=r.Name,i=new hF(Ae.l10n.t("Volume"),o,o),s={label:Ae.l10n.t("Destination"),detail:r.Destination};n.push({label:Ae.l10n.t("Volume mount"),detail:[i,s]})}else if(r.Type==="bind"){let o={label:Ae.l10n.t("Source"),detail:r.Source},i={label:Ae.l10n.t("Destination"),detail:r.Destination},s=this.dockerParams&&["win32","darwin"].includes(this.dockerParams.cliHost.platform)?[{label:Ae.l10n.t("I/O performance"),detail:Ae.l10n.t("reduced by bridging OSes"),context:"mountPerformanceInfo",command:{command:"remote-containers.openInformationAboutMountPerformance"}}]:[];n.push({label:Ae.l10n.t("Bind mount"),detail:[o,i,...s]})}}),n}async getChildrenFromRoot(t){let n=[],r=Hl(t.container),o=(t.container.Config.Labels||{})[Wf];n.push({label:Ae.l10n.t("Attributes"),detail:await this.getAttributes(t,r,o),type:"Title"});let i;this.dockerParams&&(i=await ei(this.dockerParams,t.container.Id));let s=await this.getMounts(i);return s.length>0&&n.push({label:Ae.l10n.t("Mounts"),detail:s,type:"Title"}),n}async testContainer(){let t=!0;try{(this.dockerParams?await ei(this.dockerParams,this._container.container.Id):void 0)===void 0&&(t=!1)}catch{t=!1}return t||(this._container=void 0,this.setTreeTitle(Ae.l10n.t("Details (Containers)"))),t}async getChildren(t){if(this._container===void 0)return[];let n=[];return t===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),n=await this.getChildrenFromRoot(this._container)):Array.isArray(t.detail)&&n.push(...t.detail),n}async refresh(t){this.dockerParams=await Qe(this.context,this.output),await nC(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=t||this._container,this._onDidChangeTreeData.fire(void 0)}},vF=class extends Vc{type="DevVolume";volumeDetails;createdAt;constructor(t){super(t.Name),this.volumeDetails=t,this.createdAt=void 0}async asTreeItem(){let t=this.getLabel(),n=new Z.TreeItem(t,Z.TreeItemCollapsibleState.None);return n.iconPath=this.iconPath,n.description=this.getDescription(),this.isUniqueVolume()?n.contextValue="uniqueDevVolume":n.contextValue="devVolume",n}isUniqueVolume(){return tg(this.volumeDetails)}getLabel(){return GI(this.volumeDetails)}getDescription(){return qI(this.volumeDetails)}getBranchName(){return lF(this.volumeDetails)}getPullRequestId(){return uF(this.volumeDetails)}getRepository(){return zI(this.volumeDetails)}get iconPath(){return new Z.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let t="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let r=new Date,o=new Date(this.volumeDetails.CreatedAt);t=Ae.l10n.t("{0} ago",fF(r,o))}return this.createdAt=t,t}async inspect(t){return lx(t,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await Z.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await Z.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(t){if(!((await Ol(t)).indexOf(this.volumeDetails.Name)>=0)){await Z.window.showInformationMessage(Ae.l10n.t("Volume '{0}' is in use and cannot be removed.",this.volumeDetails.Name),{modal:!0});return}let o=Ae.l10n.t("Remove");await Z.window.showInformationMessage(Ae.l10n.t("Are you sure you want to remove volume '{0}'?",this.volumeDetails.Name),{modal:!0},o)===o&&await UA(t,this.volumeDetails.Name)}},wF=class{constructor(t,n,r){this.context=t;this.telemetry=n;this.output=r}dockerParams;_onDidChangeTreeData=new Z.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;eventsProcess;async getTreeItem(t){return t.asTreeItem()}async getDockerParams(){if(!this.dockerParams){this.dockerParams=await Qe(this.context,this.output,void 0,void 0);let t=FA();await nC(this.dockerParams,this.telemetry,t)!==!0&&(this.dockerParams=void 0)}return this.dockerParams}async setHasVolumesContext(t){await Z.commands.executeCommand("setContext","remote-containers:noDevVolumes",t)}async getDockerOrShowMessage(t){return!(!this.dockerParams&&(t===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(t){if(!await this.getDockerOrShowMessage(t))return[];let n=await Qe(this.context,this.output),r=await Ro(n),o=await Hf(n,r),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new vF(a))}async resolveTreeItem(t,n){let r=await Qe(this.context,this.output),o=await this.getAssociatedContainers(r,n),i=n.getLabel(),s=n.getRepository(),a=n.getBranchName(),c=n.getPullRequestId(),l=n.getTimeElapsed();return o.length>0?t.tooltip=this.renderMarkdown(i,s,a,c,l,o.join(", ")):t.tooltip=this.renderMarkdown(i,s,a,c,l,Ae.l10n.t("None")),t}async getAssociatedContainers(t,n){let r=[],o=await Fl(t,!0),i=await ps(t,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===n.volumeDetails.Name&&r.push(oc(s));return r}renderMarkdown(t,n,r,o,i,s){let a=new Z.MarkdownString(void 0,!0);if(n){let c=n.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=n.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=n.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),r&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${r}](${l}/tree/${r})
`):a.appendMarkdown(`$(git-compare) ${r}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${l}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${t}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(t){try{let n=JSON.parse(t.toString());if(!n.Action)return;(n.Action==="die"||n.Action==="destroy"||n.Action==="create"||n.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let t=await this.getDockerParams();if(t)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await fx(t,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async refresh(t){t===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(t)}},Vfe="vm-active",Yfe="vm-default",Gfe="folder-active",qfe="folder";function XI(e,t){let n=`${t}.svg`;return{light:Z.Uri.file(e.asAbsolutePath(ng.join("resources","light",n))),dark:Z.Uri.file(e.asAbsolutePath(ng.join("resources","dark",n))),highContrast:Z.Uri.file(e.asAbsolutePath(ng.join("resources","highContrast",n)))}}var TF=require("util");var Zn=W(require("vscode")),$a=require("vscode");async function ZI(e,t,n,r={},o={}){let i=await qS({params:e,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:t,remotePtyExec:n,remoteExecAsRoot:void 0,rootShellServer:void 0,remoteWaylandSocket:void 0}),{hostOrContainerPort:s,connectionToken:a,remoteEnv:c,serverDownloaded:l}=await Tl(e,i,r,o);return{params:e,properties:i,config:void 0,resolvedAuthority:{host:ec,port:s,connectionToken:a,extensionHostEnv:c},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function yF(e,t,n){var r,o;try{if(!await Fs(e))return;let{cliHost:i,env:s,output:a}=t,c;if(!(n!=null&&n.name)){let p=(await X({exec:i.exec,cmd:"kubectl",args:["get","pods","-o","json"],env:s,output:a})).stdout.toString(),g=JSON.parse(p).items;if(!g.length){await Zn.window.showInformationMessage($a.l10n.t("No pods found."),{modal:!0},$a.l10n.t("Show Log"))&&Zn.commands.executeCommand(st);return}if(c=(r=await Zn.window.showQuickPick(g.map(h=>({label:h.metadata.name,description:h.metadata.namespace,pod:h})),{placeHolder:$a.l10n.t("Select pod")}))==null?void 0:r.pod,!c)return}if(!c){let d=["get","pod",n.name,"-o","json"];n.namespace&&d.push("--namespace",n.namespace);let g=(await X({exec:i.exec,cmd:"kubectl",args:d,env:s,output:a})).stdout.toString();c=JSON.parse(g)}let l=c.spec.containers||[];if(!l.length){await Zn.window.showInformationMessage($a.l10n.t("No containers found."),{modal:!0},$a.l10n.t("Show Log"))&&Zn.commands.executeCommand(st);return}let u=l.length>1?(o=await Zn.window.showQuickPick(l.map(d=>({label:d.name,description:d.image,container:d})),{placeHolder:$a.l10n.t("Select container")}))==null?void 0:o.container:l[0];if(!u)return;let f=(await X({exec:i.exec,cmd:"kubectl",args:["config","current-context"],env:s,output:a})).stdout.toString().trim(),m={remoteAuthority:Xfe(Zn.env.remoteAuthority,{context:f,podname:c.metadata.name,namespace:c.metadata.namespace,name:u.name,image:u.image})};e.extensionMode===Zn.ExtensionMode.Development&&(m.reuseWindow=!0),await Zn.commands.executeCommand("vscode.newWindow",m)}catch(i){t.output.write((i==null?void 0:i.stack)||(i==null?void 0:i.message)||String(i)),Zn.commands.executeCommand(st),await Zn.window.showErrorMessage($a.l10n.t("Error while attaching to Kubernetes container."),{detail:i==null?void 0:i.message,modal:!0})}}async function W6(e,t,n,r,o,i){return await Fs(e)?{...await zfe(e,t,n,r,o,i),isTrusted:!0}:(await Zn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function zfe(e,t,n,r,o,i){let s;return Zn.window.withProgress({location:Zn.ProgressLocation.Notification,title:Uu,cancellable:!1},async a=>{try{let c=Zfe(n);if(!c)throw new Error(`Invalid authority: ${n}`);let{options:l,parentAuthority:u}=c;if(u&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let f=process.cwd(),m=Gi(),d=await Vr(r.execServer?{server:r.execServer,authority:u}:void 0,void 0,f,pn,m,e.extensionPath,await Cr(),t.product,o.log,gi);s=await Ou({authority:n,extensionContext:e,sessionStart:o.sessionStart,progress:a,cliHost:d,env:d.env,cwd:f,wslSettings:m,isLocalContainer:Wl(u,{}),telemetry:t,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${l.name} in ${l.podname} (${l.image})`);let p=Kfe(d.exec,l),g=Jfe(d.ptyExec,l);return await ZI(s,p,g)}catch(c){let l=c instanceof pe?c:new pe({description:$a.l10n.t("An error occurred attaching to the container."),originalError:c});throw l.actions=[...Hu,Wc,Na,Mu,Bc],l}}).then(a=>(qi(t,"k8s-container","success",o.sessionStart,s,void 0,void 0,a.properties),a),a=>{let c=a instanceof pe?a:new pe({description:$a.l10n.t("An error occurred attaching to the container."),originalError:a});return qi(t,"k8s-container","failure",o.sessionStart,s,void 0,void 0,c.containerProperties,c),La(c,"k8s-container",t,!0,o.log)})}function Kfe(e,t){return async function(n){return e(j6(t,n))}}function Jfe(e,t){return async function(n){return e(j6(t,n))}}function j6(e,t){let n=["exec","-it",e.podname];if(e.context&&n.push("--context",e.context),e.namespace&&n.push("--namespace",e.namespace),n.push("--container",e.name,"--"),t.cwd&&n.push("/bin/sh","-c",'cd "$1" && shift && "$@"',"--",t.cwd),t.env){let r=Object.keys(t.env);if(r.length){n.push("env");for(let o of r)n.push(`${o}=${t.env[o]}`)}}return n.push(t.cmd),t.args&&n.push(...t.args),{cmd:"kubectl",args:n,output:t.output}}function Xfe(e,t){return e=qf(e),`k8s-container+${Buffer.from(JSON.stringify(t),"utf8").toString("hex")}${e?`@${e}`:""}`}function Zfe(e){let t=jl(e);if((t==null?void 0:t.name)!=="k8s-container")return;try{return{parentAuthority:t.parentAuthority,options:JSON.parse(Buffer.from(t.config,"hex").toString("utf8"))}}catch{}let n=t.config.split("+").reduce((r,o)=>{let i=o.indexOf("=");return i!==-1&&(r[o.substring(0,i)]=decodeURIComponent(o.substring(i+1))),r},{});return{parentAuthority:t.parentAuthority,options:n}}var Hn=W(require("vscode")),Os=require("vscode");async function V6(e,t){var n;try{if(!await Fs(e))return;let{cliHost:r,env:o,output:i}=t;if(process.platform!=="darwin"){await Hn.window.showErrorMessage(Os.l10n.t("Apple Containerization is only available on macOS."),{modal:!0})&&Hn.commands.executeCommand(st);return}let s;try{await X({exec:r.exec,cmd:"which",args:["container"],env:o,output:i})}catch{await Hn.window.showErrorMessage(Os.l10n.t("Apple Container command not found."),{modal:!0,detail:Os.l10n.t("Please ensure that the Apple Container CLI is installed and available in your PATH.")},Os.l10n.t("Show Log"))&&Hn.commands.executeCommand(st);return}let c=(await X({exec:r.exec,cmd:"container",args:["list","--format","json"],env:o,output:i})).stdout.toString(),l;try{l=JSON.parse(c),Array.isArray(l)||(l=[l])}catch(f){throw i.write(`Failed to parse container list JSON: ${f}`),new Error(`Failed to parse container list: ${f}`)}if(!l.length){await Hn.window.showInformationMessage(Os.l10n.t("No Apple containers found."),{modal:!0},Os.l10n.t("Show Log"))&&Hn.commands.executeCommand(st);return}if(s=(n=await Hn.window.showQuickPick(l.map(f=>({label:f.configuration.id,description:`(${f.status})`,container:f})),{placeHolder:Os.l10n.t("Select Apple container")}))==null?void 0:n.container,!s)return;let u={remoteAuthority:nde(Hn.env.remoteAuthority,{id:s.configuration.id,image:s.configuration.image.reference})};e.extensionMode===Hn.ExtensionMode.Development&&(u.reuseWindow=!0),await Hn.commands.executeCommand("vscode.newWindow",u)}catch(r){t.output.write((r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)),Hn.commands.executeCommand(st),await Hn.window.showErrorMessage(Os.l10n.t("Error while attaching to Apple container."),{detail:r==null?void 0:r.message,modal:!0})}}async function Y6(e,t,n,r,o,i){return await Fs(e)?{...await Qfe(e,t,n,r,o,i),isTrusted:!0}:(await Hn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Qfe(e,t,n,r,o,i){let s;return Hn.window.withProgress({location:Hn.ProgressLocation.Notification,title:Uu,cancellable:!1},async c=>{try{let l=rde(n);if(!l)throw new Error(`Invalid authority: ${n}`);let{options:u,parentAuthority:f}=l;if(f&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let m=process.cwd(),d=Gi(),p=await Vr(r.execServer?{server:r.execServer,authority:f}:void 0,void 0,m,pn,d,e.extensionPath,await Cr(),t.product,o.log,gi);s=await Ou({authority:n,extensionContext:e,sessionStart:o.sessionStart,progress:c,cliHost:p,env:p.env,cwd:m,wslSettings:d,isLocalContainer:Wl(f,{}),telemetry:t,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${u.id} (${u.image})`);let g=ede(p.exec,u),h=tde(p.ptyExec,u);return await ZI(s,g,h)}catch(l){let u=l instanceof pe?l:new pe({description:Os.l10n.t("An error occurred attaching to the Apple container."),originalError:l});throw u.actions=[...Hu,Wc,Na,Mu,Bc],u}}).then(c=>(qi(t,"apple-container","success",o.sessionStart,s,void 0,void 0,c.properties),c),c=>{let l=c instanceof pe?c:new pe({description:Os.l10n.t("An error occurred attaching to the Apple container."),originalError:c});return qi(t,"apple-container","failure",o.sessionStart,s,void 0,void 0,l.containerProperties,l),La(l,"apple-container",t,!0,o.log)})}function ede(e,t){return async function(n){return e(G6(t,n))}}function tde(e,t){return async function(n){return e(G6(t,n))}}function G6(e,t){let n=["exec","-i"];if(t.env){let r=Object.keys(t.env);if(r.length)for(let o of r)n.push("--env",`${o}=${t.env[o]}`)}return t.cwd&&n.push("-w",t.cwd),n.push(e.id),n.push(t.cmd),t.args&&n.push(...t.args),{cmd:"container",args:n,output:t.output}}function nde(e,t){return e=qf(e),`apple-container+${Buffer.from(JSON.stringify(t),"utf8").toString("hex")}${e?`@${e}`:""}`}function rde(e){let t=jl(e);if((t==null?void 0:t.name)==="apple-container")try{return{parentAuthority:t.parentAuthority,options:JSON.parse(Buffer.from(t.config,"hex").toString("utf8"))}}catch{return}}var _t=W(require("vscode")),Lt=require("vscode"),mm=W(require("fs")),og=W(require("os")),dm=W(require("path")),QI=require("child_process"),ig=require("util");function e0(e){switch(e.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${e.quality}`}}async function q6(e,t){let n=e.globalStorageUri,r=Po.joinPath(n,"cli-bin");await _t.workspace.fs.createDirectory(r);let o="";try{o=(await _t.workspace.fs.readFile(Po.joinPath(r,"vscode-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}o!==process.execPath&&(await _t.workspace.fs.writeFile(Po.joinPath(r,"vscode-app-root"),Buffer.from(_t.env.appRoot,"utf-8")),await _t.workspace.fs.writeFile(Po.joinPath(r,"vscode-quality"),Buffer.from(t.quality??"","utf-8")),await _t.workspace.fs.writeFile(Po.joinPath(r,"vscode-machine-id"),Buffer.from(_t.env.machineId,"utf-8")),await _t.workspace.fs.writeFile(Po.joinPath(r,"vscode-path"),Buffer.from(process.execPath,"utf-8")));let i="";try{i=(await _t.workspace.fs.readFile(Po.joinPath(r,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}if(i===e.extensionPath)return;let s=Po.joinPath(e.extensionUri,"dev-containers-user-cli","bin"),a=e0(t),c=`devcontainer${a}`,l=[{source:"devcontainer",destination:c},{source:"devcontainer.cmd",destination:`devcontainer${a}.cmd`}];for(let u of l)await _t.workspace.fs.copy(Po.joinPath(s,u.source),Po.joinPath(r,u.destination),{overwrite:!0});process.platform!=="win32"&&await mm.promises.chmod(Po.joinPath(r,c).fsPath,493),await _t.workspace.fs.writeFile(Po.joinPath(r,"remote-containers-path"),Buffer.from(e.extensionPath,"utf-8"))}async function ode(e,t){let n=e0(t),r="";try{let o=await Jo("powershell.exe");if(r=(await(0,ig.promisify)(QI.exec)(`"${o}" -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`,{env:no(process.env)})).stdout.toString().trim(),r.indexOf(e)>=0)return await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI is already in your PATH"),{modal:!0,detail:Lt.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)}),!0;let s=Lt.l10n.t("Add"),a=Lt.l10n.t("Copy CLI Path");switch(await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI needs to be added to your PATH"),{modal:!0},s,a)){case s:let l=(0,ig.promisify)(QI.exec)(`"${o}"  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${r};${e}', 'User')`,{env:no(process.env)}),u=_t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI has been added to your PATH"),{modal:!0,detail:Lt.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});await Promise.all([l,u]);break;case a:await _t.env.clipboard.writeText(e),await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Lt.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});break}return!0}catch{return!1}}async function ide(e,t){let r=(process.env.PATH??"").split(":"),o=[dm.join(og.homedir(),"bin"),dm.join(og.homedir(),".local/bin")],i="/usr/local/bin";og.platform()==="darwin"&&o.push(i);let s=(0,ig.promisify)(mm.stat);for(let a of o){if(r.findIndex(p=>p===a)<0)continue;try{await s(a)}catch{continue}let c=e0(t),l=dm.join(a,`devcontainer${c}`);try{let p=await s(l);return console.log(p),await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI is already symlinked in {0}",a),{modal:!0,detail:Lt.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let u=Lt.l10n.t("Create"),f=Lt.l10n.t("Copy CLI Path"),m=await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI needs to be in your PATH"),{detail:Lt.l10n.t("Create a symlink in {0}?",a),modal:!0},u,f),d=dm.join(e,`devcontainer${c}`);switch(m){case u:if(a===i){if(!await sde(d,l))break}else await(0,ig.promisify)(mm.symlink)(d,l);await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI has been symlinked in {0}",a),{modal:!0,detail:Lt.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break;case f:await _t.env.clipboard.writeText(e),await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Lt.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break}return!0}return!1}async function sde(e,t){try{return await mm.promises.symlink(e,t),!0}catch(n){if(n.code!=="EACCES"&&n.code!=="ENOENT")throw n;let r=Lt.l10n.t("OK");if(await _t.window.showInformationMessage(Lt.l10n.t("This will now prompt with 'osascript' for Administrator privileges to install the shell command."),{modal:!0},r)===r){let s=`"${await Jo("osascript")}" -e "do shell script \\"mkdir -p ${dm.dirname(t)} && ln -sf '${e}' '${t}'\\" with administrator privileges"`;return await(0,ig.promisify)(QI.exec)(s),!0}return!1}}async function z6(e,t){let n=e.globalStorageUri,r=Po.joinPath(n,"cli-bin").fsPath;switch(og.platform()){case"win32":if(await ode(r,t))return;break;case"darwin":case"linux":if(await ide(r,t))return;break}let o=Lt.l10n.t("Copy CLI Path");if(await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI needs to be included your PATH"),{modal:!0},o)===o){await _t.env.clipboard.writeText(r);let s=e0(t);await _t.window.showInformationMessage(Lt.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Lt.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${s}`)})}}var vo=W(require("vscode")),Rr=require("vscode"),CF=W(require("path"));var ade=Rr.l10n.t("Select Dev Container Configuration"),cde=Rr.l10n.t('[Creating Dev Container (show log)](command:remote-containers.revealLogTerminal "Show details in terminal")'),K6="alpine:3.16.3";async function J6(e,t,n){let r=await lde(e,t,n);if(!r)return;let{volumeAndFolderName:o}=r,i=lr(t.env),s=vo.Uri.parse(Li(t.cliHost.authority,void 0,o,o,!1,i,void 0));await $u({uri:s,type:"folder",label:Rr.l10n.t("{0} [Dev Container]",o)}),await vo.commands.executeCommand("vscode.openFolder",s)}async function lde(e,t,n){let{output:r}=t,o=tt(t,"pull",K6),i=await zA({telemetry:n,output:r,openConfigurationCommandId:sm,showLogCommandId:st},ade,!0);i.askForTrust=!0;let s=await Ro(t),a=async()=>{i.skipOptions=!0;let f=await TI(i,void 0,void 0,Promise.resolve(void 0));if(f==="back"||!f)return;let m=f.metadata.template;if(BA.indexOf(m.owner)===-1){let d=`@${m.owner}`,p={label:Rr.l10n.t("Trust {0}",d),description:Rr.l10n.t("from GitHub"),buttons:[{iconPath:new vo.ThemeIcon("info"),tooltip:Rr.l10n.t("Open Documentation")}]},g={label:Rr.l10n.t("Back")},h={label:Rr.l10n.t("Cancel")},w=i.quickPick.onDidTriggerItemButton(()=>{vo.env.openExternal(vo.Uri.parse(m.documentationURL))}),C=await go(i.quickPick,[p,g,h],Rr.l10n.t("The {0} is from the {1} GitHub owner/organization.",m.name,d),void 0,void 0,!0);if(w.dispose(),!C||C===h)return;if(C==="back"||C===g)return a()}return X6(i,f,s,ude(f.id,s),a)},c=await a();if(!c){i.quickPick.dispose();return}let{selectedTemplate:l,volumeName:u}=c;return vo.window.withProgress({location:vo.ProgressLocation.Notification,title:cde,cancellable:!1},async()=>{let f;try{await gp(t,u,[`${_x}=true`]),await o;let{stdout:m}=await tt(t,...fde(u,jf()));f=m.toString().trim();let d=CF.posix.join(jf(),u),p=hs(t,f,"root"),g=await Js(t,f,"root",pn),h=to("container",d,{},p,g,()=>{throw new Error("not implemented")},"node",r);await h.mkdirp(d);let w=It(CF.posix,d),C=await GA(i,h,w.configFolderPath,"workspace",l);return i.quickPick.hide(),C?{volumeAndFolderName:u}:void 0}finally{if(f)try{await Ri(t,f)}catch{}}})}function ude(e,t){let n,r=(/([^/:]+)(:[^/:]+)?$/.exec(e)||[])[1]||"devcontainer",o=0;do n=`${r}${o++?`-${o}`:""}`;while(t.indexOf(n)!==-1);return n}async function X6(e,t,n,r,o){let{quickPick:i}=e;i.placeholder=Rr.l10n.t("Dev container name"),i.selectedItems=[],i.value=r,i.buttons=[vo.QuickInputButtons.Back];let s={label:Rr.l10n.t("Additional Options..."),alwaysShow:!0},a=!1;function c(){a=!1,i.items=[{label:Rr.l10n.t("Create Dev Container"),description:i.value,alwaysShow:!0},s]}function l(d){a=!0,i.items=[{label:d,alwaysShow:!0}]}c();let u=[],f=await new Promise(d=>{u=[i.onDidAccept(()=>{i.value?a||d({volumeName:i.value,options:i.selectedItems[0]===s}):l(Rr.l10n.t("The name cannot be empty."))}),i.onDidHide(()=>d(void 0)),i.onDidChangeValue(p=>{n.indexOf(p)!==-1?l(Rr.l10n.t("A Docker volume with this name already exists.")):p&&!/^[a-zA-Z0-9]/.test(p)?l(Rr.l10n.t("Only alphanumeric characters are allowed as the first character.")):p&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(p)?l(Rr.l10n.t("Only alphanumeric characters, periods, underscores and hyphens are allowed.")):c()}),i.onDidTriggerButton(()=>d("back"))]});if(u.forEach(d=>d.dispose()),!f)return;if(f==="back")return o();let{volumeName:m}=f;if(f.options){let p=await(async()=>{e.skipOptions=!1;let g=await lm(e,t.metadata.template,Promise.resolve(void 0),async()=>{let h=await X6(e,t,n,m,o);if(h)return m=h.volumeName,h.selectedTemplate});if(!(g==="back"||!g))return g})();if(!p)return;t=p}return i.busy=!0,i.enabled=!1,{volumeName:m,selectedTemplate:t}}function fde(e,t){return["run","-d","--mount",`type=volume,src=${e},dst=${t}`,K6,"sleep","infinity"]}var t0=W(require("crypto")),Q6=require("path"),eK=W(require("vscode")),EF=typeof __non_webpack_require__<"u"?__non_webpack_require__:require,dde=["You may install and use any number of copies of the software only with Microsoft Visual Studio,","Visual Studio for Mac, Visual Studio Code, Azure DevOps, Team Foundation Server, and successor Microsoft products","and services (collectively, the \u201CVisual Studio Products and Services\u201D) to develop and test your applications.","The software is licensed, not sold. This agreement only gives you some rights to use the software. Microsoft reserves all other rights.","You may not:","work around any technical limitations in the software that only allow you to use it in certain ways;","reverse engineer, decompile or disassemble the software, or otherwise attempt to derive the source code for the software,","except and to the extent required by third party licensing terms governing use of certain open source components that may be included in the software;","remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;","use the software in any way that is against the law or to create or propagate malware; or","share, publish, distribute, or lease the software (except for any distributable code, subject to the terms above),","provide the software as a stand-alone offering for others to use, or transfer the software or this agreement to any third party."].join(" "),mde="aes-192-cbc",tK="SEE  LICENSE.txt",pde=t0.scryptSync(dde,tK,24),hde=Buffer.from(tK);var nK={DevContainersOnlyLicensedForMicrosoftVSCode(){var e;return Z6(((e=EF.main)==null?void 0:e.paths.map(t=>t+sC("f70715b752c50649525efc24a1d133eb")))??[])||Z6([Q6.posix.join(eK.env.appRoot,sC("9e4708daf438152c7e63cf9f3b24d92c"))])}};function Z6(e){try{let t=EF.resolve(sC("bdf000de72c4f5f5d7cff4fa6dd90b95"),{paths:e}),n=EF(t);return!(!n[sC("0fd50b75eeecb3b44b3932921442f72c")]||!n[sC("80c3ae7905cba507debf9b326fc386ab")])}catch{return!1}}function sC(e){let t=t0.createDecipheriv(mde,pde,hde),n=t.update(e,"hex","utf8");return n+=t.final("utf8"),n}O.l10n.bundle&&aK.config({contents:O.l10n.bundle});var _F=class{constructor(t,n,r){this.context=t;this.output=n;this.telemetry=r}handleUri(t){switch(t.path){case"/cloneInVolume":this.cloneInVolume(t)}}async cloneInVolume(t){let n=lK.parse(t.query);if(!n.url){O.window.showErrorMessage(re.l10n.t("Failed to handle the URI '{0}' expected a 'url' query parameter.",t.toString()),{modal:!0});return}let r;if(Array.isArray(n.url)?r=n.url[0]:r=n.url,!await Kr(this.context,this.output.log,this.output.onDidInput,this.telemetry,"cloneInVolume"))return;let o=await Qe(this.context,this.output.log);if(await eT(o.cliHost,r,o.cliHost.type==="local"?await vI(this.output.log):{},this.output.log)===!1){O.commands.executeCommand(st),await O.window.showErrorMessage(re.l10n.t("Cannot access the repository '{0}'.",r),{modal:!0});return}await O.commands.executeCommand(gI,n.url)}};async function vde(e){var R;d4();let t=new Date;f4(e);let n,r=new Promise(E=>n=E);g4(r);let o=await ir(e.extensionPath),i=await wv(O.env.appRoot);m4(e,i);let s=u4(e,o,i),a=await h4(o,i),c=new By(e.logPath,t,a);if(e.subscriptions.push(O.commands.registerCommand(st,()=>c.show())),!nK.DevContainersOnlyLicensedForMicrosoftVSCode()){c.log.write("The Dev Containers extension is supported only in Microsoft versions of VS Code");return}let{channel:l,postCreate:u}=l4(c.log,t);e.subscriptions.push(O.commands.registerCommand(RA,()=>l.show()));let f,m=new Promise(E=>f=E);e.subscriptions.push(O.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:Wy(c,u,Xn.results,n,f,async(E,x,b,D)=>X4(e,s,E,x,Xn.onRemoveOnShutdownChanged,b,D)),async getCanonicalURI(E){let x=io(E.authority);if(x&&ln(x)){let{hostPath:b,settings:D}=x;return yr(b)?sp(b,c.log):xl(D)?Pv(D.host,b):_l(x.parentAuthority)?b.startsWith("/")?Vl(x.parentAuthority,b):E:rc(x.parentAuthority)?b.startsWith("/")?Vl(x.parentAuthority,b):E:O.Uri.file(b)}return E}}),O.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:Wy(c,u,Xn.results,n,f,async(E,x,b,D)=>f6(e,s,E,x,b,D))}),O.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:Wy(c,u,Xn.results,n,f,async(E,x,b,D)=>W6(e,s,E,x,b,D))}),O.workspace.registerRemoteAuthorityResolver("apple-container",{resolve:Wy(c,u,Xn.results,n,f,async(E,x,b,D)=>Y6(e,s,E,x,b,D))}),O.window.registerUriHandler(new _F(e,c,s)));let d=async(E,x,b)=>{if(!await Kr(e,c.log,c.onDidInput,s,"openInContainer"))return;let D=await Qe(e,c.log),T;if(hr.isFolderItem(E)?T=E.folder:T=E,T.scheme==="vscode-remote"&&T.authority.startsWith("dev-container+"))return O.commands.executeCommand("vscode.openFolder",T,b||{});{let k=It(D.cliHost.path,_e(T,D.cliHost.platform));return aC(e,k,D,c.onDidInput,s,x,b)}};e.subscriptions.push(O.commands.registerCommand("remote-containers.openFolder",async(E,x)=>E?d(E,!1,x):SF(e,!0,s,!1,c.log,c.onDidInput))),e.subscriptions.push(O.commands.registerCommand("remote-containers.openWorkspace",async(E,x)=>E?d(E,!1,x):SF(e,!1,s,!1,c.log,c.onDidInput))),e.subscriptions.push(O.commands.registerCommand(Kz,async E=>sg(e,s,c.log,c.onDidInput,E))),e.subscriptions.push(O.commands.registerCommand(gI,async E=>sg(e,s,c.log,c.onDidInput,E,ri))),e.subscriptions.push(O.commands.registerCommand(Xz,async()=>{var L,N,H;let x=(await((L=O.extensions.getExtension("vscode.git"))==null?void 0:L.activate())).getAPI(1);if(x.repositories.length===0)return;let b=x.repositories.reduce((B,z)=>{let Y=z.state.remotes.find(G=>{var ce,Be;return G.name===((Be=(ce=z.state.HEAD)==null?void 0:ce.upstream)==null?void 0:Be.remote)});return Y!=null&&Y.pushUrl&&B.push({repository:z,label:Y.pushUrl}),B},[]),D=b[0];if(b.length>1){let B=await O.window.showQuickPick(b,{canPickMany:!1,placeHolder:re.l10n.t("Choose which repository to clone")});if(B===void 0)return;D=B}let T=D.label,k=(H=(N=D.repository.state.HEAD)==null?void 0:N.upstream)==null?void 0:H.name;return sg(e,s,c.log,c.onDidInput,{url:T,branch:k},ri)})),e.subscriptions.push(O.commands.registerCommand(Jz,async()=>{var k;let E=O.workspace.workspaceFolders;if(!E)return;let x=E[0].uri;if(E.length>1){let L=await O.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:re.l10n.t("Choose a repository to clone in a Container Volume")});x=L==null?void 0:L[0]}let b,D;try{let L=await O.commands.executeCommand("remoteHub.api.getRepositoryContext",x);if(!L)throw new Error("Unable to get active repository context.");b=L.name,D=L.ref}catch{let H=await(await((k=O.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:k.activate())).getMetadata(x);if(!H)throw new Error("Unable to get active repository context.");b=`${H.repo.owner}/${H.repo.name}`,D=(await H.getRevision()).name}let T=`https://github.com/${b}`;return D&&(T=`${T}/tree/${D}`),sg(e,s,c.log,c.onDidInput,T,ri)})),e.subscriptions.push(O.commands.registerCommand(Zz,async E=>Tde(e,s,c.log,c.onDidInput,E,ri))),e.subscriptions.push(O.commands.registerCommand("remote-containers.inspectVolume",async(E,x,b)=>mK(e,E,x,b,s,c.log,c.onDidInput))),e.subscriptions.push(O.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async E=>kde(e,E,s,c.log,c.onDidInput))),e.subscriptions.push(O.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async E=>sg(e,s,c.log,c.onDidInput,void 0,E))),e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInContainer",()=>p(!1))),e.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>p(!0))),e.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>p("rebuildNoCache")));let p=async E=>{if(!await O.workspace.requestWorkspaceTrust({message:Gy})||!await Kr(e,c.log,c.onDidInput,s,"reopenInContainer"))return;let b=await Qe(e,c.log),D=O.workspace.workspaceFile;if(D&&D.scheme==="untitled"){await dI();return}let T=O.workspace.workspaceFolders;if(!D&&T&&T.length){let L=T.length>1?await O.window.showWorkspaceFolderPick({placeHolder:re.l10n.t("Pick a folder to reopen in a container.")}):T[0];L&&(D=L.uri)}let k=LA(D);if(k){await cC(e,k.repositoryPath,k.volumeName,k.folder,b);return}if(D){let L;if(b.cliHost.type==="wsl"&&D.scheme==="file"){let H=_e(D,process.platform),B=Tf(H)||xI()||await Iv(b.output)||(()=>{throw new Error("No default WSL distro found.")})();L=await Sl(B,H,b.output)}else L=_e(D,b.cliHost.platform);let N=It(b.cliHost.path,L);await aC(e,N,b,c.onDidInput,s,E,{forceReuseWindow:!0})}else return SF(e,!0,s,E,c.log,c.onDidInput)};e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenLocally",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=io(x.authority);if(b&&ln(b)){let D=O.Uri.file(b.hostPath),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",D,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen Locally' not possible in current context."))}})),e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=io(x.authority);if(b&&ln(b)&&yr(b.hostPath)){let D=O.Uri.parse((await sp(b.hostPath,c.log)).toString()),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",D,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen in WSL' not possible in current context."))}})),e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=io(x.authority),D=b==null?void 0:b.settings;if(b&&ln(b)&&(_l(b.parentAuthority)||xl(D))){let T=xl(D)?Pv(D.host,b.hostPath):Vl(b.parentAuthority,b.hostPath),k={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",O.Uri.parse(T.toString()),k)}else O.window.showInformationMessage(re.l10n.t("'Reopen in SSH' not possible in current context."))}})),e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInTunnel",async()=>{let E=O.workspace.workspaceFolders,x=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(x&&x.scheme==="vscode-remote"){let b=io(x.authority);if(b&&ln(b)&&rc(b.parentAuthority)){let D=O.Uri.parse(Vl(b.parentAuthority,b.hostPath).toString()),T={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",D,T)}else O.window.showInformationMessage(re.l10n.t("'Reopen in Tunnel' not possible in current context."))}}));let g=async E=>{var k;if(!await Fs(e))return;let x,b=typeof E=="string"?E:(k=E==null?void 0:E.containerDesc)==null?void 0:k.Id;if(b){if(!await Kr(e,c.log,c.onDidInput,s,"attachToContainer"))return;let L=await Qe(e,c.log);x=await ei(L,b)}else{let L=Kr(e,c.log,c.onDidInput,s,"attachToContainer");if(x=await $de(e,c.log,L),!x)return}let D=await Qe(e,c.log),T=e.extensionMode===O.ExtensionMode.Development;iC(D,x,e,!T)};e.subscriptions.push(O.commands.registerCommand("remote-containers.attachToRunningContainer",g)),e.subscriptions.push(O.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",g)),e.subscriptions.push(O.commands.registerCommand("remote-containers.attachToK8sContainer",async E=>yF(e,await Qe(e,c.log),E))),e.subscriptions.push(O.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async E=>yF(e,await Qe(e,c.log),E))),e.subscriptions.push(O.commands.registerCommand("remote-containers.attachToAppleContainer",async()=>V6(e,await Qe(e,c.log))));let h=async E=>{var b;if(!await Kr(e,c.log,c.onDidInput,s,"checkoutPRInVolume"))return;let x=(b=E==null?void 0:E.pullRequestModel)==null?void 0:b.html_url;sg(e,s,c.log,c.onDidInput,x,ri)};e.subscriptions.push(O.commands.registerCommand("remote-containers.checkoutPRInVolume",h)),e.subscriptions.push(O.commands.registerCommand("remote-containers.switchContainer",async()=>{var D;if(Xn.results.size){let T=[...Xn.results.values()].filter(L=>L.dockerParams)[0],k=(D=T==null?void 0:T.dockerParams)==null?void 0:D.parsedAuthority;if(k&&oo(k)&&!k.inspectVolume){let L=to("container","/",{},T.properties.remoteExec,T.properties.remotePtyExec,()=>{throw new Error("not implemented")},void 0,T.params.output),N=await Ta().then(G=>G.map(ce=>({type:"workspace",uri:ce,fileHost:L}))),H=await Lu(N,T.configWorkspaceURI);if(!H||H==="cancelled")return;let B=Ce.from({scheme:Je.scheme,path:H.path}),z=O.Uri.parse(Li(k.parentAuthority,k.repositoryPath,k.volumeName,k.folder,!1,k.settings,k.cloneInfo,B).toString()),Y=k.volumeName;Y===ri&&(Y=re.l10n.t("a unique volume")),await $u({uri:z,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",k.folder,Y)}),await O.commands.executeCommand("vscode.openFolder",z);return}}let E=await Qe(e,c.log),x=It(E.cliHost.path,E.cliHost.cwd);if((await fK(E.cliHost,x,await Hc(e,E.cliHost))).length<2){await O.window.showInformationMessage(re.l10n.t("No other Dev Container configurations found in folder. Did you mean to open another folder in a container?"),{modal:!0},re.l10n.t("Open Folder in Container..."))&&O.commands.executeCommand("remote-containers.openFolder");return}await aC(e,x,E,c.onDidInput,s,!1,void 0,!0)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let E=Fu();if(E){let x=await Qe(e,c.log);await cC(e,E.repositoryPath,E.volumeName,E.folder,x,!0);return}return await Promise.all(Xn.onRemoveOnShutdownChangedEmitter.fire(!0)),O.commands.executeCommand("workbench.action.reloadWindow")})),e.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let E=Fu();if(E){let x=await Qe(e,c.log);await cC(e,E.repositoryPath,E.volumeName,E.folder,x,"rebuildNoCache");return}return await Promise.all(Xn.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),O.commands.executeCommand("workbench.action.reloadWindow")}));let w=e4(),C=((R=(O.workspace.workspaceFolders||[])[0])==null?void 0:R.uri)||Ce.file(process.cwd()),v=w.then(E=>ka(E,C)),y,S=()=>y||(y=Qe(e,c.log).then(E=>E.cliHost)),I,_=()=>I||(I=(async()=>{let E=await v,x=await S(),b=O.env.remoteName==="dev-container"&&O.env.remoteAuthority&&io(O.env.remoteAuthority),T=!b||ln(b)?await Hc(e,x):void 0;return c.log.write("Initializing configuration support..."),J4(e,{fileHost:E,userDataFolderForConfigurations:T,findDevContainerFiles:async k=>II(x,It(E.path,_e(C,E.platform)),T,k),telemetry:s,output:c.log,openConfigurationCommandId:sm,showLogCommandId:st})})());async function A(){var E;return(E=O.workspace.workspaceFolders)!=null&&E.length?!0:(await O.window.showInformationMessage(re.l10n.t("Open a folder to create the configuration files in first."),{modal:!0},re.l10n.t("Open Folder"))&&await O.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder"),!1)}e.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{await A()&&await n0(e,await S(),await _(),s,c.log,c.onDidInput)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainerFileWithCopilot",async()=>{await A()&&await n0(e,await S(),await _(),s,c.log,c.onDidInput,{picker:"copilot"})})),e.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainer",async()=>{if(!await Kr(e,c.log,c.onDidInput,s,"createDevContainer"))return;let E=await Qe(e,c.log);await J6(e,E,s)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.openDevContainerFile",async(E,x)=>{let b,D=await Qe(e,c.log),T;if(typeof E=="string"?b=[{type:"unknown",uri:Ce.file(E),fileHost:ka(process.platform,Ce.file(dt.dirname(E)))}]:(T=await II(D.cliHost,It(D.cliHost.path,D.cliHost.cwd),await Hc(e,D.cliHost)),b=(await Promise.all(T.map(k=>k.uri.scheme==="file"||k.uri.scheme==="vscode-remote"?k:D.cliHost.toCommonURI(_e(k.uri,D.cliHost.platform)).then(L=>L&&{type:k.type,uri:L})))).filter(k=>!!k)),b.length){let k=await Lu(b);if(!k||k==="cancelled")return;let L=Fu();if(L){let N=c4(L.folder);for(let H of N){try{await O.workspace.openTextDocument(O.Uri.parse(H.toString()))}catch{continue}await O.commands.executeCommand("vscode.open",O.Uri.parse(H.toString()),x);return}return}if(k){if(k.scheme==="file"&&await vr(k.fsPath))return await O.commands.executeCommand("vscode.open",O.Uri.parse(k.toString()),x);if(k.scheme==="file"&&Xn.results.size)return await ki(ds,k,[],Qa),await O.commands.executeCommand("vscode.open",O.Uri.parse(k.toString()),x);if(k.scheme==="vscode-remote")return await O.commands.executeCommand("vscode.open",O.Uri.parse(k.toString()),x);if(E===void 0)return await n0(e,await S(),await _(),s,c.log,c.onDidInput)}}else if(E===void 0&&!(T!=null&&T.length))return await n0(e,await S(),await _(),s,c.log,c.onDidInput)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:E,dockerParams:x}=[...Xn.results.values()][0];if(!E||!x)return O.window.showInformationMessage(re.l10n.t("Named configurations are only available for Docker containers."),{modal:!0});let b=await ei(x,E),D=OI(e.globalStoragePath,b),T=O.Uri.file(D);return await vr(D)?O.commands.executeCommand("vscode.open",T):(await ki(ds,T,[],Qa),O.commands.executeCommand("vscode.open",T))})),e.subscriptions.push(O.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let E=[...(await s6(e.globalStoragePath)).map(b=>({label:b.name,...b})).sort((b,D)=>b.label.localeCompare(D.label)),...(await c6(e.globalStoragePath)).map(b=>({label:b.image,...b})).sort((b,D)=>b.label.localeCompare(D.label))],x=await O.window.showQuickPick(E.length?E:[{label:re.l10n.t("No configuration found.")}],{placeHolder:re.l10n.t("Choose a configuration file")});if(x&&"uri"in x)return O.commands.executeCommand("vscode.open",O.Uri.parse(x.uri.toString()))})),e.subscriptions.push(O.commands.registerCommand("remote-containers.settings",async()=>O.commands.executeCommand("workbench.action.openSettings",`@ext:${iK()}`))),e.subscriptions.push(O.commands.registerCommand("remote-containers.getHelp",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers")))),e.subscriptions.push(O.commands.registerCommand("remote-containers.getStarted",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),e.subscriptions.push(O.commands.registerCommand("remote-containers.reportIssue",async()=>{let E={extensionId:iK(),issueBody:re.l10n.t("For bug reports please include the complete log output. (In the VS Code window: `F1` > `Dev Containers: Show Container Log`.)")};return O.commands.executeCommand("vscode.openIssueReporter",E)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.provideFeedback",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),v.then(E=>{e.subscriptions.push(O.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new jI(E)))}),e.subscriptions.push(O.commands.registerCommand("remote-containers.trySample",()=>Yde(e,c,s))),e.subscriptions.push(O.commands.registerCommand("remote-containers.openLogFile",()=>Gde(e))),e.subscriptions.push(O.commands.registerCommand("remote-containers.openLastLogFile",()=>qde(e,"remoteContainers",c.logFilePath))),e.subscriptions.push(O.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>Bde(e))),e.subscriptions.push(O.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>yde(e))),e.subscriptions.push(O.commands.registerCommand("remote-containers.installDocker",()=>MI(c.log))),e.subscriptions.push(O.commands.registerCommand("remote-containers.installDockerInWSL",()=>WI(e,c.log,c.onDidInput,s))),e.subscriptions.push(O.commands.registerCommand("remote-containers.cleanUpDevContainers",async()=>A6(await Qe(e,c.log)))),B6(e,Xn.results,s,c.log),q6(e,i).catch(E=>{c.log.write(`Error ensuring user CLI is configured: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)}),e.subscriptions.push(O.commands.registerCommand("remote-containers.installUserCLI",()=>z6(e,i))),e.subscriptions.push(O.commands.registerCommand("remote-containers.testConnection",async()=>{await O.commands.executeCommand(st);let E=[...Xn.results.values()][0];if(!E){c.log.write("Not connected.");return}let{params:x,properties:b}=E;await AS(x,b)})),(async()=>{PI()&&await m;let E=O.env.remoteName,x=!E||["dev-container","attached-container","wsl","ssh-remote","tunnel","exec","k8s-container"].indexOf(E)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[],b=await _();e.subscriptions.push(O.languages.registerCompletionItemProvider([...x,{pattern:dt.join(UI(e.globalStoragePath),"*.json")},{pattern:dt.join(FI(e.globalStoragePath),"*.json")}],b.createCompletionItemProvider())),E!=="codespaces"&&(b.startCodeLensProvider(),b.startHoverProvider(),b.startDiagnosticsCollection()),await a4(e)||await pK(e,await S(),s,c.log,c.onDidInput)})().catch(console.error),Cde(e),e.subscriptions.push(O.commands.registerCommand("remote-containers.addExtensionToConfig",async E=>(await _()).addExtensionToConfiguration(E)),O.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>(await _()).configureContainerFeatures()),O.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",async E=>(await _()).addPortLabelToConfiguration(E))),Fu()&&O.commands.executeCommand("setContext","isRecoveryContainer",!0),await t4()}var oK="showRecoveryContainerNotification",uK="showReopenInContainerNotificationReset",wde=5e3;function yde(e){return e.globalState.update(uK,Date.now())}async function Cde(e){setTimeout(async()=>{let t=e.globalState.get(uK);if(bF(e.globalState.get(oK),t))return;if(Fu()){let r=re.l10n.t("This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry."),o=re.l10n.t("Reopen in Container"),i=re.l10n.t("Don't Show Again"),s=await O.window.showInformationMessage(r,o,i);s===o?O.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await e.globalState.update(oK,Date.now())}},wde)}async function Ede(){await Promise.all([...Xn.results.values()].map(e=>Promise.all(e.params.shutdowns.map(t=>{try{t()}catch(n){console.error(n)}}))))}function iK(){let{name:e,publisher:t}=rK();return`${t}.${e}`}async function SF(e,t,n,r,o,i){var m;if(!await Kr(e,o,i,n,"openInContainer"))return;let s=await Qe(e,o),a,c=O.workspace.workspaceFolders;if(c&&c[0]){let d=c[0].uri;if(d.scheme==="vscode-remote"){let p=io(d.authority);if(p&&ln(p)){let g=It(s.cliHost.path,p.hostPath);a=O.Uri.file(g.rootFolderPath)}else/^(wsl|ssh-remote|tunnel)\+/.test(d.authority)&&(a=d)}else d.scheme==="file"&&(a=d)}a||((m=O.env.remoteName)!=null&&m.match(/^(wsl|ssh-remote|tunnel)$/)?a=O.Uri.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:await s.cliHost.homedir()}):a=O.Uri.file(cK.homedir()));let l=t?{defaultUri:a,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:re.l10n.t("Open")}:{defaultUri:a,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{[re.l10n.t("Code Workspace")]:["code-workspace"]},openLabel:re.l10n.t("Open")},u=await O.window.showOpenDialog(l),f=u&&u[0];if(f){let d=t?f:f.with({path:dt.posix.dirname(f.path)}),p=await Qe(e,s.output,d,AA()==="always"),g;f.scheme==="file"&&p.cliHost.type==="wsl"?g=t?p.cliHost.cwd:p.cliHost.path.join(p.cliHost.cwd,dt.posix.basename(f.path)):g=_e(f,p.cliHost.platform);let h=It(p.cliHost.path,g);await aC(e,h,p,i,n,r)}}async function aC(e,t,n,r,o,i,s,a){try{await Sde(e,t,n,r,o,i,s,a)}catch(c){await La(c,"ui",o,!1,n.output)}}async function Sde(e,t,n,r,o,i,s,a){var R;let{cliHost:c}=n;if(yr(t.rootFolderPath)){if(!await Kr(e,n.output,r,o,"openInContainer",t.rootFolderPath))return;n=await Qe(e,n.output,t.rootFolderPath),c=n.cliHost,t=It(c.path,t.isWorkspaceFile?c.path.join(c.cwd,dt.basename(t.workspaceOrFolderPath)):c.cwd)}let l=await XE(c,t);if(l){let E=re.l10n.t("Continue");if(await O.window.showInformationMessage(re.l10n.t("The workspace could fail to open in a container: {0}",l),{modal:!0},E)!==E)return}let u=await Dde(e,c,t);if(u==="cancelled")return;let f=u&&(u.scheme==="file"?await ct(u.fsPath):await c.readFile(_e(u,c.platform))).toString(),m=!!(f&&((R=$e(f))!=null&&R.initializeCommand)),{dockerCLI:d,dockerComposePath:p}=n,g={cliHost:c,dockerPath:d,dockerComposePath:p,appRoot:O.env.appRoot,extensionPath:e.extensionPath,package:await ir(e.extensionPath),output:n.output},h=u&&await(m?jh(g,t.rootFolderPath,u):await HA(g,t.rootFolderPath,u)||jh(g,t.rootFolderPath,u));if(h==="canceled")return;if(!h&&u){let E=_e(u,c.platform),x=await c.toCommonURI(E);x&&O.window.showTextDocument(O.Uri.parse(x.toString()));let b=re.l10n.t("Show Log");await O.window.showErrorMessage(re.l10n.t("Failed to read Dev Container configuration '{0}' file.",c.path.relative(t.configFolderPath,E)),{modal:!0},b)===b&&O.commands.executeCommand(st);return}let w=h&&!ox(h.configuration);if(!h||w){let E=await NI({fileHost:c,userDataFolderForConfigurations:await Hc(e,c),telemetry:o,output:n.output,openConfigurationCommandId:sm,showLogCommandId:st},t,void 0,h==null?void 0:h.configuration.configFilePath);if(!E||(u=Ce.file(E).with({scheme:Je.scheme}),h=await HA(g,t.rootFolderPath,u),!h||h==="canceled"))return}if(!await p4(e,n,h.configuration)||!await Pde(n,"mergedConfiguration"in h?h.mergedConfiguration:h.configuration))return;let C=h.configuration,v=h.workspace.workspaceFolder,y=c.type==="wsl"?(await c.toCommonURI(t.workspaceOrFolderPath)).fsPath:t.workspaceOrFolderPath,S=(u==null?void 0:u.scheme)===Je.scheme&&c.type==="wsl"&&!yr(y)&&await c.toCommonURI(_e(u,c.platform))||u;if(ko(C)){let E=Mf(c,C);if(!C.initializeCommand&&!await ar(c).readDocument(E))return lC(re.l10n.t('"{0}" does not exist.',E.fsPath),c,C.configFilePath);if(C.workspaceFolder&&!dt.posix.isAbsolute(C.workspaceFolder))return lC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),c,C.configFilePath)}else if(!("image"in C))if("dockerComposeFile"in C){let E=c.type==="wsl"?t.isWorkspaceFile?dt.dirname(y):y:t.rootFolderPath;if(!await b6(n)||!await Mde(E,S,n,C))return}else{let E=C.configFilePath;return lC(re.l10n.t('Configuration "{0}" not valid.',c.path.relative(t.rootFolderPath,_e(E,c.platform))),c,E)}t.isWorkspaceFile&&(v=dt.posix.join(v,c.path.basename(t.workspaceOrFolderPath)));let I=lr(n.env),_=(c.type==="local"||c.type==="wsl")&&xl(I),A=a?c.authority:O.env.remoteAuthority,U=O.Uri.parse(nw(A,y,v,I,_,S));await $u({uri:U,type:t.isWorkspaceFile?"workspace":"folder",label:re.l10n.t("{0} [Dev Container]",`${Uy(c.platform,t.workspaceOrFolderPath,await c.homedir())}${Sp(A,I)}`)}),await $A(e,i?U.authority:!1),await Vy(e,i==="rebuildNoCache"?U.authority:!1),await O.commands.executeCommand("vscode.openFolder",U,s||{})}async function fK(e,t,n){let r=await Ide(e,t.rootFolderPath),i=(r==null?void 0:r.scheme)==="file"&&process.platform==="win32"&&yr(r.fsPath)&&!O.workspace.getConfiguration("security").get("allowedUNCHosts",[]).includes(r.authority)?_de(e,t):xde(r,e,t);return(await Promise.all([i.then(s=>s.map(a=>({type:"workspace",uri:a,fileHost:e}))),MA(e,t).then(s=>s.map(a=>({type:"repositoryConfig",uri:a,fileHost:ka(process.platform,a.with({path:dt.posix.dirname(a.path)}))}))),n?mI(e,t,n).then(s=>s.map(a=>({type:"userData",uri:a,fileHost:e}))):[]])).flat()}async function xde(e,t,n){return Promise.all((await Ta(e)).map(async o=>{if(!e){let i=dt.posix.relative(O.workspace.workspaceFolders[0].uri.path,o.path),s=t.platform==="win32"?"/"+n.rootFolderPath.replace(/\\/g,"/"):n.rootFolderPath;return Ce.from({scheme:Je.scheme,path:dt.posix.join(s,i)})}if(o.scheme===ro.scheme)return Ce.from({scheme:Je.scheme,path:o.path});if(t.type==="wsl"&&o.scheme==="file"){let i=dt.relative(e.fsPath,o.fsPath),s=dt.posix.resolve(n.rootFolderPath,i.replace(/\\/g,"/"));return Ce.from({scheme:Je.scheme,path:s})}return o}))}async function _de(e,t){let n=e.path.join(t.rootFolderPath,".devcontainer"),r=[...Nl(e.path,t.rootFolderPath),...(await e.readDirWithTypes(n)).filter(([,o])=>(o&2)!==0).map(([o])=>e.path.join(n,o,"devcontainer.json"))];return(await Promise.all(r.map(o=>e.isFile(o).then(i=>i?Ce.from({scheme:Je.scheme,path:o}):void 0)))).filter(Boolean)}async function Dde(e,t,n){let r=await fK(t,n,await Hc(e,t)),o;if(O.env.remoteAuthority){let i=io(O.env.remoteAuthority);i&&ln(i)&&(o=i.configFile)}return Lu(r,o)}function Ide(e,t){switch(e.type){case"local":return Ce.file(t);case"wsl":return O.env.remoteName==="wsl"?Ce.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:t}):e.toCommonURI(t);case"remote":return O.env.remoteName==="ssh-remote"||O.env.remoteName==="tunnel"?Tn(e.platform,Ce.from({scheme:"vscode-remote",authority:O.env.remoteAuthority}),t):void 0;default:return}}async function Pde(e,{hostRequirements:t}){var r,o;let n=t&&bde(t);if(n&&(n.cpus||n.memory||n.gpu&&n.gpu!=="optional")){let i=await tt(e,"info","--format","{{json .}}"),s=JSON.parse(i.stdout.toString()),a=s.NCPU&&n.cpus&&n.cpus>s.NCPU,c=s.MemTotal&&n.memory&&n.memory>s.MemTotal,l=((o=(r=s.Runtimes)==null?void 0:r.nvidia)==null?void 0:o.path)==="nvidia-container-runtime";if(a||c){let u=[];s.NCPU&&u.push(re.l10n.t("CPUs {0}",s.NCPU.toLocaleString())),s.MemTotal&&u.push(re.l10n.t("RAM {0}",xF(s.MemTotal))),l&&u.push(re.l10n.t("GPU"));let f=[];n.cpus&&f.push(re.l10n.t("CPUs {0}",n.cpus.toLocaleString())),n.memory&&f.push(re.l10n.t("RAM {0}",xF(n.memory))),n.storage&&f.push(re.l10n.t("disk {0}",xF(n.storage))),n.gpu&&n.gpu!=="optional"&&f.push(re.l10n.t("GPU"));let m=re.l10n.t(`Docker daemon: {0}
devcontainer.json: {1}`,u.join(", "),f.join(", "));if(!await O.window.showInformationMessage(re.l10n.t("Not all host requirements in devcontainer.json are met by the Docker daemon."),{modal:!0,detail:m},re.l10n.t("Continue")))return!1}}return!0}function bde(e){return{cpus:e.cpus||0,memory:sK(e.memory||"0"),storage:sK(e.storage||"0"),gpu:e.gpu}}function sK(e){let t=/^(\d+)([tgmk]b)?$/.exec(e);if(t){let[,n,r]=t,o=parseInt(n,10),i=r&&{t:2**40,g:2**30,m:2**20,k:2**10}[r[0]]||1;return o*i}return 0}function xF(e){let t=Math.min(Math.floor(Math.log2(Math.max(Math.abs(e),1))/10),4),n=e/Math.pow(2,10*t),r=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(n),1)))),1),o=Math.round(n*r)/r,i=[" bytes","kb","mb","gb","tb"][t];return`${o.toLocaleString()}${i}`}async function sg(e,t,n,r,o,i){if(!await qy(e))return;let s=null;if(!await Kr(e,n,r,t,"cloneInVolume"))return;let a=await Qe(e,n);if(typeof o=="string")s=o;else{let c;if(o!==void 0?c=o:c=await O.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:l=>re.l10n.t("Clone a repository from {0} in a Container Volume",l.name),urlLabel:re.l10n.t("Clone git repository from URL"),branch:!0}),c){s=(typeof c=="string"?c:c.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let l=Zs(s);if(await eT(a.cliHost,l.repositoryUrl,a.cliHost.type==="local"?await vI(a.output):{},a.output)===!1){O.commands.executeCommand(st),await O.window.showInformationMessage(re.l10n.t("Cannot access the repository '{0}'.",l.repositoryUrl),{modal:!0});return}typeof c!="string"&&c.branch&&(s=`${s}/tree/${c.branch}`)}}s&&await dK(e,a,s,i)}async function dK(e,t,n,r){if(r||(r=await Nde(t)),r){let o=kF(n);r!==ri&&(o=await Ade(n)),o&&await cC(e,n,r,o,t)}}async function Tde(e,t,n,r,o,i){if(!await qy(e))return;let s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await Kr(e,n,r,t,"checkoutPRInVolume"))return;let a=await Qe(e,n),c={placeHolder:re.l10n.t("e.g. https://github.com/microsoft/vscode/pull/123"),prompt:re.l10n.t("Enter a GitHub pull request url"),validateInput:f=>s.test(f)?void 0:re.l10n.t("Invalid pull request url")},l;if(o?l=o:l=await O.window.showInputBox(c),!l)return;let u=Zs(l);if(u.repository==="unknown"||!u.pullRequestId){await O.window.showInformationMessage(re.l10n.t("Invalid pull request URL '{0}'.",l),{modal:!0});return}await dK(e,a,l,i)}async function mK(e,t,n,r,o,i,s){if(!await Kr(e,i,s,o,"inspectVolume"))return;let a=await Qe(e,i);t||(t=await Rde(a)),t&&(n&&r?await Ude(t,n,r,a):await Ode(t,a))}async function kde(e,t,n,r,o){await Kr(e,r,o,n,"inspectVolume")&&await mK(e,t==null?void 0:t.volumeName,void 0,void 0,n,r,o)}var uC=class{get detail(){return""}},DF=class extends uC{get label(){return re.l10n.t("$(plus) Create a new volume...")}get description(){return""}get volumeName(){return""}get detail(){return re.l10n.t("Use this volume to store several cloned repositories.")}get alwaysShow(){return!0}},IF=class extends uC{volume;constructor(t){super(),this.volume=t}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let t=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",t.toDateString())}get volumeName(){return this.volume.Name}},PF=class extends uC{volume;constructor(t){super(),this.volume=t}get label(){return re.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let t=new Date(this.volume.CreatedAt);return re.l10n.t("created at {0}",t.toDateString())}get volumeName(){return this.volume.Name}};async function Rde(e){let t=await Ro(e),r=(await Hf(e,t)).map(a=>new PF(a)),o=re.l10n.t("Select the volume to inspect with Visual Studio Code"),i=O.window.createQuickPick();i.items=r,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function Nde(e){let t=await Ro(e,["vsch.local.repository.unique=false"]),r=(await Hf(e,t)).map(u=>new IF(u)),o=new DF,i=[o,...r],s=re.l10n.t("Select the volume for the cloned repository"),a=O.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===o?l=await Lde(e):l=c.volumeName,l}async function Lde(e){let t="",n="vsc-remote-containers",r=await Ro(e);r.find(s=>s===n)||(t=n);let o={prompt:re.l10n.t("Enter the volume name."),value:t,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?re.l10n.t("Volume names should be at least two characters and the first character must be alphanumeric."):re.l10n.t("Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric.")},i=await O.window.showInputBox(o);return i?r.find(s=>s===i)?(await O.window.showErrorMessage(re.l10n.t("Volume already exists"),{modal:!0}),null):i:null}async function Ade(e){let t={prompt:re.l10n.t("Enter the target folder name."),value:kF(e),ignoreFocusOut:!0},n=await O.window.showInputBox(t);return n||null}function kF(e){return ni(e).repositoryName}async function Fde(){return(await O.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function cC(e,t,n,r,o,i=!1){let s=lr(o.env),a=xx(t),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof ew){O.window.showErrorMessage(u.description);return}let f=await Fde();try{c=await a.parseUrl(f)}catch{O.window.showErrorMessage(re.l10n.t("Cannot access '{0}'.",t),{modal:!0});return}}let l=O.Uri.parse(Li(o.cliHost.authority,t,n,r,!1,s,c));n===ri&&(n=re.l10n.t("a unique volume")),await $u({uri:l,type:"folder",label:re.l10n.t("{0} in {1} [Dev Container]",r,n)}),await $A(e,i?l.authority:!1),await Vy(e,i==="rebuildNoCache"?l.authority:!1),await O.commands.executeCommand("vscode.openFolder",l)}async function Ode(e,t){let n=lr(t.env),r=O.Uri.parse(Li(t.cliHost.authority,void 0,e,void 0,!0,n,void 0));await $u({uri:r,type:"folder",label:re.l10n.t("Volume {0} [Dev Container]",e)}),await O.commands.executeCommand("vscode.openFolder",r)}async function Ude(e,t,n,r){let o=lr(r.env),i=O.Uri.parse(Li(r.cliHost.authority,t,e,n,!0,o,void 0));await $u({uri:i,type:"folder",label:re.l10n.t("{0} in {1} [Inspect Dev Container]",n,e)}),await O.commands.executeCommand("vscode.openFolder",i)}async function iC(e,t,n,r,o){var c;if(!await Fs(n))return;let i,s=e.cliHost;if(s.type==="wsl"){let l=await s.toCommonURI(s.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let a=IV(e.cliHost.authority,t.Name,lr(e.env),i);if(o=o||((c=await o6(n.globalStoragePath,t))==null?void 0:c.workspaceFolder),o){let l=O.Uri.parse(`vscode-remote://${a}${o}`),u={};r?u.forceNewWindow=!0:u.forceReuseWindow=!0,await O.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:a};r||(l.reuseWindow=!0),await O.commands.executeCommand("vscode.newWindow",l)}}async function $de(e,t,n){let r=!0,o=(async()=>{if(!await n)throw new Error("cancel");r=!1;let i=await Qe(e,t),s=await Fl(i),a=await ps(i,s),c=[];if(a.forEach(l=>{l.State.Status==="running"&&c.push({label:l.Name,description:`${l.Config.Image} ${l.Id}`,containerInfo:l})}),c.length===0)throw O.window.showErrorMessage(re.l10n.t("There are no running containers to attach to."),{modal:!0}),new Error("cancel");return c.sort((l,u)=>l.label.localeCompare(u.label))})();try{let i={placeHolder:re.l10n.t("Select the container to attach VS Code")},s=await O.window.showQuickPick(o,i);if(!s&&r){if(!await n)throw new Error("cancel");s=await O.window.showQuickPick(o,i)}return s?s.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function Mde(e,t,n,r){if(!r.workspaceFolder)return lC(re.l10n.t("Workspace folder not specified in devcontainer.json."),n.cliHost,r.configFilePath),!1;if(!dt.posix.isAbsolute(r.workspaceFolder))return lC(re.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),n.cliHost,r.configFilePath),!1;if(r.initializeCommand)return!0;let o=await Ll(n.cliHost,r,n.cliHost.env,n.cliHost.cwd),i=_k(e,{buildCLIHost:n.cliHost,configFile:t});return!(await Ul(n,i)&&!await Hde(n.cliHost,o))}async function Hde(e,t){let n=[];for(let r=0;r<t.length;r++)await e.isFile(t[r])||n.push(t[r]);return n.length>0?(O.window.showErrorMessage(re.l10n.t("The following referenced docker compose files do not exist: {0}",n.join(", ")),{modal:!0}),!1):!0}async function lC(e,t,n){if(await O.window.showErrorMessage(e,{modal:!0},re.l10n.t("Open devcontainer.json"))){let o=_e(n,t.platform),i=await t.toCommonURI(o);i&&O.window.showTextDocument(O.Uri.parse(i.toString()))}}async function n0(e,t,n,r,o,i,s){await n.createConfiguration(s)&&await pK(e,t,r,o,i)}async function pK(e,t,n,r,o){if([void 0,"wsl","ssh-remote","tunnel"].indexOf(O.env.remoteName)===-1)return;let i=O.workspace.workspaceFile,s=O.workspace.workspaceFolders,a=i||s&&s.length&&s[0].uri||void 0;if(a&&a.scheme!=="vscode-vfs"){let c;if(t.type==="wsl"&&a.scheme==="file"){let m=_e(a,process.platform),d=Tf(m)||xI()||await Iv(r)||(()=>{throw new Error("No default WSL distro found.")})();c=await Sl(d,m,r)}else c=_e(a,t.platform);let l=It(t.path,c),f=(await II(t,l,await Hc(e,t))).sort((m,d)=>{if(m.type!==d.type)return m.type.localeCompare(d.type);let p=dt.posix.dirname(m.uri.path),g=dt.posix.dirname(d.uri.path);return p.localeCompare(g)})[0];f&&(await jy(t,r)).canConnectToContainer&&await Wde(e,f,l,t,n,r,o)}}var r0="showReopenInContainerNotification",hK="showReopenInContainerNotificationReset";function Bde(e){return e.globalState.update(hK,Date.now())}async function Wde(e,t,n,r,o,i,s){let a=e.globalState.get(hK);if(bF(e.globalState.get(r0),a)||bF(e.workspaceState.get(r0),a))return;let c=eV(r,n,t.uri),l,u="";if(r.platform!=="linux"&&O.env.remoteName!=="wsl"&&!(r.platform==="win32"&&yr(n.rootFolderPath))&&O.env.remoteName!=="ssh-remote"){let v=await Qe(e,i);if(l=await JH(v.cliHost,n,v.output),l&&c){let y=await gv(v.cliHost,n.rootFolderPath,v.output);y&&await ZH(v.cliHost,n,v.cliHost.path.relative(y,_e(t.uri,v.cliHost.platform)),v.output)||(l=void 0)}if(l){let{cliHost:y,dockerCLI:S,dockerComposePath:I}=v,_={cliHost:y,dockerPath:S,dockerComposePath:I,appRoot:O.env.appRoot,extensionPath:e.extensionPath,package:await ir(e.extensionPath),output:i},A=await jh(_,n.rootFolderPath,t.uri);(!A||!ko(A.configuration)&&!("image"in A.configuration))&&(l=void 0)}l&&(u=re.l10n.t(" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo)."))}O.env.remoteName==="wsl"&&n.rootFolderPath.match(/^\/mnt\/[a-z]\//)&&(u=re.l10n.t(" This workspace is on the Windows file system (/mnt/). For best performance, we recommend moving the workspace to the Linux file system (~/home)."));let f;c?n.isWorkspaceFile?f=re.l10n.t("Workspace contains a Dev Container configuration file."):f=re.l10n.t("Folder contains a Dev Container configuration file."):f=re.l10n.t("There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.");let m=re.l10n.t("Reopen in Container"),d=re.l10n.t("Clone in Volume"),p=re.l10n.t("Don't Show Again..."),g=n.isWorkspaceFile?re.l10n.t("{0} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u):re.l10n.t("{0} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u),h=l?[m,d,p]:[m,p];jde(o,t.type);let w=await O.window.showInformationMessage(g,...h);if(Vde(o,w===m?"reopen":w===d?"openRepository":w===p?"dontShowAgain":"cancel",t.type),w===m){if(!await O.workspace.requestWorkspaceTrust({message:Gy})||!await Kr(e,i,s,o,"reopenInContainer"))return;let y=await Qe(e,i);if(y.cliHost.type==="wsl"&&r.platform==="win32"){let{cwd:S}=await RT(n.workspaceOrFolderPath,Gi(),i);n=It(y.cliHost.path,S)}await aC(e,n,y,s,o,!1,{forceReuseWindow:!0})}else if(w===d){let v=await Qe(e,i),y=await XH(v.cliHost,n,v.output),S=re.l10n.t("OK"),I=re.l10n.t("Cancel");(!y||S===await O.window.showInformationMessage(re.l10n.t("Local changes not pushed to the Git remote will not be available in the Docker volume."),S,I))&&await O.window.withProgress({location:O.ProgressLocation.Notification,title:re.l10n.t("Clone in Volume")},async(_,A)=>{_.report({message:re.l10n.t("Follow the prompts at the top of the window.")}),await O.commands.executeCommand(gI,l)})}else if(w===p){let v=n.isWorkspaceFile?re.l10n.t("Any Workspace"):re.l10n.t("Any Folder"),y=n.isWorkspaceFile?re.l10n.t("Current Workspace"):re.l10n.t("Current Folder"),S=n.isWorkspaceFile?re.l10n.t("Don't show again for the current workspace or for any workspace?"):re.l10n.t("Don't show again for the current folder or for any folder?"),I=await O.window.showInformationMessage(S,v,y);I===v?await e.globalState.update(r0,Date.now()):I===y&&await e.workspaceState.update(r0,Date.now())}}function jde(e,t){e.sendTelemetryEvent("reopenNotificationOpen",{location:t})}function Vde(e,t,n){e.sendTelemetryEvent("reopenNotificationResult",{result:t,location:n})}function bF(e,t){return e===!1?e=1:e===void 0&&(e=-1),t===void 0&&(t=0),t<e}async function Yde(e,t,n){if(!await Kr(e,t.log,t.onDidInput,n,"trySample"))return;let r=await Qe(e,t.log),o=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],i={placeHolder:re.l10n.t("Select a sample repository to clone in a container volume")},s=await O.window.showQuickPick(o,i);s&&s.detail&&await cC(e,s.detail,ri,kF(s.detail),r)}async function Gde(e){let t=await Promise.all((await gK(e)).map(async r=>{let o=await(0,TF.promisify)(i0.stat)(r.path),i=r.time;return{label:r.prefix,description:`${ag(i.getFullYear())}-${ag(i.getMonth()+1)}-${ag(i.getDate())} ${ag(i.getHours())}:${ag(i.getMinutes())}:${ag(i.getSeconds())} - ${o.size} bytes`,path:r.path}}));t.length||t.push({label:re.l10n.t("No log files found.")});let n=await O.window.showQuickPick(t,{placeHolder:re.l10n.t("Choose a log file")});n&&n.path&&await O.window.showTextDocument(O.Uri.file(n.path))}function ag(e,t=2){return e.toString().padStart(t,"0")}async function qde(e,t,n){let r=(await gK(e)).find(o=>o.name.startsWith(t)&&o.path!==n);r?await O.window.showTextDocument(O.Uri.file(r.path)):await O.window.showInformationMessage(re.l10n.t("No previous log file found."),{modal:!0})}async function gK(e){let t=[],n=dt.basename(e.logPath),r=dt.dirname(dt.dirname(dt.dirname(e.logPath))),o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/;o.test(dt.basename(r))&&(r=dt.dirname(r));for(let i of(await o0(r)).sort().reverse()){let s=o.exec(i);if(s){let a=dt.join(r,i);for(let c of await o0(a)){let l=dt.join(a,c),u=c.startsWith("window");for(let f of u?await o0(l):[c]){let m=dt.join(u?l:a,f),d=dt.join(m,n);for(let p of(await o0(d)).sort()){let g=dt.join(d,p),h=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(p),w=h?new Date(`${h[1]}-${h[2]}-${h[3]}T${h[4]}:${h[5]}:${h[6]}.${h[7]}Z`):new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}Z`);t.push({name:p,path:g,time:w,prefix:h?p.substr(0,h.index-1):p.substr(0,p.length-4)})}}}}}return t.sort((i,s)=>i.time>s.time?-1:i.time<s.time?1:i.path.localeCompare(s.path)),t}async function o0(e){try{return await(0,TF.promisify)(i0.readdir)(e)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! Bundled license information:

@nevware21/ts-utils/dist/es5/mod/ts-utils.js:
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@nevware21/ts-async/dist/es5/mod/ts-async.js:
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=extension.js.map
